(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],i[o]&&m.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={index:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("de0b")},"0034":function(t,e,a){"use strict";var s=a("bbce"),i=a.n(s);i.a},"0203":function(t,e,a){},"0220":function(t,e,a){},"03d3":function(t,e,a){"use strict";var s=a("34ee"),i=a.n(s);i.a},"04b7":function(t,e,a){"use strict";var s=a("b04d"),i=a.n(s);i.a},"0bfb0":function(t,e,a){},"0c12":function(t,e,a){"use strict";var s=a("42d9"),i=a.n(s);i.a},"0cef":function(t,e,a){"use strict";var s=a("17ca"),i=a.n(s);i.a},"0cf7":function(t,e,a){},"0d70":function(t,e,a){"use strict";var s=a("9542"),i=a.n(s);i.a},"0e39":function(t,e,a){},"0f33":function(t,e,a){},"0f46":function(t,e,a){"use strict";var s=a("f0a1"),i=a.n(s);i.a},1084:function(t,e,a){"use strict";var s=a("7bd1"),i=a.n(s);i.a},"111c":function(t,e,a){},1133:function(t,e,a){},"124c":function(t,e,a){},"12cc":function(t,e,a){"use strict";var s=a("3b9d"),i=a.n(s);i.a},1351:function(t,e,a){"use strict";var s=a("8cff"),i=a.n(s);i.a},"13cb":function(t,e,a){},1530:function(t,e,a){},1718:function(t,e,a){},"17ca":function(t,e,a){},1839:function(t,e,a){"use strict";var s=a("0bfb0"),i=a.n(s);i.a},"1a2a":function(t,e,a){},"1b2a":function(t,e,a){"use strict";var s=a("c4db"),i=a.n(s);i.a},"1c50":function(t,e,a){"use strict";var s=a("990c"),i=a.n(s);i.a},"1cf4":function(t,e,a){"use strict";var s=a("5ad9"),i=a.n(s);i.a},"1dd2":function(t,e,a){},"1e57":function(t,e,a){},"1e6e":function(t,e,a){},"1efc":function(t,e,a){"use strict";var s=a("6694"),i=a.n(s);i.a},"1f15":function(t,e,a){},"1ff4":function(t,e,a){"use strict";var s=a("2905"),i=a.n(s);i.a},2092:function(t,e,a){},"20e2":function(t,e,a){"use strict";var s=a("e64c"),i=a.n(s);i.a},2230:function(t,e,a){},2279:function(t,e,a){"use strict";var s=a("a2f2"),i=a.n(s);i.a},"22da":function(t,e,a){},"24bd":function(t,e,a){"use strict";var s=a("256f"),i=a.n(s);i.a},2522:function(t,e,a){"use strict";var s=a("6460"),i=a.n(s);i.a},"252d":function(t,e,a){"use strict";var s=a("4882"),i=a.n(s);i.a},"253a":function(t,e,a){},"256f":function(t,e,a){},2576:function(t,e,a){},"26c8":function(t,e,a){"use strict";var s=a("eb4f"),i=a.n(s);i.a},2743:function(t,e,a){},"285b":function(t,e,a){"use strict";var s=a("1a2a"),i=a.n(s);i.a},"28ca":function(t,e,a){"use strict";var s=a("faf5"),i=a.n(s);i.a},2905:function(t,e,a){},"29fd":function(t,e,a){"use strict";var s=a("b15c"),i=a.n(s);i.a},"2dfc":function(t,e,a){},"2eb0":function(t,e,a){},"2f47":function(t,e,a){"use strict";var s=a("3861"),i=a.n(s);i.a},"2f88":function(t,e,a){"use strict";var s=a("b30b"),i=a.n(s);i.a},"304a":function(t,e,a){"use strict";var s=a("a970"),i=a.n(s);i.a},"30d4":function(t,e,a){},"311c":function(t,e,a){"use strict";var s=a("8faf"),i=a.n(s);i.a},3287:function(t,e,a){},"32e6":function(t,e,a){},"33df":function(t,e,a){"use strict";var s=a("1e6e"),i=a.n(s);i.a},3458:function(t,e,a){"use strict";var s=a("5f95"),i=a.n(s);i.a},"34ee":function(t,e,a){},3784:function(t,e,a){},"382b":function(t,e,a){"use strict";var s=a("ed7a"),i=a.n(s);i.a},3838:function(t,e,a){"use strict";var s=a("c597"),i=a.n(s);i.a},"383a":function(t,e,a){},3861:function(t,e,a){},3893:function(t,e,a){"use strict";var s=a("f8eb"),i=a.n(s);i.a},"39ac":function(t,e,a){},"3a8c":function(t,e,a){"use strict";var s=a("2230"),i=a.n(s);i.a},"3aa6":function(t,e,a){"use strict";var s=a("e79c"),i=a.n(s);i.a},"3b6d":function(t,e,a){},"3b9d":function(t,e,a){},"3d0b":function(t,e,a){"use strict";var s=a("a264"),i=a.n(s);i.a},"3daa":function(t,e,a){"use strict";var s=a("435c"),i=a.n(s);i.a},"3e70":function(t,e,a){},"3ea5":function(t,e,a){"use strict";var s=a("9cdd"),i=a.n(s);i.a},"3f2e":function(t,e,a){"use strict";var s=a("111c"),i=a.n(s);i.a},"3f95":function(t,e,a){"use strict";var s=a("e9e7"),i=a.n(s);i.a},"3fab":function(t,e,a){"use strict";var s,i=a("795b"),n=a.n(i),o=a("bc3a"),r=a.n(o),c=a("815e"),l=a("77d2"),u=a("5c96"),d=r.a.create({baseURL:l["a"]["production"].BASE_URL,timeout:6e4,headers:{"X-Token":localStorage.getItem("atom_token")},loadDom:""});d.interceptors.request.use(function(t){if(t.loadDom||t.fullscreen){var e=document.getElementById(t.loadDom);s=u["Loading"].service({target:e,fullscreen:t.fullscreen})}return t}),d.interceptors.response.use(function(t){s&&s.close();var e=t.data;return e.code&&0!=e.code?(Object(c["a"])(e.msg),1e3===e.code&&(location.href="/login.html"),n.a.reject("error")):e}),e["a"]=d},"401d":function(t,e,a){},4066:function(t,e,a){"use strict";var s=a("bb87"),i=a.n(s);i.a},4108:function(t,e,a){"use strict";var s=a("c2c5"),i=a.n(s);i.a},4130:function(t,e,a){},"414a":function(t,e,a){"use strict";var s=a("f178"),i=a.n(s);i.a},4163:function(t,e,a){"use strict";var s=a("d68a"),i=a.n(s);i.a},4271:function(t,e,a){},"42d9":function(t,e,a){},"435c":function(t,e,a){},4472:function(t,e,a){"use strict";var s=a("e9c3"),i=a.n(s);i.a},4519:function(t,e,a){},4882:function(t,e,a){},"488a":function(t,e,a){"use strict";var s=a("a351"),i=a.n(s);i.a},4904:function(t,e,a){},"49a2":function(t,e,a){"use strict";var s=a("520a"),i=a.n(s);i.a},"49c8":function(t,e,a){"use strict";var s=a("86b5"),i=a.n(s);i.a},"4a7b":function(t,e,a){},"4ab4":function(t,e,a){"use strict";var s=a("4c49"),i=a.n(s);i.a},"4ad2":function(t,e,a){},"4b27":function(t,e,a){"use strict";var s=a("5c55"),i=a.n(s);i.a},"4b38":function(t,e,a){"use strict";var s=a("32e6"),i=a.n(s);i.a},"4c10":function(t,e,a){"use strict";var s=a("6f5c"),i=a.n(s);i.a},"4c49":function(t,e,a){},"4e98":function(t,e,a){},"4fdf":function(t,e,a){},5060:function(t,e,a){"use strict";var s=a("3b6d"),i=a.n(s);i.a},"520a":function(t,e,a){},"52af":function(t,e,a){},"52c5":function(t,e,a){"use strict";var s=a("8e93"),i=a.n(s);i.a},"532d":function(t,e,a){"use strict";var s=a("4519"),i=a.n(s);i.a},"54a4":function(t,e,a){},"54e5":function(t,e,a){},"55da":function(t,e,a){"use strict";var s=a("4ad2"),i=a.n(s);i.a},"55e7":function(t,e,a){"use strict";var s=a("22da"),i=a.n(s);i.a},5672:function(t,e,a){"use strict";var s=a("4130"),i=a.n(s);i.a},"56d6":function(t,e,a){},"576b":function(t,e,a){},5782:function(t,e,a){"use strict";var s=a("1f15"),i=a.n(s);i.a},5808:function(t,e,a){},"5ad9":function(t,e,a){},"5c1f":function(t,e,a){"use strict";var s=a("cea7"),i=a.n(s);i.a},"5c55":function(t,e,a){},"5c76":function(t,e,a){"use strict";var s=a("13cb"),i=a.n(s);i.a},"5c87":function(t,e,a){"use strict";var s=a("f053"),i=a.n(s);i.a},"5f55":function(t,e,a){"use strict";var s=a("c54e"),i=a.n(s);i.a},"5f95":function(t,e,a){},"628f":function(t,e,a){},"63ea":function(t,e,a){"use strict";var s=a("6531"),i=a.n(s);i.a},6431:function(t,e,a){"use strict";var s=a("8426"),i=a.n(s);i.a},6460:function(t,e,a){},"64c2":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("f499"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e814"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("59ad"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_6__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("3b8d"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_9__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("cebc"),vuex__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2f62"),_js_message__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("815e");__webpack_exports__["a"]={props:["status","editid","customtype","audienceId"],data:function(){return{dialogFormVisible:!1,relativearr:["任意","所有"],form:{type:"应用事件",app:"",relative:"任意",name:"",desc:"",checked:!0,account:"",platform:"",condition:[{day:30,app:"",percent:"25%"}],nocondition:[{day:30,app:"",percent:"25%"}]}}},methods:Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_11__["c"])(["SETSTATE"]),{checkListten:function(t){t&&(this.form.nocondition=this.form.nocondition.slice(0,1))},toCancel:function(){this.formReset(),this.$emit("cancelAddbm","status")},formCheck:function(){if(""==this.form.name)return[!1,"请输入受众名称"];if(this.form.name.replace(/[\u0391-\uFFE5]/g,"aa").length>100)return[!1,"受众名称长度不能大于100个字符"];if(this.form.desc.replace(/[\u0391-\uFFE5]/g,"aa").length>200)return[!1,"描述长度不能大于200个字符"];if(!this.form.account)return[!1,"请选择广告账户"];var t=this.form.condition.filter(function(t){return""==t.app}),e=this.form.nocondition.filter(function(t){return""==t.app});return 0!=t.length?[!1,"新增条件不完整"]:this.form.checked||0==e.length?[!0]:[!1,"新增条件不完整"]},toSubmit:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_7__["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r,c,l=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.formCheck(),e[0]){t.next=4;break}return Object(_js_message__WEBPACK_IMPORTED_MODULE_12__["g"])(e[1]),t.abrupt("return");case 4:return a=[],this.form.condition.forEach(function(t){if(t.day&&t.app){var e={event_sources:[{type:"app",id:l.form.app}],retention_seconds:24*t.day*60*60,filter:{operator:"and",filters:[{field:"event",operator:"eq",value:-1!=t.app.indexOf("|")?t.app.split("|")[0]:t.app}]}};-1!=t.app.indexOf("|")&&(e.template=t.app.split("|")[1],"MACA_MOST_ACTIVE_USERS"==e.template&&(e.aggregation={type:"count",method:"percentile",operator:"in_range",value:{from:100-_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_3___default()(t.percent),to:100}})),a.push(e)}}),s=[],this.form.nocondition.forEach(function(t){if(t.day&&t.app){var e={event_sources:[{type:"app",id:_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(l.form.app)}],retention_seconds:24*t.day*60*60,filter:{operator:"and",filters:[{field:"event",operator:"eq",value:-1!=t.app.indexOf("|")?t.app.split("|")[0]:t.app}]}};-1!=t.app.indexOf("|")&&(e.template=t.app.split("|")[1],"MACA_MOST_ACTIVE_USERS"==e.template&&(e.aggregation={type:"count",method:"percentile",operator:"in_range",value:{from:100-_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_3___default()(t.percent),to:100}})),s.push(e)}}),i={},a.length>0&&(i.inclusions={operator:"任意"==this.form.relative?"or":"and",rules:a}),s.length>0&&(i.exclusions={operator:"or",rules:s}),n={fbAudienceId:this.audienceId?this.audienceId:"",description:this.form.desc,adaccountId:this.form.account,name:this.form.name,rule:_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1___default()(i)},o="resultid",r=this.audienceId,this.SETSTATE({k:o,v:r}),t.next=17,this.$store.dispatch("addTarget",{option:n});case 17:c=t.sent,"failed"!=c.data.status&&(this.dialogFormVisible=!1);case 19:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toGetUser:function(){this.$store.dispatch("appToAccount",{appid:this.form.app})},formReset:function(){this.form.type="应用事件",this.form.app="",this.form.relative="任意",this.form.name="",this.form.desc="",this.form.account="",this.form.checked=!0,this.form.condition=[{day:30,app:"",percent:"25%"}],this.form.nocondition=[{day:30,app:"",percent:"25%"}],this.SETSTATE({k:"appaccount",v:[]})},addCondition:function(){this.form.condition.push({day:30,app:"",percent:"25%"})},delCondition:function(t){this.form.condition.splice(t,1)},addNoCondition:function(){this.form.nocondition.push({day:30,app:"",percent:"25%"})},delNoCondition:function(t){this.form.nocondition.length>1?this.form.nocondition.splice(t,1):this.form.checked=!0}}),computed:Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_11__["d"])(["commonapp","itemlist","appaccount","targetinfo","commonaccount"]),{relativekey:function(){return"任意"==this.form.relative?"或":"且"},ifAdd:function(){return this.form.checked?this.form.condition.length<5:this.form.condition.length+this.form.nocondition.length<5},conditionHeight:function(){return 30*(this.form.condition.length-1)+102*this.form.condition.length},noconditionHeight:function(){return 30*(this.form.nocondition.length-1)+102*this.form.nocondition.length}}),mounted:function(){},watch:{status:function(t,e){this.dialogFormVisible=t,t&&this.$store.dispatch("commonApp",{project_id:this.$route.params.id})},targetinfo:function targetinfo(n,v){var _this2=this;if(n){this.form.name=n.name,this.form.desc=n.description,this.form.account="act_"+n.accountId;var rule=eval("("+n.rule+")");this.form.app=rule["inclusions"]["rules"][0]["event_sources"][0]["id"].toString(),this.form.relative="or"==rule.inclusions.operator?"任意":"所有",rule.inclusions&&rule.inclusions.rules.length>0&&(this.form.condition=[],rule.inclusions.rules.forEach(function(t){var e={day:t.retention_seconds/86400,app:t.template?"".concat(t.filter.filters[0].value,"|").concat(t.template):t.filter.filters[0].value,percent:t.aggregation?t.aggregation.value.to-t.aggregation.value.from+"%":"25%"};_this2.form.condition.push(e)})),rule.exclusions&&rule.exclusions.rules.length>0&&(this.form.nocondition=[],this.form.checked=!1,rule.exclusions.rules.forEach(function(t){var e={day:t.retention_seconds/86400,app:t.template?"".concat(t.filter.filters[0].value,"|").concat(t.template):t.filter.filters[0].value,percent:t.aggregation?t.aggregation.value.to-t.aggregation.value.from+"%":"25%"};_this2.form.nocondition.push(e)}))}},editid:function(t,e){if(t){var a=t;this.$store.dispatch("getTargetInfo",{id:a,type:"app"})}}}}},"64e4":function(t,e,a){"use strict";var s=a("b45e"),i=a.n(s);i.a},"64fe":function(t,e,a){"use strict";var s=a("d21f"),i=a.n(s);i.a},6531:function(t,e,a){},6694:function(t,e,a){},"66ab":function(t,e,a){},6710:function(t,e,a){},"698b":function(t,e,a){"use strict";var s=a("401d"),i=a.n(s);i.a},"6a48":function(t,e,a){"use strict";var s=a("d8ff"),i=a.n(s);i.a},"6ac1":function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5176"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_1__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("f499"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_entries__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("2d1f"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_entries__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_entries__WEBPACK_IMPORTED_MODULE_3__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("cebc"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a4bb"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_8__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("3b8d"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("a745"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("551c"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("097d"),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_15__),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("3fab"),_js_axiosclass__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("bef5"),_js_url_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("dd46"),_js_websocket__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("c11b"),_js_message__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("815e"),element_ui__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("5c96"),element_ui__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_21__);function Axios(t){var e=t.url,a=t.method,s=void 0===a?"get":a,i=t.data,n=void 0===i?{}:i,o=t.success,r=void 0===o?null:o,c=t.fail,l=void 0===c?null:c,u=t.fullscreen,d=void 0!==u&&u;return Object(_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"])({method:s,url:e,data:n,fullscreen:d}).then(function(t){return r(t)}).catch(function(t){console.error(t),l&&l()})}__webpack_exports__["a"]={setPermission:function(t){t.state;var e=t.commit;Notification.requestPermission().then(function(t){e("SENDPERMISSION",t)}).catch(function(t){console.log(t)})},getPayCount:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].counturl;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(a).then(function(t){e("PAYCOUNT",t)}).catch(function(t){console.log(t)})},getItemList:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].itemlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){var a=t;e("ITEMLIST",a)}).catch(function(t){console.log(t)})},changePassword:function(t,e){t.state;var a=t.commit,s=t.dispatch,i=e.k,n=e.n1,o=e.n2,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].changepassword.replace("{oldPassword}",i).replace("{password}",n).replace("{password2}",o);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){var e=t;0==e.code&&(a("PASSWORD",e),s("toLogout"))}).catch(function(t){console.log(t)})},toLogout:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].logout;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(a).then(function(t){var a=t;0==a.code&&e("LOGOUT")}).catch(function(t){console.log(t)})},getLongToken:function(t,e){t.state,t.commit;var a=e.token,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].gettoken,i={shortToken:a};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,i).then(function(t){t.data}).catch(function(t){console.log(t)})},getMessageCount:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].messagecount;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("MESSAGECOUNT",t)}).catch(function(t){console.log(t)})},messageWebsocket:function messageWebsocket(_ref11){var state=_ref11.state,commit=_ref11.commit,dispatch=_ref11.dispatch;WebSocket?new _js_websocket__WEBPACK_IMPORTED_MODULE_19__["a"]({onMessage:function onMessage(res){if(console.log(res),"heart beat"!=res.data){if("99+"!=res.data&&_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_11___default()(eval(res.data))&&1==state.copyjoblistdetail.length){var opts;switch(state.adtab){case"campaignName":opts="campain_option";break;case"adSetName":opts="set_option";break;case"adName":opts="ad_option";break}clearInterval(jobProcess),console.log("复制异步结束"),commit("JOBPROCESSCOMPLETE",res),dispatch("getAdlist",{option:state[opts],type:state.adtab})}commit("MESSAGECOUNT",res)}}}):console.log("%c 您的浏览器不支持Websocket ","background:#222;color:#bada55")},videoUrlTranslate:function(t,e){t.state;var a=t.commit,s=e.urls,i=e.originurl,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].videourl;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s,{fullScreen:!0}).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("转换完成"),a("VIDEOURL",{r:t,originurl:i})}).catch(function(t){console.log(t)})},getAppCount:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].applist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("APPCOUNT",t);var a="ifaccount",s=!0;e("SETSTATE",{k:a,v:s})}).catch(function(t){console.log(t)})},infoInit:function(t){t.state;var e=t.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.startDate,i=a.endDate,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].initurl,o={startDate:s,endDate:i};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,o).then(function(t){var a=t;e("INFO",a)}).catch(function(t){console.log(t)})},selectApp:function(t){var e=t.state,a=t.commit,s=t.dispatch,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].appurl,n={fbAppId:e.appdataappid,startDate:e.appdatastartdate,endDate:e.appdataenddate,countryList:e.appdatacountry,impressionDeviceList:e.appdataimporession};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){var e=t;a("APPINFO",e)}).catch(function(t){console.log(t)}),s("selectApptable")},getTag:function(t,e){t.state;var a=t.commit,s=e.appId,i=e.userId,n=e.tagType,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].gettag,"appId=").concat(s,"&userId=").concat(i,"&tagType=").concat(n);return Axios({url:o,success:function(t){return a("PANDECTTAG",t),t}})},saveTag:function(t,e){t.state,t.commit;var a=e.appId,s=e.userId,i=e.tagName,n=e.url,o=e.tagType,r="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].savetag,"url=").concat(n,"&appId=").concat(a,"&userId=").concat(s,"&tagName=").concat(i,"&tagType=").concat(o);return Axios({url:r,fullscreen:!0,success:function(t){return t}})},selectApptable:function(t){var e=t.state,a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].appurl,i={fbAppId:e.appdataappid,startDate:e.appdatastartdate,endDate:e.appdataenddate,flag:"1",pageNo:e.appdataindex,pageSize:e.appdatapagesize,countryList:e.appdatacountry,impressionDeviceList:e.appdataimporession,orderByClause:e.appdatasort,eventsName:localStorage.getItem(pandectEventLS.new)&&JSON.parse(localStorage.getItem(pandectEventLS.new))[e.appdataappid]?JSON.parse(localStorage.getItem(pandectEventLS.new))[e.appdataappid].join(","):""},n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].appcpitotal;Axios({url:n,method:"post",data:i,success:function(t){a("APPINFOTABLETOTAL",t)}}),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,i).then(function(t){var e=t;a("APPINFOTABLE",e)}).catch(function(t){console.log(t)})},selectAppout:function(t,e){var a=t.state,s=t.commit,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].appurl,n={fbAppId:a.appdataappid,startDate:a.appdatastartdate,endDate:a.appdataenddate,flag:"1",pageNo:a.appdataindex,pageSize:a.appdatatotal,eventsName:localStorage.getItem(pandectEventLS.new)&&JSON.parse(localStorage.getItem(pandectEventLS.new))[a.appdataappid]?JSON.parse(localStorage.getItem(pandectEventLS.new))[a.appdataappid].join(","):""};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){s("APPINFOTABLEOUT",{res:t,name:e})}).catch(function(t){console.log(t)})},getCustomEvent:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].customevent+"applicationId="+e;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("CUSTOMEVENT",t)}).catch(function(t){console.log(t)})},getBmlist:function(t){t.state;var e=t.commit,a=t.dispatch,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].bmlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){e("BMLIST",t),a("getAccount"),a("getPage")}).catch(function(t){console.log(t)})},deleteBM:function(t,e){var a=t.state,s=(t.commit,t.dispatch),i=e.bmid,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deletebm,"bmId=").concat(i);Axios({url:n,success:function(t){t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("删除成功"),a.bm_pageIndex=1,s("getAccount",i)):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("删除失败")}})},getAddBmlist:function(t,e){t.state;var a=t.commit,s=e.loadDom,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addbmlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i,{loadDom:s}).then(function(t){a("ADDBMLIST",t)}).catch(function(t){console.log(t)})},saveBm:function(t,e){t.state;var a=t.commit,s=e.bm,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].savebm,n=s.slice(0);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){0==t.code&&a("SAVEBM",s)}).catch(function(t){console.log(t)})},getAccount:function(t,e){var a=t.state,s=t.commit,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].bmaccountlist.replace("{bmid}",a.disbmid)+"&keyword="+a.accountkwd,n=["pageIndex","pageSize"],o="";n.forEach(function(t){a["bm_"+t]&&(o+="&"+t+"="+a["bm_"+t])}),i+=o,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){s("SETACCOUNT",t)}).catch(function(t){console.log(t)})},getAddAccount:function(t,e){t.state;var a=t.commit,s=e.bmid,i=e.loadDom,n=void 0===i?"":i,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addaccountlist.replace("{bmid}",s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o,{loadDom:n}).then(function(t){a("ADDACCOUNT",t)}).catch(function(t){console.log(t)})},saveAccount:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.state,e.commit,i=e.dispatch,n=a.account,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].saveaccount,r=n.slice(0),c=s.disbmid,t.next=7,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(o,r).then(function(t){return t}).catch(function(t){console.log(t)});case 7:l=t.sent,0==l.code&&(i("getAccount",c),i("getAddAccount",{bmid:c}));case 9:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),accountStatus:function(t,e){t.state,t.commit;var a=e.id,s=e.status,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].switchstatus,n={fbId:a,status:s};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){}).catch(function(t){console.log(t)})},getPage:function(t,e){var a=t.state,s=t.commit,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].pagelist.replace("{bmid}",a.disbmid)+"&keyword="+a.pagekwd,n=["pageIndex","pageSize"],o="";n.forEach(function(t){a["bmpg_"+t]&&(o+="&"+t+"="+a["bmpg_"+t])}),i+=o,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){s("SETPAGE",t)}).catch(function(t){console.log(t)})},getAddPage:function(t,e){t.state;var a=t.commit,s=e.bmid,i=e.loadDom,n=void 0===i?"":i,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addpagelist.replace("{bmid}",s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o,{loadDom:n}).then(function(t){a("ADDPAGE",t)}).catch(function(t){console.log(t)})},savePage:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.state,e.commit,i=e.dispatch,n=a.page,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].savepage,r=n.slice(0),c=s.disbmid,t.next=7,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(o,r).then(function(t){return t}).catch(function(t){console.log(t)});case 7:l=t.sent,0==l.code&&(i("getPage",c),i("getAddPage",{bmid:c}));case 9:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),getPbia:function(t,e){var a=t.state,s=(t.commit,t.dispatch),i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].pbia.replace("{pageid}",e);Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["g"])("同步中..."),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("同步成功"),0==t.code&&s("getPage",a.disbmid)}).catch(function(t){console.log(t)})},getApplist:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].applist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("SETAPPLIST",t)}).catch(function(t){console.log(t)})},getAddApplist:function(t,e){t.state;var a=t.commit,s=e.loadDom,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addapplist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i,{loadDom:s}).then(function(t){a("ADDAPP",t)}).catch(function(t){console.log(t)})},saveApp:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.app,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].saveapp,n=s.slice(0);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){a("getApplist")}).catch(function(t){console.log(t)})},setApp:function(t,e){t.state;var a,s=t.commit,i=e.id,n=e.loading,o=void 0===n?"":n,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].setapp.replace("{applicationid}",i);if(o){var c=document.getElementById(o);a=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({target:c})}_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){o&&a.close(),0==t.code&&s("SETAPP",t)}).catch(function(t){console.log(t)})},canSetapp:function(t,e){t.state;var a,s=t.commit,i=e.id,n=e.loading,o=void 0===n?"":n,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].cansetapp.replace("{applicationid}",i);if(o){var c=document.getElementById(o);a=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({target:c})}_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){o&&a.close(),0==t.code&&s("CANSETAPP",t)}).catch(function(t){console.log(t)})},saveSet:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].saveset;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{loadDom:"cansetapplist"}).then(function(t){var e=s[0].applicationId;0==t.code&&(a("setApp",{id:e}),a("canSetapp",{id:e,loading:"cansetapplist"}),a("getApplist"))}).catch(function(t){console.log(t)})},delSet:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].delset;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{loadDom:"setList"}).then(function(t){var e=s[0].applicationId;0==t.code&&(a("setApp",{id:e,loading:"setList"}),a("canSetapp",{id:e}),a("getApplist"))}).catch(function(t){console.log(t)})},setAF:function(t,e){t.state,t.commit,t.dispatch;var a=e.af_key,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].setaf,"af_key=").concat(a);return Axios({url:s,fullscreen:!0,success:function(t){return t}})},getAfState:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getafstate;Axios({url:a,success:function(t){e("AFSTATE",t)}})},getManagelist:function(t,e){var a=t.state,s=t.commit,i=e.status,n=void 0===i?"1":i,o=e.pageIndex,r=void 0===o?1:o,c=e.pageSize,l=void 0===c?20:c,u="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].managelist,"keywords=").concat(a.projectkwd,"&status=").concat(n,"&pageIndex=").concat(r,"&pageSize=").concat(l);Axios({url:u,fullscreen:!0,success:function(t){s("MANAGELIST",t)}})},getManageOffList:function(t,e){var a=t.state,s=t.commit,i=e.status,n=void 0===i?"1":i,o=e.pageIndex,r=void 0===o?1:o,c=e.pageSize,l=void 0===c?20:c,u=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].manageofflist.replace("{keywords}",a.projectkwd).replace("{status}",n).replace("{pageIndex}",r).replace("{pageSize}",l);Axios({url:u,fullscreen:!0,success:function(t){0==t.code&&s("MANAGELIST",t)}})},manageApplist:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].applist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("MANAGEAPPLIST",t)}).catch(function(t){console.log(t)})},addProject:function(t,e){var a=t.state,s=(t.commit,t.dispatch,e.memberaccount),i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addproject,n=[],o=function(t){var e=a.createoption["member"].find(function(e){return e.id==t});if(e){var i={fbAccountIds:s[t].map(function(t){return t.fbId.replace("act_","")}).join(","),nickName:a.createoption["member"].find(function(e){return e.id==t})["nickName"],userId:t};n.push(i)}};for(var r in s)o(r);var c={applicationId:a.createoption["region"].join(","),fbAccountIds:a.createoption["account"].map(function(t){return t.fbId.replace("act_","")}).join(","),fbPageIds:a.createoption["page"].join(","),participaterIds:a.createoption["member"].map(function(t){return t.id}).join(","),projectName:a.createoption["projectname"],projectPlatForm:0,projectTarget:0,projectUserAccountVos:n,status:!0,token:localStorage.getItem("atom_token")};return Axios({url:i,method:"post",data:c,fullscreen:!0,success:function(t){return t}})},headerAddProject:function(t,e){t.state,t.commit,t.dispatch;var a=e.appid,s=e.pname,i=e.pplat,n=e.ptag,o=e.route,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addproject,c={applicationId:a,projectName:s,projectPlatForm:i,projectTarget:n,status:!0,token:localStorage.getItem("atom_token")};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(r,c).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("创建成功"),setTimeout(function(){o.push("/manage")},2e3)}).catch(function(t){console.log(t)})},editProject:function(t,e){var a=t.state,s=(t.commit,t.dispatch,e.memberaccount),i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].editproject,n=[],o=function(t){var e=a.createoption["member"].find(function(e){return e.id==t});if(e){var i={fbAccountIds:s[t].map(function(t){return t.fbId.replace("act_","")}).join(","),nickName:a.createoption["member"].find(function(e){return e.id==t})["nickName"],userId:t};n.push(i)}};for(var r in s)o(r);var c={applicationId:a.createoption["region"].join(","),fbAccountIds:a.createoption["account"].map(function(t){return t.fbId.replace("act_","")}).join(","),fbPageIds:a.createoption["page"].join(","),participaterIds:a.createoption["member"].map(function(t){return t.id}).join(","),projectName:a.createoption["projectname"],id:a.createeditid,projectPlatForm:0,projectTarget:0,projectUserAccountVos:n,status:!0,token:localStorage.getItem("atom_token")};return Axios({url:i,method:"post",data:c,fullscreen:!0,success:function(t){return t}})},overProject:function(t,e){t.state,t.commit,t.dispatch;var a=e.id,s=e.adIsOff,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].projectover,n={id:a,adIsOff:s};return Axios({url:i,method:"post",data:n,fullscreen:!0,success:function(t){return t}})},deleteProject:function(t,e){t.state,t.commit,t.dispatch;var a=e.projectId,s=e.pauseCampaigns,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].projectdelete.replace("{projectId}",a)+"&pauseCampaigns="+s;return Axios({url:i,method:"post",data:{},fullscreen:!0,success:function(t){return t}})},getAllot:function(t,e){t.state;var a=t.commit,s=e.projectId,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getallot.replace("{projectId}",s);return Axios({url:i,success:function(t){return a("GETALLOT",t),t}})},setAllot:function(t,e){var a=t.state,s=(t.commit,e.memberaccount),i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].setallot.replace("{projectId}",a.allotid),n=[],o=function(t){var e=a.createoption["member"].find(function(e){return e.id==t});if(e){var i={fbAccountIds:s[t].map(function(t){return t.fbId.replace("act_","")}).join(","),nickName:a.createoption["member"].find(function(e){return e.id==t})["nickName"],userId:t};n.push(i)}};for(var r in s)o(r);return Axios({url:i,method:"post",data:n,success:function(t){return t}})},beginProject:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.id,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].projectbegin,n={id:s},o=0;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){0==t.code&&(a("getManagelist",{status:o}),a("getItemList"))}).catch(function(t){console.log(t)})},getUsersList:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].userslist;return Axios({url:a,success:function(t){return e("USERSLIST",t),t}})},getAdAccount:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adaccount;return Axios({url:a,success:function(t){return e("ADACCOUNTLIST",t),t}})},getAdPages:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].allpagelist;Axios({url:a,success:function(t){e("ADPAGES",t)}})},commonAccount:function(t,e){t.state;var a=t.commit,s=e.project_id,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].commonaccounts,"project_id=").concat(s);Axios({url:i,success:function(t){a("COMMONACCOUNT",t)}})},commonPage:function(t,e){t.state;var a=t.commit,s=e.project_id,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].commonpages,"project_id=").concat(s);Axios({url:i,success:function(t){a("COMMONPAGE",t)}})},commonApp:function(t,e){t.state;var a=t.commit,s=e.project_id,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].commonapps,"project_id=").concat(s);Axios({url:i,success:function(t){a("COMMONAPP",t)}})},getRules:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getrules.replace("{projectId}",e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("RULES",t)}).catch(function(t){console.log(t)})},getRuleList:function(t){var e=t.state,a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getrulelist,i="";_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_6___default()(e.ruleoption).forEach(function(t){e.ruleoption[t]&&(i+="&".concat(t,"=").concat(e.ruleoption[t]))}),i=i.substr(1),s+=i,Axios({url:s,fullscreen:!0,success:function(t){a("GETRULELIST",t)}})},deleteRule:function(t,e){t.state,t.commit;var a=t.dispatch,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deleterule.replace("{ruleId}",e);Axios({url:s,method:"post",fullscreen:!0,success:function(t){t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("删除成功"),a("getRuleList")):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("删除失败：".concat(t.msg))}})},toCloseRule:function(t,e){t.state,t.commit;var a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].ruleclose.replace("{ruleId}",e);Axios({url:a,method:"post",fullscreen:!0,success:function(t){t.data?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("关闭成功"):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("关闭失败：".concat(t.msg))}})},toOpenRule:function(t,e){t.state,t.commit;var a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].ruleopen.replace("{ruleId}",e);Axios({url:a,method:"post",fullscreen:!0,success:function(t){t.data?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("打开成功"):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("打开失败：".concat(t.msg))}})},addRule:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=e.from,n=void 0===i?"":i,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addrule;return Axios({url:o,method:"post",fullscreen:!0,data:s,success:function(t){return t.data?(n||a("getRuleList"),Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("创建成功")):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("创建失败：".concat(t.msg)),t}})},editRule:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].editrule;return Axios({url:i,method:"post",fullscreen:!0,data:s,success:function(t){return t.data?(a("getRuleList"),Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("编辑成功")):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("编辑失败：".concat(t.msg)),t}})},getExecute:function(t,e){t.state;var a,s=t.commit,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getexecute.replace("{fbRuleId}",e);setTimeout(function(){a=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({fullscreen:!0}),Axios({url:i,success:function(t){a&&a.close(),s("EXECUTELIST",t)}})},300)},executeRule:function(t,e){t.state,t.commit;var a=t.dispatch,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].executerule.replace("{fbRuleId}",e);return Axios({url:s,method:"post",fullscreen:!0,success:function(t){return t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("执行成功"),a("getRuleList")):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("执行失败：".concat(t.msg)),t}})},openRule:function(t,e){t.state,t.commit;var a=e.projid,s=e.ruleGroupId,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].openrule.replace("{projectId}",a),n={ruleGroupId:s};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){}).catch(function(t){console.log(t)})},closeRule:function(t,e){t.state,t.commit;var a=e.projid,s=e.ruleGroupId,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].closerule.replace("{projectId}",a),n={ruleGroupId:s};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){}).catch(function(t){console.log(t)})},getOptimizeAccount:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].optimizeadaccount+"projectId="+e;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("OPTIMIZEACCOUNT",t)}).catch(function(t){console.log(t)})},getOptimizeList:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].optimize,i="";for(var n in e)e[n]&&(i+="&".concat(n,"=").concat(e[n]));s+=i.substr(1),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("OPTIMIZELIST",t)}).catch(function(t){console.log(t)})},optimizeDetail:function(t,e){t.state;var a,s=t.commit,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].optimizedetail,"fbRuleLogId=").concat(e);setTimeout(function(){a=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({fullscreen:!0}),Axios({url:i,fullscreen:!0,success:function(t){a&&a.close(),s("OPTIMIZEDETAIL",t)}})},300)},matchFileMD5:function(t,e){t.state;var a=t.commit,s=e.md5,i=e.file,n=e.list,o=e.type,r=e.tabvalue,c=e.on,l=(e.vdname,e.callback),u=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].matchmd5;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(u,s).then(function(t){if(0==t.code&&t.data.length>0){a("SETSTATE",{k:c,v:!0}),"video"!=o||n.find(function(e){return e.processVIO[0]&&e.processVIO[0].videoHash==t.data[0].md5})||n.forEach(function(e,a){e.name==r&&n[a].processVIO.push({videoHash:t.data[0].md5,fmname:""})}),"img"!=o||n.find(function(e){return e.processIMG[0]&&e.processIMG[0].imageHash==t.data[0].md5})||n.forEach(function(e,a){e.name==r&&n[a].processIMG.push({imageHash:t.data[0].md5})});var e=null,s=0;n.forEach(function(a,n){"img"==o&&a.name==r&&(a.processIMG[0].imageUrl=t.data[0].targetName,a.processIMG[0].name=i.name,a.processIMG[0].process=100),"video"==o&&a.name==r&&(a.processVIO[0].videoUrl=t.data[0].targetName,a.processVIO[0].name=i.name,a.processVIO[0].process=100),"fm"==o&&a.name==r&&(s=n,e=a,e.processVIO[0].fmname=i.name,e.processVIO[0].fmUrl=t.data[0].targetName,e.processVIO[0].fmHash=t.data[0].md5,e.processVIO[0].fmprocess=100)}),"fm"==o&&(n.splice(s,1),n.splice(s,0,e)),i.cancel(),i.remove(),console.log(n),l&&l()}else i.upload()}).catch(function(t){console.log(t)})},matchMutiFileMD5:function(t,e){var a=t.state,s=t.commit,i=e.md5,n=e.file,o=e.list,r=e.type,c=e.on,l=e.vdname,u=e.callback,d=void 0===u?null:u,m=e.maxcount,p=void 0===m?0:m,f=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].matchmd5;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(f,i).then(function(t){if("img"==r){if(p&&o.length+a.imgspwant>=p)return Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["g"])("图片素材最多上传10张"),n.cancel(),n.remove(),a.imgspwant++,void a.wantupload++;a.imgspwant++,a.wantupload++}else{if(p&&o.length+a.viospwant>=p)return Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["g"])("视频素材最多上传10个"),n.cancel(),n.remove(),a.viospwant++,void a.wantupload++;a.viospwant++,a.wantupload++}if(0==t.code&&t.data.length>0){s("SETSTATE",{k:c,v:!0}),"img"!=r||o.find(function(e){return e.imageHash==t.data[0].md5})||(o.push({imageHash:t.data[0].md5}),a.imgspwant--),"video"!=r||o.find(function(e){return e.videoHash==t.data[0].md5})||(o.push({videoHash:t.data[0].md5}),a.viospwant--);var e=null,i=null,u=0;o.forEach(function(a,s){"img"==r&&a.imageHash==t.data[0].md5&&(a.imageUrl=t.data[0].targetName,a.name=n.name,a.process=100),"video"==r&&a.videoHash==t.data[0].md5&&(a.videoUrl=t.data[0].targetName,a.name=n.name,a.process=100),"fm"==r&&a.name==l&&(u=s,e=a,i=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__["a"])({},e,{fmname:n.name,fmUrl:t.data[0].targetName,fmHash:t.data[0].md5,fmprocess:100}))}),"fm"==r&&(o.splice(u,1),o.splice(u,0,i)),n.cancel(),n.remove(),d&&d(t)}else"fm"==r&&n.upload()}).catch(function(t){console.log(t)})},saveVideoImg:function(t,e){t.state,t.commit;var a=e.option,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].savevideoimage;Axios({url:s,method:"post",data:a,success:function(t){}})},getVideoImg:function(t,e){t.state,t.commit;var a=e.videoMd5,s=e.videoUrl,i=e.type,n=void 0===i?0:i,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getvideoimage,"videoMd5=").concat(a,"&videoUrl=").concat(s,"&type=").concat(n);return Axios({url:o,success:function(t){return t}})},fileUpload:function(t,e){t.state,t.commit;var a=e.option,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].fileupload,i=new FormData;i.append("file",a),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,i).then(function(t){}).catch(function(t){console.log(t)})},getClassify:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].classify.replace("{projectid}",e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("CLASSIFY",t)}).catch(function(t){console.log(t)})},getCountries:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcountry+"projectId="+e;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("COUNTRIES",t)}).catch(function(t){console.log(t)})},getCreateList:function(t){var e,a=t.state,s=t.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.loading,o=void 0!==n&&n,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createlist,c=["creativityName","classify","countryId","sex","status","pageIndex","pageSize","projectId"],l="";c.forEach(function(t){a["cr_"+t]&&(l+="&"+t+"="+a["cr_"+t])}),r+=l.substr(1),o&&(e=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({target:document.getElementById(o)})),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){e&&e.close(),s("CREATE",t)}).catch(function(t){console.log(t)})},updateSex:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.id,i=e.sex,n=e.creativityName,o=e.countryId,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].updatesex,c={sex:i,id:s,creativityName:n,countryId:o};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(r,c).then(function(t){a("getCreateList")}).catch(function(t){console.log(t)})},openCreate:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createopen,n=s;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){a("getCreateList")}).catch(function(t){console.log(t)})},syncAll:function(t,e){t.state,t.commit;var a=e.accountIds,s=e.projectId,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].syncall,"accountIds=").concat(a,"&projectId=").concat(s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){}).catch(function(t){console.log(t)})},syncGroup:function(t,e){t.state,t.commit;var a=e.accountIds,s=e.ids,i=e.projectId,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].syncgroup),o=new URLSearchParams;o.append("accountIds",a),o.append("ids",s),o.append("projectId",i),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,o).then(function(t){}).catch(function(t){console.log(t)})},syncTime:function(t,e){t.state;var a=t.commit,s=e.accountIds,i=e.ids,n=e.projectId,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].synctime,"accountIds=").concat(s,"&ids=").concat(i,"&projectId=").concat(n);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o).then(function(t){a("SYNCTIME",t)}).catch(function(t){console.log(t)})},closeCreate:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createclose,n=s;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n).then(function(t){a("getCreateList")}).catch(function(t){console.log(t)})},addCountries:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.creativityIds,i=e.countryId,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addcountries.replace("{creativityIds}",s).replace("{countryId}",i);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("getCreateList")}).catch(function(t){console.log(t)})},getAllactions:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].actionlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("ALLACTIONS",t)}).catch(function(t){console.log(t)})},toAddCreate:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=e.id,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].toaddcreate;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("新增成功"),a("getCreateList",{loading:"createList"}),a("getClassify",i),a("getCountries",i)}).catch(function(t){console.log(t)})},addCreates:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=e.id,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addcreates;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s,{fullScreen:!0}).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("".concat(s.length,"个创意提交成功")),a("getCreateList",{loading:"createList"}),a("getClassify",i),a("getCountries",i)}).catch(function(t){console.log(t)})},syncList:function(t){var e,a=t.state,s=t.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.loading,o=void 0!==n&&n,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].synclist,c=["keyWords","status","fbAccountId","pageIndex","pageSize","projectId"],l="";c.forEach(function(t){a["sync_"+t]&&(l+="&"+t+"="+a["sync_"+t])}),r+=l.substr(1),o&&(e=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({target:document.getElementById(o)})),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){e&&e.close(),s("SYNCLIST",t)}).catch(function(t){console.log(t)})},synclistall:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.ids,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].synclistall.replace("{ids}",s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("syncList")}).catch(function(t){console.log(t)})},otherCountries:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].countries;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("OTHERCOUNTRIES",t)}).catch(function(t){console.log(t)})},getLanguage:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].language;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("LANGUAGE",t)}).catch(function(t){console.log(t)})},getInterests:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].interests;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("INTERESTS",t)}).catch(function(t){console.log(t)})},getPlatform:function(t,e){t.state;var a=t.commit,s=e.applicationid,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].platform.replace("{applicationid}",s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("PLATFORM",t)}).catch(function(t){console.log(t)})},getCreatePlatform:function(t,e){t.state;var a=t.commit,s=e.applicationid,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].platform.replace("{applicationid}",s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("CREATEPLATFORM",t)}).catch(function(t){console.log(t)})},getSystem:function(t,e){t.state;var a=t.commit,s=e.os,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].system.replace("{os}",s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("SYSTEM",t)}).catch(function(t){console.log(t)})},getOtherCreateList:function(t){var e=t.state,a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createlist,i=["creativityName","classify","countryId","sex","status","projectId"],n="";i.forEach(function(t){e["cr_"+t]&&(n+="&"+t+"="+e["cr_"+t])}),s+=n.substr(1),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("CREATE",t)}).catch(function(t){console.log(t)})},createGener:function(t,e){t.state,t.commit;var a=e.option,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].creategener,i=a.planInfoVO,n=a.route,o=a.projectid;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,i,{fullScreen:!0}).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("创建成功"),setTimeout(function(){n.push("/project/".concat(o,"/plan"))},1e3)}).catch(function(t){})},getPlanlist:function(t){var e,a=t.state,s=t.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.loading,o=void 0!==n&&n,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].planlist,c=["project_id","country","platform","keyword","pageIndex","pageSize"],l="";c.forEach(function(t){a["pl_"+t]&&(l+="&"+t+"="+a["pl_"+t])}),r+=l.substr(1),o&&(e=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({target:document.getElementById(o)})),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){e&&e.close(),s("PLANLIST",t)}).catch(function(t){console.log(t)})},getPlanCountry:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].plancountry.replace("{projectid}",e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("PLANCOUNTRY",t)}).catch(function(t){console.log(t)})},changePrice:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.goalBid,i=e.planId,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].changeprice,o={goalBid:s,planId:i};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,o).then(function(t){a("getPlanlist")}).then(function(t){console.log(t)})},getInuseCreate:function(t,e){var a=t.state,s=t.commit,i=(t.dispatch,e.plan_id),n=void 0===i?"":i,o=e.pageIndex,r=void 0===o?1:o,c=e.pageSize,l=void 0===c?20:c,u=e.loadDom,d=void 0===u?"":u,m=e.fullScreen,p=void 0===m?"":m,f=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].inusecreate,h="";h+="plan_id="+n,h+="&pageIndex="+r,h+="&pageSize="+l,a.plcreatestatus&&(h+="&status="+a.plcreatestatus),a.plcreateclassify&&(h+="&classify="+a.plcreateclassify),a.plcreatekeyword&&(h+="&keyword="+a.plcreatekeyword),f+=h,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(f,{loadDom:d,fullScreen:p}).then(function(t){s("INUSECREATE",t)}).catch(function(t){console.log(t)})},getNouseCreate:function(t,e){var a=t.state,s=t.commit,i=(t.dispatch,e.plan_id),n=void 0===i?"":i,o=e.pageIndex,r=void 0===o?1:o,c=e.pageSize,l=void 0===c?20:c,u=e.fullScreen,d=void 0===u?"":u,m=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].nousecreate,p="";p+="plan_id="+n,p+="&pageIndex="+r,p+="&pageSize="+l,a.plcreateclassify&&(p+="&classify="+a.plcreateclassify),a.plcreatekeyword&&(p+="&keyword="+a.plcreatekeyword),m+=p,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(m,{fullScreen:d}).then(function(t){s("NOUSECREATE",t)}).catch(function(t){console.log(t)})},addCreate:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addcreate;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{fullScreen:!0}).then(function(t){var e=s[0].planId;a("getInuseCreate",{plan_id:e}),a("getNouseCreate",{plan_id:e,fullScreen:!0}),a("getPlanlist")}).catch(function(t){console.log(t)})},delCreate:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].delcreate;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{fullScreen:!0}).then(function(t){var e=s[0].planId;a("getInuseCreate",{plan_id:e,fullScreen:!0}),a("getNouseCreate",{plan_id:e}),a("getPlanlist")}).catch(function(t){console.log(t)})},autoSelect:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.plan_id,i=e.creative_type,n=e.creative_num,o=e.creative_strategy,r=e.creative_classify,c=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].autoselect,l="";l+="plan_id="+s,l+="&creative_type="+i,l+="&creative_num="+n,l+="&creative_strategy="+o,l+="&creative_classify="+r,c+=l,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(c,{fullScreen:!0}).then(function(t){var e=t.data;e&&0!=e.length?a("delAllCreate",{planId:s,type:10,result:t.data}):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["g"])("没有找到合适的创意")}).catch(function(t){console.log(t)})},delAllCreate:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l,u,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.state,e.commit,s=e.dispatch,i=a.planId,n=a.type,o=a.result,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].delallcreate,c=[i],l=i,t.next=7,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(r,c).then(function(t){return t}).catch(function(t){console.log(t)});case 7:if(u=t.sent,0!=u.code){t.next=21;break}if(10!=n){t.next=18;break}if(o&&0!=o.length){t.next=13;break}return Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["g"])("未找到数据"),t.abrupt("return");case 13:d=[],o.forEach(function(t){var e={creativeId:t.id,planId:l,creativeStatus:t.status};d.push(e)}),s("addCreate",{option:d}),t.next=21;break;case 18:s("getInuseCreate",{plan_id:l,fullScreen:!0}),s("getNouseCreate",{plan_id:l}),s("getPlanlist");case 21:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),addAllCreate:function(t,e){var a=t.state,s=(t.commit,t.dispatch),i=e.planId,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addallcreate,"plan_id=").concat(i,"&keyword=").concat(a.plcreatekeyword,"&status=").concat(a.plcreatestatus,"&classify=").concat(a.plcreateclassify);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){var e=i;s("getInuseCreate",{plan_id:e}),s("getNouseCreate",{plan_id:e,fullScreen:!0}),s("getPlanlist")}).catch(function(t){console.log(t)})},getAccountList:function(t,e){t.state;var a=t.commit,s=e.plan_id,i=e.loadDom,n=void 0===i?"":i,o=e.fullScreen,r=void 0===o?"":o,c=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].accountlist;c+="plan_id="+s,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(c,{loadDom:n,fullScreen:r}).then(function(t){a("ACCOUNTLIST",t)}).catch(function(t){console.log(t)})},addAccount:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addaccount;console.log(s),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{fullScreen:!0}).then(function(t){var e=s[0].planId;a("getAccountList",{plan_id:e,fullScreen:!0}),a("getPlanlist")}).catch(function(t){console.log(t)})},delAccount:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].delaccount;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{fullScreen:!0}).then(function(t){var e=s[0].planId;a("getAccountList",{plan_id:e,fullScreen:!0}),a("getPlanlist")}).catch(function(t){console.log(t)})},getLog:function(t,e){t.state;var a=t.commit,s=e.plan_id,i=e.loadDom,n=void 0===i?"":i,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].planlog;o+="plan_id="+s,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o,{loadDom:n}).then(function(t){a("LOGLIST",t)}).catch(function(t){console.log(t)})},getLogdetail:function(t){var e=t.state,a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].logdetail+"batch_id="+e.logdetailid;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("LOGDETAIL",t)}).catch(function(t){console.log(t)})},createLogad:function(t,e){t.state;var a=t.commit,s=t.dispatch,i=e.option,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].logcreate;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,i).then(function(t){a("LOGCREATE",{res:t,option:i}),s("getLogdetail"),s("getPlanlist")}).catch(function(t){a("LOGCREATEFAIL"),console.log(t)})},getCreateNum:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].logcreatenum,"plan_id=").concat(e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("CREARENUM",t)}).catch(function(t){console.log(t)})},getCreateInfo:function(t,e){t.state;var a=t.commit,s=e.plan_id,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createinfo+"plan_id="+s;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("CREATEINFO",t)}).catch(function(t){console.log(t)})},editGener:function(t,e){t.state;var a=t.commit,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].editcreate,n=s.planInfoVO,o=s.route,r=s.projectid;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n,{fullScreen:!0}).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("编辑成功"),a("RESETEDIT"),setTimeout(function(){o.push("/project/".concat(r,"/plan"))},1e3)}).catch(function(t){})},openPlan:function(t,e){t.state,t.commit;var a=e.option,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].openplan;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,a).then(function(t){}).catch(function(t){console.log(t)})},closePlan:function(t,e){t.state,t.commit;var a=e.option,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].closeplan;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,a).then(function(t){}).catch(function(t){console.log(t)})},syncCreate:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l,u,d,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.state,e.commit,s=e.dispatch,i=a.planid,n=a.createnum,o=a.projectId,r="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].inusecreate,"plan_id=").concat(i,"&pageIndex=1&pageSize=").concat(n),c="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].accountlist,"plan_id=").concat(i),t.next=6,s("planCreateAccount",r);case 6:return l=t.sent,t.next=9,s("planCreateAccount",c);case 9:u=t.sent,d=l.data.list.map(function(t){return t.id}),m=u.data.usedAdaccounts.map(function(t){return t.fbId}),s("syncGroup",{accountIds:m.join(","),ids:d.join(","),projectId:o});case 13:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),planCreateAccount:function(t,e){t.state,t.commit;return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(e).then(function(t){return t}).catch(function(t){console.log(t)})},generTargetList:function(t,e){t.state;var a=t.commit,s=e.fb_account_ids,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].genertarget,"adaccount_ids=").concat(s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("GENERTARGET",t)}).catch(function(t){console.log(t)})},bidGuide:function(t,e){t.state;var a=t.commit,s=e.country,i=e.fbApplicationId,n=e.billingEvent,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].bidguide,"country=").concat(s,"&fbApplicationId=").concat(i,"&billingEvent=").concat(n);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o).then(function(t){a("BIDGUIDE",t)}).catch(function(t){console.log(t)})},getClassifyForPlan:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].classify.replace("{projectid}",e);Axios({url:s,success:function(t){a("CLASSIFYFORPLAN",t)}})},classifyFilterCount:function(t,e){t.state;var a=t.commit,s=e.planid,i=e.creativetype,n=e.classify,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].classifyfilter,"plan_id=").concat(s,"&creative_type=").concat(i,"&classify=").concat(n);Axios({url:o,success:function(t){a("CLASSIFYFILTERCOUNT",t)}})},classifyFilterCountNoPlan:function(t,e){t.state;var a=t.commit,s=e.country,i=e.gender,n=e.projectId,o=e.creativetype,r=e.classify,c="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].classifyfilternoplan,"country=").concat(s,"&gender=").concat(i,"&projectId=").concat(n,"&creative_type=").concat(o,"&classify=").concat(r);Axios({url:c,success:function(t){a("CLASSIFYFILTERCOUNT",t)}})},getAdPlanlist:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].planlist,"project_id=").concat(e,"&pageIndex=1&pageSize=1000");_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("ADPLANLIST",t)}).catch(function(t){console.log(t)})},getCustomEventAd:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].customevent+"applicationId="+e;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("CUSTOMEVENTAD",{r:t,applicationId:e})}).catch(function(t){console.log(t)})},deleteSearchCondition:function(t,e){t.state,t.commit,t.dispatch;var a=e.id,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deletecondition,"id=").concat(a);return Axios({url:s,success:function(t){return t}})},getSearchCondition:function(t,e){t.state;var a=t.commit,s=(t.dispatch,e.userId),i=e.projectId,n=e.tagType,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getcondition,"userId=").concat(s,"&projectId=").concat(i,"&tagType=").concat(n);return Axios({url:o,success:function(t){return a("GETCONDITION",{res:t,tagType:n}),t}})},saveSearchCondition:function(t,e){t.state,t.commit,t.dispatch;var a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].savecondition,s="";for(var i in e)s+="&".concat(i,"=").concat(e[i]);return a+=s.substring(1),Axios({url:a,fullscreen:!0,success:function(t){return t}})},getUpdateTime:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].updatetime;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("UPDATETIME",t)}).catch(function(t){console.log(t)})},getAdlist:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l,u,d,m,p,f,h,_,v,g,b,y,k,E,C,O,w,I,T,x,S,A;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.state,i=e.commit,n=e.dispatch,o=a.option,r=a.loading,void 0!==r&&r,c=a.fullScreen,l=void 0===c||c,u=a.type,d=a.editType,m=void 0===d?"":d,p=a.name,f=void 0===p?"":p,h=a.customOption,_=void 0===h?null:h,v=a.outNotify,g=void 0===v?null:v,b=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adlistnew,k=s.adprojectid,E=localStorage.getItem(adEventLS.new)&&JSON.parse(localStorage.getItem(adEventLS.new))[k]?JSON.parse(localStorage.getItem(adEventLS.new))[k].join(","):"",C=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__["a"])({startDate:s.adstarttime,endDate:s.adendtime},o),s.adaccountid&&s.adaccountid.length>0&&(C.accountIdStr=s.adaccountid.join(",")),s.adplanid&&(C.planId=s.adplanid),E&&(C.eventsName=E),O="","campaignName"==u&&(O="campaign_id"),"adSetName"==u&&(O="adset_id",s.campainsortlist.length>0&&(C.campaignIdInStr=s.campainsortlist.map(function(t){return t.campaignId}).join(","))),"adName"==u&&(O="ad_id",s.setsortlist.length>0?C.adSetIdInStr=s.setsortlist.map(function(t){return t.adsetId}).join(","):s.campainsortlist.length>0&&(C.campaignIdInStr=s.campainsortlist.map(function(t){return t.campaignId}).join(","))),C.groupByClause=O,l&&(y=element_ui__WEBPACK_IMPORTED_MODULE_21__["Loading"].service({fullscreen:l})),m){t.next=22;break}w=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adlisttotal,i("SETSTATE",{k:"adlisttotal",v:{}}),Axios({url:w,method:"post",data:C,success:function(t){i("ADLISTTOTAL",t)}}),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(b,C,{timeout:2e4}).then(function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:y&&y.close(),i("ADLIST",{res:e,type:u,dateCond:C.dateOptions,editType:m,name:f,customOption:_}),n("getUpdateTime");case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log("%c".concat(t),"color: blue"),y&&y.close(),i("ADLISTTIMEOUT")}),t.next=44;break;case 22:I=2500,T=C.pageSize,x=[],C.pageSize=I,S=0;case 27:if(!(S<T/I)){t.next=41;break}return C.pageNo=S+1,console.log("%cpage ".concat(S+1),"color: orange"),t.next=32,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(b,C).then(function(t){return t.data.list}).catch(function(t){console.log("%cexport ".concat(t),"color: blue")});case 32:if(A=t.sent,!(A&&A.length>0)){t.next=37;break}x=x.concat(A),t.next=38;break;case 37:return t.abrupt("break",41);case 38:S++,t.next=27;break;case 41:g.close(),i("SETSTATE",{k:"exportstatus",v:!0}),x.length>I*(Math.ceil(T/I)-1)?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["d"])("导出成功","正在下载文件"),i("ADLIST",{res:{data:{list:x}},type:u,dateCond:C.dateOptions,editType:m,name:f,customOption:_})):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["c"])("导出错误","接口超时，减少数据量后重试");case 44:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),changeAdstatus:function(t,e){var a,s=t.state,i=t.commit,n=t.dispatch,o=e.option,r=e.type,c=e.fullScreen,l=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].changeadstatus,u="";for(var d in o)o[d]&&(u+="&"+d+"="+o[d]);switch(l+=u.substr(1),r){case"campaignName":a="campain_option";break;case"adSetName":a="set_option";break;case"adName":a="ad_option";break}Axios({url:l,fullscreen:c,success:function(t){0==t.code&&(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("更新成功"),i("CHANGESTATUS",o),setTimeout(function(){n("getAdlist",{option:s[a],type:r})},2e3))}})},resetName:function(t,e){var a,s=t.state,i=(t.commit,t.dispatch),n=e.id,o=e.name,r=e.type,c="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].resetname);switch(r){case"campaignName":c+="fbAdCampaignId=".concat(n,"&name=").concat(o),a="campain_option";break;case"adSetName":c+="fbAdSetId=".concat(n,"&name=").concat(o),a="set_option";break;case"adName":c+="fbAdId=".concat(n,"&name=").concat(o),a="ad_option";break}_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(c,{fullScreen:!0}).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("重命名成功"),i("getAdlist",{option:s[a],type:r})}).catch(function(t){console.log(t)})},seekReplace:function(t,e){var a,s=t.state,i=(t.commit,t.dispatch),n=e.data,o=e.type,r="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].seekreplace),c="";switch(o){case"campaignName":r+="adCampaignData=".concat(n),a="campain_option",c="广告系列";break;case"adSetName":r+="adSetData=".concat(n),a="set_option",c="广告组";break;case"adName":r+="adData=".concat(n),a="ad_option",c="广告";break}Axios({url:r,fullscreen:!0,success:function(t){var e=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_entries__WEBPACK_IMPORTED_MODULE_3___default()(t.data),n=e.filter(function(t){return!t[1]});if(n.length>0){var r=n.map(function(t){return t[0]}).join(",");Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("以下".concat(c,"查找替换失败：").concat(r))}else Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("查找替换成功");i("getAdlist",{option:s[a],type:o})}})},seekReplaceCreate:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].seekreplacecreate;Axios({url:i,method:"post",data:s,fullscreen:!0,success:function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("提交成功"),clearInterval(jobProcess),setTimeout(function(){a("jobList")},2e3)}})},adGetCampaignlist:function(t,e){t.state;var a=t.commit,s=e.projectId,i=e.keyword,n=void 0===i?"":i,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcampaignlist,"project_id=").concat(s,"&keyword=").concat(n);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o).then(function(t){a("ADCAMPAIGNLIST",t)}).catch(function(t){console.log(t)})},adGetAdsetList:function(t,e){t.state;var a=t.commit,s=e.projectId,i=e.keyword,n=void 0===i?"":i,o="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createadsetlist,"project_id=").concat(s,"&keyword=").concat(n);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(o).then(function(t){a("ADSETLIST",t)}).catch(function(t){console.log(t)})},creativeDetail:function(t,e){t.state,t.commit;var a=e.creativeId,s=e.fullScreen,i=void 0!==s&&s,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].creativedetail,"fbCreativeIds=").concat(a);return Axios({url:n,fullscreen:i,success:function(t){return t}})},adCopy:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.orgId,i=e.distId,n=e.count,o=e.identify,r=e.type,c=e.projectId,l=e.fbAccountId,u=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adcopy,d=new FormData;if(d.append("copyNum",n),d.append("identify",o),d.append("projectId",c),l&&d.append("fbAccountId",l),"campaignName"==r)d.append("campaignId",s.join(","));else{var m=[];s.forEach(function(t,e){var a={targetId:1==i.length?i[0]:i[e],superId:t};m.push(a)}),d.append("copyVO",_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default()(m))}var p="";switch(r){case"campaignName":"campain_option",p="广告系列";break;case"adSetName":"set_option",p="广告组";break;case"adName":"ad_option",p="广告";break}_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(u,d,{fullScreen:!0}).then(function(t){if(0==t.data)Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("提交失败");else{var e=[];for(var s in t.data)t.data[s].b||e.push(s);e.length>0?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("".concat(p,"复制失败，请稍后重试，").concat(p,"ID：").concat(e.join("\n"))):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("提交成功"),clearInterval(jobProcess),setTimeout(function(){a("jobList")},2e3)}}).catch(function(t){console.log(t)})},asyncJobProcess:function(t){t.state,t.commit,t.dispatch;var e=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].joblist;return(new _js_axiosclass__WEBPACK_IMPORTED_MODULE_17__["a"]).get(e).then(function(t){return t})},jobList:function(){var t=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(e){var a,s,i,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.state,s=e.commit,i=e.dispatch,_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].joblist,t.t0=a.adtab,t.next="campaignName"===t.t0?5:"adSetName"===t.t0?7:"adName"===t.t0?9:11;break;case 5:return n="campain_option",t.abrupt("break",11);case 7:return n="set_option",t.abrupt("break",11);case 9:return n="ad_option",t.abrupt("break",11);case 11:return t.next=13,i("asyncJobProcess").catch(function(t){console.log(t),i("getAdlist",{option:a[n],type:a.adtab})});case 13:if(o=t.sent,o){t.next=16;break}return t.abrupt("return");case 16:if(0!=o.unCompleted){t.next=21;break}return i("getAdlist",{option:a[n],type:a.adtab}),t.abrupt("return");case 21:s("JOBPROCESS",o),i("getAdlist",{option:a[n],type:a.adtab});case 23:clearInterval(jobProcess),jobProcess=setInterval(Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i("asyncJobProcess");case 2:o=t.sent,0==o.unCompleted?(clearInterval(jobProcess),console.log("复制异步结束"),s("JOBPROCESSCOMPLETE",o),i("getAdlist",{option:a[n],type:a.adtab})):s("JOBPROCESS",o);case 4:case"end":return t.stop()}},t,this)})),5e3);case 25:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),joblistDetail:function(t){var e=t.state,a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].jobresultdetail).concat(e.jobfailkey);Axios({url:s,success:function(t){a("JOBLISTDETAIL",t)},fail:function(t){a("JOBLISTDETAILERROR")}})},copyCreateCampaign:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.name,i=e.accountId,n=e.orgId,o=e.count,r=e.identify,c=e.type,l=e.projectId,u=e.ifstride,d=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcampaign,m={adAccount:i,campaignName:s};_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(d,m,{fullScreen:!0}).then(function(t){"success"==t.data[0].status?a("adCopy",{orgId:n,distId:[t.data[0].campaignId],count:o,identify:r,type:c,projectId:l,fbAccountId:u?i:null}):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])(t.data[0].errorMsg)}).catch(function(t){console.log(t)})},calcuCount:function(t,e){t.state;var a=t.commit,s=e.id,i=e.type,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].calcucount,"ids=").concat(s.join(","),"&type=").concat(i);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("CALCUCOUNT",t)}).catch(function(t){console.log(t)})},createCampaign:function(t,e){t.state,t.commit,t.dispatch;var a=e.name,s=e.accountId,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcampaign,n={adAccount:s,campaignName:a};return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,n,{fullScreen:!0}).then(function(t){return t}).catch(function(t){console.log(t)})},getCampaignInfo:function(t,e){t.state;var a=t.commit,s=e.campaignId,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].campaigninfo,"campaignIds=").concat(s.join(","));_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("CAMPAIGNINFO",t)}).catch(function(t){console.log(t)})},editCampaign:function(t,e){var a=t.state,s=(t.commit,t.dispatch),i=e.campaignId,n=e.name,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].editcampaign,r={campaignList:i,campaignName:n};return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(o,r,{fullScreen:!0}).then(function(t){return t.data.find(function(t){return"failed"==t.status})||s("getAdlist",{option:a["campain_option"],type:"campaignName"}),t}).catch(function(t){console.log(t)})},getCreateCampaignlist:function(t,e){t.state;var a=t.commit,s=e.keyword,i=e.projectId,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcampaignlist,"keyword=").concat(s,"&project_id=").concat(i);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("CREATECAMPAIGNLIST",t)}).catch(function(t){console.log(t)})},createAdset:function(t,e){t.state,t.commit;var a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createadset;return Axios({url:a,method:"post",data:e,fullscreen:!0,success:function(t){return t}})},getAdsetInfo:function(t,e){t.state;var a=t.commit,s=e.adsetId,i=e.applicationid,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adsetinfo,"adsetIds=").concat(s.join(","));_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("ADSETINFO",{res:t,applicationid:i})}).catch(function(t){console.log(t)})},editAdset:function(t,e){var a=t.state,s=(t.commit,t.dispatch),i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].editadset;return Axios({url:i,method:"post",data:e,fullscreen:!0,success:function(t){return t.data.find(function(t){return"failed"==t.status})||s("getAdlist",{option:a["set_option"],type:"adSetName"}),t}})},getCreateAdsetlist:function(t,e){t.state;var a=t.commit,s=e.keyword,i=e.projectId,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createadsetlist,"keyword=").concat(s,"&project_id=").concat(i);return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("SETSTATE",{k:"adsetlistload",v:!1}),a("CREATEADSETLIST",t)}).catch(function(t){console.log(t)})},getSelectCreateList:function(t,e){t.state;var a=t.commit,s=e.creativityType,i=e.creativityName,n=e.classify,o=e.pageIndex,r=e.projectId,c="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createlist,"creativityType=").concat(s,"&creativityName=").concat(i,"&classify=").concat(n,"&pageIndex=").concat(o,"&pageSize=40&projectId=").concat(r);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(c).then(function(t){a("ADCREATELIST",t)}).catch(function(t){console.log(t)})},createAd:function(t,e){t.state,t.commit;var a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createad;return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(a,e,{fullScreen:!0}).then(function(t){return t}).catch(function(t){console.log(t)})},createEditAdAsync:function(t,e){t.state,t.commit;var a=t.dispatch,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createeditasync;return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(s,e).then(function(t){var e=t.data.filter(function(t){return"failed"==t.status});return 0==e.length?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("提交成功"),clearInterval(jobProcess),setTimeout(function(){a("jobList")},2e3),!0):(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("广告编辑失败，请稍后重试，".concat(e.map(function(t){return t.errMsg}).join(","))),!1)}).catch(function(t){console.log(t)})},getAdInfo:function(t,e){t.state;var a=t.commit,s=e.adId,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adinfo,"ads=").concat(s.join(","));_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i,{fullScreen:!0}).then(function(t){a("ADINFO",t)}).catch(function(t){console.log(t)})},isDynamicCreate:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].dynamiccreate,"fbCreativeIds=").concat(e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("DYNAMICCREATE",t)}).catch(function(t){console.log(t)})},editAd:function(t,e){var a=t.state,s=(t.commit,t.dispatch),i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].editad;return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,e,{fullScreen:!0}).then(function(t){return t.data.find(function(t){return"failed"==t.status})||s("getAdlist",{option:a["ad_option"],type:"adName"}),t}).catch(function(t){console.log(t)})},getAdsetCreateApplist:function(t,e){t.state;var a=t.commit,s=e.project_id,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].commonapps+"project_id="+s;Axios({url:i,success:function(t){a("SETADCREATEAPPLIST",t)}})},getAppInfo:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].appinfo,"apps=").concat(e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("ADAPPINFO",t)}).catch(function(t){console.log(t)})},getAdsetCreateAllpages:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].allpagelist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("CREATEALLPAGES",t)}).catch(function(t){console.log(t)})},getCalendarData:function(t,e){t.state;var a=t.commit,s=e.projectId,i=e.startDate,n=e.endDate,o=e.userOs,r="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].calendardata,"projectId=").concat(s,"&startDate=").concat(i,"&endDate=").concat(n,"&userOs=").concat(o);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){a("CALENDARDATE",t)}).catch(function(t){console.log(t)})},submitAfdata:function(t,e){t.state;var a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].submitafdata;return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(a,e,{fullScreen:!0,timeout:18e4}).then(function(t){return t}).catch(function(t){console.log(t)})},affileDownload:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].affiledownload,"fileName=").concat(e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("AFFILEDOWNLOAD",{r:t,name:e})}).catch(function(t){console.log(t)})},isActiveAd:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].isactivead,"adset_id=").concat(e);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("ACTIVEAD",t)}).catch(function(t){console.log(t)})},ruleListForAdd:function(t,e){t.state;var a=t.commit,s=e.fbAccountIds,i=e.level,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adrulelist,"fbAccountIds=").concat(s,"&level=").concat(i);Axios({url:n,success:function(t){a("ADRULELIST",t)}})},useRules:function(t,e){t.state,t.commit;var a=e.objIds,s=e.ruleIds,i=e.objLevel,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].userules,o=new FormData;return o.append("objIds",a),o.append("ruleIds",s),o.append("objLevel",i),Axios({url:n,method:"post",data:o,fullscreen:!0,success:function(t){return t.data?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("应用成功"):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("应用失败：".concat(t.msg)),t}})},singleRules:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].singlerules.replace("{objId}",e);Axios({url:s,success:function(t){a("SINGLERULES",t)}})},removeRules:function(t,e){t.state,t.commit;var a=e.objId,s=e.ruleIds,i=e.objLevel,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].removerule.replace("{objId}",a),o=new FormData;return o.append("ruleIds",s),o.append("objLevel",i),Axios({url:n,method:"post",fullscreen:!0,data:o,success:function(t){return t.data?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("移除成功"):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("移除失败：".concat(t.msg)),t}})},getCondition:function(t,e){t.state;var a=t.commit,s=e.projectId,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].conditionlist+"?projectId="+s;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("CONDITION",t)}).catch(function(t){console.log(t)})},getDataList:function(t,e){t.state;var a=t.commit,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].datalist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s).then(function(t){a("DATALIST",t)}).catch(function(t){console.log(t)})},getDataListout:function(t,e){t.state;var a=t.commit,s=e.option,i=e.name,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].datalist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){a("DATALISTOUT",{res:t,name:i})}).catch(function(t){console.log(t)})},geAdformList:function(t,e){t.state;var a=t.commit,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adformlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s).then(function(t){a("ADFORM",t)}).catch(function(t){console.log(t)})},geAdformListout:function(t,e){t.state;var a=t.commit,s=e.option,i=e.name,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adformlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){a("ADFORMOUT",{res:t,name:i})}).catch(function(t){console.log(t)})},getCreateformList:function(t,e){t.state;var a=t.commit,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createformlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{loadDom:"dataTable"}).then(function(t){a("CREATEFORM",t)}).catch(function(t){console.log(t)})},getCreatecardList:function(t,e){t.state;var a=t.commit,s=e.option,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcard;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(i,s,{loadDom:"dataTableCard"}).then(function(t){a("CREATECARD",t)}).catch(function(t){console.log(t)})},getCreateformListout:function(t,e){t.state;var a=t.commit,s=e.option,i=e.name,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createformlist;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){a("CREATEFORMOUT",{res:t,name:i})}).catch(function(t){console.log(t)})},getCreatecardListout:function(t,e){t.state;var a=t.commit,s=e.option,i=e.name,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].createcard;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){a("CREATECARDOUT",{res:t,name:i})}).catch(function(t){console.log(t)})},getDaycpiList:function(t,e){t.state;var a=t.commit,s=e.option,i=e.sort,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].daycpi;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){a("DAYCPI",t)}).catch(function(t){console.log(t)});var o=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({flag:"1",orderByClause:i},s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,o).then(function(t){a("DAYCPITABLE",t)}).catch(function(t){console.log(t)})},getDaycpiListout:function(t,e){t.state;var a=t.commit,s=e.option,i=e.name,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].daycpi;s.flag="1",_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].post(n,s).then(function(t){a("DAYCPIOUT",{res:t,name:i})}).catch(function(t){console.log(t)})},getOptionMore:function(t,e){t.state;var a=t.commit,s=e.projectId,i=e.campaignKeyword,n=e.creativeKeyword,o=e.accountKeyword,r=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getoptionmore,c="";c=i?"campaignKeyword":c,c=n?"creativeKeyword":c,c=o?"accountKeyword":c,r+=s?"projectId=".concat(s):"",r+=i?"&campaignKeyword=".concat(i):"",r+=n?"&creativeKeyword=".concat(n):"",r+=o?"&accountKeyword=".concat(o):"",console.log(c),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(r).then(function(t){a("OPTIONMORE",{res:t,keyword:c})}).catch(function(t){console.log(t)})},getMatterList:function(t,e){t.state;var a=t.commit,s=e.option,i=e.name,n=void 0===i?"":i,o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].matterlist;Axios({url:o,method:"post",data:s,fullscreen:!0,success:function(t){a("MATTERLIST",{res:t,type:s.materialType,name:n})}})},getVideoLink:function(t,e){t.state,t.commit;var a="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].getvideourl,"videoId=").concat(e);return _js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){return t}).catch(function(t){console.log(t)})},targetAdlist:function(t,e){t.state;var a=t.commit,s=(t.dispatch,e.option),i=e.type,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adlistnew;Axios({url:n,method:"post",data:s,success:function(t){"campaign"==i?a("TARGETADLIST",t):a("TARGETADSETLIST",{r:t,campaignid:s.campaignIdInStr})}})},getTargetlist:function(t){var e=t.state,a=t.commit,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(s.fullScreen,_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetlist),n=["projectId","type","keyword","adaccounts","pageIndex","pageSize"],o="";n.forEach(function(t){e["tg_"+t]&&(o+="&"+t+"="+e["tg_"+t])}),i+=o.substr(1),Axios({url:i,data:n,fullscreen:!0,success:function(t){a("TARGETLIST",t)}})},getTargetDetail:function(t,e){t.state;var a=t.commit,s=e.targetid,i=e.loadDom,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetdetail;n+="audience_id="+s,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n,{loadDom:i}).then(function(t){a("TARGETDETAIL",t)}).catch(function(t){console.log(t)})},appToAccount:function(t,e){t.state;var a=t.commit,s=e.appid,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].appmethod,"app_id=").concat(s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("APPACCOUNT",t)}).catch(function(t){console.log(t)})},addTarget:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.option,i=e.type,n=void 0===i?"":i,o="",r="";switch(n){case"auto":o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].autoliketarget,r="类似";break;case"page":o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].pageliketarget,r="类似";break;case"ad":o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].adliketarget,r="类似";break;case"special":o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].specialtarget,r="";break;default:o=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addtarget,r="自定义";break}return Axios({url:o,method:"post",data:s,fullscreen:!0,success:function(t){return"failed"==t.data.status?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])(t.data.errorMsg):(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("".concat(r,"受众").concat(s.fbAudienceId?"编辑":"创建","成功")),a("getTargetlist",{fullScreen:!0})),t}})},getAddDetail:function(t){var e=t.state,a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetadddetail,"audience_id=").concat(e.resultid);Axios({url:s,success:function(t){a("TARGETADDDETAIL",t)}})},getTargetInfo:function(t,e){t.state;var a=t.commit,s=e.id,i=e.type,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetinfo,"id=").concat(s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("TARGETINFO",{r:t,type:i})}).catch(function(t){console.log(t)})},getTargetAccount:function(t,e){t.state;var a=t.commit,s=e.targetid,i=e.loadDom,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetdetail;n+="audience_id="+s,_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n,{loadDom:i}).then(function(t){a("TARGETACCOUNT",t)}).catch(function(t){console.log(t)})},likeTarget:function(t,e){t.state;var a=t.commit,s=e.adaccount,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].liketarget,"adaccount=").concat(s,"&keyword=");Axios({url:i,success:function(t){a("LIKETARGET",t)}})},targetCampaigns:function(t,e){t.state;var a=t.commit,s=e.project_id,i=e.keyword,n=void 0===i?"":i,o=e.pageIndex,r=void 0===o?1:o,c=e.pageSize,l=void 0===c?50:c,u="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetcampaigns,"project_id=").concat(s,"&keyword=").concat(n,"&pageIndex=").concat(r,"&pageSize=").concat(l);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(u).then(function(t){a("TARGETCAMPAINGNS",{res:t,pageIndex:r})}).catch(function(t){console.log(t)})},getTargetCampaignAccount:function(t,e){t.state;var a=t.commit,s=e.project_id,i=e.batch_id,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].campaigntoaccount,"project_id=").concat(s,"&batch_id=").concat(i);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){a("TARGETCAMPAIGNACCOUNT",t)}).catch(function(t){console.log(t)})},deleteDetail:function(t,e){t.state;var a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deletedetail,"audience_ids=").concat(e);Axios({url:s,success:function(t){a("DELETEDETAIL",t)}})},submitDelete:function(t,e){t.state,t.commit;var a=t.dispatch,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetdelete,i=e;return Axios({url:s,method:"post",data:i,success:function(t){return a("getTargetlist",{fullScreen:!0}),t}})},submitShare:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.audienceList,i=e.adaccountList,n=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].targetshare,o={audienceList:s,adaccountList:i};return Axios({url:n,method:"post",data:o,success:function(t){return a("getTargetlist",{fullScreen:!0}),t}})},getRegular:function(t){var e=t.state,a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].regularlist,i=["ruleStatus","keyword","pageNo","pageSize"],n="";i.forEach(function(t){e["rg_"+t]&&(n+="&"+t+"="+e["rg_"+t])}),s+=n.substr(1),_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("REGULARLIST",t)}).catch(function(t){console.log(t)})},setRegularStatus:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.status,i=e.id,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].regularstatus,"ruleStatus=").concat(s,"&id=").concat(i);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(n).then(function(t){Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("规则状态已修改"),a("getRegular")}).catch(function(t){console.log(t)})},getTargetPlan:function(t,e){t.state;var a=t.commit,s=e.project_id,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].planlist,"project_id=").concat(s,"&pageIndex=1&pageSize=2000");_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("TARGETPLANLIST",t)}).catch(function(t){console.log(t)})},getAllRules:function(t){t.state;var e=t.commit,a=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].allrules;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(a).then(function(t){e("ALLRULES",t)}).catch(function(t){console.log(t)})},getReguFormData:function(t){t.state;var e=t.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.startTime,i=void 0===s?"":s,n=a.endTime,o=void 0===n?"":n,r=a.ruleGroupIds,c=void 0===r?"":r,l="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].reguformdata,"startTime=").concat(i,"&endTime=").concat(o,"&ruleGroupIds=").concat(c);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(l).then(function(t){e("REGUFORMDATA",t)}).catch(function(t){console.log(t)})},getMessageList:function(t){var e=t.state,a=t.commit,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].messagelist,"pageIndex=").concat(e.msgpageindex,"&pageSize=").concat(e.msgpagesize);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(s).then(function(t){a("MESSAGELIST",t)}).catch(function(t){console.log(t)})},updateMessage:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.ids,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].setmessage,"ids=").concat(s);_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(i).then(function(t){a("getMessageCount")}).catch(function(t){console.log(t)})},setAllRead:function(t){t.state,t.commit;var e=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].setallread;_js_axiospack__WEBPACK_IMPORTED_MODULE_16__["a"].get(e).then(function(t){}).catch(function(t){console.log(t)})},getSizeTrade:function(t,e){t.state;var a=t.commit,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].sizetrade+"key="+e;return Axios({url:s,success:function(t){a("template_size"==e?"TEMPSIZE":"TEMPTRADE",t)}})},getTemplateList:function(t){t.state;var e=t.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.size,i=void 0===s?"":s,n=a.business,o=void 0===n?"":n,r=a.pageIndex,c=a.pageSize,l="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].templatelist,"size=").concat(i,"&business=").concat(o,"&pageIndex=").concat(r,"&pageSize=").concat(c);Axios({url:l,fullscreen:!0,success:function(t){e("TEMPLATELIST",t)}})},addTemplate:function(t,e){t.state,t.commit;var a=e.option,s=e.route,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addtemplate;Axios({url:i,method:"post",data:a,fullscreen:!0,success:function(t){t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("模板保存成功"),setTimeout(function(){s.push("/templates")},500)):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("模板保存失败")}})},addSort:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.key,i=e.value,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].addsort,"key=").concat(s,"&value=").concat(i);Axios({url:n,success:function(t){t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("新增成功"),a("getSizeTrade","template_size"==s?"template_size":"template_business")):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("新增失败")}})},deleteTemp:function(t,e){t.state,t.commit;var a=e.id,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deletetemp,"id=").concat(a);return Axios({url:s,fullscreen:!0,success:function(t){return t.data?Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("删除成功"):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["a"])("删除失败"),t}})},deleteSizeTrade:function(t,e){t.state,t.commit;var a=t.dispatch,s=e.key,i=e.value,n="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deletesort,"key=").concat(s,"&value=").concat(i);Axios({url:n,success:function(t){t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("删除成功"),a("getSizeTrade","template_size"==s?"template_size":"template_business")):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("删除失败")}})},getTempDetail:function(t,e){t.state;var a=t.commit,s=e.id,i="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].tempdetail,"id=").concat(s);return Axios({url:i,success:function(t){return a("TEMPDETAIL",t),t.data}})},editTemplate:function(t,e){t.state,t.commit;var a=e.option,s=e.route,i=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].edittemp;Axios({url:i,method:"post",data:a,fullscreen:!0,success:function(t){t.data?(Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("模板编辑成功"),setTimeout(function(){s.push("/templates")},500)):Object(_js_message__WEBPACK_IMPORTED_MODULE_20__["f"])("模板编辑失败")}})},getTempImages:function(t){t.state;var e=t.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.pageIndex,i=void 0===s?1:s,n=a.pageSize,o=void 0===n?20:n,r="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].tempimagelist,"pageIndex=").concat(i,"&pageSize=").concat(o);Axios({url:r,fullscreen:!0,success:function(t){e("TEMPIMAGES",t)}})},saveTempImages:function(t,e){t.state,t.commit;var a=e.images,s=_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].savetempimage;return Axios({url:s,data:a,method:"post",success:function(t){return t}})},deleteTempImages:function(t,e){t.state,t.commit;var a=e.fileIds,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].deletetempimage,"fileIds=").concat(a);return Axios({url:s,fullscreen:!0,success:function(t){return t}})},downloadTempImages:function(t,e){t.state,t.commit;var a=e.fileIds,s="".concat(_js_url_js__WEBPACK_IMPORTED_MODULE_18__["a"].downloadtempimage,"fileIds=").concat(a);return Axios({url:s,success:function(t){return t}})}}},"6b25":function(t,e,a){"use strict";var s=a("ca43"),i=a.n(s);i.a},"6b3e":function(t,e,a){"use strict";var s=a("6ff5"),i=a.n(s);i.a},"6e05":function(t,e,a){"use strict";a.r(e);var s=a("e017"),i=a.n(s),n=a("21a1"),o=a.n(n),r=new i.a({id:"icon-right",use:"icon-right-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-right"><defs><style type="text/css"></style></defs><path d="M510.567403 63.852903c-246.304387 0-446.663336 200.358949-446.663336 446.663336 0 246.304387 200.358949 446.663336 446.663336 446.663336 246.304387 0 446.765664-200.358949 446.765664-446.663336C957.230738 264.211852 756.87179 63.852903 510.567403 63.852903L510.567403 63.852903zM787.979614 386.084941 454.593784 719.573099c-7.981613 7.981613-20.977316 7.981613-28.958929 0l-43.694214-43.694214c0 0 0 0 0 0L237.145998 531.084241c-7.981613-7.981613-7.981613-20.977316 0-28.958929l43.694214-43.694214c7.981613-7.981613 20.977316-7.981613 28.958929 0L440.063156 588.592785 715.326471 313.329469c7.981613-7.981613 20.977316-7.981613 29.061257 0L787.979614 357.126012C796.063556 365.107625 796.063556 378.103328 787.979614 386.084941L787.979614 386.084941z" p-id="13320" /></symbol>'});o.a.add(r);e["default"]=r},"6e6f":function(t,e,a){"use strict";var s=a("0220"),i=a.n(s);i.a},"6eac":function(t,e,a){},"6f5c":function(t,e,a){},"6f70":function(t,e,a){},"6ff5":function(t,e,a){},7138:function(t,e,a){},"718d":function(t,e,a){"use strict";var s=a("3e70"),i=a.n(s);i.a},"71ae":function(t,e,a){},"732e":function(t,e,a){"use strict";var s=a("52af"),i=a.n(s);i.a},"74d1":function(t,e,a){},"752c":function(t,e,a){},7591:function(t,e,a){"use strict";var s=a("9131"),i=a.n(s);i.a},7648:function(t,e,a){"use strict";var s=a("bf68"),i=a.n(s);i.a},"77d2":function(t,e,a){"use strict";e["a"]={development:{BASE_URL:"http://172.31.1.76:9600",UPLOAD_URL:"http://172.31.1.76/api",MD5_URL:"http://172.31.1.76/api",WEBSOCKET_URL:"172.31.1.76:9600"},production:{BASE_URL:"/api",UPLOAD_URL:"/api",WEBSOCKET_URL:"atom.unitymob.com/api",MD5_URL:""},testing:{BASE_URL:"/api",UPLOAD_URL:"/api",WEBSOCKET_URL:"172.31.1.45:9600",MD5_URL:""}}},7801:function(t,e,a){"use strict";var s=a("253a"),i=a.n(s);i.a},"783d":function(t,e,a){"use strict";var s=a("b792"),i=a.n(s);i.a},7888:function(t,e,a){"use strict";var s=a("a47b"),i=a.n(s);i.a},"790f":function(t,e,a){"use strict";var s=a("74d1"),i=a.n(s);i.a},"7a3f":function(t,e,a){"use strict";var s=a("f5fa"),i=a.n(s);i.a},"7ab7":function(t,e,a){},"7bd1":function(t,e,a){},"7c31":function(t,e,a){"use strict";var s=a("978f"),i=a.n(s);i.a},"7cf0":function(t,e,a){"use strict";var s=a("d5f4"),i=a.n(s);i.a},"7d55":function(t,e,a){},"7eb3":function(t,e,a){"use strict";var s=a("4fdf"),i=a.n(s);i.a},"7ec7":function(t,e,a){"use strict";var s=a("752c"),i=a.n(s);i.a},"7fdb":function(t,e,a){},8013:function(t,e,a){"use strict";var s=a("c1fc"),i=a.n(s);i.a},"810c":function(t,e,a){"use strict";var s=a("39ac"),i=a.n(s);i.a},"815e":function(t,e,a){"use strict";a.d(e,"f",function(){return i}),a.d(e,"a",function(){return n}),a.d(e,"g",function(){return o}),a.d(e,"b",function(){return r}),a.d(e,"d",function(){return c}),a.d(e,"c",function(){return l}),a.d(e,"e",function(){return u});var s=a("5c96");function i(t){Object(s["Message"])({message:t,type:"success",duration:5e3})}function n(t){Object(s["Message"])({message:t,type:"error",duration:5e3})}function o(t,e){Object(s["Message"])({message:t,type:"warning",duration:5e3,dangerouslyUseHTMLString:e})}function r(t,e,a){Object(s["Notification"])({title:t,message:e,duration:5e3,dangerouslyUseHTMLString:a})}function c(t,e,a){s["Notification"].success({title:t,message:e,duration:5e3,dangerouslyUseHTMLString:!0,onClick:a||null})}function l(t,e){s["Notification"].error({title:t,message:e,duration:5e3})}function u(t,e,a){s["Notification"].warning({title:t,message:e,duration:5e3,dangerouslyUseHTMLString:!0,onClick:a||null})}},"817a":function(t,e,a){},8184:function(t,e,a){"use strict";var s=a("d466"),i=a.n(s);i.a},8284:function(t,e,a){},8345:function(t,e,a){},8426:function(t,e,a){},8516:function(t,e,a){"use strict";var s=a("6710"),i=a.n(s);i.a},8521:function(t,e,a){"use strict";var s=a("dd4f"),i=a.n(s);i.a},"86b5":function(t,e,a){},"86f6":function(t,e,a){"use strict";var s=a("ac22"),i=a.n(s);i.a},"87bd":function(t,e,a){"use strict";var s=a("1718"),i=a.n(s);i.a},"89db":function(t,e,a){"use strict";var s=a("7fdb"),i=a.n(s);i.a},"8ca5":function(t,e,a){"use strict";var s=a("4a7b"),i=a.n(s);i.a},"8cc8":function(t,e,a){"use strict";var s=a("94be"),i=a.n(s);i.a},"8cd9":function(t,e,a){"use strict";var s=a("628f"),i=a.n(s);i.a},"8cff":function(t,e,a){},"8e93":function(t,e,a){},"8eb5":function(t,e,a){"use strict";var s=a("904d"),i=a.n(s);i.a},"8ed4":function(t,e,a){"use strict";var s=a("efe8"),i=a.n(s);i.a},"8faf":function(t,e,a){},"904d":function(t,e,a){},9099:function(t,e,a){"use strict";var s=a("c0e6"),i=a.n(s);i.a},9131:function(t,e,a){},"91e6":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e814"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5__),_js_message__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("815e");__webpack_exports__["a"]={props:["status"],data:function(){return{indicator:[],indicatortype:"",indicatorval:"",operation:"",operationlist:[],indicatornum:0,indicatornumend:0,indicatordata:"",indicatortime:"",indicatortimerange:[],indicatorselect:[],indicatorselectlist:[],ifedit:!1,indicatorOption:[{label:"最常见",value:"zcj",children:[{label:"已花费",value:"spent|1|已花费|true"},{label:"总花费",value:"lifetime_spent|1|总花费|false"},{label:"频次",value:"frequency|1|频次|true"},{label:"成效",value:"result|1|成效|true"},{label:"单次成效费用",value:"cost_per|1|单次成效费用|true"},{label:"移动应用安装",value:"mobile_app_install|1|移动应用安装|true"},{label:"单次移动应用安装费用",value:"cost_per_mobile_app_install|1|单次移动应用安装费用|true"},{label:"广告花费回报（ROAS）-移动应用购物",value:"mobile_app_purchase_roas|1|广告花费回报（ROAS）-移动应用购物|false"},{label:"广告花费回报（ROAS）-网站购物",value:"website_purchase_roas|1|广告花费回报（ROAS）-网站购物|false"},{label:"单日花费比率",value:"daily_ratio_spent|1|单日花费比率|true"},{label:"总花费比率",value:"lifetime_ratio_spent|1|总花费比率|true"},{label:"受众覆盖%",value:"audience_reached_percentage|1|受众覆盖%|true"}]},{label:"设置",value:"sz",children:[{label:"广告系列名称",value:"campaign.name|2|广告系列名称|true"},{label:"广告组名称",value:"adset.name|2|广告组名称|true"},{label:"版位",value:"adset.placement.page_types|3|版位|false"},{label:"总预算",value:"lifetime_budget|1|总预算|true"},{label:"单日预算",value:"daily_budget|1|单日预算|true"},{label:"竞价金额",value:"bid_amount|1|竞价金额|true"},{label:"付费事件",value:"billing_event|3|付费事件|true"},{label:"优化目标",value:"optimization_goal|3|优化目标|true"}]},{label:"时间",value:"sj",children:[{label:"创建时间（小时）",value:"hours_since_creation|1|创建时间（小时）|false"},{label:"投放时间（秒）",value:"active_time|1|投放时间（秒）|false"},{label:"当前时间",value:"current_time|4|当前时间|false"},{label:"创建时间",value:"created_time|4|创建时间|true"},{label:"上次编辑时间",value:"updated_time|4|上次编辑时间|true"},{label:"开始时间",value:"start_time|4|开始时间|true"}]},{label:"移动应用事件",value:"ydyysj",children:[{label:"所有移动应用事件",value:"app_custom_event|1|所有移动应用事件|true"},{label:"移动应用解锁成就",value:"app_custom_event.fb_mobile_achievement_unlocked|1|移动应用解锁成就|true"},{label:"移动应用会话",value:"app_custom_event.fb_mobile_activate_app|1|移动应用会话|true"},{label:"移动应用添加支付信息",value:"app_custom_event.fb_mobile_add_payment_info|1|移动应用添加支付信息|true"},{label:"移动应用加入购物车",value:"app_custom_event.fb_mobile_add_to_cart|1|移动应用加入购物车|true"},{label:"移动应用加入心愿单",value:"app_custom_event.fb_mobile_add_to_wishlist|1|移动应用加入心愿单|true"},{label:"移动应用完成注册",value:"app_custom_event.fb_mobile_complete_registration|1|移动应用完成注册|true"},{label:"移动应用内容查看",value:"app_custom_event.fb_mobile_content_view|1|移动应用内容查看|true"},{label:"移动应用发起结账",value:"app_custom_event.fb_mobile_initiated_checkout|1|移动应用发起结账|true"},{label:"移动应用关卡完成",value:"app_custom_event.fb_mobile_level_achieved|1|移动应用关卡完成|true"},{label:"移动应用购物",value:"app_custom_event.fb_mobile_purchase|1|移动应用购物|true"},{label:"移动应用提交评分",value:"app_custom_event.fb_mobile_rate|1|移动应用提交评分|true"},{label:"移动应用搜索",value:"app_custom_event.fb_mobile_search|1|移动应用搜索|true"},{label:"移动应用点数花费",value:"app_custom_event.fb_mobile_spent_credits|1|移动应用点数花费|true"},{label:"移动应用完成教程",value:"app_custom_event.fb_mobile_tutorial_completion|1|移动应用完成教程|true"},{label:"移动应用其他操作",value:"app_custom_event.other|1|移动应用其他操作|true"}]},{label:"单次移动应用事件费用",value:"dcydyysjfy",children:[{label:"单次移动应用成就解锁费用",value:"cost_per_mobile_achievement_unlocked|1|单次移动应用成就解锁费用|true"},{label:"单次移动应用会话费用",value:"cost_per_mobile_activate_app|1|单次移动应用会话费用|true"},{label:"单次移动应用添加支付信息费用",value:"cost_per_mobile_add_payment_info|1|单次移动应用添加支付信息费用|true"},{label:"单次移动应用加入购物车费用",value:"cost_per_mobile_add_to_cart|1|单次移动应用加入购物车费用|true"},{label:"单次移动应用加入心愿单费用",value:"cost_per_mobile_add_to_wishlist|1|单次移动应用加入心愿单费用|true"},{label:"单次移动应用完成注册费用",value:"cost_per_mobile_complete_registration|1|单次移动应用完成注册费用|true"},{label:"单次移动应用内容查看费用",value:"cost_per_mobile_content_view|1|单次移动应用内容查看费用|true"},{label:"单次移动应用发起结账费用",value:"cost_per_mobile_initiated_checkout|1|单次移动应用发起结账费用|true"},{label:"单次移动应用关卡完成费用",value:"cost_per_mobile_level_achieved|1|单次移动应用关卡完成费用|true"},{label:"单次移动应用购物费用",value:"cost_per_mobile_purchase|1|单次移动应用购物费用|true"},{label:"单次移动应用提交评分费用",value:"cost_per_mobile_rate|1|单次移动应用提交评分费用|true"},{label:"单次移动应用搜索费用",value:"cost_per_mobile_search|1|单次移动应用搜索费用|true"},{label:"单次移动应用点数花费的广告费用",value:"cost_per_mobile_spent_credits|1|单次移动应用点数花费的广告费用|true"},{label:"单次移动应用完成教程学习费用",value:"cost_per_mobile_tutorial_completion|1|单次移动应用完成教程学习费用|true"}]},{label:"其他",value:"qt",children:[{label:"其他点击费用（链接）",value:"cost_per_link_click|1|其他点击费用（链接）|true"},{label:"链接点击量",value:"link_clicks|1|链接点击量|true"},{label:"千次发展费用",value:"cpm|1|千次发展费用|true"},{label:"点击率（链接）",value:"link_ctr|1|点击率（链接）|true"},{label:"总展示量",value:"lifetime_impressions|1|总展示量|false"},{label:"展示次数",value:"impressions|1|展示次数|true"},{label:"覆盖人数",value:"reach|1|覆盖人数|true"},{label:"潜在客户",value:"leadgen|1|潜在客户|true"},{label:"操作",value:"actions|1|操作|true"},{label:"点击量",value:"clicks|1|点击量|true"},{label:"CPA",value:"cpa|1|CPA|true"},{label:"CPC",value:"cpc|1|CPC|true"},{label:"点击率",value:"ctr|1|点击率|true"},{label:"成效率",value:"result_rate|1|成效率|true"},{label:"单次独立点击费用",value:"cost_per_unique_click|1|单次独立点击费用|true"},{label:"独立用户点击量",value:"unique_clicks|1|独立用户点击量|true"},{label:"今日花费",value:"today_spent|1|今日花费|false"},{label:"昨日花费",value:"yesterday_spent|1|昨日花费|false"},{label:"帖文互动",value:"post_engagement|1|帖文互动|true"},{label:"单次帖文互动",value:"cost_per_post_engagement|1|单次帖文互动|false"},{label:"观看视频达3秒的次数",value:"video_view|1|观看视频达3秒的次数|true"},{label:"单次视频观看费用",value:"cost_per_video_view|1|单次视频观看费用|false"},{label:"主页赞",value:"like|1|主页赞|true"},{label:"站外互动",value:"offsite_engagement|1|站外互动|true"},{label:"帖子",value:"post|1|帖子|true"},{label:"帖子评论",value:"post_comment|1|帖子评论|true"},{label:"帖子获赞",value:"post_like|1|帖子获赞|true"},{label:"帖子心情",value:"post_reaction|1|帖子心情|true"},{label:"内容查看",value:"view_content|1|内容查看|true"},{label:"点击播放视频",value:"video_play|1|点击播放视频|true"},{label:"提问回答",value:"vote|1|提问回答|true"},{label:"新增消息联系人数量",value:"onsite_conversion.messaging_first_reply|1|新增消息联系人数量|true"},{label:"单次新增消息联系人费用",value:"cost_per_messaging_first_reply|1|单次新增消息联系人费用|true"},{label:"消息回复次数",value:"onsite_conversion.messaging_reply|1|消息回复次数|true"},{label:"单次消息回复费用",value:"cost_per_messaging_reply|1|单次消息回复费用|true"},{label:"预估预算花费%",value:"estimated_budget_spending_percentage|1|预估预算花费%|true"}]}]}},methods:{editRuleInit:function(t){var e=this;console.log(t),t.forEach(function(t){for(var a=null,s="",i=0;i<e.indicatorOption.length;i++)if(a=e.indicatorOption[i].children.find(function(e){return e.value.split("|")[0]==t.field}),a){s=e.indicatorOption[i].value;break}a.value.split("|");e.indicator=[s,a.value],e.selectIndicator(),e.operation=e.operationlist.find(function(e){return e.imp==t.operator}).key;var n=e.indicator[1].split("|"),o=e.dollarCheck(n[0]);switch(e.indicatortype){case"1":"1"==e.operation||"2"==e.operation?e.indicatornum=o?t.value/100:t.value:(e.indicatornum=o?t.value[0]/100:t.value[0],e.indicatornumend=o?t.value[1]/100:t.value[1]);break;case"2":e.indicatordata=t.value;break;case"3":e.indicatorselect=t.value;break;case"4":"1"==e.operation||"2"==e.operation?e.indicatortime=new Date(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(t.value)):e.indicatortimerange=t.value.map(function(t){return new Date(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(t))});break}e.determineSearch("hole")})},editInit:function(t){this.indicator=t.indicator,this.ifedit=!0,this.selectIndicator(),this.operation=t.operation;var e=t.option,a=this.indicator[1].split("|"),s=this.dollarCheck(a[0]);switch(this.indicatortype){case"1":"1"==this.operation||"2"==this.operation?this.indicatornum=s?e.value/100:e.value:(this.indicatornum=s?e.value[0]/100:e.value[0],this.indicatornumend=s?e.value[1]/100:e.value[1]);break;case"2":this.indicatordata=e.value;break;case"3":this.indicatorselect=e.value;break;case"4":"1"==this.operation||"2"==this.operation?this.indicatortime=new Date(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_2___default()(e.value)):this.indicatortimerange=e.value.map(function(t){return new Date(t)});break}},selectIndicator:function(){var t=this.indicator[1].split("|");this.indicatortype=t[1],this.indicatorval=t[0];var e={"adset.placement.page_types":[{name:"Facebook动态（桌面版）",key:"DESKTOPFEED"},{name:"Facebook动态（移动版）",key:"MOBILEFEED"},{name:"Facebook右边栏",key:"RIGHTCOLUMN"},{name:"Instagram动态",key:"INSTAGRAMSTREAM"},{name:"Instagram快拍",key:"INSTAGRAMSTORY"},{name:"Audience Network",key:"MOBILEEXTERNAL"},{name:"Messenger收件箱",key:"MESSENGER_HOME"},{name:"Facebook Marketplace",key:"MOBILE-MARKETPLACE"}],billing_event:[{name:"展示次数",key:"IMPRESSIONS"},{name:"应用安装",key:"APP_INSTALLS"},{name:"点击",key:"CLICKS"},{name:"链接点击量（单次点击费用）",key:"LINK_CLICKS"},{name:"领取优惠",key:"OFFER_CLAIMS"},{name:"主页赞",key:"PAGE_LIKES"},{name:"帖文互动",key:"POST_ENGAGEMENT"},{name:"观看视频达10秒的次数",key:"VIDEO_VIEWS"}],optimization_goal:[{name:"应用安装量",key:"APP_INSTALLS"},{name:"品牌知名度",key:"BRAND_AWARENESS"},{name:"广告点击量",key:"CLICKS"},{name:"互动用户",key:"ENGAGED_USERS"},{name:"FBX使用率",key:"EXTERNAL"},{name:"活动响应",key:"EVENT_RESPONSES"},{name:"展示次数",key:"IMPRESSIONS"},{name:"开发潜在客户",key:"LEAD_GENERATION"},{name:"链接点击量",key:"LINK_CLICKS"},{name:"优惠领取",key:"OFFER_CLAIMS"},{name:"转化量",key:"OFFSITE_CONVERSIONS"},{name:"主页互动",key:"PAGE_ENGAGEMENT"},{name:"主页赞",key:"PAGE_LIKES"},{name:"帖文互动",key:"POST_ENGAGEMENT"},{name:"单日独立覆盖人数",key:"REACH"},{name:"回复次数",key:"REPLIES"},{name:"社交展示次数",key:"SOCIAL_IMPRESSIONS"},{name:"观看视频达10秒的次数",key:"VIDEO_VIEWS"}]};switch(this.indicatortype){case"1":this.operationlist=[{name:"大于",key:"1",imp:"GREATER_THAN"},{name:"小于",key:"2",imp:"LESS_THAN"},{name:"介于",key:"3",imp:"IN_RANGE"},{name:"不介于",key:"4",imp:"NOT_IN_RANGE"}];break;case"2":this.operationlist=[{name:"包含",key:"1",imp:"CONTAIN"},{name:"不包含",key:"2",imp:"NOT_CONTAIN"}];break;case"3":"adset.placement.page_types"==this.indicatorval?this.operationlist=[{name:"包含任意",key:"1",imp:"ANY"},{name:"包含所有",key:"2",imp:"ALL"},{name:"不包含",key:"3",imp:"NONE"}]:this.operationlist=[{name:"是",key:"1",imp:"IN"},{name:"不是",key:"2",imp:"NOT_IN"}],this.indicatorselectlist=e[this.indicatorval];break;case"4":this.operationlist=[{name:"大于",key:"1",imp:"GREATER_THAN"},{name:"小于",key:"2",imp:"LESS_THAN"},{name:"介于",key:"3",imp:"IN_RANGE"},{name:"不介于",key:"4",imp:"NOT_IN_RANGE"}];break}this.operation="1",this.indicatorselect=[]},dataCheck:function(){if(0==this.indicator.length)return[!1,"请选择指标名称"];if(""==this.operation)return[!1,"请选择运算"];switch(this.indicatortype){case"2":if(""==this.indicatordata)return[!1,"请填写内容"];break;case"3":if(""==this.indicatorselect)return[!1,"请选择内容"];break;case"4":if("1"==this.operation||"2"==this.operation){if(""==this.indicatortime)return[!1,"请选择日期"]}else if(!this.indicatortimerange||2!=this.indicatortimerange.length)return[!1,"请选择日期"];break}return[!0]},dollarCheck:function(t){return-1==t.indexOf("ratio")&&(-1!=t.indexOf("amount")||-1!=t.indexOf("cost")||-1!=t.indexOf("budget")||-1!=t.indexOf("spent")||-1!=t.indexOf("cpm")||-1!=t.indexOf("cpc")||-1!=t.indexOf("cpa"))},determineSearch:function determineSearch(frm){var _this2=this,check=this.dataCheck();if(check[0]){var val,indicator=this.indicator[1].split("|"),key=indicator[0],compare=this.operationlist.find(function(t){return t.key==_this2.operation}),name="".concat(indicator[2]).concat(compare.name),trigger=eval(indicator[3]),ifdollar=this.dollarCheck(indicator[0]);switch(this.indicatortype){case"1":"1"==this.operation||"2"==this.operation?(val=ifdollar?100*this.indicatornum:this.indicatornum,name+=(ifdollar?"$":"")+this.indicatornum):(val=[ifdollar?100*this.indicatornum:this.indicatornum,ifdollar?100*this.indicatornumend:this.indicatornumend],name+=(ifdollar?"$":"")+this.indicatornum+"和"+(ifdollar?"$":"")+this.indicatornumend);break;case"2":val=this.indicatordata,name+=this.indicatordata;break;case"3":val=this.indicatorselect;var indicatorselectname=this.indicatorselect.map(function(t){return _this2.indicatorselectlist.find(function(e){return e.key==t}).name});name+=indicatorselectname.join(",");break;case"4":"1"==this.operation||"2"==this.operation?(val=new Date(this.indicatortime).getTime().toString(),name+=this.$timeFormat(this.indicatortime,"yyyy-MM-dd HH:mm:ss")):(val=this.indicatortimerange.map(function(t){return new Date(t).getTime().toString()}),name+=this.$timeFormat(this.indicatortimerange[0],"yyyy-MM-dd HH:mm:ss")+"和"+this.$timeFormat(this.indicatortimerange[1],"yyyy-MM-dd HH:mm:ss"));break}var option={field:key,value:val,operator:compare.imp};this.$emit("returnCondition",{name:name,key:key,option:option,trigger:trigger,indicator:this.indicator,operation:this.operation}),this.ifedit=!1,"hole"==frm?this.reset():this.cancelSearch()}else Object(_js_message__WEBPACK_IMPORTED_MODULE_6__["g"])(check[1])},cancelSearch:function(){this.$emit("update:status",!1),this.ifedit&&this.$emit("cancelCondition"),this.reset()},reset:function(){this.indicator=[],this.indicatortype="",this.indicatorval="",this.operation="",this.operationlist=[],this.indicatornum=0,this.indicatornumend=0,this.indicatordata="",this.indicatortime="",this.indicatortimerange=[],this.indicatorselect=[],this.indicatorselectlist=[],this.ifedit=!1},selectOperation:function(){}}}},"922a":function(t,e,a){"use strict";var s=a("5808"),i=a.n(s);i.a},9341:function(t,e,a){"use strict";var s=a("7d55"),i=a.n(s);i.a},"938a":function(t,e,a){},"94be":function(t,e,a){},9533:function(t,e,a){"use strict";var s=a("7ab7"),i=a.n(s);i.a},9542:function(t,e,a){},"95c5":function(t,e,a){"use strict";var s=a("1133"),i=a.n(s);i.a},"96ba":function(t,e,a){"use strict";var s=a("b802"),i=a.n(s);i.a},"978f":function(t,e,a){},"98ee":function(t,e,a){"use strict";var s=a("8284"),i=a.n(s);i.a},"990c":function(t,e,a){},"9a47":function(t,e,a){"use strict";var s=a("a7e6"),i=a.n(s);i.a},"9a66":function(t,e,a){"use strict";var s=a("b8e2"),i=a.n(s);i.a},"9adb":function(t,e,a){"use strict";var s=a("c3e0"),i=a.n(s);i.a},"9cdd":function(t,e,a){},"9d24":function(t,e,a){"use strict";a("3b2b"),a("a481"),a("386d"),a("4917");e["a"]={getSearch:function(t,e){var a=e?e.match(/(?:\?)[^\#]*/g)[0].substr(1):location.search.substr(1);if(!a)return null;var s=new URLSearchParams(a);return s.get(t)},timeFormat:function(t,e){if(!t)return"";var a=new Date;a.setTime(t);var s=a.getFullYear(),i=e||"yyyy-MM-dd HH:mm:ss",n={M:a.getMonth()+1,d:a.getDate(),H:a.getHours(),m:a.getMinutes(),s:a.getSeconds()};for(var o in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,s)),n)new RegExp("("+o+"+)").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substring((""+n[o]).length)));return i},exportHTML:function(t,e,a,s){var i={xls:"application/vnd.ms-excel",csv:"text/csv"},n=a||document.getElementById(t).outerHTML,o=e||"数据",r=s||"xls",c='<html><head><meta charset="UTF-8"></head><body>'.concat(n,"</body></html>"),l=new Blob([c],{type:i[r]}),u=document.createElement("a");u.href=URL.createObjectURL(l),u.download="".concat(o,".").concat(r),u.click()},exportEXCEL:function(t,e,a,s){var i={xls:"application/vnd.ms-excel",csv:"text/csv"},n=a||document.getElementById(t).outerHTML,o=e||"数据",r=s||"xls",c="".concat(n),l=new Blob([c],{type:i[r]}),u=document.createElement("a");u.href=URL.createObjectURL(l),u.download="".concat(o,".").concat(r),u.click()},transFormdata:function(t,e,a){return Array,e}}},"9ea3":function(t,e,a){},"9f32":function(t,e,a){"use strict";var s=a("54e5"),i=a.n(s);i.a},a097:function(t,e,a){"use strict";var s=a("30d4"),i=a.n(s);i.a},a0b8:function(t,e,a){"use strict";var s=a("2743"),i=a.n(s);i.a},a264:function(t,e,a){},a28d:function(t,e,a){},a2f2:function(t,e,a){},a351:function(t,e,a){},a47b:function(t,e,a){},a614:function(t,e,a){"use strict";var s=a("a624"),i=a.n(s);i.a},a624:function(t,e,a){},a6f2:function(t,e,a){"use strict";var s=a("576b"),i=a.n(s);i.a},a7e6:function(t,e,a){},a970:function(t,e,a){},ac22:function(t,e,a){},afc0:function(t,e,a){"use strict";var s=a("66ab"),i=a.n(s);i.a},b04d:function(t,e,a){},b15c:function(t,e,a){},b30b:function(t,e,a){},b407:function(t,e,a){"use strict";var s=a("6eac"),i=a.n(s);i.a},b45e:function(t,e,a){},b6f0:function(t,e,a){},b792:function(t,e,a){},b802:function(t,e,a){},b83c:function(t,e,a){},b893:function(t,e,a){"use strict";var s=a("0cf7"),i=a.n(s);i.a},b8e2:function(t,e,a){},b938:function(t,e,a){"use strict";var s=a("2eb0"),i=a.n(s);i.a},bb40:function(t,e,a){"use strict";var s=a("2dfc"),i=a.n(s);i.a},bb65:function(t,e,a){"use strict";var s=a("1dd2"),i=a.n(s);i.a},bb78:function(t,e,a){},bb87:function(t,e,a){},bbce:function(t,e,a){},bde9:function(t,e,a){"use strict";a.r(e);var s=a("e017"),i=a.n(s),n=a("21a1"),o=a.n(n),r=new i.a({id:"icon-Facebook",use:"icon-Facebook-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-Facebook"><defs><style type="text/css"></style></defs><path d="M967.601349 1024c31.076808 0 56.398651-25.321843 56.398651-56.398651V56.398651c0-31.076808-25.321843-56.398651-56.398651-56.398651H56.398651C25.321843 0 0 25.321843 0 56.398651v910.819034c0 31.076808 25.321843 56.398651 56.398651 56.398651h911.202698z" fill="#3C5A99" p-id="2525" /><path d="M706.709629 1024V627.29112h133.13151l19.950543-154.61671h-153.082053V374.072686c0-44.888722 12.277257-75.198202 76.732859-75.198201h81.720494v-138.119146c-14.195579-1.918321-62.920944-6.138629-119.319595-6.138629-118.168602 0-198.738104 72.128887-198.738104 204.109405v113.948295h-133.515174v154.61671h133.515174v396.70888h159.604346z" fill="#FFFFFF" p-id="2526" /></symbol>'});o.a.add(r);e["default"]=r},be7b:function(t,e,a){"use strict";var s=a("ff5e"),i=a.n(s);i.a},be7e:function(t,e,a){"use strict";a.r(e);var s=a("e017"),i=a.n(s),n=a("21a1"),o=a.n(n),r=new i.a({id:"icon-turn",use:"icon-turn-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-turn"><defs><style type="text/css"></style></defs><path d="M941.728 137.152C941.728 122.304 932.576 109.152 919.456 103.424 905.728 97.728 889.728 100.576 879.456 111.424L805.152 185.152C724.576 109.152 615.456 64 502.88 64 261.152 64 64 261.152 64 502.88 64 744.576 261.152 941.728 502.88 941.728 633.728 941.728 757.152 884 840.576 783.424 846.304 776 846.304 765.152 839.456 758.88L761.152 680C757.152 676.576 752 674.88 746.88 674.88 741.728 675.424 736.576 677.728 733.728 681.728 677.728 754.304 593.728 795.424 502.88 795.424 341.728 795.424 210.304 664 210.304 502.88 210.304 341.728 341.728 210.304 502.88 210.304 577.728 210.304 648.576 238.88 702.304 288.576L623.456 367.424C612.576 377.728 609.728 393.728 615.456 406.88 621.152 420.576 634.304 429.728 649.152 429.728L905.152 429.728C925.152 429.728 941.728 413.152 941.728 393.152L941.728 137.152Z" p-id="21532" fill="#fff" /></symbol>'});o.a.add(r);e["default"]=r},be9b:function(t,e,a){"use strict";var s=a("3784"),i=a.n(s);i.a},bef5:function(t,e,a){"use strict";var s=a("795b"),i=a.n(s),n=a("d225"),o=a("b0b4"),r=a("bc3a"),c=a.n(r),l=a("815e"),u=a("77d2"),d=a("5c96"),m=function(){function t(){return Object(n["a"])(this,t),this.axios=c.a.create({baseURL:u["a"]["production"].BASE_URL,timeout:6e4,headers:{"X-Token":localStorage.getItem("atom_token")},loadDom:""}),this.load,this.init(),this.axios}return Object(o["a"])(t,[{key:"init",value:function(){var t=this;this.axios.interceptors.request.use(function(e){if(e.loadDom||e.fullScreen){var a=document.getElementById(e.loadDom);t.load=d["Loading"].service({target:a,fullscreen:e.fullScreen})}return e}),this.axios.interceptors.response.use(function(e){t.load&&t.load.close();var a=e.data;return a.code&&0!=a.code?(Object(l["a"])(a.msg),1e3===a.code&&(location.href="/login.html"),i.a.reject("error")):a})}}]),t}();e["a"]=m},bf68:function(t,e,a){},bf98:function(t,e,a){"use strict";var s=a("938a"),i=a.n(s);i.a},c03a:function(t,e,a){"use strict";var s=a("2092"),i=a.n(s);i.a},c09e:function(t,e,a){"use strict";var s=a("e69e"),i=a.n(s);i.a},c0e6:function(t,e,a){},c11b:function(t,e,a){"use strict";var s=a("308d"),i=a("4e2b"),n=a("6bb5"),o=a("2a88"),r=a("013f"),c=a("d225"),l=a("b0b4"),u=a("bd86"),d=a("dd46"),m=function(){function t(){Object(c["a"])(this,t),Object(u["a"])(this,"timeout",6e4),Object(u["a"])(this,"heartRun",null),Object(u["a"])(this,"callback",null)}return Object(l["a"])(t,[{key:"set",value:function(t,e){this[t]=e}},{key:"reset",value:function(){clearTimeout(this.heartRun),this.start()}},{key:"start",value:function(){var t=this;this.heartRun=setTimeout(function(){t.callback&&t.callback()},this.timeout)}}]),t}(),p=function(t){function e(t){var a;return Object(c["a"])(this,e),a=Object(s["a"])(this,Object(n["a"])(e).call(this)),Object(u["a"])(Object(r["a"])(Object(r["a"])(a)),"socket",null),Object(u["a"])(Object(r["a"])(Object(r["a"])(a)),"url",d["a"].messageCountWebsocket),Object(u["a"])(Object(r["a"])(Object(r["a"])(a)),"connectRock",!1),Object(u["a"])(Object(r["a"])(Object(r["a"])(a)),"onMessage",null),Object(o["a"])(Object(n["a"])(e.prototype),"set",Object(r["a"])(a)).call(Object(r["a"])(a),"callback",a.sendInfo),a.onMessage=t.onMessage,a.connect(),a}return Object(i["a"])(e,t),Object(l["a"])(e,[{key:"connect",value:function(){try{this.socket=new WebSocket("".concat(this.url).concat(localStorage.getItem("atom_id"))),this.init()}catch(t){console.log(t)}}},{key:"init",value:function(){var t=this;this.socket.onopen=function(){Object(o["a"])(Object(n["a"])(e.prototype),"start",t).call(t)},this.socket.onmessage=function(a){Object(o["a"])(Object(n["a"])(e.prototype),"reset",t).call(t),t.onMessage&&"heart beat"!=a&&t.onMessage(a)},this.socket.onerror=function(e){t.reConnect("error")},this.socket.onclose=function(e){console.log("websocket 断开: "+e.code+" "+e.reason+" "+e.wasClean),t.reConnect("close")}}},{key:"sendInfo",value:function(){try{1==this.socket.readyState&&this.socket.send("heart beat")}catch(t){console.log(t)}}},{key:"reConnect",value:function(t){var e=this;this.connectRock||(this.connectRock=!0,setTimeout(function(){e.connectRock=!1,e.connect()},6e3))}}]),e}(m);e["a"]=p},c17a:function(t,e,a){"use strict";var s=a("4e98"),i=a.n(s);i.a},c1a2:function(t,e,a){"use strict";var s=a("1e57"),i=a.n(s);i.a},c1fc:function(t,e,a){},c2c5:function(t,e,a){},c3e0:function(t,e,a){},c469:function(t,e,a){},c4db:function(t,e,a){},c54e:function(t,e,a){},c597:function(t,e,a){},c600:function(t,e,a){"use strict";var s=a("bb78"),i=a.n(s);i.a},c8ed:function(t,e,a){"use strict";var s=a("8345"),i=a.n(s);i.a},ca43:function(t,e,a){},cbcc:function(t,e,a){"use strict";var s=a("817a"),i=a.n(s);i.a},cc7d:function(t,e,a){"use strict";var s=a("2576"),i=a.n(s);i.a},ccd0:function(t,e,a){},cea7:function(t,e,a){},d008:function(t,e,a){"use strict";var s=a("7138"),i=a.n(s);i.a},d07c:function(t,e,a){"use strict";var s=a("4904"),i=a.n(s);i.a},d0ea:function(t,e,a){"use strict";var s=a("dca7"),i=a.n(s);i.a},d1cf:function(t,e,a){var s={"./Facebook.svg":"bde9","./right.svg":"6e05","./save.svg":"e2c2","./turn.svg":"be7e","./user.svg":"ea8f","./wrong.svg":"e811"};function i(t){var e=n(t);return a(e)}function n(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="d1cf"},d206:function(t,e,a){"use strict";var s=a("3287"),i=a.n(s);i.a},d21f:function(t,e,a){},d2c4:function(t,e,a){"use strict";var s=a("0203"),i=a.n(s);i.a},d2e3:function(t,e,a){},d32e:function(t,e,a){"use strict";var s=a("54a4"),i=a.n(s);i.a},d3e0:function(t,e,a){"use strict";a("7f7f");e["a"]={manageWeekSpend:function(t,e){return{tooltip:{trigger:"axis",textStyle:{color:"#fff",fontSize:12},position:function(t,e,a,s,i){return[t[1],0]}},legend:{bottom:"0",show:!1},xAxis:{type:"category",data:t,axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{type:"shadow"}},grid:{left:"20px",right:"20px",top:"25px",bottom:"33px"},yAxis:{type:"value",name:"",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},color:["#409eff","#94a6e7","#b3cef9","#dbe4ff","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:e}},bidGuide:function(t,e){return{tooltip:{trigger:"axis",formatter:function(t){var e='<p style="color: #fff;">价位：$'+t[0].name+"</p>";return e+='<p style="color: #fff;">'+t[0].seriesName+"："+("CPI"==t[0].seriesName||"花费"==t[0].seriesName?"$":"")+t[0].data+"</p>",e},textStyle:{color:"#fff"}},legend:{bottom:"0",show:!1},xAxis:{type:"category",data:t,axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{type:"shadow"}},grid:{left:"20px",right:"20px",top:"25px",bottom:"33px"},yAxis:{type:"value",name:"",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},color:["#409eff","#94a6e7","#b3cef9","#dbe4ff","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:e}},triggerCharts:function(t,e,a,s,i,n){return{tooltip:{trigger:"axis",formatter:"{b0}<br/>{a0}: {c0}<br/>{a1}: {c1}%",axisPointer:{type:"cross",crossStyle:{color:"#999"},label:{show:!1}}},legend:{bottom:"0"},xAxis:{type:"category",data:t,axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"规则触发数",min:0,max:a,interval:s},{type:"value",name:"触发广告占比",min:0,max:i,interval:n,axisLabel:{formatter:function(t){return"".concat(t.toFixed(3),"%")}}}],color:["#3758d3","#94a6e7","#b3cef9","#dbe4ff","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:e}},regularPie:function(t,e,a){return{title:{show:!1,textStyle:{fontSize:14},left:"70px"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{top:"260px",itemWidth:10,itemHeight:10,formatter:function(t){return t.length>12?t.substr(0,11)+"...":t},data:t},grid:{left:"0px",top:0},color:["#3758d3","#617bdc","#94a6e7","#b3cef9","#dbe4ff","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:[{name:a,type:"pie",center:["50%","135"],radius:[0,"90%"],label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:e}]}},pie:function(t,e,a){return{title:{show:!1,textStyle:{fontSize:14},left:"70px"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:"10px",bottom:"10px",itemWidth:10,itemHeight:10,formatter:function(t){return t.length>12?t.substr(0,11)+"...":t},data:t},grid:{left:"0px",top:0},color:["#3758d3","#617bdc","#94a6e7","#b3cef9","#dbe4ff","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:[{name:a,type:"pie",center:["35%","50%"],radius:[0,"90%"],label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:e}]}},appChart:function(t,e){return{title:{text:""},tooltip:{trigger:"axis"},legend:{bottom:0},grid:{left:"3%",right:"4%",top:"40px",bottom:"40px",containLabel:!0},toolbox:{show:!1,feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:{type:"value"},color:["#1796eb","#01c857","#f44446"],series:e}}}},d466:function(t,e,a){},d5a0:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a4bb"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_values__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("db0c"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_values__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_values__WEBPACK_IMPORTED_MODULE_3__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_set__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("b6d0"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_set__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_set__WEBPACK_IMPORTED_MODULE_4__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("f499"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_5__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("cebc"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5176"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_7__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("59ad"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("e814"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_11__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("75fc"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_13__),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("a745"),_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_15__),_js_charts__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("d3e0"),_js_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("9d24"),_js_message__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("815e");__webpack_exports__["a"]={SENDPERMISSION:function(t,e){switch(console.log(e),e){case"granted":var a=new Notification("我是推送君",{body:"我是文本君",icon:"https://avatars3.githubusercontent.com/u/43479428?v=4"});a.onclick=function(){console.log("推送君已关闭"),a.close()};break;case"denied":break;case"default":break}},ITEMLIST:function(t,e){var a=e.data;t.itemlist=a},PASSWORD:function(t,e){e.msg;Object(_js_message__WEBPACK_IMPORTED_MODULE_18__["f"])("密码修改成功, 请重新登录")},LOGOUT:function(t){location.href="/login.html",localStorage.removeItem("atom_token")},SETSTATE:function(t,e){var a=e.k,s=e.v;t[a]=s},SETOBJSTATE:function(t,e){var a=e.obj,s=e.name,i=e.v;t[a][s]=i},MESSAGECOUNT:function MESSAGECOUNT(state,r){switch(!0){case"99+"!=r.data&&_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_14___default()(eval(r.data)):var result=eval(r.data),successtask=result[0].success,failtask=result[0].fail,totaltask=result[0].completed,taskname=result[0].taskName,requestId=result[0].requestId;0==failtask?Object(_js_message__WEBPACK_IMPORTED_MODULE_18__["d"])("成功","".concat(successtask,"项").concat(taskname,"成功")):(state.taskfail=failtask,state.tasksuccess=successtask,state.taskname=taskname,Object(_js_message__WEBPACK_IMPORTED_MODULE_18__["e"])("警告","".concat(failtask,"项").concat(taskname,"失败，").concat(successtask,'项成功，<span style="color:#409eff;cursor:pointer;">点击查看详情</span>'),function(){state.jobfailkey=requestId,state.jobfaildetail=!0,state.taskfaildetail=failtask,state.tasksuccessdetail=successtask,state.tasknamedetail=taskname}));break;default:state.messagecount=r.data;break}},VIDEOURL:function(t,e){var a=e.r,s=e.originurl;t.videoerrmsg=[],t.videoresult=[];for(var i=a.data,n=0;n<s.length;n++)""!==s[n].trim()?i[n].errMsg?t.videoerrmsg.push({result:i[n].errMsg,status:!1}):(t.videoerrmsg.push({result:i[n].url,status:!0}),t.videoresult.push(i[n].url)):(t.videoerrmsg.push({result:"",status:!1}),i.splice(n,0,""))},APPCOUNT:function(t,e){t.appcount=e.data?e.data.length:0},PAYCOUNT:function(t,e){t.paycountlist=e.data,t.paycount=e.data.length},INFO:function(t,e){t.reportAppDataList=e.data.reportAppDataList,t.appInstallsLists=e.data.appInstallsLists?e.data.appInstallsLists:[];var a=e.data.appInstallsLists?e.data.appInstallsLists:[],s=[],i=[];a.forEach(function(t){var e={};e.name=t.appName,e.value=t.installsNum,s.push(e),i.push(e.name)}),myChart2.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].pie(i,s,"各APP安装比例")),t.appSpendDatasLists=e.data.appSpendDatasLists?e.data.appSpendDatasLists:[];var n=e.data.appSpendDatasLists?e.data.appSpendDatasLists:[],o=[],r=[];n.forEach(function(t){var e={};e.name=t.appName,e.value=t.spend,o.push(e),r.push(e.name)}),myChart3.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].pie(r,o,"各APP花费比例")),t.todayInstallsNum=e.data.todayInstallsNum,t.todaySpend=e.data.todaySpend},APPINFO:function(t,e){var a=e.data.pageInfoAll.list,s=[],i=[],n={name:"安装",type:"line",smooth:!0,stack:"",data:[]},o={name:"花费",type:"line",smooth:!0,stack:"",data:[]},r={name:"CPI",type:"line",smooth:!0,stack:"",data:[]};a.forEach(function(t){var e={};e.name=t.appName,e.value=t.installsNum,n.data.push(t.installsNum),o.data.push(t.spend),r.data.push(t.cpi),i.push(_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].timeFormat(t.insightDate,"yyyy-MM-dd"))}),s.push(n,o,r),myChart.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].appChart(i,s))},APPINFOTABLE:function(t,e){t.appdatatotal=e.data.pageInfoAll.total,t.countryfilter=e.data.countryList.length>0?e.data.countryList:[""],e.data.pageInfoAll.list.forEach(function(t){t.afReRate1=t.afReRate1?t.afReRate1+"%":"",t.afReRate2=t.afReRate2?t.afReRate2+"%":"",t.afReRate3=t.afReRate3?t.afReRate3+"%":"",t.afReRate4=t.afReRate4?t.afReRate4+"%":"",t.afReRate5=t.afReRate5?t.afReRate5+"%":"",t.afReRate6=t.afReRate6?t.afReRate6+"%":"",t.afReRate7=t.afReRate7?t.afReRate7+"%":"",t.appEventsList.forEach(function(e){t["".concat(e.eventsName,"|eventCounter")]=e.eventCounter,t["".concat(e.eventsName,"|uniqueUsers")]=e.uniqueUsers,t["".concat(e.eventsName,"|salesIn")]=e.salesIn})}),t.appdata=e.data.pageInfoAll.list},APPINFOTABLETOTAL:function(t,e){t.appcpitotal=e.data,t.appcpitotal["2d_rr_user|uniqueUsers"]=t.appcpitotal["afUniqueUsers"]},APPINFOTABLEOUT:function(t,e){var a=e.res,s=e.name;t.appdataall=a.data.pageInfoAll.list,t.appdataall.forEach(function(t){t.appEventsList.forEach(function(e){t["".concat(e.eventsName,"|eventCounter")]=e.eventCounter,t["".concat(e.eventsName,"|uniqueUsers")]=e.uniqueUsers,t["".concat(e.eventsName,"|salesIn")]=e.salesIn}),t.gap=t.gap<0?(100*t.gap).toFixed(2):"+"+(100*t.gap).toFixed(2)});var i=localStorage.getItem(pandectOptionLS.new)&&JSON.parse(localStorage.getItem(pandectOptionLS.new))[t.appdataappid]?JSON.parse(localStorage.getItem(pandectOptionLS.new))[t.appdataappid]:[{name:"触达",key:"reachNum",checked:!0},{name:"展示",key:"showNum",checked:!0},{name:"点击",key:"clicksNum",checked:!0},{name:"CTR",key:"ctr",checked:!0},{name:"CVR",key:"cvr",checked:!0},{name:"CPM",key:"cpm",checked:!0},{name:"CPC",key:"cpc",checked:!0},{name:"安装",key:"installsNum",checked:!0},{name:"花费",key:"spend",checked:!0},{name:"CPI",key:"cpi",checked:!0}],n=[{name:"日期",key:"insightDateFormat"},{name:"国家",key:"country"},{name:"平台",key:"userOs"}].concat(Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__["a"])(i)),o="<table><thead><tr>";n.forEach(function(t){o+="<th>".concat(t.name,"</th>")}),o+="</tr></thead><tbody>";for(var r=function(e){o+="<tr>",n.forEach(function(a){"insightDateFormat"==a.key?o+="<td>".concat(_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].timeFormat(t.appdataall[e]["insightDate"],"yyyy-MM-dd"),"</td>"):o+="<td>".concat(t.appdataall[e][a.key]?t.appdataall[e][a.key]:"--","</td>")}),o+="</tr>"},c=0;c<t.appdataall.length;c++)r(c);o+="</tbody></table>",_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportHTML("outOther",s,o)},CUSTOMEVENT:function(t,e){t.customevent=[],t.customunit=e.data.eventsunit,e.data.eventsNameList.forEach(function(e){var a={};a.name=e,a.checked1=!1,a.checked2=!1,a.checked3=!1,t.customevent.push(a)})},PANDECTTAG:function(t,e){t.pandectsave=[],e.data.forEach(function(e){var a=e.url.split("@@"),s={name:e.tagName,option:a[0]?JSON.parse(a[0]):[],id:e.id,event:a[1]?JSON.parse(a[1]):[]};t.pandectsave.push(s)})},BMLIST:function(t,e){var a=e.data;t.bmlist=a,t.getbmover=!0,t.disbmid=t.bmlist[0].bmId},ADDBMLIST:function(t,e){var a=e.data;t.addbmlist=a},SAVEBM:function(t,e){t.bmlist=t.bmlist.concat(e),e.forEach(function(e){t.addbmlist=t.addbmlist.filter(function(t){return t.id!=e.bmId})})},SETACCOUNT:function(t,e){t.disaccount=e.data.list,t.accounttotal=e.data.total},ADDACCOUNT:function(t,e){t.disaddaccount=e.data},SAVEACCOUNT:function(t,e){t.disaccount=t.disaccount.concat(e),t.addata[t.disbmid]=t.addata[t.disbmid].concat(e),e.forEach(function(e){t.disaddaccount=t.disaddaccount.filter(function(t){return t.account_id!=e.fbAccountId}),t.adaccount[t.disbmid]=t.adaccount[t.disbmid].filter(function(t){return t.account_id!=e.fbAccountId})})},SETPAGE:function(t,e){t.dispage=e.data.list,t.pagetotal=e.data.total},ADDPAGE:function(t,e){t.disaddpage=e.data,t.disaddpage.forEach(function(t){t.checked=!1})},SAVEPAGE:function(t,e){t.dispage=t.dispage.concat(e),t.pagedata[t.disbmid]=t.pagedata[t.disbmid].concat(e),e.forEach(function(e){t.disaddpage=t.disaddpage.filter(function(t){return t.pageId!=e.pageId}),t.pageaccount[t.disbmid]=t.pageaccount[t.disbmid].filter(function(t){return t.pageId!=e.pageId})})},SETAPPLIST:function(t,e){t.applist=e.data},ADDAPP:function(t,e){t.addapplist=e.data},SETAPP:function(t,e){t.setapplist=e.data,t.setapplist.forEach(function(t){t.stateName="已启用"})},CANSETAPP:function(t,e){t.cansetapplist=e.data},AFSTATE:function(t,e){t.afstate=e.data},MANAGELIST:function(t,e){t.managelist=e.data.list,t.total=e.data.total,t.pagesize=e.data.pageSize},MANAGEAPPLIST:function(t,e){t.manageapplist=e.data},USERSLIST:function(t,e){t.userslist=e.data},ADACCOUNTLIST:function(t,e){t.adaccountslist=e.data},ADPAGES:function(t,e){t.adpages=e.data},RULES:function(t,e){t.rulelist=e.data},RULEACCOUNT:function(t,e){var a=e.data;a.unshift({name:"不限",fbAccountId:"-1",fbId:"-1"}),t.ruleapp=a},OPTIMIZEACCOUNT:function(t,e){t.optimizeaccount=e.data},OPTIMIZELIST:function(t,e){t.optotal=e.data.count,t.optimizelist=e.data.list},EXECUTELIST:function(t,e){t.executelist=e.data},OPTIMIZEDETAIL:function(t,e){t.optimizedetail=e.data},GETALLOT:function(t,e){t.projectallot=e.data},COMMONACCOUNT:function(t,e){t.commonaccount=e.data},COMMONPAGE:function(t,e){t.commonpage=e.data},COMMONAPP:function(t,e){t.commonapp=e.data},CREATE:function CREATE(state,r){state.createlist=r.data.list,state.crtotal=r.data.total,state.crpagesize=r.data.pageSize,state.createchecked=[],state.createlist.forEach(function(v){state.createchecked.push(!1),v.imageUrl&&(v.img=eval("("+v.imageUrl+")").imageUrl),v.videoUrl&&(v.video=eval("("+v.videoUrl+")").videoUrl),v.card&&(v.card=eval("("+v.card+")"))})},ALLSELECT:function(t){var e=[];t.createchecked.filter(function(t){return!t}).length>0?t.createchecked.forEach(function(t){e.push(!0)}):t.createchecked.forEach(function(t){e.push(!1)}),t.createchecked=e.slice(0)},CLASSIFY:function(t,e){t.classify=e.data,t.classify.unshift("不限")},COUNTRIES:function(t,e){t.countries=e.data,t.countries.unshift("不限")},ALLPAGES:function(t,e){t.allpagelist=e.data},ALLACTIONS:function(t,e){e.data.forEach(function(t){t.value=t.name}),t.allactions=e.data.filter(function(t){return t.show})},SYNCTIME:function(t,e){t.synctime=e.data<60?"".concat(e.data,"秒"):"".concat(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(e.data/60),"分").concat(e.data%60,"秒")},SYNCLIST:function SYNCLIST(state,r){state.synclist=r.data.list?r.data.list:[],state.synctotal=r.data.total,state.synclist.forEach(function(v){v.img=eval("("+v.imageUrl+")").imageUrl})},OTHERCOUNTRIES:function(t,e){t.othercountries=e.data,t.othercountries.forEach(function(t){t.value=t.name})},LANGUAGE:function(t,e){t.language=e.data},INTERESTS:function(t,e){t.interests=e.data},PLATFORM:function(t,e){t.platform=e.data.applicationPlatforms,t.platform.unshift({marketType:"不限"})},CREATEPLATFORM:function(t,e){t.createplatform=e.data.applicationPlatforms},SYSTEM:function(t,e){t.system=e.data},SELECTCREATE:function(t,e){var a=t.createlist.find(function(t){return t.id==e});t.createlist=t.createlist.filter(function(t){return t.id!=e}),t.selectcreate.push(a)},CANCELCREATE:function(t,e){var a=t.selectcreate.find(function(t){return t.id==e});t.selectcreate=t.selectcreate.filter(function(t){return t.id!=e}),t.createlist.push(a)},PLANLIST:function(t,e){t.planlist=e.data.list,t.pltotal=e.data.total,t.plpagesize=e.data.pageSize},PLANCOUNTRY:function(t,e){t.plancountry=e.data,t.plancountry.unshift({name:"不限",code:"不限"})},INUSECREATE:function INUSECREATE(state,r){state.inusecreate=r.data.list,state.inusetotal=r.data.total,state.inusecreate.forEach(function(v){switch(v.creativityType){case 0:v.creativityTypeName="单图片";break;case 1:v.creativityTypeName="单视频";break;case 2:v.creativityTypeName="轮播";break}v.imageUrl&&(v.img=eval("("+v.imageUrl+")").imageUrl),v.videoUrl&&(v.video=eval("("+v.videoUrl+")").videoUrl)})},NOUSECREATE:function NOUSECREATE(state,r){state.nousecreate=r.data.list,state.nousetotal=r.data.total,state.nousecreate.forEach(function(v){switch(v.creativityType){case 0:v.creativityTypeName="单图片";break;case 1:v.creativityTypeName="单视频";break;case 2:v.creativityTypeName="轮播";break}v.imageUrl&&(v.img=eval("("+v.imageUrl+")").imageUrl),v.videoUrl&&(v.video=eval("("+v.videoUrl+")").videoUrl)})},ACCOUNTLIST:function(t,e){t.inuseaccount=e.data.usedAdaccounts,t.nouseaccount=e.data.notUsedAdaccounts},LOGLIST:function(t,e){t.loglist=e.data.slice(0,20)},LOGDETAIL:function(t,e){t.logdetail=e.data,t.logdetail.forEach(function(t){t.campaignDetail.createSuccess>0||t.campaignDetail.createFailed>0?t.statuskey1=!0:t.statuskey1=!1,t.adsetDetail.createSuccess>0||t.adsetDetail.createFailed>0?t.statuskey2=!0:t.statuskey2=!1,t.adDetail.createSuccess>0||t.adDetail.createFailed>0?t.statuskey3=!0:t.statuskey3=!1})},LOGCREATEFAIL:function(t){t.ifadcreate=!1},LOGCREATE:function(t,e){var a=e.res,s=e.option;t.logdetailid=a.data.planCreateLogId,t.logdetailname=s.campaignName},CREARENUM:function(t,e){t.logcreatecreative=e.data.creativeNum,t.logcreateaccount=e.data.adaccountNum,t.logcreateset=e.data.onlyCampaignAdsetNum,t.logcreatecampaign=e.data.campaignNum},CREATEINFO:function(t,e){var a=e.data.includeAudiences?JSON.parse(e.data.includeAudiences):{},s=e.data.excludedAudiences?JSON.parse(e.data.excludedAudiences):{};e.data.included=[];var i=function(t){a[t].forEach(function(a){e.data.included.push("".concat(a,"|").concat(t))})};for(var n in a)i(n);e.data.excluded=[];var o=function(t){s[t].forEach(function(a){e.data.excluded.push("".concat(a,"|").concat(t))})};for(var r in s)o(r);t.createinfo=e.data,t.disinfo.push(e.data)},RESETEDIT:function(t,e){t.disinfo.splice(0)},GENERTARGET:function(t,e){var a=e.data;for(var s in t.genertarget=[],a){var i={};i.label=s,i.options=a[s],t.genertarget.push(i)}},GENERACCOUNT:function(t,e){t.generaccount=e.data.adaccounts},BIDGUIDE:function(t,e){t.bidguide=e.data;var a=[],s=[],i=[],n=[];t.bidguide.forEach(function(t){a.push("".concat(t.bidAmountStart,"-").concat(t.bidAmountEnd)),s.push(t.cpi?_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_8___default()(t.cpi).toFixed(2):"暂无"),i.push(t.spend?_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_8___default()(t.spend).toFixed(2):"暂无"),n.push(t.installs?t.installs:"暂无")});var o=[{name:"CPI",type:"bar",data:s}],r=[{name:"花费",type:"bar",data:i}],c=[{name:"安装量",type:"bar",data:n}];myChart8.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].bidGuide(a,o)),myChart9.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].bidGuide(a,r)),myChart10.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].bidGuide(a,c))},CLASSIFYFORPLAN:function(t,e){t.classifyforplan=e.data},CLASSIFYFILTERCOUNT:function(t,e){t.classifyfiltercount=e.data},ADPLANLIST:function(t,e){t.adplanlist=e.data.list,t.adplanlist.unshift({fbId:"-1",name:"不限"}),console.log(t.adplanlist)},CUSTOMEVENTAD:function(t,e){var a=e.r;e.applicationId;t.adcustomevent=[],t.customunit=a.data.eventsunit,a.data.eventsNameList.forEach(function(e){var a={};a.name=e,a.checked1=!1,a.checked2=!1,a.checked3=!1,t.adcustomevent.push(a)})},GETCONDITION:function(t,e){var a=e.res,s=e.tagType;"1"==s?t.conditionlist=a.data:"2"==s&&(t.saveoption=[],a.data.forEach(function(e){var a=e.url.split("@@"),s={name:e.tagName,option:a[0]?JSON.parse(a[0]):[],id:e.id,event:a[1]?JSON.parse(a[1]):[]};t.saveoption.push(s)}))},ADLIST:function(t,e){var a=e.res,s=e.type,i=e.dateCond,n=e.editType,o=e.name,r=e.customOption;t.adlisttimeout=!1;var c=[],l="",u="";switch(s){case"campaignName":l="adCampaignStatus",u="adCampaignFbStatus";break;case"adSetName":l="adSetStatus",u="adSetFbStatus";break;case"adName":l="adStatus",u="adFbStatus";break}var d=[],m=[];a.data.list.forEach(function(t,e){t.fbAdPartList&&t.fbAdPartList.forEach(function(t,a){var n="",o=t.materialId&&-1!=t.materialId.indexOf("http")?'<span class="headpic"><a href="'.concat(t.materialId,'" target="_blank"><img src="').concat(t.materialId,'"/></span></a>'):t.materialId;n+=i&&t.insightDate?","+t.insightDate:"",n+=t.age?","+t.age:"",n+=t.gender?","+t.gender:"",n+=t.country?","+t.country:"",n+=t.impressionDevice?","+t.impressionDevice:"",n+=t.publisherPlatform?","+t.publisherPlatform:"",n+=o?","+o:"",n+=t.materialText?","+t.materialText:"",t["parentindex"]=e,t["iscare"]=!0,t[s]=n.substring(1),t["careimg"]=!(!t.materialId||-1==t.materialId.indexOf("http")),d.push(t)}),t.fbAdAfPartList&&t.fbAdAfPartList.forEach(function(t,a){var n="";n+=i&&t.insightDate?","+t.insightDate:"",n+=t.country?","+t.country:"",t["parentindex"]=e,t["iscare"]=!0,t[s]=n.substring(1),m.push(t)})}),d.forEach(function(t,e){var a,i=m.find(function(e,i){if(e[s]==t[s]&&e["parentindex"]==t["parentindex"])return a=i,e});i&&(d[e]=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_7___default()(t,i),m.splice(a,1))});var p=d.concat(m);if(p.forEach(function(t){t["afMinsRate"]=t["installNum"]&&t["afInstallsNum"]?(100*(t["afInstallsNum"]-t["installNum"])/t["installNum"]).toFixed(2):null,t["afCpi"]=t["afInstallsNum"]&&t["spend"]?(t["spend"]/t["afInstallsNum"]).toFixed(2):null}),p.forEach(function(t,e){a.data.list.splice(t.parentindex+1+e,0,t)}),a.data.list.forEach(function(t,e){var a="";switch(t[u]){case"ARCHIVED":a="已归档";break;case"ACTIVE":a="投放中";break;case"DELETED":a="已删除";break;case"PAUSED":a="已暂停";break;default:a="";break}var i="";switch(t[l]){case"ACTIVE":i="投放中";break;case"PAUSE":i="已暂停";break;case"DELETED":i="已删除";break;case"PENDING_REVIEW":i="审核中";break;case"DSIAPPROVED":i="未获批";break;case"PREAPPROVED":i="预先获批";break;case"PENDING_BILLING_INFO":i="结算中";break;case"CAMPAIGN_PAUSED":i="广告系列已暂停";break;case"ARCHIVED":i="已归档";break;case"ADSET_PAUSED":i="广告组已暂停";break;default:i="";break}var n=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_6__["a"])({},t);switch(n.imid=t.id?t.id:"",n.effectiveStatus=t[u],n.effectiveStatusName=a,n.effectiveImport=t[l],n.effectiveImportName=i,n.switchStatus=t[u],n.jobStatus="",s){case"campaignName":n.jobStatus=t.adCampaignLockStatus>0;break;case"adSetName":n.jobStatus=t.adSetLockStatus>0;break;case"adName":n.jobStatus=t.adLockStatus>0;break}n.fbAccountId=t.fbAccountId?t.fbAccountId.split("_")[1]:"",n["ctr"]=n["ctr"]?n["ctr"]+"%":"",n["afMinsRate"]=n["afMinsRate"]?n["afMinsRate"]+"%":"",n["afRetentionRate"]=n["afRetentionRate"]?n["afRetentionRate"]+"%":"",n["cvr"]=n["cvr"]?n["cvr"]+"%":"",n["afCtr"]=n["afCtr"]?n["afCtr"]+"%":"",n["afLoyalUsersRate"]=n["afLoyalUsersRate"]?n["afLoyalUsersRate"]+"%":"",n["afROI"]=n["afROI"]?n["afROI"]+"%":"",n["afConversionRate"]=n["afConversionRate"]?n["afConversionRate"]+"%":"",n["afReRate1"]=n["afReRate1"]?n["afReRate1"]+"%":"",n["afReRate2"]=n["afReRate2"]?n["afReRate2"]+"%":"",n["afReRate3"]=n["afReRate3"]?n["afReRate3"]+"%":"",n["afReRate4"]=n["afReRate4"]?n["afReRate4"]+"%":"",n["afReRate5"]=n["afReRate5"]?n["afReRate5"]+"%":"",n["afReRate6"]=n["afReRate6"]?n["afReRate6"]+"%":"",n["afReRate7"]=n["afReRate7"]?n["afReRate7"]+"%":"",t.appEventsList&&t.appEventsList.forEach(function(t){n["".concat(t.eventsName,"|eventCounter")]=t.eventCounter,n["".concat(t.eventsName,"|uniqueUsers")]=t.uniqueUsers,n["".concat(t.eventsName,"|salesIn")]=t.salesIn}),c.push(n)}),n){var f="\ufeff";f+=""+r.map(function(t){return t.name}).join(","),f+="\n";for(var h=function(t){var e="";r.forEach(function(a){"campaignId"==a.key||"adsetId"==a.key||"adId"==a.key||"accountId"==a.key?e+=",".concat(c[t][a.key]?c[t][a.key]+"\t":"--"):e+=",".concat(null!==c[t][a.key]&&void 0!==c[t][a.key]&&""!==c[t][a.key]?'"'+c[t][a.key]+'"':"--")}),e=e.substr(1),f+=e,f+="\n"},_=0;_<c.length;_++)h(_);_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportEXCEL("outAdList",o,f,"xls")}else switch(s){case"campaignName":t.adcampaignlist=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_5___default()(c),t.adcampaigntotal=a.data.total;break;case"adSetName":t.adsetlist=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_5___default()(c),t.adsettotal=a.data.total;break;case"adName":t.adadlist=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_5___default()(c),t.adadtotal=a.data.total;break}},ADLISTTOTAL:function(t,e){t.adlisttotal=e.data,t.adlisttotal["2d_rr_user|uniqueUsers"]=t.adlisttotal["afUniqueUsers"]},ADLISTTIMEOUT:function(t){t.adlisttimeout=!0},UPDATETIME:function(t,e){t.nowtime=e.data.now,t.updatetime=e.data.fbDataUpdateTime;var a=t.nowtime-t.updatetime;t.datestatus=a<=6e4?"刚刚":"".concat(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(a/6e4),"分钟前")},CHANGESTATUS:function(t,e){t.adlist.forEach(function(t){-1!=e.adIds.indexOf(t.fbAdId)&&(t.status=e.status),t.load=!1})},CHANGEADLOAD:function(t,e){t.adlist.forEach(function(t){t.fbAdId==e&&(t.load=!0)})},ADCAMPAIGNLIST:function(t,e){t.copycampaignlist=e.data},ADSETLIST:function(t,e){t.copyadsetlist=e.data},CALCUCOUNT:function(t,e){t.adcount=e.data.adCount,t.adsetcount=e.data.adsetCount,t.campaigncount=e.data.campaignCount},CAMPAIGNINFO:function(t,e){t.editcampaignlist=e.data},CREATECAMPAIGNLIST:function(t,e){t.createcampaignlist=e.data},ADSETINFO:function(t,e){var a=e.res,s=e.applicationid;t.editadsetlist=a.data,t.editadsetlist.forEach(function(t){var e=t.userOs.split("_"),a=JSON.parse(t.targeting),i=JSON.parse(t.adsetSchedule);if(t.included=a.custom_audiences?a.custom_audiences.map(function(t){return t.id}):[],t.excluded=a.excluded_custom_audiences?a.excluded_custom_audiences.map(function(t){return t.id}):[],t.country=t.countries.split(","),t.platform=-1!=e[0].toLocaleLowerCase().indexOf("android")?"google_play":"itunes",t.lowversion=e[2]?e[2]:"2.0",t.highversion=e[4]&&"above"!=e[4]?e[4]:"",t.moneytype=t.dailyBudget>0?"day_budget":"total_budget",t.minage=a.age_min,t.maxage=a.age_max,t.language=a.locales?a.locales:[],t.interest=a.interests?a.interests.map(function(t){return t.id}):[],t.filtra=[],t.filtrapage=[],t.filtrapageObj=[],a.excluded_connections&&a.excluded_connections.length>0){var n=a.excluded_connections.filter(function(t){return t.id==s}),o=a.excluded_connections.filter(function(t){return t.id!=s});o.forEach(function(t){t.pageId=t.id}),n.length>0&&t.filtra.push("1"),o.length>0&&(t.filtra.push("2"),t.filtrapage=o.map(function(t){return t.id}),t.filtrapageObj=o)}1==t.genders.length?-1!=t.genders.indexOf(1)?t.sex=1:t.sex=2:t.sex=0,t.timerange=i?"schedule":"allday",t.startMinute=i?_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(i[0].start_minute):0,t.endMinute=i?_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(i[0].end_minute):0,t.weekday=i?i[0].days:[],t.equip=t.userDevice.split(","),t.verpla=t.publisherPlatforms.split(","),t.bid="IMPRESSIONS"==t.billingEvent?"cpm":"cpi"})},CREATEADSETLIST:function(t,e){t.createadsetlist=e.data},ADCREATELIST:function(t,e){t.adcreatelist=e.data.list,t.adcreatetotal=e.data.total,t.adcreatelist.forEach(function(t){"1"==t.sex?t.sexName="男":"2"==t.sex?t.sexName="女":t.sexName="全部"})},ADINFO:function(t,e){t.editadlist=e.data},DYNAMICCREATE:function(t,e){var a=Object(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__["a"])(new _Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_set__WEBPACK_IMPORTED_MODULE_4___default.a(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_values__WEBPACK_IMPORTED_MODULE_3___default()(e.data)));t.isdynamic=-1!=a.indexOf(!1)},SETADCREATEAPPLIST:function(t,e){var a=e.data;t.adapplist.length>0&&(a=a.filter(function(e){return e.id!=t.adapplist[0].id})),t.adapplist=a},ADAPPINFO:function(t,e){t.adapplist=t.adapplist.filter(function(t){return t.id!=e.data[0].id}),t.adapplist.push(e.data[0])},CREATEALLPAGES:function(t,e){if(t.createallpagelist.length>0){var a=t.createallpagelist.map(function(t){return t.id}),s=e.data.filter(function(t){return-1==a.indexOf(t.id)});t.createallpagelist=t.createallpagelist.concat(s)}else t.createallpagelist=e.data},JOBPROCESS:function(t,e){t.jobtotal=e.completed+e.unCompleted,t.jobcomplete=e.completed,t.copyjoblistdetail=[],e.tasks.forEach(function(e){var a={name:e.taskName,total:e.completed+e.unCompleted,completed:e.completed,percent:100*e.completed/(e.completed+e.unCompleted)};t.copyjoblistdetail.push(a)})},JOBPROCESSCOMPLETE:function(t,e){t.jobtotal=0,t.jobcomplete=0,t.copyjoblistdetail=[]},JOBLISTDETAILERROR:function(t){t.taskresult=[]},JOBLISTDETAIL:function JOBLISTDETAIL(state,r){state.taskresult=[];var campaignTab=["复制广告系列","复制广告系列(其他广告账户)"],adsetTab=["复制广告组","复制广告组(其他广告账户)"],adTab=["复制广告","创建广告","编辑广告","复制广告(其他广告账户)","替换创意"],errortasks=[],tabcampaign=r.filter(function(t){return-1!=campaignTab.indexOf(t.taskName)});tabcampaign.length>0&&(errortasks=tabcampaign.filter(function(t){return t["tasks"]}).map(function(t){return t["tasks"]}).flat(),errortasks.length>0&&state.taskresult.push({tabelhead:"广告系列名称",tabname:"广告系列".concat(eval(tabcampaign.map(function(t){return t.success}).join("+")),"/").concat(errortasks.length),tasks:errortasks}));var tabadset=r.filter(function(t){return-1!=adsetTab.indexOf(t.taskName)});tabadset.length>0&&(errortasks=tabadset.filter(function(t){return t["tasks"]}).map(function(t){return t["tasks"]}).flat(),errortasks.length>0&&state.taskresult.push({tabelhead:"广告组名称",tabname:"广告组".concat(eval(tabadset.map(function(t){return t.success}).join("+")),"/").concat(errortasks.length),tasks:errortasks}));var tabad=r.filter(function(t){return-1!=adTab.indexOf(t.taskName)});tabad.length>0&&(errortasks=tabad.filter(function(t){return t["tasks"]}).map(function(t){return t["tasks"]}).flat(),errortasks.length>0&&state.taskresult.push({tabelhead:"广告名称",tabname:"广告".concat(eval(tabad.map(function(t){return t.success}).join("+")),"/").concat(errortasks.length),tasks:errortasks}))},CALENDARDATE:function(t,e){t.calendardate=e.data},AFFILEDOWNLOAD:function(t,e){var a=e.r,s=e.name,i=[{name:"Ad Group",key:"adgroupName"},{name:"Adset",key:"adSetName"},{name:"Country",key:"country"},{name:"Date",key:"date"},{name:"Install Day",key:"installDayNum"},{name:"Day 1",key:"day1Num"},{name:"Day 2",key:"day2Num"},{name:"Day 3",key:"day3Num"},{name:"Day 4",key:"day4Num"},{name:"Day 5",key:"day5Num"},{name:"Day 6",key:"day6Num"},{name:"Day 7",key:"day7Num"}],n="\ufeff";n+=i.map(function(t){return t.name}).join(","),n+="\n";for(var o=function(t){var e="";i.forEach(function(s){e+=",".concat(null!==a.data[t][s.key]&&void 0!==a.data[t][s.key]?a.data[t][s.key]:"--")}),n+=e.substr(1),n+="\n"},r=0;r<a.data.length;r++)o(r);_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportEXCEL("",s.replace(/\.csv$/,"")+"_error",n,"xls")},ACTIVEAD:function(t,e){t.hascreatead=e.data},ADRULELIST:function(t,e){t.adrulelist=e.data},SINGLERULES:function(t,e){t.singlerules=e.data},CONDITION:function(t,e){t.datacountry=e.data.countryList,t.dataage=e.data.ageList,t.dataplatform=["Facebook","Instagram","Audience Network","Messenger"],t.dataimpression=["安卓智能手机","iphone","ipad"]},DATALIST:function(t,e){t.datalist=e.data.list,t.datalist.forEach(function(t){t["ctr"]=t["ctr"]?(100*t["ctr"]).toFixed(2)+"%":t["ctr"],t["cvr"]=t["cvr"]?(100*t["cvr"]).toFixed(2)+"%":t["cvr"]}),t.datatotal=e.data.count,t.datasum=e.data,t.datasum,t.datasum["ctr"]=t.datasum["ctr"]?(100*t.datasum["ctr"]).toFixed(2)+"%":t.datasum["ctr"],t.datasum["cvr"]=t.datasum["cvr"]?(100*t.datasum["cvr"]).toFixed(2)+"%":t.datasum["cvr"]},DATALISTOUT:function(t,e){var a=e.res,s=e.name,i=a.data.list,n=["广告账户ID","广告账户名称","触达","展示","点击","CTR","CVR","CPM","CPC","相关度","安装","花费","CPI"],o="<table><thead><tr>";n.forEach(function(t){o+="<th>".concat(t,"</th>")}),o+="</tr></thead><tbody>";for(var r=0;r<i.length;r++)o+="<tr>",o+="<td style=\"mso-number-format:'\\@'\">".concat(i[r]["fbAccountId"],"</td>"),o+="<td>".concat(i[r]["adAccountName"],"</td>"),o+="<td>".concat(i[r]["reachNum"],"</td>"),o+="<td>".concat(i[r]["showNum"],"</td>"),o+="<td>".concat(i[r]["clicksNum"],"</td>"),o+="<td>".concat(i[r]["ctr"]?i[r]["ctr"]:"","</td>"),o+="<td>".concat(i[r]["cvr"]?i[r]["cvr"]:"","</td>"),o+="<td>".concat(i[r]["cpm"]?i[r]["cpm"]:"","</td>"),o+="<td>".concat(i[r]["cpc"]?i[r]["cpc"]:"","</td>"),o+="<td>".concat(i[r]["relevanceScore"],"</td>"),o+="<td>".concat(i[r]["installsNum"],"</td>"),o+="<td>".concat(i[r]["spend"],"</td>"),o+="<td>".concat(i[r]["cpi"]?i[r]["cpi"]:"","</td>"),o+="</tr>";o+="</tbody></table>",_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportHTML("dataTable",s,o)},ADFORM:function(t,e){t.adformlist=e.data.list,t.adformtotal=e.data.total},ADFORMOUT:function(t,e){var a=e.res,s=e.name,i=a.data.list,n=["广告系列名称","推广计划名称","触达","展示","点击","CTR","CVR","CPM","CPC","相关度","安装","花费","CPI"],o="<table><thead><tr>";n.forEach(function(t){o+="<th>".concat(t,"</th>")}),o+="</tr></thead><tbody>";for(var r=0;r<i.length;r++)o+="<tr>",o+="<td>".concat(i[r]["adCampaignName"],"</td>"),o+="<td>".concat(i[r]["adPlanName"],"</td>"),o+="<td>".concat(i[r]["reachNum"],"</td>"),o+="<td>".concat(i[r]["showNum"],"</td>"),o+="<td>".concat(i[r]["clicksNum"],"</td>"),o+="<td>".concat(i[r]["ctr"]?i[r]["ctr"]:"","</td>"),o+="<td>".concat(i[r]["cvr"]?i[r]["cvr"]:"","</td>"),o+="<td>".concat(i[r]["cpm"]?i[r]["cpm"]:"","</td>"),o+="<td>".concat(i[r]["cpc"]?i[r]["cpc"]:"","</td>"),o+="<td>".concat(i[r]["relevanceScore"],"</td>"),o+="<td>".concat(i[r]["installsNum"],"</td>"),o+="<td>".concat(i[r]["spend"],"</td>"),o+="<td>".concat(i[r]["cpi"]?i[r]["cpi"]:"","</td>"),o+="</tr>";o+="</tbody></table>",_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportHTML("dataTable",s,o)},CREATEFORM:function CREATEFORM(state,r){state.createformlist=r.data.list,state.createformtotal=r.data.total,state.createformlist.forEach(function(v){v.imageUrl&&(v.img=eval("("+v.imageUrl+")").imageUrl)}),state.createformsum=r.data.createSum?r.data.createSum:{}},CREATECARD:function(t,e){t.createcardlist=e.data.list,t.createcardtotal=e.data.total},CREATEFORMOUT:function CREATEFORMOUT(state,_ref13){var res=_ref13.res,name=_ref13.name,dt=res.data.list,titlear=["创意ID","创意名称","缩略图","国家","触达","展示","点击","CTR","CVR","CPM","CPC","相关度","安装","花费","CPI"],str="<table><thead><tr>";titlear.forEach(function(t){str+="<th>".concat(t,"</th>")}),str+="</tr></thead><tbody>",dt.forEach(function(v){str+="<tr>",str+="<td style=\"mso-number-format:'\\@'\">".concat(v["creativeId"],"</td>"),str+="<td>".concat(v["adCreativeName"],"</td>"),str+="<td>".concat(v.imageUrl?eval("("+v.imageUrl+")").imageUrl:"","</td>"),str+="<td>".concat(v["country"]?v["country"]:"","</td>"),str+="<td>".concat(v["reachNum"],"</td>"),str+="<td>".concat(v["showNum"],"</td>"),str+="<td>".concat(v["clicksNum"],"</td>"),str+="<td>".concat(v["ctr"]?v["ctr"]:"","</td>"),str+="<td>".concat(v["cvr"]?v["cvr"]:"","</td>"),str+="<td>".concat(v["cpm"]?v["cpm"]:"","</td>"),str+="<td>".concat(v["cpc"]?v["cpc"]:"","</td>"),str+="<td>".concat(v["relevanceScore"],"</td>"),str+="<td>".concat(v["installsNum"],"</td>"),str+="<td>".concat(v["spend"],"</td>"),str+="<td>".concat(v["cpi"]?v["cpi"]:"","</td>"),str+="</tr>"}),str+="</tbody></table>",_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportHTML("",name,str)},CREATECARDOUT:function(t,e){var a=e.res,s=e.name,i=a.data.list,n=["创意ID","创意名称","卡片ID","卡片名称","国家","点击"],o="<table><thead><tr>";n.forEach(function(t){o+="<th>".concat(t,"</th>")}),o+="</tr></thead><tbody>",i.forEach(function(t){o+="<tr>",o+="<td style=\"mso-number-format:'\\@'\">".concat(t["creativeId"],"</td>"),o+="<td>".concat(t["adCreativeName"],"</td>"),o+="<td style=\"mso-number-format:'\\@'\">".concat(t["creativeCardId"],"</td>"),o+="<td>".concat(t["creativeCardName"],"</td>"),o+="<td>".concat(t["country"]?t["country"]:"","</td>"),o+="<td>".concat(t["clicksNum"],"</td>"),o+="</tr>"}),o+="</tbody></table>",_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportHTML("",s,o)},DAYCPITABLE:function(t,e){t.daycpilist=[],t.daycpilist=e.data.pageInfoAll.list.slice(0),t.daycpitotal=e.data.pageInfoAll.total,t.cpicountry=e.data.countryList?e.data.countryList:[],t.cpiimpression=e.data.impressionList?e.data.impressionList:[]},DAYCPI:function(t,e){var a=e.data.pageInfoAll.list,s=[],i=[],n={name:"安装",type:"line",smooth:!0,stack:"",data:[]},o={name:"花费",type:"line",smooth:!0,stack:"",data:[]},r={name:"CPI",type:"line",smooth:!0,stack:"",data:[]};a.forEach(function(t){var e={};e.name=t.appName,e.value=t.installsNum,n.data.push(t.installsNum),o.data.push(t.spend),r.data.push(t.cpi),i.push(_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].timeFormat(t.insightDate,"yyyy-MM-dd"))}),s.push(n,o,r),myChart4.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].appChart(i,s))},DAYCPIOUT:function(t,e){var a=e.res,s=e.name,i=a.data.pageInfoAll.list,n=["日期","国家","平台","安装","花费","CPI"],o="<table><thead><tr>";n.forEach(function(t){o+="<th>".concat(t,"</th>")}),o+="</tr></thead><tbody>";for(var r=0;r<i.length;r++)o+="<tr>",o+="<td>".concat(_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].timeFormat(i[r]["insightDate"],"yyyy-MM-dd"),"</td>"),o+="<td>".concat(i[r]["country"],"</td>"),o+="<td>".concat(i[r]["impressionDevice"],"</td>"),o+="<td>".concat(i[r]["installsNum"],"</td>"),o+="<td>".concat(i[r]["spend"],"</td>"),o+="<td>".concat(i[r]["cpi"]?i[r]["cpi"]:"","</td>"),o+="</tr>";o+="</tbody></table>",_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportHTML("daycpiTable",s,o)},OPTIONMORE:function(t,e){var a=e.res,s=e.keyword;t.adcampaign="campaignKeyword"==s?a.data:[],t.adaccount="accountKeyword"==s?a.data:[],t.adcreate="creativeKeyword"==s?a.data:[]},MATTERLIST:function(t,e){var a=e.res,s=e.type,i=e.name;i?function(){var t=a.data.list,e=[{name:0==s?"FB图片编号":"FB视频编号",key:"materialId"},{name:0==s?"图片":"视频",key:"materialUrl"},{name:"触达",key:"reachNum"},{name:"展示",key:"showNum"},{name:"点击",key:"clicksNum"},{name:"CTR",key:"ctr"},{name:"CVR",key:"cvr"},{name:"CPM",key:"cpm"},{name:"CPC",key:"cpc"},{name:"相关度",key:"relevanceScore"},{name:"安装",key:"installsNum"},{name:"花费",key:"spend"},{name:"CPI",key:"cpi"}],n="\ufeff";n+=""+e.map(function(t){return t.name}).join(","),n+="\n";for(var o=function(a){var s="";e.forEach(function(e){"materialId"==e.key?s+=",".concat(null!==t[a][e.key]&&void 0!==t[a][e.key]&&""!==t[a][e.key]?t[a][e.key]+"\t":"--"):s+=",".concat(null!==t[a][e.key]&&void 0!==t[a][e.key]&&""!==t[a][e.key]?t[a][e.key]:"--")}),s=s.substr(1),n+=s,n+="\n"},r=0;r<t.length;r++)o(r);var c="";c+="合计, ,",e.forEach(function(t){"materialId"!=t.key&&"materialUrl"!=t.key&&(c+=a.data[t.key]+",")}),n+=c,_js_common__WEBPACK_IMPORTED_MODULE_17__["a"].exportEXCEL("outAdList",i,n,"xls")}():0==s?(t.imagematterlist=a.data.list,t.imagematterlist.forEach(function(t){t.ctr=(100*t.ctr).toFixed(2)+"%",t.cvr=(100*t.cvr).toFixed(2)+"%"}),t.imagemattersum=a.data,t.imagemattertotal=a.data.count,t.imagemattersum,t.imagemattersum["ctr"]=t.imagemattersum["ctr"]?(100*t.imagemattersum["ctr"]).toFixed(2)+"%":t.imagemattersum["ctr"],t.imagemattersum["cvr"]=t.imagemattersum["cvr"]?(100*t.imagemattersum["cvr"]).toFixed(2)+"%":t.imagemattersum["cvr"]):(t.videomatterlist=a.data.list,t.videomatterlist.forEach(function(t){t.ctr=(100*t.ctr).toFixed(2)+"%",t.cvr=(100*t.cvr).toFixed(2)+"%"}),t.videomattersum=a.data,t.videomattertotal=a.data.count,t.videomattersum,t.videomattersum["ctr"]=t.videomattersum["ctr"]?(100*t.videomattersum["ctr"]).toFixed(2)+"%":t.videomattersum["ctr"],t.videomattersum["cvr"]=t.videomattersum["cvr"]?(100*t.videomattersum["cvr"]).toFixed(2)+"%":t.videomattersum["cvr"])},TARGETADLIST:function(t,e){t.targetadlist=e.data.list,t.targetadlist.forEach(function(t){t.secondtree=!0,t.isIndeterminate=!1})},TARGETADSETLIST:function(t,e){var a=e.r,s=(e.campaignid,a.data.list);s.forEach(function(t){t.checked=""}),t.targetadsetlist=s},TARGETTREE:function(t,e){t.targetadsetlist=t.targetadsetarray["campaignid_".concat(e)]},TARGETLIST:function(t,e){t.targetlist=e.data.data,t.targettotal=e.data.total,t.targetlist.forEach(function(t){switch(t.ifedit=t.ownAccountId.split("_")[1]==t.accountId,t.ifdelete=!t.lookalikeAudienceIds,t.approximateCount=1e3==t.approximateCount?"<1000":t.approximateCount,t.operationStatusCode){case 200:t.statusName="正常";break;case 400:t.statusName="警告";break;case 441:t.statusName="准备中";break;case"":case null:case void 0:t.statusName="--";break;default:t.statusName="错误";break}var e=[{name:"客户文件",key:"CUSTOM"},{name:"网站",key:"WEBSITE"},{name:"应用",key:"APP"},{name:"线下转化",key:"OFFLINE_CONVERSION"},{name:"CLAIM",key:"CLAIM"},{name:"合作伙伴",key:"PARTNER"},{name:"MANAGED",key:"MANAGED"},{name:"视频",key:"VIDEO"},{name:"预约",key:"ENGAGEMENT"},{name:"账户包",key:"BAG_OF_ACCOUNTS"},{name:"研究规则受众",key:"STUDY_RULE_AUDIENCE"},{name:"FOX",key:"FOX"}];switch(t.subtype){case"LOOKALIKE":var a=JSON.parse(t.lookalikeSpec).origin[0];"custom_audience"==a.type?(t.childType=a.name?"自定义受众：".concat(a.name):"",t.childliketype="custom_audience"):"campaign_conversion"==a.type?(t.childType="广告转化",t.childliketype="campaign_conversion"):"page"==a.type&&(t.childType="主页粉丝",t.childliketype="page");break;default:var s=e.find(function(e){return e.key==t.subtype});t.childType=s?s.name:t.subtype;break}}),t.targettype=[{name:"不限",value:"-1"},{name:"类似受众",value:"LOOKALIKE"},{name:"自定义受众",value:"APP"}]},TARGETDETAIL:function(t,e){t.targetdetail=e.data,t.targetdetail.forEach(function(t){switch(t.operationStatus){case 200:t.statusName="正常";break;case 400:t.statusName="警告";break;case 441:t.statusName="准备中";break;case"":case null:case void 0:t.statusName="--";break;default:t.statusName="错误";break}t.approximateCount=1e3==t.approximateCount?"<1000":t.approximateCount})},APPACCOUNT:function(t,e){t.appaccount=e.data},TARGETADDDETAIL:function(t,e){t.targetadddetail=e.data},TARGETINFO:function(t,e){var a=e.r,s=e.type;switch(s){case"app":t.targetinfo=a.data;break;case"lookalike":t.liketargetinfo=a.data;break;default:t.specialtargetinfo=a.data;break}},TARGETACCOUNT:function(t,e){var a=[];e.data.forEach(function(t){var e={name:t.fbAccountName,fbId:t.fbAccountId};a.push(e)}),t.targetaccount=a},LIKETARGET:function(t,e){t.liketarget=e.data},TARGETCAMPAINGNS:function(t,e){var a=e.res,s=e.pageIndex;1==s&&(t.targetcampaigns=[]),t.targetcampaigns=t.targetcampaigns.concat(a.data.list),t.targetcampaigns.length!=a.data.total&&(t.ifmorecampaigns=!0)},SAMELIKE:function(t){t.ifsame=!0},TARGETPLANLIST:function(t,e){var a=e.data.list;a.forEach(function(t){t.treegradelist=[],t.secondtree=!0,t.isIndeterminate=!1}),t.targetplanlist=a},TARGETPLANLISTCHECK:function(t,e){var a=e.id,s=e.key,i=e.vl;t.targetadlist.forEach(function(t){a?t.campaignId==a&&(t[s]=i):(console.log(s),t[s]=i)})},TARGETTREECHECK:function(t,e){var a=e.check;t.targetadsetlist.forEach(function(t){t.checked=a})},TARGETLOGOPENCLOSE:function(t,e){var a=e.ifopen;a?t.targetplanlist.forEach(function(e){-1!=t.filterarr.indexOf(e.id)&&(console.log(e.id),e.disabled=!1)}):t.targetplanlist.forEach(function(t){t.disabled=!0})},TARGETCAMPAIGNACCOUNT:function(t,e){t.targetcampaignaccount=e.data},DELETEDETAIL:function(t,e){t.deleteusing=e.data.usedAudience,t.deletesharing=e.data.sharedAudience},REGULARLIST:function(t,e){t.regularlist=e.data.list,t.regularlist.forEach(function(t){switch(t.ruleStatus){case 0:t.statusName="测试";break;case 1:t.statusName="已上架";break;case 2:t.statusName="已下架";break}}),t.regulartotal=e.data.total},ALLRULES:function(t,e){t.allrules=e.data},GETRULELIST:function(t,e){t.newrulelist=e.data.list,t.newruletotal=e.data.count,t.newrulelist.forEach(function(t){var e=JSON.parse(t.executionSpec);"NOTIFICATION"==e["execution_type"]&&(t.noedit=!0);var a=JSON.parse(t.evaluationSpec);t.iftrigger="TRIGGER"==a["evaluation_type"]})},REGUFORMDATA:function(t,e){var a=e.data.ruleDurations,s=[],i=[];for(var n in a){var o={};o.name=n,o.value=a[n],s.push(o),i.push(o.name)}myChart5.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].regularPie(i,s,"规则启用比例"));var r=e.data.ruleGroupTriggerCounts,c=[],l=[];for(var u in r){var d={};d.name=u,d.value=r[u],c.push(d),l.push(d.name)}console.log(c),myChart6.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].regularPie(l,c,"规则触发比例"));var m=e.data.ruleGroupTriggerStatistics,p=[],f=[],h=[];for(var _ in m)p.push(m[_].triggerCount),f.push((100*m[_].fbTargetRate).toFixed(2)),h.push(_);var v=[{name:"规则触发数",type:"bar",data:p},{name:"触发广告占比",type:"bar",data:f,yAxisIndex:1}],g="1000000000000",b=Math.max.apply(Math,p).toString().length,y=g.substr(0,b-1),k=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(Math.max.apply(Math,p)/(y||1)+1)*(y||1),E=k/5,C=Math.max.apply(Math,f),O=0;switch(!0){case C>10:O=10*(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(C/10)+1);break;case C>1:O=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(C)+1;break;default:O=(_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_10___default()(10*C)+1)/10;break}var w=O/5;myChart7.setOption(_js_charts__WEBPACK_IMPORTED_MODULE_16__["a"].triggerCharts(h,v,k,E,O,w)),t.ruleform=[];var I=e.data.ruleEffects;for(var T in I){var x={};x.name=T,x.groupId=I[T].groupId,x.installChange=I[T].installChange,x.costChange=I[T].costChange,x.cpiChange=I[T].cpiChange,t.ruleform.push(x)}},MESSAGELIST:function(t,e){t.messagelist=e.data,t.messagetotal=e.data.length},TEMPSIZE:function(t,e){t.tempsize=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e.data).length>0?_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e.data).map(function(t){return{name:t,delete:e.data[t]}}):[]},TEMPTRADE:function(t,e){t.temptrade=_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e.data).length>0?_Users_yehubin_project_atom_front_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e.data).map(function(t){return{name:t,delete:e.data[t]}}):[]},TEMPLATELIST:function(t,e){t.templatetotal=e.data.total,t.templatelist=e.data.list},TEMPDETAIL:function(t,e){t.tempdetail=e.data},TEMPIMAGES:function(t,e){var a=e.data.list;a.forEach(function(t){t.select=!1}),t.tempimages=a,t.tempimagestotal=e.data.total}}},d5f4:function(t,e,a){},d676:function(t,e,a){"use strict";var s=a("c469"),i=a.n(s);i.a},d68a:function(t,e,a){},d7cb:function(t,e,a){},d836:function(t,e,a){"use strict";var s=a("383a"),i=a.n(s);i.a},d867:function(t,e,a){"use strict";var s=a("b83c"),i=a.n(s);i.a},d8c3:function(t,e,a){"use strict";var s=a("d2e3"),i=a.n(s);i.a},d8ff:function(t,e,a){},d927:function(t,e,a){"use strict";var s=a("56d6"),i=a.n(s);i.a},d97f:function(t,e,a){"use strict";var s=a("ccd0"),i=a.n(s);i.a},da77:function(t,e,a){"use strict";var s=a("1530"),i=a.n(s);i.a},daba:function(t,e,a){},dca7:function(t,e,a){},dd06:function(t,e,a){"use strict";var s=a("d7cb"),i=a.n(s);i.a},dd46:function(t,e,a){"use strict";var s=a("77d2");e["a"]={itemlist:"project/getMyProject",changepassword:"user/changePassword?oldPassword={oldPassword}&password={password}&password2={password2}",gettoken:"facebook/getLongTimeToken",logout:"user/logout",messagecount:"user/UnreadMessageCount",videourl:"tool/transformUrl",initurl:"report/rptTotal",appurl:"report/rptAppcpi",appcpitotal:"report/sumAppcpi",counturl:"report/countRecharge",customevent:"report/afEvents?",gettag:"report/queryTag?",savetag:"report/saveTag?",bmlist:"facebook/bms",addbmlist:"facebook/sync/bms",deletebm:"facebook/delBadAccount?",savebm:"facebook/save/bms",bmaccountlist:"facebook/adaccounts?bm_id={bmid}",addaccountlist:"facebook/sync/adaccounts?bm_id={bmid}",saveaccount:"facebook/save/adaccounts",switchstatus:"facebook/updateAccountStatus",pagelist:"page/pageList?bm_id={bmid}",addpagelist:"page/sync/pages?bm_id={bmid}",savepage:"page/save/pages",pbia:"facebook/pbia?page_id={pageid}",applist:"facebook/applicationList",addapplist:"facebook/sync/applications",saveapp:"facebook/save/applications",setapp:"facebook/application/adaccounts?application_id={applicationid}",cansetapp:"facebook/application/canSyncAdaccount?application_id={applicationid}",saveset:"facebook/application/saveAdaccounts",delset:"facebook/application/delAdaccounts",setaf:"facebook/application/bangdingAf?",getafstate:"facebook/application/afState",manageofflist:"project/getProjects?keywords={keywords}&status={status}&pageIndex={pageIndex}&pageSize={pageSize}",managelist:"project/getProjectsRichInfo?",addproject:"project/addProject",editproject:"project/updateProject",userslist:"project/users",adaccount:"project/getAllAdaccountWithoutBm",projectover:"project/offProject",projectbegin:"project/projectIsON",projectdelete:"project/{projectId}/deleteProject?",getallot:"project/{projectId}/assignedFbAccountIds",setallot:"project/{projectId}/assignFbAccountIds",commonaccounts:"project/getAdaccounts?",commonpages:"project/getPages?",commonapps:"project/getApplications?",getrulelist:"adRule/list?",deleterule:"adRule/{ruleId}/delete",ruleclose:"adRule/{ruleId}/close",ruleopen:"adRule/{ruleId}/open",addrule:"adRule/add",editrule:"adRule/update",getexecute:"adRule/{fbRuleId}/preview",executerule:"adRule/{fbRuleId}/execute",openrule:"optimize/{projectId}/ruleGroups/add",closerule:"optimize/{projectId}/ruleGroups/delete",optimize:"adRule/logs?",optimizedetail:"adRule/logResults?",optimizeadaccount:"optimize/getAdaccountLists?",matchmd5:"".concat(s["a"]["production"].MD5_URL,"/file/search"),fileupload:"".concat(s["a"]["production"].UPLOAD_URL,"/file/"),classify:"creative/getClassifys?projectId={projectid}",createlist:"creative/getCreatives?",countries:"common/countries",createcountry:"creative/getCountrys?",updatesex:"creative/updateSex",createopen:"creative/creativeStatusisOn",createclose:"creative/creativeStatusisOff",syncall:"creative/synCreatives?",syncgroup:"creative/synCreateiveAccount",synctime:"creative/getSynTime?",addcountries:"creative/addCreativeCountrys?creativityIds={creativityIds}&countryId={countryId}",synclist:"creative/getCreativePage?",synclistall:"creative/synAssignCreatives?ids={ids}",allpagelist:"page/allPages",actionlist:"creative/actionCallOn",toaddcreate:"creative/addCreativity",addcreates:"creative/addCreatives",language:"common/locales",interests:"common/interests",platform:"facebook/application?application_id={applicationid}",system:"common/versions?os={os}",addcreatelist:"creative/getCreativesNoPage",creategener:"plan/create",planlist:"plan/list?",plancountry:"project/countries?project_id={projectid}",changeprice:"plan/updateGoalBid",inusecreate:"plan/inUsedCreative?",nousecreate:"plan/notUsedCreative?",addcreate:"plan/addCreative",delcreate:"plan/delCreative",autoselect:"plan/autoSelectCreative?",delallcreate:"plan/delAllCreative",addallcreate:"plan/addAllCreative?",accountlist:"plan/adaccounts?",addaccount:"plan/addAdaccount",delaccount:"plan/delAdaccount",planlog:"plan/create/log?",logdetail:"plan/adCreateDetail?",adfailreason:"plan/errorMsg/ad?",adsetfailreason:"plan/errorMsg/adset?",campaignfailreason:"plan/errorMsg/campaign?",genertarget:"v2/audience/usableAudienceList?",generaccount:"plan/getAccountByAudience?",logcreate:"plan/createAdv2",logcreatenum:"plan/plan/predictCreateDetail?",createinfo:"plan/info?",editcreate:"plan/update",openplan:"plan/openPlan",closeplan:"plan/closePlan",bidguide:"plan/priceGuide?",classifyfilter:"plan/usableCreativeCountWithPlan?",classifyfilternoplan:"plan/usableCreativeCount?",adlisttotal:"projectad/sumFbAdList",adlist:"projectad/getProjectsAd?",adlistnew:"projectad/getFbAdList",adlistdata:"projectad/getProjectsAdCpi?",changeadstatus:"projectad/updateStatus?",adafdata:"projectad/getAfDatas?",eventdata:"projectad/getAfEvents?",savecondition:"projectad/saveTag?",getcondition:"projectad/queryTag?",deletecondition:"projectad/deleteTag?",updatetime:"projectad/fbDataUpdateTime",resetname:"fbAd/updateName?",seekreplace:"fbAd/replaceName?",seekreplacecreate:"fbAd/fbAdCreative",creativedetail:"fbAd/getCreatives?",adcampaignlist:"fbAd/getFbCampaign?",adsetlist:"fbAd/getFbAdSet?",adcopy:"fbAd/copyAd",calcucount:"ad/getDetailCount?",createcampaign:"ad/createCampaign",campaigninfo:"ad/getCampaignInfo?",editcampaign:"ad/editCampaign",createcampaignlist:"ad/projectCampaignList?",createadset:"ad/createAdSet",adsetinfo:"ad/getAdSetInfo?",editadset:"ad/editAdSet",createadsetlist:"ad/projectAdSetList?",createad:"ad/createAd",adinfo:"ad/getAdInfo?",dynamiccreate:"fbAd/isDynamicCreative?",editad:"ad/editAd",createeditasync:"ad/modifyAdWithNewCreative",appinfo:"ad/getAppInfo?",isactivead:"ad/isIncludeAd?",asyncquery:"fbAd/getJob?",joblist:"asyncTasks/unCompleted",jobresultdetail:"asyncTasks/",calendardata:"/afFile/getDateList?",addatacsv:"".concat(s["a"]["production"].BASE_URL,"/afFile/upload"),submitafdata:"afFile/upload",affiledownload:"afFile/download?",adrulelist:"adRule/list4Apply?",userules:"adRule/addObjs",singlerules:"projectad/{objId}/rules",removerule:"projectad/{objId}/rules/remove",conditionlist:"report/getRptOption",datalist:"report/rptAccount",adformlist:"report/rptAd",createformlist:"report/rptCreate",daycpi:"report/rptCpi",getoptionmore:"report/getRptOptionMore?",createcard:"report/rptCreateCarousel?",matterlist:"report/rptMaterial",getvideourl:"report/video/source?",targetlist:"v2/audience/list?",targetdetail:"audience/detail?",appmethod:"audience/appEvents?",addtarget:"v2/audience/createCustomAudience",targetadddetail:"audience/createDetail?",liketarget:"v2/audience/getCustomAudienceByAccount?",autoliketarget:"v2/audience/createAudienceWithAudience",pageliketarget:"v2/audience/createAudienceUsePage",adliketarget:"v2/audience/createCustomAudienceWithCampaign",specialtarget:"v2/audience/editAudience",targetinfo:"v2/audience/getAudienceDetail?",targetcampaigns:"audience/campaigns?",campaigntoaccount:"audience/getAccountByBatch?",targetdelete:"v2/audience/deleteBatchAudience",targetshare:"v2/audience/shareAudience",deletedetail:"v2/audience/waitingDeleteAudienceDetail?",regularlist:"optimize/ruleGroupsList?",regularstatus:"optimize/update?",allrules:"optimize/allRules",reguformdata:"optimize/ruleRpt?",messagelist:"user/userMessage?",setmessage:"user/setUserMessageStatus?",setallread:"user/setUserMessageRead",messageCountWebsocket:"".concat(-1!=location.protocol.indexOf("https:")?"wss":"ws","://").concat(s["a"]["production"].WEBSOCKET_URL,"/websocket/"),sizetrade:"template/getTemplatValue?",addtemplate:"template/saveTemplate",templatelist:"template/findAll?",addsort:"template/insertValue?",deletetemp:"template/deleteTemplate?",deletesort:"template/deleteValue?",tempdetail:"template/findById?",edittemp:"template/updateTemplate",tempimagelist:"files/getAll?",savetempimage:"files/saveFile",savevideoimage:"files/saveVideoImage",getvideoimage:"files/findImage?",deletetempimage:"files/deleteFile?",downloadtempimage:"files/downloadZip?"}},dd4f:function(t,e,a){},de0b:function(t,e,a){"use strict";a.r(e);a("3b2b"),a("a481"),a("6b54"),a("28a5"),a("cadf"),a("551c"),a("097d");var s,i,n,o,r,c,u,d,m,p,f,h,_,v=a("a026"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("router-view")],1)},b=[],y={mounted:function(){this.$store.dispatch("messageWebsocket")}},k=y,E=(a("3f95"),a("2877")),C=Object(E["a"])(k,g,b,!1,null,null,null),O=C.exports,w=a("8c4f"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"elheader"},[a("top-header")],1),a("router-view")],1)},T=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("p",{staticClass:"logo"},[a("router-link",{attrs:{to:"/pandect"}})],1),a("user-info"),a("header-message"),a("import-menu",{on:{showAddBox:t.showAddBox,showVideoBox:t.showVideoBox}}),a("video-url",{attrs:{status:t.status2},on:{"update:status":function(e){t.status2=e}}}),a("fail-detail"),a("manage-add",{attrs:{status:t.addstatus,allotStatus:t.allotstatus},on:{"update:status":function(e){t.addstatus=e},"update:allotStatus":function(e){t.allotstatus=e}}}),a("allot-account",{attrs:{status:t.addstatus,allotStatus:t.allotstatus},on:{"update:status":function(e){t.addstatus=e},"update:allotStatus":function(e){t.allotstatus=e},resetList:t.resetList}})],1)},S=[],A=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"操作详情",visible:t.jobfaildetail},on:{close:t.toCancel}},[a("p",{directives:[{name:"show",rawName:"v-show",value:0==t.taskresult.length,expression:"taskresult.length == 0"}],staticClass:"noinfo"},[t._v("该任务不存在！")]),a("p",{directives:[{name:"show",rawName:"v-show",value:0!=t.taskresult.length,expression:"taskresult.length != 0"}],staticClass:"detailinfo"},[t._v(t._s(t.tasknamedetail)+"，"+t._s(t.tasksuccessdetail)+"项成功，"+t._s(t.taskfaildetail)+"项失败")]),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:0!=t.taskresult.length,expression:"taskresult.length != 0"}],attrs:{type:"card","empty-text":"全部完成"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.taskresult,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.tabname,name:""+(s+1)}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tasks,"max-height":"250"}},[a("el-table-column",{attrs:{prop:"extraInfo",label:e.tabelhead},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.extraInfo?e.row.extraInfo:"--"))]}}])}),a("el-table-column",{attrs:{prop:"result",label:"错误信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.result))]}}])})],1)],1)}),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toCancel}},[t._v("确 定")])],1)],1)}),j=[],D=a("cebc"),M=a("2f62"),P={data:function(){return{activeName:"1"}},computed:Object(D["a"])({},Object(M["d"])(["jobfaildetail","taskresult","taskfaildetail","tasksuccessdetail","tasknamedetail","jobfailkey"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{handleClick:function(){},toCancel:function(){this.SETSTATE({k:"jobfaildetail",v:!1}),this.SETSTATE({k:"taskresult",v:[]}),this.SETSTATE({k:"taskfaildetail",v:0}),this.SETSTATE({k:"tasksuccessdetail",v:0}),this.SETSTATE({k:"tasknamedetail",v:""})}}),watch:{jobfaildetail:function(t,e){t&&this.$store.dispatch("joblistDetail")}}},L=P,R=(a("cbcc"),Object(E["a"])(L,A,j,!1,null,"c1941128",null)),N=R.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[a("router-link",{attrs:{to:"/message"}},[a("i",{staticClass:"el-icon-message"}),a("p",{directives:[{name:"show",rawName:"v-show",value:parseInt(t.messagecount)>0,expression:"parseInt(messagecount) > 0"}]},[t._v(t._s(t.messagecount))])])],1)},$=[],B={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["messagecount"])),mounted:function(){this.$store.dispatch("getMessageCount")}},F=B,V=(a("5c87"),Object(E["a"])(F,U,$,!1,null,"7e96ad51",null)),K=V.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:t.id?"编辑项目":"创建项目",visible:t.status},on:{close:t.toCancel}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{staticClass:"input",attrs:{"auto-complete":"off",placeholder:"输入项目名称"},model:{value:t.form.projectname,callback:function(e){t.$set(t.form,"projectname",e)},expression:"form.projectname"}})],1),a("el-form-item",{attrs:{label:"投放平台"}},[a("el-radio-group",{model:{value:t.form.radio1,callback:function(e){t.$set(t.form,"radio1",e)},expression:"form.radio1"}},[a("el-radio",{attrs:{label:"Facebook ADS"}})],1)],1),a("el-form-item",{attrs:{label:"项目目标"}},[a("el-radio-group",{model:{value:t.form.radio2,callback:function(e){t.$set(t.form,"radio2",e)},expression:"form.radio2"}},[a("el-radio",{attrs:{label:"安装应用"}})],1)],1),a("el-form-item",{attrs:{label:"应用"}},[a("el-select",{staticClass:"addselect",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择此项目的应用，多选"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.manageapplist,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.applicationId}})}),1)],1),a("el-form-item",{attrs:{label:"主页"}},[a("el-select",{staticClass:"addselect",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择此项目的主页，多选"},model:{value:t.form.page,callback:function(e){t.$set(t.form,"page",e)},expression:"form.page"}},t._l(t.adpages,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1),a("el-form-item",{attrs:{label:"参与成员"}},[a("el-select",{staticClass:"addselect",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择此项目的成员，多选"},model:{value:t.form.member,callback:function(e){t.$set(t.form,"member",e)},expression:"form.member"}},t._l(t.allusers,function(t,e){return a("el-option",{key:e,attrs:{label:t.nickName,value:t.nickName+"|"+t.id+"|"+t.loginName}})}),1),a("p",{staticClass:"creator"},[a("span",{staticClass:"cp"},[t._v("创建者")]),t._v("\n        ："+t._s(t.myname)+"\n        "),a("el-tooltip",{staticClass:"item2",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("项目创建者会自动添加到参与成员列表中，无需选择")]),a("i",{staticClass:"el-icon-warning"})])],1)],1),a("el-form-item",{attrs:{label:"广告账户"}},[a("el-select",{staticClass:"addselect",attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择此项目的广告账户，多选"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.adaccountslist,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+"("+t.fbAccountId+")",value:t.name+"|"+t.fbId,disabled:1!=t.accountStatus}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("确 定")])],1)],1)},z=[],G=(a("ac6a"),a("7514"),a("96cf"),a("3b8d")),H=a("815e"),q={props:{status:{type:Boolean,required:!0},id:{type:String,default:""},allotStatus:{type:Boolean,required:!0}},data:function(){return{form:{projectname:"",radio1:"Facebook ADS",radio2:"安装应用",region:[],page:[],member:[],account:[]},myid:localStorage.getItem("atom_id"),myname:localStorage.getItem("atom_nickname"),next:!1,formLabelWidth:"100px"}},mounted:function(){},computed:Object(D["a"])({},Object(M["d"])(["manageapplist","userslist","adaccountslist","adpages","createoption","createreset"]),Object(M["b"])(["dismanage"]),{allusers:function(){var t=this;return this.userslist.filter(function(e){return e.id!=t.myid})}}),watch:{status:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,this.$store.dispatch("getUsersList");case 3:return t.next=5,this.$store.dispatch("getAdAccount");case 5:this.$store.dispatch("getAdPages"),this.$store.dispatch("manageApplist"),this.id?(this.$store.dispatch("getAllot",{projectId:this.id}),this.editDataSet()):this.dataSet();case 8:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},methods:Object(D["a"])({},Object(M["c"])(["SETOBJSTATE","SETSTATE"]),{editDataSet:function(){var t=this,e=this.dismanage.find(function(e){return e.id==t.id});this.form.projectname=e.projectName,this.form.region=e.applicationId?e.applicationId.split(","):"",this.form.page=e.fbPageIds?e.fbPageIds.split(","):"",this.form.member=e.participaterIds?e.participaterIds.split(",").filter(function(e){return e!=t.myid}).map(function(e){var a=t.userslist.find(function(t){return t.id==e});return a.nickName+"|"+a.id+"|"+a.loginName}):[],this.form.account=e.fbAccountIds?e.fbAccountIds.split(",").map(function(e){var a=t.adaccountslist.find(function(t){return t.fbAccountId==e});return a.name+"|"+a.fbId}):[]},dataSet:function(){var t=this,e=function(e){var a=void 0;switch(e){case"member":a=[],t.createoption[e].forEach(function(e){e.id!=t.myid&&a.push("".concat(e.nickName,"|").concat(e.id,"|").concat(e.loginName))});break;case"account":a=[],t.createoption[e].forEach(function(t){a.push("".concat(t.name,"|").concat(t.fbId))});break;default:a=t.createoption[e];break}t.form[e]=a};for(var a in this.createoption)e(a)},dataCheck:function(){return""==this.form.projectname?[!1,"请输入项目名称"]:/\s/g.test(this.form.projectname)||this.form.projectname.replace(/[\u0391-\uFFE5]/g,"aa").length>50?[!1,"项目名称不能有空格，且长度不能大于50个字符"]:0==this.form.region.length?[!1,"请选择应用"]:0==this.form.page.length?[!1,"请选择主页"]:[!0]},toAdd:function(){var t=this,e=this.dataCheck();if(e[0]){var a=function(e){var a=void 0;switch(e){case"member":a=[];var s=t.userslist.find(function(e){return e.id==t.myid}),i=s.loginName,n=s.id,o=s.nickName;a.push({loginName:i,id:n,nickName:o}),t.form[e].forEach(function(t){var e=t.split("|");a.push({nickName:e[0],id:e[1],loginName:e[2]})});break;case"account":a=[],t.form[e].forEach(function(t){var e=t.split("|");a.push({name:e[0],fbId:e[1],select:!1})});break;default:a=t.form[e];break}t.SETOBJSTATE({obj:"createoption",name:e,v:a})};for(var s in this.form)a(s);this.id&&this.SETSTATE({k:"createeditid",v:this.id}),this.$emit("update:allotStatus",!0),this.next=!0,this.$emit("update:status",!1)}else Object(H["g"])(e[1])},dataReset:function(){this.form.projectname="",this.form.region=[],this.form.page=[],this.form.member=[],this.form.account=[],this.next=!1},stateReset:function(){for(var t in this.SETSTATE({k:"createeditid",v:""}),this.createreset)this.SETOBJSTATE({obj:"createoption",name:t,v:this.createreset[t]})},toCancel:function(){this.$emit("update:status",!1),this.$emit("update:id",""),this.next||this.stateReset(),this.dataReset()}})},J=q,Y=(a("7801"),Object(E["a"])(J,W,z,!1,null,"ff4ab1c2",null)),X=Y.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"分配账户",visible:t.allotStatus},on:{close:t.toCancel}},[a("div",{staticClass:"content"},[a("div",{staticClass:"member"},[a("p",{staticClass:"title"},[t._v("参与成员")]),a("el-input",{attrs:{placeholder:"搜索姓名/邮箱","prefix-icon":"el-icon-search"},model:{value:t.member,callback:function(e){t.member=e},expression:"member"}}),a("div",{staticClass:"list"},t._l(t.memberslist,function(e){return a("p",{key:e.id,staticClass:"line",on:{click:function(a){t.selectMember(e.nickName,e.id)}}},[a("span",{staticClass:"head"},[t._v(t._s(e.nickName.substr(0,1)))]),a("span",{staticClass:"name"},[t._v(t._s(e.nickName))])])}),0)],1),a("div",{staticClass:"account"},[a("p",{staticClass:"title"},[t._v(t._s(t.presentname)+"的广告账户")]),a("el-input",{attrs:{placeholder:"搜索广告账户ID/名称","prefix-icon":"el-icon-search"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),a("div",{staticClass:"list"},t._l(t.accountslist,function(e){return a("div",{key:e.fbId,staticClass:"line"},[a("div",{staticClass:"accountname"},[a("p",{class:{name:!0,on:e.select}},[t._v(t._s(e.name))]),a("p",{staticClass:"id"},[t._v(t._s(e.fbId.replace("act_","")))])]),a("el-checkbox",{on:{change:t.selectAccount},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"account.select"}})],1)}),0)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.createeditid||!t.allotid?a("el-button",{on:{click:t.toPrev}},[t._v("上一步")]):a("el-button",{on:{click:t.toCancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("确 定")])],1)])},Q=[],tt=(a("6762"),a("2fdb"),{props:{status:{type:Boolean,required:!0},allotStatus:{type:Boolean,required:!0}},data:function(){return{member:"",account:"",presentname:"",presentid:"",memberaccount:{},prev:!1}},watch:{members:function(t,e){var a=this;t.length>0&&(this.projectallot.length>0&&this.projectallot.forEach(function(t){a.memberaccount[t.userId]=[],a.memberaccount[t.userId]=a.memberaccount[t.userId].concat(t.fbAccountIds.split(",").map(function(t){return{fbId:"act_".concat(t),select:!0}}))}),this.selectMember(t[0].nickName,t[0].id))}},computed:Object(D["a"])({},Object(M["d"])(["createreset","projectallot","createeditid","allotid"]),Object(M["b"])(["members","accounts"]),{memberslist:function(){var t=this;return this.members.filter(function(e){return-1!=e.nickName.indexOf(t.member)||-1!=e.loginName.indexOf(t.member)})},accountslist:function(){var t=this;return this.accounts.filter(function(e){return-1!=e.name.indexOf(t.account)||-1!=e.fbId.indexOf(t.account)})}}),mounted:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE","SETOBJSTATE"]),{selectMember:function(t,e){this.presentname=t,this.presentid=e;var a=this.memberaccount[e]?this.memberaccount[e].map(function(t){return t.fbId}):[];this.accounts.forEach(function(t){t.select=!!a.includes(t.fbId)})},selectAccount:function(){this.memberaccount[this.presentid]=[],this.memberaccount[this.presentid]=this.memberaccount[this.presentid].concat(this.accounts.filter(function(t){return t.select}))},toPrev:function(){this.$emit("update:allotStatus",!1),this.$emit("update:status",!0),this.prev=!0},toCancel:function(){this.$emit("update:allotStatus",!1),this.prev||this.stateReset(),this.prev=!1,this.member="",this.account="",this.SETSTATE({k:"projectallot",v:[]})},stateReset:function(){for(var t in this.memberaccount={},this.SETSTATE({k:"createeditid",v:""}),this.SETSTATE({k:"allotid",v:""}),this.createreset)this.SETOBJSTATE({obj:"createoption",name:t,v:this.createreset[t]})},toSubmit:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a="创建",!this.createeditid){t.next=8;break}return t.next=4,this.$store.dispatch("editProject",{memberaccount:this.memberaccount});case 4:e=t.sent,a="编辑",t.next=18;break;case 8:if(!this.allotid){t.next=15;break}return t.next=11,this.$store.dispatch("setAllot",{memberaccount:this.memberaccount});case 11:e=t.sent,a="分配",t.next=18;break;case 15:return t.next=17,this.$store.dispatch("addProject",{memberaccount:this.memberaccount});case 17:e=t.sent;case 18:e.data?(Object(H["f"])("项目".concat(a,"成功")),this.$emit("resetList"),this.toCancel()):Object(H["a"])("项目".concat(a,"失败"));case 19:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()})}),et=tt,at=(a("f539"),Object(E["a"])(et,Z,Q,!1,null,"9e79a226",null)),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userinfo"},[a("span",{on:{mouseenter:t.showList,mouseleave:t.hideList}},[a("svg-icon",{attrs:{svgclass:"user",svgname:"user"}}),t._v("\n        "+t._s(t.nickname)+"\n        "),a("i")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list,expression:"list"}],staticClass:"list",on:{mouseenter:t.showList,mouseleave:t.hideList}},[a("p",{on:{click:t.changePassword}},[t._v("修改密码")]),a("p",{on:{click:t.toLogout}},[t._v("退出")])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"修改密码",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{staticClass:"input",attrs:{type:"password","auto-complete":"off",placeholder:"请输入旧密码"},model:{value:t.form.oldpassword,callback:function(e){t.$set(t.form,"oldpassword",e)},expression:"form.oldpassword"}})],1),a("el-form-item",{attrs:{label:"新密码"}},[a("el-input",{staticClass:"input",attrs:{type:"password","auto-complete":"off",placeholder:"6-18位字母或数字或特殊符号"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"重复新密码"}},[a("el-input",{staticClass:"input",attrs:{type:"password","auto-complete":"off",placeholder:"请再次输入密码"},model:{value:t.form.passwordagain,callback:function(e){t.$set(t.form,"passwordagain",e)},expression:"form.passwordagain"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toChange}},[t._v("确 定")])],1)],1)],1)},nt=[],ot={data:function(){return{list:!1,dialogFormVisible:!1,form:{oldpassword:"",password:"",passwordagain:""},formLabelWidth:"100px"}},created:function(){var t="nickname",e=localStorage.getItem("atom_nickname");this.SETSTATE({k:t,v:e})},mounted:function(){},computed:Object(D["a"])({},Object(M["d"])(["nickname"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showList:function(){this.list=!0},hideList:function(){this.list=!1},changePassword:function(){this.dialogFormVisible=!0},toLogout:function(){this.$store.dispatch("toLogout")},toChange:function(){var t=this.form.oldpassword,e=this.form.password,a=this.form.passwordagain;t?e?a?e===a?this.$store.dispatch("changePassword",{k:t,n1:e,n2:a}):Object(H["a"])("两次输入的密码不一样"):Object(H["a"])("重复密码不能为空"):Object(H["a"])("新密码不能为空"):Object(H["a"])("旧密码不能为空")}})},rt=ot,ct=(a("9a66"),Object(E["a"])(rt,it,nt,!1,null,"c99cd1da",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"menu"},[a("li",{staticClass:"special"},[a("router-link",{attrs:{to:"/pandect"}},[t._v("总览")])],1),a("li",[t._v("我的项目\n    "),a("i"),a("div",{staticClass:"list"},[t._l(t.itemlist,function(e,s){return a("p",{key:s},[a("router-link",{attrs:{to:"/project/"+e.id,title:e.projectName}},[t._v(t._s(e.projectName))])],1)}),a("p",{staticClass:"manage"},[a("router-link",{attrs:{to:"/manage"}},[t._v("管理项目")])],1),a("p",{staticStyle:{"padding-left":"20px"},on:{click:t.toAdd}},[t._v("\n        创建项目\n      ")])],2)]),a("li",[t._v("资源\n    "),a("i"),a("div",{staticClass:"list"},[a("p",[a("router-link",{attrs:{to:"/bm"}},[t._v("BM同步")])],1),a("p",[a("router-link",{attrs:{to:"/app"}},[t._v("APP同步")])],1)])]),a("li",[t._v("工具箱\n    "),a("i"),a("div",{staticClass:"list"},[a("p",{staticStyle:{"padding-left":"20px"},on:{click:t.videoTranslate}},[t._v("\n        视频转换\n      ")]),a("p",[a("router-link",{attrs:{to:"/temp"}},[t._v("模板制图")])],1)])]),a("li",{staticClass:"special"},[a("router-link",{attrs:{to:"/setting"}},[t._v("设置")])],1),a("li",{staticClass:"special"},[a("router-link",{attrs:{to:"/templates"}},[t._v("上传模板")])],1)])},dt=[],mt={data:function(){return{activeIndex:"1",activeIndex2:"1"}},mounted:function(){this.$store.dispatch("getItemList")},computed:Object(D["a"])({},Object(M["d"])(["itemlist"]),{ifSuperAdmin:function(){return!(!localStorage.getItem("atom_roleId")||"1"!=localStorage.getItem("atom_roleId"))}}),methods:{videoTranslate:function(){this.$emit("showVideoBox")},toAdd:function(){this.$emit("showAddBox")},handleSelect:function(t,e){console.log(t,e)}}},pt=mt,ft=(a("8ed4"),Object(E["a"])(pt,ut,dt,!1,null,"3b91ff74",null)),ht=ft.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"视频解析转换",visible:t.status,id:"videoLoad"},on:{close:t.toCancel}},[t._l(t.link,function(e,s){return a("div",{key:s,staticClass:"link"},[a("div",{staticClass:"linkfrom"},[a("span",{staticClass:"title"},[t._v("短视频链接")]),a("el-input",{staticClass:"input",attrs:{"auto-complete":"off",placeholder:"短视频链接默认文案：请输入gid、tiktok链接或短链接"},model:{value:t.link[s],callback:function(e){t.$set(t.link,s,e)},expression:"link[index]"}})],1),t.videoerrmsg[s]?a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.videoerrmsg[s].status,expression:"!videoerrmsg[index].status"}],staticClass:"result",staticStyle:{color:"red"}},[t._v(t._s(t.videoerrmsg[s].result))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.videoerrmsg[s].status,expression:"videoerrmsg[index].status"}],staticClass:"result"},[a("a",{attrs:{href:t.videoerrmsg[s].result,target:"_blank"}},[t._v(t._s(t.videoerrmsg[s].result))])])]):t._e()])}),a("div",{staticClass:"add"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.toAdd}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.videoresult.length>0,expression:"videoresult.length > 0"}],attrs:{type:"primary","data-clipboard-text":t.videoresult.join("\n\n"),round:"",id:"copyResult"}},[t._v("复制结果")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return e.stopPropagation(),t.toCancel(e)}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toTranslate}},[t._v("确 定")])],1)],2)},vt=[],gt=(a("b54a"),{props:["status"],data:function(){return{link:[""]}},computed:Object(D["a"])({},Object(M["d"])(["videoerrmsg","videoresult"])),mounted:function(){this.$textCopy("#copyResult")},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toTranslate:function(){var t=this.link.filter(function(t){return t});t=t.map(function(t){return t.trim()}),0!=t.length?this.$store.dispatch("videoUrlTranslate",{urls:t,originurl:this.link}):Object(H["g"])("至少输入一个需要转换的短视频链接")},toCancel:function(){this.link=[""],this.$emit("update:status",!1),this.SETSTATE({k:"videoerrmsg",v:{}}),this.SETSTATE({k:"videoresult",v:[]})},toAdd:function(){this.link.push("")},toCopy:function(){},showBox:function(){}})}),bt=gt,yt=(a("28ca"),Object(E["a"])(bt,_t,vt,!1,null,"7a9d75fe",null)),kt=yt.exports,Et={data:function(){return{status2:!1,addstatus:!1,allotstatus:!1}},components:{ImportMenu:ht,UserInfo:lt,ManageAdd:X,AllotAccount:st,HeaderMessage:K,VideoUrl:kt,FailDetail:N},methods:{showVideoBox:function(){this.status2=!0},showAddBox:function(){this.addstatus=!0},resetList:function(){"manage"!=this.$route.name&&this.$router.push({name:"manage"})}},mounted:function(){}},Ct=Et,Ot=(a("7c31"),Object(E["a"])(Ct,x,S,!1,null,"3114ac60",null)),wt=Ot.exports,It={components:{TopHeader:wt}},Tt=It,xt=(a("3ea5"),a("d32e"),Object(E["a"])(Tt,I,T,!1,null,"0e7b6c5c",null)),St=xt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bind"},[a("p",{staticClass:"title"},[t._v("绑定Facebook账号")]),a("p",{staticClass:"info"},[t._v("未绑定Facebook账号将无法使用Facebook相关功能，请先绑定")]),a("el-button",{attrs:{type:"primary"},on:{click:t.getAuth}},[t._v("去绑定")])],1)},jt=[],Dt={data:function(){return{}},methods:{getLongtimeToken:function(t){this.$store.dispatch("getLongToken",{token:t})},getAuth:function(){var t=this;FB.getLoginStatus(function(e){"connected"===e.status?t.getLongtimeToken(e.authResponse.accessToken):"not_authorized"===e.status?FB.login(function(t){this.getLongtimeToken(t.authResponse.accessToken)},{scope:"ads_management,ads_read,manage_pages,email,business_management"}):"unknown"===e.status&&FB.login(function(t){this.getLongtimeToken(t.authResponse.accessToken)},{scope:"ads_management,ads_read,manage_pages,email,business_management"})})}},mounted:function(){(function(t,e,a){var s,i=t.getElementsByTagName(e)[0];t.getElementById(a)||(s=t.createElement(e),s.id=a,s.src="//connect.facebook.net/zh_TW/sdk.js",i.parentNode.insertBefore(s,i))})(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:"329006174266183",autoLogAppEvents:!0,xfbml:!0,version:"v2.10"}),FB.AppEvents.logPageView()}}},Mt=Dt,Pt=(a("1839"),Object(E["a"])(Mt,At,jt,!1,null,"2062fb5b",null)),Lt=Pt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"contain"},[t.ifaccount&&0==t.appcount?a("div",{staticClass:"noapp"},[a("p",{staticClass:"title"},[t._v("暂无应用")]),a("router-link",{staticClass:"el-button toadd",attrs:{to:"/app"},on:{click:t.toAddapp}},[t._v("去添加")])],1):a("div",{staticClass:"hasapp"},[a("el-main",{staticClass:"main1"},[a("pandect")],1),a("el-main",{staticClass:"main2"},[a("sort",{on:{selectProject:t.selectProject}})],1),a("el-main",{staticClass:"main1"},[a("table-list")],1),a("el-main",{staticClass:"main2"},[a("app-chart")],1),t.ifapp?a("el-main",{staticClass:"main1"},[a("other-table",{attrs:{name:t.appname}}),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.appdatatotal,"current-page":t.appdataindex,"page-sizes":[20,200,500],"page-size":20},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1):t._e(),a("el-footer")],1)])},Nt=[],Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pandect"},[a("div",{staticClass:"title"},[a("p",{staticClass:"left"},[t._v("总览")]),a("p",{staticClass:"right"},[a("el-popover",{attrs:{trigger:"click",placement:"top",width:"600"}},[a("el-table",{attrs:{id:"waitAtt",data:t.paycountlist,height:"250"}},[a("el-table-column",{attrs:{prop:"bmName",width:"140",label:"所属BM"}}),a("el-table-column",{attrs:{width:"140",prop:"fbAccountId",label:"账号ID"}}),a("el-table-column",{attrs:{prop:"name",label:"账号名称"}}),a("el-table-column",{attrs:{width:"100",prop:"balance",label:"余额($)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.balance/100))])]}}])})],1),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[a("span",[t._v(t._s(t.paycount))]),t._v(" 个待充值广告账户")])],1)],1)]),a("div",{staticClass:"info"},[a("div",{staticClass:"chartbox"},[a("div",{staticClass:"data"},[a("p",{staticClass:"name"},[t._v("今日安装量")]),a("p",{staticClass:"count"},[t._v(t._s(t._f("numberFormat")(t.todayinstall)))])]),a("div",{staticClass:"chart",attrs:{id:"Chart1"}})]),a("div",{staticClass:"chartbox"},[a("div",{staticClass:"data"},[a("p",{staticClass:"name"},[t._v("今日花费")]),a("p",{staticClass:"count"},[t._v("$"+t._s(t._f("numberFormat")(t.todayexpend)))])]),a("div",{staticClass:"chart mb0",attrs:{id:"Chart2"}})])])])},$t=[],Bt=a("3eba"),Ft=a.n(Bt),Vt=(a("94b1"),a("ef97"),a("c037"),a("cd12"),a("007d"),a("cb8f"),a("627c"),a("b11c"),Ft.a),Kt={data:function(){return{}},mounted:function(){this.$store.dispatch("getPayCount"),myChart2=Vt.init(document.getElementById("Chart1")),myChart3=Vt.init(document.getElementById("Chart2"))},computed:Object(D["a"])({},Object(M["d"])(["paycount","paycountlist"]),Object(M["b"])(["todayinstall","todayexpend"]))},Wt=Kt,zt=(a("33df"),Object(E["a"])(Wt,Ut,$t,!1,null,null,null)),Gt=zt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sort"},[a("div",{staticClass:"left"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectApp},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("el-option",{attrs:{label:"所有APP",value:""}}),t._l(t.applist,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2),a("span",{staticClass:"tip"},[t._v("FB数据稳定期为28天，28天内数据均会微调")])],1),a("div",{staticClass:"right"},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}})],1)])])},qt=[],Jt={data:function(){return{value:"",value6:[(new Date).getTime()-5184e5,new Date],appid:""}},mounted:function(){},computed:Object(D["a"])({},Object(M["b"])(["applist"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{selectApp:function(){var t,e=this,a=this.applist.find(function(t){return t.id==e.value}),s="ifapp";if(!a)return this.appid="",t=!1,this.SETSTATE({k:s,v:t}),s="appdataappid",t=o,this.SETSTATE({k:s,v:t}),s="appdatasort",t="",this.SETSTATE({k:s,v:t}),s="appdatacountry",t="",this.SETSTATE({k:s,v:t}),s="appdataimporession",t="",void this.SETSTATE({k:s,v:t});var i=a.id,n=a.name;this.$emit("selectProject",n),t=!0,this.SETSTATE({k:s,v:t});var o=i;this.appid=i;var r=this.$timeFormat(0==this.value6.length?(new Date).getTime()-6048e5:this.value6[0],"yyyy-MM-dd"),c=this.$timeFormat(0==this.value6.length?(new Date).getTime():this.value6[1],"yyyy-MM-dd");s="appdataappid",t=o,this.SETSTATE({k:s,v:t}),s="appdatastartdate",t=r,this.SETSTATE({k:s,v:t}),s="appdataenddate",t=c,this.SETSTATE({k:s,v:t}),s="appdataindex",t=1,this.SETSTATE({k:s,v:t}),this.$store.dispatch("getCustomEvent",this.value)}}),watch:{value6:function(t,e){var a=this.$timeFormat(t[0],"yyyy-MM-dd"),s=this.$timeFormat(t[1],"yyyy-MM-dd"),i="appdatastartdate",n=a;this.SETSTATE({k:i,v:n}),i="appdataenddate",n=s,this.SETSTATE({k:i,v:n}),this.$store.dispatch("infoInit",{startDate:a,endDate:s});var o=this.appid;this.appid&&this.$store.dispatch("selectApp",{appid:o,startDate:a,endDate:s})}}},Yt=Jt,Xt=(a("da77"),Object(E["a"])(Yt,Ht,qt,!1,null,"fb28e5c8",null)),Zt=Xt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tablelist"},[a("p",{staticClass:"download"},[a("span",{on:{click:t.outTable}},[t._v(" 导出全部\n      "),a("svg-icon",{attrs:{svgclass:"save",svgname:"save"}})],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{id:"outTable",data:t.appdatalist,"show-summary":"","summary-method":t.getSummaries,"default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"app",label:"APP"}}),a("el-table-column",{attrs:{prop:"cd",label:"触达",sortable:"",width:"110"}}),a("el-table-column",{attrs:{prop:"zs",label:"展示",sortable:"",width:"110"}}),a("el-table-column",{attrs:{prop:"dj",label:"点击",sortable:"",width:"90"}}),a("el-table-column",{attrs:{prop:"ctr",label:"CTR",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"cvr",label:"CVR",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"cpm",label:"CPM",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"cpc",label:"CPC",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"az",label:"安装",sortable:"",width:"90"}}),a("el-table-column",{attrs:{prop:"hf",label:"花费",sortable:"",width:"110"}}),a("el-table-column",{attrs:{prop:"cpi",label:"CPI",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"afInstallsNum",label:"监测平台安装",width:"130"}}),a("el-table-column",{attrs:{prop:"gap",label:"GAP",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.gap)+"%")])]}}])})],1)],1)},te=[],ee=(a("c5f6"),{data:function(){return{}},methods:{outTable:function(){var t="应用统计表_".concat(this.$timeFormat(new Date,"yyyyMMddHHmmss"));this.$exportHTML("outTable",t)},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach(function(t,e){if(0!==e)if(4!==e&&5!==e&&6!==e&&7!==e)if(10!==e){if(12===e)return s[12]=(100*(s[11]-s[8])/s[8]).toFixed(2),void(s[12]=s[12]<0?s[12]+"%":"+"+s[12]+"%");var i=a.map(function(e){return Number(e[t.property])});i.every(function(t){return isNaN(t)})?s[e]="":(s[e]=i.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),s[e]=-1!=s[e].toString().indexOf(".")?s[e].toFixed(2):s[e])}else s[10]=(s[9]/s[8]).toFixed(2);else s[e]="";else s[e]="合计"}),s}},computed:Object(D["a"])({},Object(M["d"])(["appdataappid"]),Object(M["b"])(["appdatalist"]))}),ae=ee,se=(a("1b2a"),Object(E["a"])(ae,Qt,te,!1,null,"61d07f14",null)),ie=se.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.ifapp,expression:"ifapp"}],staticClass:"chart",attrs:{id:"appChart"}})},oe=[],re={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["ifapp"])),mounted:function(){myChart=Vt.init(document.getElementById("appChart"))}},ce=re,le=(a("63ea"),Object(E["a"])(ce,ne,oe,!1,null,"68873284",null)),ue=le.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tablelist"},[a("div",{staticClass:"download"},[a("div",{staticClass:"autooption",on:{mouseenter:function(e){t.optionmenu=!0},mouseleave:function(e){t.optionmenu=!1}}},[t._m(0),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.optionmenu,expression:"optionmenu"}],staticClass:"optionlist"},[a("p",{class:{on:"default"==t.pandectselect},on:{click:function(e){t.optionSelect("default")}}},[a("span",{staticClass:"name"},[t._v("常用")])]),t._l(t.pandectsave,function(e,s){return a("p",{key:s,class:{on:t.pandectselect==e.name},on:{click:function(a){t.optionSelect(e.name)}}},[a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("i",{staticClass:"el-icon-close other",on:{click:function(a){a.stopPropagation(),t.deleteOption(e.id,e.name)}}})])}),a("p",{class:{on:"auto"==t.pandectselect}},[a("span",{staticClass:"name",on:{click:t.outListOption}},[t._v("自定义")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.pandectselect,expression:"pandectselect == 'auto'"}],staticClass:"other",on:{click:function(e){return e.stopPropagation(),t.saveOption(e)}}},[t._v("保存")])])],2)])],1),a("span",{on:{click:t.outTable}},[t._v("\n      导出全部\n      "),a("svg-icon",{attrs:{svgclass:"save",svgname:"save"}})],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{id:"outOther",data:t.onlyapplist,"show-summary":"","summary-method":t.getSummaries},on:{"sort-change":t.toSort,"filter-change":t.toFilter}},t._l(t.customOption,function(e,s){return a("el-table-column",{key:s,attrs:{prop:e.key,fixed:!e.checked,label:e.name,"filter-method":"国家"==e.name?t.filterTag:"平台"==e.name?t.filterTag2:null,"filter-placement":"bottom-end",filters:"国家"==e.name?t.countryfilter:"平台"==e.name?t.platFilters:null,sortable:"日期"!=e.name&&"国家"!=e.name&&"平台"!=e.name&&!e.isevent&&"custom",width:"100"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("p",[t._v(t._s(s.row[e.key]||0===s.row[e.key]||"0"===s.row[e.key]?s.row[e.key]:"--"))])]}}])})}),1),a("list-option",{ref:"pandectOption",attrs:{status:t.status,customEvent:t.customevent,customUnit:t.customunit,opDefault:t.opDefault,setDefaultOption:t.setDefaultOption},on:{outOption:t.outOption,hideOptionbox:t.hideOptionbox}}),a("save-condition",{attrs:{status:t.savestatus},on:{save:t.saveCondition}})],1)},me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"el-dropdown-link"},[t._v("\n        自定义列\n        "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])}],pe=a("5176"),fe=a.n(pe),he=a("f499"),_e=a.n(he),ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"保存自定义列",visible:t.status},on:{close:t.toCancel}},[a("el-form",[a("el-form-item",{attrs:{label:"条件名称","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.conditionName,callback:function(e){t.conditionName=e},expression:"conditionName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveCondtion}},[t._v("确 定")])],1)],1)},ge=[],be={props:["status"],data:function(){return{conditionName:""}},computed:{},methods:{toCancel:function(){this.$emit("update:status",!1)},saveCondtion:function(){""!=this.conditionName.trim()?(this.$emit("save",this.conditionName),this.conditionName=""):Object(H["g"])("请输入条件名称")}}},ye=be,ke=Object(E["a"])(ye,ve,ge,!1,null,null,null),Ee=ke.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog pandectdialog",attrs:{title:"自定义列",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("div",{staticClass:"cont"},[a("div",{staticClass:"leftnav"},t._l(t.leftOption,function(e,s){return a("div",{key:s,staticClass:"line"},[a("p",{staticClass:"title",on:{click:function(a){t.goAnchor("option_"+e.key)}}},[t._v(t._s(e.title))]),t._l(e.child,function(e,s){return a("div",{key:s},["常用"!=e.name?a("p",{staticClass:"child",on:{click:function(a){t.goAnchor("option_"+e.key)}}},[t._v(t._s(e.name))]):t._e()])})],2)}),0),a("div",{staticClass:"midnav"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入搜索内容","prefix-icon":"el-icon-search"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),a("div",{staticClass:"midlist",attrs:{id:"midList"}},t._l(t.leftOption,function(e,s){return a("div",{key:s,staticClass:"mbox"},[a("p",{staticClass:"title",attrs:{id:"option_"+e.key}},[t._v(t._s(e.title))]),t._l(e.child,function(e,s){return a("div",{key:s,staticClass:"child"},["常用"!=e.name?a("p",{staticClass:"ntitle",attrs:{id:"option_"+e.key}},[a("span",[t._v(t._s(e.name))]),a("i",{staticClass:"line"})]):t._e(),"应用内事件"==e.name?a("div",{staticClass:"event"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.specialOption||0==t.specialOption.length,expression:"!specialOption || specialOption.length == 0"}],staticStyle:{color:"#999","text-align":"center","line-height":"30px"}},[t._v("暂无")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.specialOption&&t.specialOption.length>0,expression:"specialOption && specialOption.length > 0"}],staticClass:"eline"},[a("p",{staticClass:"tl"}),a("p",{staticClass:"nm"},[t._v("独立用户数")]),a("p",{staticClass:"nm"},[t._v("事件发生数")]),a("p",{staticClass:"nm"},[t._v("事件收益("+t._s(t.customUnit)+")")])]),t._l(t.specialOption,function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:-1!=e.name.toLowerCase().indexOf(t.state.trim().toLowerCase()),expression:"p.name.toLowerCase().indexOf(state.trim().toLowerCase()) != -1"}],key:e.name,staticClass:"eline"},[a("p",{staticClass:"tl"},[t._v(t._s(e.name))]),a("p",{staticClass:"nm"},[a("el-checkbox",{staticClass:"ck",on:{change:t.toSelectOption},model:{value:e.checked1,callback:function(a){t.$set(e,"checked1",a)},expression:"p.checked1"}})],1),a("p",{staticClass:"nm"},[a("el-checkbox",{staticClass:"ck",on:{change:t.toSelectOption},model:{value:e.checked2,callback:function(a){t.$set(e,"checked2",a)},expression:"p.checked2"}})],1),a("p",{staticClass:"nm"},[a("el-checkbox",{staticClass:"ck",on:{change:t.toSelectOption},model:{value:e.checked3,callback:function(a){t.$set(e,"checked3",a)},expression:"p.checked3"}})],1)])})],2):a("div",{staticClass:"nchild"},t._l(t.middleOption[e.name],function(e,s){return a("p",{key:s},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!e.tip,content:e.tip,placement:"right"}},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:-1!=e.name.toLowerCase().indexOf(t.state.trim().toLowerCase()),expression:"l.name.toLowerCase().indexOf(state.trim().toLowerCase()) != -1"}],staticClass:"ckbox",on:{change:t.toSelectOption},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"l.checked"}},[t._v(t._s(e.name))])],1)],1)}),0)])})],2)}),0)]),a("div",{staticClass:"rightnav"},[a("p",{staticClass:"tagtotal"},[t._v("已选择"+t._s(this.cantDeleteOption.length+this.selectOption.length)+"项")]),a("div",{staticClass:"tagall"},[t._l(t.cantDeleteOption,function(e){return a("p",{key:e.name},[a("el-tag",{staticClass:"tagline",attrs:{type:"info"}},[t._v(t._s(e.name))])],1)}),t._l(t.selectOption,function(e){return a("p",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.selectOption,group:"tag"},expression:"{ item: tag, list: selectOption, group: 'tag'}"}],key:e.name},[a("el-tag",{staticClass:"tagline",attrs:{closable:"",type:"info"},on:{close:function(a){t.deleteTag(e.key)}}},[t._v(t._s(e.name))])],1)})],2)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveList}},[t._v("确 定")])],1)])},Oe=[],we={props:["status","opDefault","setDefaultOption","customEvent","customUnit"],data:function(){return{state:"",dialogFormVisible:!1,cantDeleteOption:[],selectOption:[],eventOption:[],localEvent:[],leftOption:[{title:"常用",key:"cy",child:[{name:"常用",key:"cy"}]},{title:"监测平台",key:"jcpt",child:[{name:"表现",key:"bx"},{name:"留存",key:"lc"},{name:"应用内事件",key:"yynsj"}]}],specialOption:this.customEvent,middleOption:{}}},mounted:function(){this.$dragging.$on("dragged",function(t){t.value}),this.$dragging.$on("dragend",function(){})},methods:{showBox:function(){var t=this;this.middleOption={"常用":[{name:"触达",key:"reachNum",checked:!!this.setDefaultOption.find(function(t){return"触达"==t.name})},{name:"展示",key:"showNum",checked:!!this.setDefaultOption.find(function(t){return"展示"==t.name})},{name:"点击",key:"clicksNum",checked:!!this.setDefaultOption.find(function(t){return"点击"==t.name})},{name:"CTR",key:"ctr",checked:!!this.setDefaultOption.find(function(t){return"CTR"==t.name})},{name:"CVR",key:"cvr",checked:!!this.setDefaultOption.find(function(t){return"CVR"==t.name})},{name:"CPM",key:"cpm",checked:!!this.setDefaultOption.find(function(t){return"CPM"==t.name})},{name:"CPC",key:"cpc",checked:!!this.setDefaultOption.find(function(t){return"CPC"==t.name})},{name:"安装",key:"installsNum",checked:!!this.setDefaultOption.find(function(t){return"安装"==t.name})},{name:"花费",key:"spend",checked:!!this.setDefaultOption.find(function(t){return"花费"==t.name})},{name:"CPI",key:"cpi",checked:!!this.setDefaultOption.find(function(t){return"CPI"==t.name})}],"表现":[{name:"AF_展示数",key:"afImpressionsNum",checked:!!this.setDefaultOption.find(function(t){return"AF_展示数"==t.name})},{name:"AF_点击数",key:"afClicksNum",checked:!!this.setDefaultOption.find(function(t){return"AF_点击数"==t.name})},{name:"AF_点击率",key:"afCtr",checked:!!this.setDefaultOption.find(function(t){return"AF_点击率"==t.name})},{name:"AF_安装数",key:"afInstallsNum",tip:"安装后有效激活的数量",checked:!!this.setDefaultOption.find(function(t){return"AF_安装数"==t.name})},{name:"AF_安装数差异率",key:"afMinsRate",tip:"（监测平台安装数-Facebook安装数）/Facebook安装数",checked:!!this.setDefaultOption.find(function(t){return"AF_安装数差异率"==t.name})},{name:"AF_CPI",key:"afCpi",tip:"花费/AF_安装量",checked:!!this.setDefaultOption.find(function(t){return"AF_CPI"==t.name})},{name:"AF_转化率",key:"afCvr",tip:"安装数/点击数",checked:!!this.setDefaultOption.find(function(t){return"AF_转化率"==t.name})},{name:"AF_次日留存率",key:"afRetentionRate",tip:"AF_2d_rr_user_独立用户数/AF_安装量，仅tiktok显示",checked:!!this.setDefaultOption.find(function(t){return"AF_次日留存率"==t.name})},{name:"AF_会话次数",key:"afSessionsNum",tip:"APP打开次数",checked:!!this.setDefaultOption.find(function(t){return"AF_会话次数"==t.name})},{name:"AF_忠实用户",key:"loyalUsersNum",tip:"默认为打开app超过三次以上的用户，可重新定义",checked:!!this.setDefaultOption.find(function(t){return"AF_忠实用户"==t.name})},{name:"AF_忠实用户比率",key:"afLui",tip:"忠实用户数／安装数",checked:!!this.setDefaultOption.find(function(t){return"AF_忠实用户比率"==t.name})},{name:"AF_收益",key:"totalRevenue",tip:"源自应用内购买事件的收益",checked:!!this.setDefaultOption.find(function(t){return"AF_收益"==t.name})},{name:"AF_花费",key:"totalCost",tip:"渠道上报的总花费",checked:!!this.setDefaultOption.find(function(t){return"AF_花费"==t.name})},{name:"AF_投资回报率",key:"afRoi",tip:"ROI，收益/花费",checked:!!this.setDefaultOption.find(function(t){return"AF_投资回报率"==t.name})},{name:"AF_单用户平均收益",key:"afArpu",tip:"平均每位用户带来的收益，收益/安装数",checked:!!this.setDefaultOption.find(function(t){return"AF_单用户平均收益"==t.name})},{name:"AF_平均eCPI",key:"afEcpi",tip:"每次安装的平均有效成本",checked:!!this.setDefaultOption.find(function(t){return"AF_平均eCPI"==t.name})}],"留存":[{name:"Day 1留存量",key:"retentionNum1",checked:!!this.setDefaultOption.find(function(t){return"Day 1留存量"==t.name})},{name:"Day 1留存率",key:"afReRate1",checked:!!this.setDefaultOption.find(function(t){return"Day 1留存率"==t.name})},{name:"Day 2留存量",key:"retentionNum2",checked:!!this.setDefaultOption.find(function(t){return"Day 2留存量"==t.name})},{name:"Day 2留存率",key:"afReRate2",checked:!!this.setDefaultOption.find(function(t){return"Day 2留存率"==t.name})},{name:"Day 3留存量",key:"retentionNum3",checked:!!this.setDefaultOption.find(function(t){return"Day 3留存量"==t.name})},{name:"Day 3留存率",key:"afReRate3",checked:!!this.setDefaultOption.find(function(t){return"Day 3留存率"==t.name})},{name:"Day 4留存量",key:"retentionNum4",checked:!!this.setDefaultOption.find(function(t){return"Day 4留存量"==t.name})},{name:"Day 4留存率",key:"afReRate4",checked:!!this.setDefaultOption.find(function(t){return"Day 4留存率"==t.name})},{name:"Day 5留存量",key:"retentionNum5",checked:!!this.setDefaultOption.find(function(t){return"Day 5留存量"==t.name})},{name:"Day 5留存率",key:"afReRate5",checked:!!this.setDefaultOption.find(function(t){return"Day 5留存率"==t.name})},{name:"Day 6留存量",key:"retentionNum6",checked:!!this.setDefaultOption.find(function(t){return"Day 6留存量"==t.name})},{name:"Day 6留存率",key:"afReRate6",checked:!!this.setDefaultOption.find(function(t){return"Day 6留存率"==t.name})},{name:"Day 7留存量",key:"retentionNum7",checked:!!this.setDefaultOption.find(function(t){return"Day 7留存量"==t.name})},{name:"Day 7留存率",key:"afReRate7",checked:!!this.setDefaultOption.find(function(t){return"Day 7留存率"==t.name})}]},this.cantDeleteOption=this.opDefault,this.selectOption=this.setDefaultOption,this.customEvent.forEach(function(e){e.checked1=!!t.setDefaultOption.find(function(t){return t.name=="".concat(e.name,"独立用户数")}),e.checked2=!!t.setDefaultOption.find(function(t){return t.name=="".concat(e.name,"事件发生数")}),e.checked3=!!t.setDefaultOption.find(function(t){return-1!=t.name.indexOf("".concat(e.name,"事件收益"))})})},goAnchor:function(t){document.getElementById("midList").scrollTop=document.getElementById(t).offsetTop-134},saveList:function(){var t=this.cantDeleteOption.concat(this.selectOption);this.$emit("outOption",t,this.selectOption,this.localEvent),this.dialogFormVisible=!1},toCancel:function(){this.$emit("hideOptionbox")},deleteTag:function(t){for(var e in this.selectOption=this.selectOption.filter(function(e){return e.key!=t}),this.middleOption)this.middleOption[e].forEach(function(e){t==e.key&&(e.checked=!1)})},toSelectOption:function(t){var e=this;for(var a in this.selectOption=[],this.middleOption){var s=this.middleOption[a];this.selectOption=this.selectOption.concat(s.filter(function(t){return t.checked}))}this.eventOption=[],this.localEvent=[],this.specialOption.forEach(function(t){if((t.checked1||t.checked2||t.checked3)&&e.localEvent.push(t.name),t.checked1){var a={name:t.name+"独立用户数",key:t.name+"|uniqueUsers",checked:!0,isevent:!0};e.eventOption.push(a)}if(t.checked2){var s={name:t.name+"事件发生数",key:t.name+"|eventCounter",checked:!0,isevent:!0};e.eventOption.push(s)}if(t.checked3){var i={name:t.name+"事件收益(".concat(e.customUnit,")"),key:t.name+"|salesIn",checked:!0,isevent:!0};e.eventOption.push(i)}}),this.selectOption=this.selectOption.concat(this.eventOption)}},watch:{status:function(t,e){this.dialogFormVisible=t},setDefaultOption:function(t,e){for(var a in this.selectOption=t,this.middleOption)this.middleOption[a].forEach(function(e){t.find(function(t){return t.name==e.name})?e.checked=!0:e.checked=!1})},customEvent:function(t,e){this.specialOption=t}}},Ie=we,Te=(a("3d0b"),a("732e"),Object(E["a"])(Ie,Ce,Oe,!1,null,"96837a44",null)),xe=Te.exports,Se={props:["name"],components:{ListOption:xe,SaveCondition:Ee},data:function(){return{sortObj:{reachNum:"reach_num",showNum:"show_num",clicksNum:"clicks_num",ctr:"ctr",cvr:"cvr",cpm:"cpm",cpc:"cpc",installsNum:"installs_num",spend:"spend",cpi:"cpi",afImpressionsNum:"af_impressions_num",afClicksNum:"af_clicks_num",afCtr:"af_ctr",afInstallsNum:"af_installs_num",afMinsRate:"af_minsRrate",afCvr:"af_cvr",afRetentionRate:"af_retentionRate",afSessionsNum:"af_sessions_num",loyalUsersNum:"af_loyal_users_num",afLui:"af_lui",totalRevenue:"af_total_revenue",totalCost:"af_total_cost",afRoi:"af_roi",afArpu:"af_arpu",afCpi:"af_cpi",afEcpi:"af_ecpi",retentionNum1:"retentionNum1",retentionNum2:"retentionNum2",retentionNum3:"retentionNum3",retentionNum4:"retentionNum4",retentionNum5:"retentionNum5",retentionNum6:"retentionNum6",retentionNum7:"retentionNum7",afReRate1:"afReRate1",afReRate2:"afReRate2",afReRate3:"afReRate3",afReRate4:"afReRate4",afReRate5:"afReRate5",afReRate6:"afReRate6",afReRate7:"afReRate7"},status:!1,opDefault:[{name:"日期",key:"insightDateFormat"},{name:"国家",key:"country"},{name:"平台",key:"userOs"}],optionDefault:[{name:"触达",key:"reachNum",checked:!0},{name:"展示",key:"showNum",checked:!0},{name:"点击",key:"clicksNum",checked:!0},{name:"CTR",key:"ctr",checked:!0},{name:"CVR",key:"cvr",checked:!0},{name:"CPM",key:"cpm",checked:!0},{name:"CPC",key:"cpc",checked:!0},{name:"安装",key:"installsNum",checked:!0},{name:"花费",key:"spend",checked:!0},{name:"CPI",key:"cpi",checked:!0}],setDefaultOption:[],customOption:[],filters:{country:[],imporession:[]},platFilters:[{text:"Android",value:"imporession_Android"},{text:"iOS",value:"imporession_iOS"}],optionmenu:!1,savestatus:!1}},mounted:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("mounted"),t.next=3,this.getSaveData();case 3:this.getTableData();case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{appdataappid:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("watch"),!e){t.next=5;break}return t.next=4,this.getSaveData();case 4:this.getTableData();case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{getTableData:function(){console.log(this.appdataappid);var t=localStorage.getItem(pandectSelectLS.new)&&JSON.parse(localStorage.getItem(pandectSelectLS.new))[this.appdataappid]?JSON.parse(localStorage.getItem(pandectSelectLS.new))[this.appdataappid]:"default";"auto"==t?(this.setDefaultOption="auto"==t&&JSON.parse(localStorage.getItem(pandectOptionLS.new))?JSON.parse(localStorage.getItem(pandectOptionLS.new))[this.appdataappid]:[],this.customOption=this.opDefault.concat(this.setDefaultOption)):this.optionSelect(t,"init"),"597615686992125"!=this.appdataappid&&(this.customOption=this.customOption.filter(function(t){return"AF_次日留存率"!=t.name})),this.$store.dispatch("selectApp")},optionSelect:function(t,e){var a=[];if("default"==t)this.setDefaultOption=this.optionDefault,this.saveLocalstorage(pandectEventLS.new,[]);else{var s=this.pandectsave.find(function(e){return e.name==t});this.setDefaultOption=s.option,a=s.event}this.customOption=this.opDefault.concat(this.setDefaultOption),this.SETSTATE({k:"pandectselect",v:t}),this.saveLocalstorage(pandectSelectLS.new,t),this.saveLocalstorage(pandectEventLS.new,a),"init"!=e&&this.$store.dispatch("selectApp")},deleteOption:function(t,e){var a=this;this.$confirm("确定删除此已保存自定义列？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(G["a"])(regeneratorRuntime.mark(function s(){var i;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.$store.dispatch("deleteSearchCondition",{id:t});case 2:i=s.sent,i.data?(Object(H["f"])("删除成功"),a.getSaveData(),"2"==type&&e==a.pandectselect&&a.optionSelect("default")):Object(H["f"])("删除失败");case 4:case"end":return s.stop()}},s,this)}))).catch(function(){})},saveOption:function(){this.savestatus=!0},saveCondition:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a={url:encodeURIComponent(_e()(this.setDefaultOption)+"@@"+_e()(this.localEvent)),appId:this.appdataappid,userId:localStorage.getItem("atom_id"),tagName:e,tagType:"3"},t.next=3,this.$store.dispatch("saveTag",a);case 3:s=t.sent,s.data&&(Object(H["f"])("保存成功"),this.savestatus=!1,a.appId,a.userId,a.tagName,a.tagType,this.getSaveData());case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getSaveData:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={appId:this.appdataappid,userId:localStorage.getItem("atom_id"),tagType:"3"},t.next=3,this.$store.dispatch("getTag",e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getSummaries:function(t){var e=this,a=t.columns,s=(t.data,[]);return a.forEach(function(t,a){switch(a){case 0:s[a]="合计";break;case 1:case 2:s[a]="";break;default:var i=e.appcpitotal[t.property]||0===e.appcpitotal[t.property]?e.appcpitotal[t.property]:"";s[a]=i;break}}),s},filterJudge:function(t){return"国家"==t?this.countryfilter:"平台"==t?[{text:"Android",value:"imporession_Android"},{text:"iOS",value:"imporession_iOS"}]:void 0},outListOption:function(){this.status=!0,this.$refs.pandectOption.showBox()},saveLocalstorage:function(t,e){var a=this.appdataappid,s=localStorage.getItem(t);s=s?JSON.parse(s):{},s[a]=e,localStorage.setItem(t,_e()(s))},outOption:function(t,e,a){var s=this;this.customOption=t,"597615686992125"!=this.appdataappid&&(this.customOption=this.customOption.filter(function(t){return"AF_次日留存率"!=t.name})),this.setDefaultOption=[],this.localEvent=a,e.forEach(function(t){s.setDefaultOption.push(fe()({},t))}),this.SETSTATE({k:"pandectselect",v:"auto"}),this.saveLocalstorage(pandectOptionLS.new,e),this.saveLocalstorage(pandectEventLS.new,a),this.$store.dispatch("selectApp")},hideOptionbox:function(){this.status=!1},toSort:function(t){t.column;var e=t.prop,a=t.order;if(e){var s="appdatasort",i=this.sortObj[e];i+="ascending"==a?" asc":" desc",this.SETSTATE({k:s,v:i}),this.$store.dispatch("selectApp")}else this.SETSTATE({k:"appdatasort",v:""})},toFilter:function(t){for(var e in t)this.filters[e]=t[e];var a=[],s=[];for(var i in this.filters)this.filters[i].forEach(function(t){-1!=t.indexOf("country")&&a.push(t.split("_")[1]),-1!=t.indexOf("imporession")&&s.push(t.split("_")[1])});var n="appdatacountry",o=a.join(",");this.SETSTATE({k:n,v:o}),n="appdataimporession",o=s.join(","),this.SETSTATE({k:n,v:o}),this.SETSTATE({k:"appdataindex",v:1}),this.$store.dispatch("selectApp")},outTable:function(){var t="".concat(this.name,"每日CPI").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss"));this.$store.dispatch("selectAppout",t)},filterTag:function(t,e){return!0},filterTag2:function(t,e,a){return!0}}),computed:Object(D["a"])({},Object(M["d"])(["appdataall","customevent","customunit","appdataappid","appcpitotal","pandectselect","pandectsave"]),Object(M["b"])(["onlyapplist","countryfilter"]))},Ae=Se,je=(a("12cc"),Object(E["a"])(Ae,de,me,!1,null,"bb843530",null)),De=je.exports,Me=a("7618"),Pe=a("795b"),Le=a.n(Pe),Re=a("d225"),Ne=a("b0b4"),Ue=function(){function t(e){var a=e.baseImage,s=void 0===a?"":a,i=e.baseWidth,n=void 0===i?0:i,o=e.baseHeight,r=void 0===o?0:o,c=e.canvasWidth,l=void 0===c?0:c,u=e.canvasHeight,d=void 0===u?0:u,m=e.fileImages,p=void 0===m?[]:m,f=e.fileDots,h=void 0===f?[]:f,_=e.logoDots,v=void 0===_?[]:_,g=e.logoImages,b=void 0===g?[]:g;return Object(Re["a"])(this,t),this.baseImage=s,this.baseWidth=n,this.baseHeight=r,this.canvasWidth=l,this.canvasHeight=d,this.canvaswidth=l||n,this.ratio=this.canvaswidth/this.baseWidth,this.canvasheight=this.baseHeight*this.ratio,this.fileImages=p,this.fileDots=h,this.logoDots=v,this.logoImages=b,this.init()}return Object(Ne["a"])(t,[{key:"init",value:function(){return this.canvas=document.createElement("canvas"),this.canvas.width=this.canvaswidth,this.canvas.height=this.canvasheight,this.ctx=this.canvas.getContext("2d"),this.drawImages()}},{key:"drawImages",value:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,this.ctx.clearRect(0,0,this.canvaswidth,this.canvasheight),a=this.fileDots.length,this.fileImages=this.fileImages.slice(0,a),s=regeneratorRuntime.mark(function t(a){var s,i,o,r,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.fileDots[a].start,i=n.fileDots[a].end,o=i[0]-s[0],r=i[1]-s[1],t.next=6,n.imageSnip(n.fileImages[a],o,r);case 6:return c=t.sent,t.next=9,function(){return new Le.a(function(t,a){var i=new Image;i.src=c,i.onload=function(){e.ctx.drawImage(i,s[0]*e.ratio,s[1]*e.ratio,o*e.ratio,r*e.ratio),t()}})}();case 9:case"end":return t.stop()}},t,this)}),i=0;case 6:if(!(i<this.fileImages.length)){t.next=11;break}return t.delegateYield(s(i),"t0",8);case 8:i++,t.next=6;break;case 11:return t.next=13,this.drawBackground();case 13:if(0==this.logoDots.length){t.next=16;break}return t.next=16,this.drawLogo();case 16:return t.abrupt("return",this.exportTemplate());case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"drawLogo",value:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,a=this.logoDots.length,s=this.logoImages.slice(0,a),i=function(t){var a=r.logoDots[t].start,i=r.logoDots[t].end,n=i[0]-a[0],o=i[1]-a[1];return{v:new Le.a(function(i,r){var c=new Image;c.src=s[t],c.onload=function(){e.ctx.drawImage(c,a[0]*e.ratio,a[1]*e.ratio,n*e.ratio,o*e.ratio),i()}})}},n=0;case 5:if(!(n<s.length)){t.next=12;break}if(o=i(n),"object"!==Object(Me["a"])(o)){t.next=9;break}return t.abrupt("return",o.v);case 9:n++,t.next=5;break;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"drawBackground",value:function(){var t=this,e=this;return new Le.a(function(a,s){var i=new Image;i.src=t.baseImage,i.onload=function(){e.ctx.drawImage(i,0,0,e.canvaswidth,e.canvasheight),a()}})}},{key:"exportTemplate",value:function(){var t=this.canvas.toDataURL("image/jpeg");return t}},{key:"imageSnip",value:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a,s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Le.a(function(t,i){var n=new Image;n.src=e,n.onload=function(){n.width==a&&n.height==s&&t(e);var i=n.width*(s/a),o=1;o=i>n.height?n.height/s:n.width/a;var r=n.width/o,c=n.height/o,l=document.createElement("canvas"),u=l.getContext("2d");l.width=r,l.height=c,u.drawImage(n,0,0,r,c);var d=l.toDataURL("image/jpeg"),m=new Image;m.src=d,m.onload=function(){u.clearRect(0,0,r,c);var i=r/2-a/2,n=c/2-s/2;l.width=a,l.height=s,u.drawImage(m,i,n,a,s,0,0,a,s),e=l.toDataURL("image/jpeg"),t(e)}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));function e(e,a,s){return t.apply(this,arguments)}return e}()}]),t}(),$e=Ue,Be={components:{Pandect:Gt,Sort:Zt,TableList:ie,AppChart:ue,OtherTable:De},data:function(){return{appname:""}},computed:Object(D["a"])({},Object(M["d"])(["ifapp","appdatatotal","countryfilter","appcount","ifaccount","appdataindex"])),created:function(){pandectOptionLS.old&&localStorage.getItem(pandectOptionLS.old)&&localStorage.removeItem(pandectOptionLS.old),pandectEventLS.old&&localStorage.getItem(pandectEventLS.old)&&localStorage.removeItem(pandectEventLS.old),pandectSelectLS.old&&localStorage.getItem(pandectSelectLS.old)&&localStorage.removeItem(pandectSelectLS.old),this.SETSTATE({k:"ifapp",v:""}),this.SETSTATE({k:"ifaccount",v:!1});var t=this.$timeFormat((new Date).getTime()-6048e5,"yyyy-MM-dd"),e=this.$timeFormat(new Date,"yyyy-MM-dd");this.SETSTATE({k:"appdatastartdate",v:t}),this.SETSTATE({k:"appdataenddate",v:e}),this.$store.dispatch("infoInit",{startDate:t,endDate:e}),this.$store.dispatch("getAppCount")},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toAddapp:function(){},pageSizeChange:function(t){var e="appdatapagesize",a=t;this.SETSTATE({k:e,v:a}),this.$store.dispatch("selectApptable")},pageSwitch:function(t){var e="appdataindex",a=t;this.SETSTATE({k:e,v:a}),this.$store.dispatch("selectApptable")},selectProject:function(t){this.appname=t}})},Fe=Be,Ve=(a("6b25"),Object(E["a"])(Fe,Rt,Nt,!1,null,"173a9e0e",null)),Ke=Ve.exports,We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"title"},[t._v("BM同步")]),t.getbmover&&t.bmlist.length>0?a("div",{staticClass:"nav"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelectNav}},t._l(t.bmlist,function(e,s){return a("el-menu-item",{key:s,attrs:{index:s.toString()}},[t._v(t._s(e.bmName))])}),1),a("el-button",{staticClass:"addBM",attrs:{type:"primary",size:"small"},on:{click:function(e){t.status1=!0}}},[t._v("新增BM")])],1):t._e(),t.getbmover&&t.bmlist.length>0?a("div",{staticClass:"list"},[a("div",{staticClass:"leftnav"},[a("p",{class:{on:0==t.leftnav},on:{click:function(e){t.leftTab(0)}}},[t._v("广告账户")]),a("p",{class:{on:1==t.leftnav},on:{click:function(e){t.leftTab(1)}}},[t._v("主页管理")])]),0==t.leftnav?a("div",{staticClass:"right"},[a("div",{staticClass:"ctrl"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.status2=!0}}},[t._v("新增账户")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索账户ID/名称","suffix-icon":"el-icon-search"},on:{input:t.accountSearch},model:{value:t.state4,callback:function(e){t.state4=e},expression:"state4"}}),a("el-button",{staticClass:"deletewrong",attrs:{type:"text"},on:{click:t.deleteBM}},[t._v("删除异常账户")])],1),a("ad-list"),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.bm_pageIndex,total:t.accounttotal,"page-size":t.bm_pageSize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1):a("div",{staticClass:"right"},[a("div",{staticClass:"ctrl"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.status3=!0}}},[t._v("新增主页")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索主页ID/名称","suffix-icon":"el-icon-search"},on:{input:t.pageSearch},model:{value:t.state5,callback:function(e){t.state5=e},expression:"state5"}})],1),a("home-page"),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.bmpageindex,total:t.pagetotal,"page-size":t.bmpg_pageSize},on:{"size-change":t.pageSizeChange2,"current-change":t.bmpageSwitch}})],1)],1)]):t._e(),t.getbmover&&0==t.bmlist.length?a("div",{staticClass:"nobm"},[a("p",{staticClass:"info"},[t._v("暂无BM账号 请新增")]),a("el-button",{staticClass:"addBM2",attrs:{type:"primary",size:"small"},on:{click:function(e){t.status1=!0}}},[t._v("新增BM")])],1):t._e(),a("add-bm",{attrs:{status:t.status1},on:{cancelAddbm:t.cancelAddbm}}),a("add-account",{attrs:{status:t.status2},on:{cancelAddbm:t.cancelAddbm,dataChange:t.dataChange}}),a("add-page",{attrs:{status:t.status3},on:{cancelAddbm:t.cancelAddbm,dataChange:t.dataChange}})],1)},ze=[],Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.disaccount}},[a("el-table-column",{attrs:{prop:"fbAccountId",label:"账户ID",width:"200"}}),a("el-table-column",{attrs:{prop:"name",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"balance",label:"账户余额($)",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.balance<=0||e.row.balance<300*e.row.avgSpend?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"剩余余额不足3天花费",placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})]):t._e(),a("span",{staticStyle:{"margin-left":"0px"}},[t._v(t._s(e.row.balance/100))])]}}])}),a("el-table-column",{attrs:{prop:"accountStatus",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{good:1==e.row.accountStatus,bad:1!=e.row.accountStatus}},[t._v(t._s(1==e.row.accountStatus?"正常":"异常"))])]}}])}),a("el-table-column",{attrs:{label:"停用/启用",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#d7dae2"},on:{change:function(a){t.switchChange(e.row.status,e.row.fbId)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])})],1)},He=[],qe={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["disaccount"])),methods:{switchChange:function(t,e){this.$store.dispatch("accountStatus",{status:t,id:e})}}},Je=qe,Ye=(a("afc0"),Object(E["a"])(Je,Ge,He,!1,null,"4b32611f",null)),Xe=Ye.exports,Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dispage}},[a("el-table-column",{attrs:{prop:"pageId",label:"主页ID",width:"200"}}),a("el-table-column",{attrs:{prop:"picture",label:"主页头像",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.picture,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"主页昵称"}}),a("el-table-column",{attrs:{prop:"insId",label:"instagram ID"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row.pageId)}}},[t._v("同步PBIA")])]}}])})],1)},Qe=[],ta={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["dispage"])),methods:{handleClick:function(t){this.$store.dispatch("getPbia",t)}}},ea=ta,aa=(a("c8ed"),Object(E["a"])(ea,Ze,Qe,!1,null,"17533bea",null)),sa=aa.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"新增BM",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"addBM",height:"500",data:t.addbmlist,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"BMID",width:"140"}}),a("el-table-column",{attrs:{prop:"name",label:"BM名称","show-overflow-tooltip":""}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveBm}},[t._v("确 定")])],1)],1)},na=[],oa={props:["status"],data:function(){return{list:!1,dialogFormVisible:!1,form:{oldpassword:"",password:"",passwordagain:""},formLabelWidth:"100px",multipleSelection:[]}},watch:{status:function(t,e){this.dialogFormVisible=t;var a="addBM";1==t&&this.$store.dispatch("getAddBmlist",{loadDom:a})}},computed:Object(D["a"])({},Object(M["d"])(["addbmlist"])),mounted:function(){},methods:{saveBm:function(){if(0!=this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){var a={};a.bmId=e.id,a.bmName=e.name,t.push(a)}),this.$store.dispatch("saveBm",{bm:t}),this.dialogFormVisible=!1}else Object(H["g"])("请选择需要添加BM账户")},toCancel:function(){this.$emit("cancelAddbm","status1")},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)}}},ra=oa,ca=Object(E["a"])(ra,ia,na,!1,null,null,null),la=ca.exports,ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"新增主页",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"addPage",height:"500",data:t.disaddpage,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.ifChecked,width:"55"}}),a("el-table-column",{attrs:{prop:"pageId",label:"主页ID",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.permittedRoles.length&&-1!=e.row.permittedRoles.indexOf("INSIGHTS_ANALYST")?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"无创建广告权限，请去FB BM修改权限",placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})]):t._e(),a("span",{staticStyle:{"margin-left":"0px"}},[t._v(t._s(e.row.pageId))])]}}])}),a("el-table-column",{attrs:{prop:"picture",label:"主页头像",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.picture,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"主页名称","show-overflow-tooltip":""}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.savePage}},[t._v("确 定")])],1)],1)},da=[],ma={props:["status"],data:function(){return{list:!1,check:"",dialogFormVisible:!1,form:{},formLabelWidth:"100px",multipleSelection:[]}},watch:{status:function(t,e){this.dialogFormVisible=t;var a=this.disbmid,s="addPage";1==t&&this.$store.dispatch("getAddPage",{bmid:a,loadDom:s})}},computed:Object(D["a"])({},Object(M["d"])(["disaddpage","disbmid"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{ifChecked:function(t,e){return 1!=t.permittedRoles.length||-1==t.permittedRoles.indexOf("INSIGHTS_ANALYST")},savePage:function(){if(0!=this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){var a={};a.bmId=e.bmId,a.createTime=e.createTime,a.id=e.id,a.insId=e.insId,a.insProfilePic=e.insProfilePic,a.isUsername=e.isUsername,a.name=e.name,a.pageId=e.pageId,a.picture=e.picture,a.uid=e.uid,t.push(a)});var e="pagekwd",a="";this.SETSTATE({k:e,v:a}),this.$emit("dataChange","state5",""),this.$store.dispatch("savePage",{page:t}),this.dialogFormVisible=!1,this.check=!1}else Object(H["g"])("请选择需要添加的主页")},toCancel:function(){this.$emit("cancelAddbm","status3")},handleSelectionChange:function(t){this.multipleSelection=t}})},pa=ma,fa=(a("24bd"),Object(E["a"])(pa,ua,da,!1,null,"36ebf08a",null)),ha=fa.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"新增账户",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"addAccount",height:"500",data:t.disaddaccount,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"account_id",label:"账户ID",width:"200"}}),a("el-table-column",{attrs:{prop:"name",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"balance",label:"账户余额($)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.balance/100))])]}}])}),a("el-table-column",{attrs:{prop:"account_status",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{good:1==e.row.account_status,bad:1!=e.row.account_status}},[t._v(t._s(1==e.row.account_status?"正常":"异常"))])]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveAccount}},[t._v("确 定")])],1)],1)},va=[],ga={props:["status"],data:function(){return{list:!1,dialogFormVisible:!1,form:{oldpassword:"",password:"",passwordagain:""},formLabelWidth:"100px",multipleSelection:[]}},mounted:function(){},computed:Object(D["a"])({},Object(M["d"])(["disaddaccount","disbmid"])),watch:{status:function(t,e){this.dialogFormVisible=t;var a=this.disbmid,s="addAccount";1==t&&this.$store.dispatch("getAddAccount",{bmid:a,loadDom:s})}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{saveAccount:function(){var t=this;if(0!=this.multipleSelection.length){var e=[];this.multipleSelection.forEach(function(a){var s={};s.accountStatus=a.account_status,s.balance=a.balance,s.bmId=t.disbmid,s.fbAccountId=a.account_id,s.fbId=a.id,s.name=a.name,s.status=1,e.push(s)});var a="accountkwd",s="";this.SETSTATE({k:a,v:s}),this.$emit("dataChange","state4",""),this.$store.dispatch("saveAccount",{account:e}),this.dialogFormVisible=!1}else Object(H["g"])("请选择需要添加的账户")},toCancel:function(){this.$emit("cancelAddbm","status2")},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)}})},ba=ga,ya=(a("414a"),Object(E["a"])(ba,_a,va,!1,null,"19d12fda",null)),ka=ya.exports,Ea={components:{AdList:Xe,HomePage:sa,AddBm:la,AddPage:ha,AddAccount:ka},data:function(){return{searchrun:null,activeBmid:"",activeIndex:"0",pageindex:1,bmpageindex:1,status1:!1,status2:!1,status3:!1,state4:"",state5:"",leftnav:0}},computed:Object(D["a"])({},Object(M["d"])(["getbmover","bmlist","addata","accounttotal","pagetotal","bm_pageSize","bm_pageIndex","bmpg_pageSize"])),created:function(){var t="pagekwd",e="";this.SETSTATE({k:t,v:e}),t="accountkwd",e="",this.SETSTATE({k:t,v:e}),t="bm_pageSize",e=20,this.SETSTATE({k:t,v:e}),t="bmpg_pageSize",e=20,this.SETSTATE({k:t,v:e}),t="bm_pageIndex",e=1,this.SETSTATE({k:t,v:e}),t="bmpg_pageIndex",e=1,this.SETSTATE({k:t,v:e})},mounted:function(){this.$store.dispatch("getBmlist")},watch:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE","SETACCOUNT","ADDACCOUNT","SETPAGE","ADDPAGE"]),{deleteBM:function(){var t=this,e=this.bmlist[this.activeIndex],a=e.bmName,s=e.bmId;this.$confirm("确定删除".concat(a,"中所有的异常广告账户吗？"),"删除异常账户",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("deleteBM",{bmid:s})}).catch(function(){})},pageSizeChange:function(t){var e=t,a="bm_pageSize";this.SETSTATE({k:a,v:e}),this.$store.dispatch("getAccount")},pageSizeChange2:function(t){var e=t,a="bmpg_pageSize";this.SETSTATE({k:a,v:e}),this.$store.dispatch("getPage")},dataChange:function(t,e){this[t]=e},pageSwitch:function(t){this.pageindex=t;var e=this.pageindex,a="bm_pageIndex";this.SETSTATE({k:a,v:e}),this.$store.dispatch("getAccount")},bmpageSwitch:function(t){this.bmpageindex=t;var e=this.bmpageindex,a="bmpg_pageIndex";this.SETSTATE({k:a,v:e}),this.$store.dispatch("getPage")},accountSearch:function(){var t=this;clearTimeout(this.searchrun),this.searchrun=setTimeout(function(){var e=t.state4,a="accountkwd";t.SETSTATE({k:a,v:e}),t.$store.dispatch("getAccount")},300)},pageSearch:function(){var t=this;clearTimeout(this.searchrun),this.searchrun=setTimeout(function(){var e=t.state5,a="pagekwd";t.SETSTATE({k:a,v:e}),t.$store.dispatch("getPage")},300)},cancelAddbm:function(t){this[t]=!1},leftTab:function(t){this.leftnav=t},handleSelectNav:function(t,e){if(this.activeIndex!=t){this.pageindex=1,this.bmpageindex=1,this.activeIndex=t,this.activeBmid=this.bmlist[this.activeIndex].bmId;var a="disbmid",s=this.activeBmid;this.SETSTATE({k:a,v:s}),s=1,a="bm_pageIndex",this.SETSTATE({k:a,v:s}),s=1,a="bmpg_pageIndex",this.SETSTATE({k:a,v:s}),s="",a="pagekwd",this.SETSTATE({k:a,v:s}),s="",a="accountkwd",this.SETSTATE({k:a,v:s}),this.$store.dispatch("getAccount"),this.$store.dispatch("getPage")}}})},Ca=Ea,Oa=(a("04b7"),Object(E["a"])(Ca,We,ze,!1,null,"2acab8ba",null)),wa=Oa.exports,Ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"title"},[t._v("APP同步")]),a("div",{staticClass:"list"},[a("div",{staticClass:"right"},[a("div",{staticClass:"ctrl"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.status1=!0}}},[t._v("新增应用")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索应用ID/名称","suffix-icon":"el-icon-search"},on:{input:t.appSearch},model:{value:t.state4,callback:function(e){t.state4=e},expression:"state4"}})],1),a("app-list",{on:{editApp:t.editApp}})],1)]),a("add-app",{attrs:{status:t.status1},on:{cancelAddapp:t.cancelAddapp}}),a("set-app",{attrs:{status:t.status2,id:t.id},on:{cancelAddapp:t.cancelAddapp}})],1)},Ta=[],xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.disapp}},[a("el-table-column",{attrs:{prop:"picture",label:"应用LOGO",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.picture,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"applicationId",label:"应用ID",width:"200"}}),a("el-table-column",{attrs:{prop:"name",label:"应用名称"}}),a("el-table-column",{attrs:{prop:"category",label:"平台",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.applicationPlatformVO,function(e,s){return a("span",{key:s,staticClass:"marketType"},[t._v(t._s(e.marketType))])})}}])}),a("el-table-column",{attrs:{prop:"accountNum",label:"广告账户",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.setApp(e.row.applicationId)}}},[t._v(t._s(e.row.accountNum))])]}}])})],1)},Sa=[],Aa={data:function(){return{}},computed:Object(D["a"])({},Object(M["b"])(["disapp"])),methods:{switchChange:function(t,e){this.$store.dispatch("accountStatus",{status:t,id:e})},setApp:function(t){this.$emit("editApp",t)}}},ja=Aa,Da=(a("a0b8"),Object(E["a"])(ja,xa,Sa,!1,null,"1add0e10",null)),Ma=Da.exports,Pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"新增应用",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"addApp",height:"500",data:t.addapplist,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"picture",label:"应用LOGO",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.picture,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"applicationId",label:"应用ID",width:"160"}}),a("el-table-column",{attrs:{prop:"name",label:"应用名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"category",label:"平台",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.applicationPlatformVO,function(e,s){return a("span",{key:s,staticClass:"marketType"},[t._v(t._s(e.marketType))])})}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveApp}},[t._v("确 定")])],1)],1)},La=[],Ra={props:["status"],data:function(){return{list:!1,dialogFormVisible:!1,form:{},formLabelWidth:"100px",multipleSelection:[]}},watch:{status:function(t,e){this.dialogFormVisible=t;var a="addApp";1==t&&this.$store.dispatch("getAddApplist",{loadDom:a})}},computed:Object(D["a"])({},Object(M["d"])(["addapplist","disbmid"])),methods:{saveApp:function(){if(0!=this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){var a={};a.applicationId=e.applicationId,a.applicationPlatformVO=e.applicationPlatformVO,a.category=e.category,a.id=e.id,a.name=e.name,a.picture=e.picture,a.uid=e.uid,t.push(a)}),this.$store.dispatch("saveApp",{app:t}),this.dialogFormVisible=!1}else Object(H["g"])("请选择需要添加的应用")},toCancel:function(){this.$emit("cancelAddapp","status1")},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t}}},Na=Ra,Ua=(a("c03a"),Object(E["a"])(Na,Pa,La,!1,null,"42a38d72",null)),$a=Ua.exports,Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("div",{staticClass:"set"},[a("el-input",{staticClass:"search",attrs:{placeholder:"搜索广告账户ID/名称","suffix-icon":"el-icon-search"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelectNav}},[a("el-menu-item",{attrs:{index:"0"}},[t._v("已加入")]),a("el-menu-item",{attrs:{index:"1"}},[t._v("未加入")])],1),"0"==t.activeIndex?a("p",{staticClass:"allctrl",on:{click:t.delAll}},[t._v("删除全部")]):a("p",{staticClass:"allctrl",on:{click:t.selAll}},[t._v("选择全部")]),a("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),0==t.activeIndex?a("set-list",{attrs:{id:t.id,keyword:t.state}}):t._e(),1==t.activeIndex?a("can-set",{attrs:{id:t.id,keyword:t.state}}):t._e()],1)])},Fa=[],Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{height:"400",id:"setList",data:t.list}},[a("el-table-column",{attrs:{prop:"fbAccountId",label:"账户ID",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"balance",label:"账户余额($)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.balance/100))])]}}])}),a("el-table-column",{attrs:{prop:"stateName",label:"是否启用",width:"120"}}),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toCancel(e.row.fbId)}}},[t._v("取消")])]}}])})],1)},Ka=[],Wa={props:["id","keyword"],data:function(){return{}},computed:Object(D["a"])({},Object(M["b"])(["setapplist"]),{list:function(){var t=this.keyword.trim().toLowerCase();return this.setapplist.filter(function(e){return-1!=e.fbAccountId.toLowerCase().indexOf(t)||-1!=e.name.toLowerCase().indexOf(t)})}}),methods:{toCancel:function(t){var e={fbAccountId:t,applicationId:this.id},a=e.fbAccountId,s=e.applicationId;this.$store.dispatch("delSet",{option:[{fbAccountId:a,applicationId:s}]})}}},za=Wa,Ga=Object(E["a"])(za,Va,Ka,!1,null,null,null),Ha=Ga.exports,qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{height:"400",id:"cansetapplist",data:t.list}},[a("el-table-column",{attrs:{prop:"fbAccountId",label:"账户ID",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"balance",label:"账户余额($)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.balance/100))])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"是否启用",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",[t._v("已启用")]):a("span",[t._v("未启用")])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toSet(e.row.fbId)}}},[t._v("加入")])]}}])})],1)},Ja=[],Ya={props:["id","keyword"],data:function(){return{}},computed:Object(D["a"])({},Object(M["b"])(["cansetapplist"]),{list:function(){var t=this.keyword.trim().toLowerCase();return this.cansetapplist.filter(function(e){return-1!=e.fbAccountId.toLowerCase().indexOf(t)||-1!=e.name.toLowerCase().indexOf(t)})}}),methods:{toSet:function(t){var e=t,a=this.id;this.$store.dispatch("saveSet",{option:[{fbAccountId:e,applicationId:a}]})}}},Xa=Ya,Za=Object(E["a"])(Xa,qa,Ja,!1,null,null,null),Qa=Za.exports,ts={props:["status","id"],components:{SetList:Ha,CanSet:Qa},data:function(){return{activeIndex:"0",dialogFormVisible:!1,title:"",state:"",options:[{value:"1",label:"已启用"},{value:"0",label:"未启用"}],value:""}},watch:{status:function(t,e){this.dialogFormVisible=t;var a=this.id;1==t&&(this.$store.dispatch("setApp",{id:a,loading:"setList"}),this.$store.dispatch("canSetapp",{id:a}))},id:function(t,e){if(""!=t){var a=this.disapp.find(function(e){return e.applicationId==t});this.title="设置"+a.name+"的广告账户"}}},computed:Object(D["a"])({},Object(M["b"])(["disapp","setapplist","cansetapplist"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{createSearch:function(){},delAll:function(){var t=this,e=[];this.setapplist.forEach(function(a){var s={};s.fbAccountId=a.fbId,s.applicationId=t.id,e.push(s)}),this.$store.dispatch("delSet",{option:e})},selAll:function(){var t=this,e=[];this.cansetapplist.forEach(function(a){var s={};s.fbAccountId=a.fbId,s.applicationId=t.id,e.push(s)}),this.$store.dispatch("saveSet",{option:e})},handleSelectNav:function(t){t!=this.activeIndex&&(this.activeIndex=t)},toCancel:function(){this.activeIndex="0",this.value="",this.$emit("cancelAddapp","status2");var t="setappstatus",e=this.value;this.SETSTATE({k:t,v:e}),this.state=""},selectChange:function(){var t="setappstatus",e=this.value;this.SETSTATE({k:t,v:e})}})},es=ts,as=(a("285b"),Object(E["a"])(es,Ba,Fa,!1,null,"583aa6d9",null)),ss=as.exports,is={components:{AppList:Ma,AddApp:$a,SetApp:ss},data:function(){return{status1:!1,status2:!1,status3:!1,state4:"",platform:[],id:""}},computed:Object(D["a"])({},Object(M["d"])(["bmlist","addata"])),created:function(){var t="appkwd",e="";this.SETSTATE({k:t,v:e})},mounted:function(){this.$store.dispatch("getApplist")},watch:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{appSearch:function(){var t=this.state4.toLowerCase(),e="appkwd";this.SETSTATE({k:e,v:t})},cancelAddapp:function(t){this[t]=!1},editApp:function(t){this.status2=!0,this.id=t}})},ns=is,os=(a("304a"),Object(E["a"])(ns,Ia,Ta,!1,null,"7556e27c",null)),rs=os.exports,cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"title"},[t._v("管理项目")]),a("div",{staticClass:"list"},[a("div",{staticClass:"right"},[a("div",{staticClass:"ctrl"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.status=!0}}},[t._v("创建项目")]),a("router-link",{staticClass:"cantmanage",attrs:{to:"/notmanage"}},[t._v("已归档项目")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索项目ID/名称","suffix-icon":"el-icon-search"},on:{input:t.projectSearch},model:{value:t.state4,callback:function(e){t.state4=e},expression:"state4"}})],1),a("manage-list",{attrs:{allotStatus:t.allotstatus},on:{"update:allotStatus":function(e){t.allotstatus=e},editProject:t.editProject,overProject:t.overProject,deleteProject:t.deleteProject}}),a("manage-over",{attrs:{id:t.overid,status:t.status2},on:{"update:status":function(e){t.status2=e},cancelAddbm:t.cancelAddbm,resetList:t.resetList}}),a("manage-delete",{attrs:{id:t.deleteid,status:t.status3},on:{"update:status":function(e){t.status3=e},cancelAddbm:t.cancelAddbm,resetList:t.resetList}}),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":t.pagesize,"current-page":t.pageindex},on:{"size-change":t.pageSizeChange,"update:currentPage":function(e){t.pageindex=e},"current-change":t.pageSwitch}})],1)],1)]),a("manage-add",{attrs:{status:t.status,allotStatus:t.allotstatus,id:t.editid},on:{"update:status":function(e){t.status=e},"update:allotStatus":function(e){t.allotstatus=e},"update:id":function(e){t.editid=e}}}),a("allot-account",{attrs:{status:t.status,allotStatus:t.allotstatus},on:{"update:status":function(e){t.status=e},"update:allotStatus":function(e){t.allotstatus=e},resetList:t.resetList}})],1)},ls=[],us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("ul",{staticClass:"grid"},t._l(t.dismanage,function(e,s){return a("li",{key:e.id,on:{click:function(a){t.openProject(e.id)}}},[a("p",{staticClass:"title"},[t._v("一周花费")]),a("el-dropdown",{attrs:{placement:"bottom-start"},on:{command:t.manageCtrl}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.myid==e.createrId,expression:"myid == item.createrId"}],staticClass:"ctrl",attrs:{icon:"el-icon-more",type:"text"},on:{click:function(e){return e.stopPropagation(),t.showMenu(e)}}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a|"+e.id}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"b|"+e.id}},[t._v("分配账户")]),a("el-dropdown-item",{attrs:{command:"c|"+e.id,divided:""}},[t._v("归档")]),a("el-dropdown-item",{staticStyle:{color:"red"},attrs:{command:"d|"+e.id}},[t._v("删除")])],1)],1),a("div",{staticClass:"chart",attrs:{id:"Chart"+s}}),a("div",{staticClass:"info"},[a("span",{staticClass:"name",attrs:{title:e.projectName}},[t._v(t._s(e.projectName))]),a("div",{staticClass:"member"},[a("div",t._l(e.participaterNames,function(e){return a("p",{key:e,staticClass:"head"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e,placement:"bottom"}},[a("span",{staticClass:"headname"},[t._v(t._s(e.substr(0,1)))])])],1)}),0),a("span",{directives:[{name:"show",rawName:"v-show",value:e.participaterNames&&e.participaterNames.length>5,expression:"item.participaterNames && item.participaterNames.length > 5"}],staticClass:"more"},[t._v("···")])])])],1)}),0)])},ds=[],ms=a("59ad"),ps=a.n(ms),fs=a("d3e0"),hs={props:["allotStatus"],components:{},data:function(){return{mychart:{},myid:localStorage.getItem("atom_id")}},computed:Object(D["a"])({},Object(M["b"])(["dismanage"])),watch:{dismanage:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=4;break}return t.next=3,this.$barrageTime(500);case 3:e.forEach(function(t,e){if(t.last7DaySpends&&t.last7DaySpends.length>0){var a=Vt.init(document.getElementById("Chart".concat(e))),i=[{name:"花费",type:"bar",data:t.last7DaySpends.map(function(t){return ps()(t.spend).toFixed(2)})}],n=t.last7DaySpends.map(function(t){return s.$timeFormat(t.insightDate,"yyyy-MM-dd")});a.setOption(fs["a"].manageWeekSpend(n,i))}});case 4:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},created:function(){var t="",e="projectkwd";this.SETSTATE({k:e,v:t})},mounted:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE","SETOBJSTATE"]),{showMenu:function(){},openProject:function(t){this.$router.push({name:"project",params:{id:t}})},setAllotData:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a,s,i,n,o,r,c,l,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.SETSTATE({k:"allotid",v:e}),t.next=3,this.$store.dispatch("getAdAccount");case 3:return a=t.sent,t.next=6,this.$store.dispatch("getUsersList");case 6:return s=t.sent,t.next=9,this.$store.dispatch("getAllot",{projectId:e});case 9:i=this.dismanage.find(function(t){return t.id==e}),n=i.fbAccountIds.split(","),o=i.participaterIds.split(","),r=a.data.filter(function(t){return n.includes(t.fbAccountId)}),c=s.data.filter(function(t){return o.includes(t.id.toString())}),l=[],r.forEach(function(t){var e={name:t.name,fbId:t.fbId,select:!1};l.push(e)}),this.SETOBJSTATE({obj:"createoption",name:"account",v:l}),u=[],c.forEach(function(t){var e={nickName:t.nickName,loginName:t.loginName,id:t.id};u.push(e)}),this.SETOBJSTATE({obj:"createoption",name:"member",v:u});case 20:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),manageCtrl:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.split("|"),s=a[0],i=a[1],t.t0=s,t.next="a"===t.t0?6:"b"===t.t0?8:"c"===t.t0?11:"d"===t.t0?13:15;break;case 6:return this.$emit("editProject",i),t.abrupt("break",16);case 8:return this.setAllotData(i),this.$emit("update:allotStatus",!0),t.abrupt("break",16);case 11:return this.$emit("overProject",i),t.abrupt("break",16);case 13:return this.$emit("deleteProject",i),t.abrupt("break",16);case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})},_s=hs,vs=(a("7ec7"),a("49a2"),Object(E["a"])(_s,us,ds,!1,null,"6954a1c6",null)),gs=vs.exports,bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"",visible:t.status,width:"30%"},on:{close:t.toCancel}},[a("span",[t._v("归档后将不可进入，确认归档？")]),a("el-checkbox",{staticClass:"checkbox",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("暂停所有广告系列")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toOver}},[t._v("确 定")])],1)],1)},ys=[],ks={props:["id","status"],data:function(){return{checked:!1}},methods:{toCancel:function(){this.$emit("update:status",!1),this.checked=!1},toOver:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.id,a=this.checked,t.next=4,this.$store.dispatch("overProject",{id:e,adIsOff:a});case 4:s=t.sent,s.data?(Object(H["f"])("归档成功"),this.$emit("resetList")):Object(H["a"])("归档失败"),this.toCancel();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},watch:{}},Es=ks,Cs=(a("3893"),Object(E["a"])(Es,bs,ys,!1,null,"6a6fa18a",null)),Os=Cs.exports,ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"删除项目",visible:t.status,width:"30%"},on:{close:t.toCancel}},[a("span",[t._v("一旦删除了项目，项目内的推广计划、创意库等都将会被永久删除，不可恢复！广告不会被删除")]),a("el-checkbox",{staticClass:"checkbox",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("暂停所有广告系列")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toOver}},[t._v("删 除")])],1)],1)},Is=[],Ts={props:["id","status"],data:function(){return{checked:!1}},methods:{toCancel:function(){this.$emit("update:status",!1),this.checked=!1},toOver:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.id,a=this.checked,t.next=4,this.$store.dispatch("deleteProject",{projectId:e,pauseCampaigns:a});case 4:s=t.sent,s.data?(Object(H["f"])("删除成功"),this.$emit("resetList")):Object(H["a"])("删除失败"),this.toCancel();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},watch:{}},xs=Ts,Ss=(a("52c5"),Object(E["a"])(xs,ws,Is,!1,null,"621af4b2",null)),As=Ss.exports,js={components:{ManageList:gs,ManageAdd:X,ManageOver:Os,AllotAccount:st,ManageDelete:As},data:function(){return{pageindex:1,size:20,status:!1,status2:!1,status3:!1,allotstatus:!1,state4:"",editid:"",overid:"",deleteid:""}},computed:Object(D["a"])({},Object(M["b"])(["dismanage"]),Object(M["d"])(["total","pagesize"])),created:function(){},mounted:function(){var t=this;this.SETSTATE({k:"managelist",v:[]}),this.getData(),setTimeout(function(){t.SETSTATE({k:"testuser",v:"123"})},1e3)},watch:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{resetList:function(){this.pageindex=1,this.getData(),this.$store.dispatch("getItemList")},pageSizeChange:function(t){this.pageindex=1,this.size=t,this.getData()},pageSwitch:function(t){this.pageindex=t,this.getData()},getData:function(){var t=this.pageindex,e=this.size;this.$store.dispatch("getManagelist",{pageIndex:t,pageSize:e})},projectSearch:function(){this.SETSTATE({k:"projectkwd",v:encodeURIComponent(this.state4)}),this.pageindex=1,this.getData()},cancelAddbm:function(t){this[t]=!1},editProject:function(t){this.status=!0,this.editid=t},overProject:function(t){this.status2=!0,this.overid=t},deleteProject:function(t){this.status3=!0,this.deleteid=t}})},Ds=js,Ms=(a("0034"),Object(E["a"])(Ds,cs,ls,!1,null,"6b50b1f3",null)),Ps=Ms.exports,Ls=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"title"},[a("router-link",{staticClass:"back",attrs:{to:"/manage"}},[t._v("管理项目")]),t._v("  >  已归档项目")],1),a("div",{staticClass:"list"},[a("div",{staticClass:"right"},[a("div",{staticClass:"ctrl"},[a("el-input",{staticClass:"search2",attrs:{placeholder:"搜索项目ID/名称","suffix-icon":"el-icon-search"},on:{input:t.projectSearch},model:{value:t.state4,callback:function(e){t.state4=e},expression:"state4"}})],1),a("notmanage-list",{on:{beginProject:t.beginProject}}),a("manage-begin",{attrs:{id:t.beginid,status:t.status2},on:{cancelAddbm:t.cancelAddbm}}),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":t.pagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)])])},Rs=[],Ns=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.toCancel}},[a("span",[t._v("确认激活此项目吗？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toBegin}},[t._v("确 定")])],1)])},Us=[],$s={props:["id","status"],data:function(){return{dialogVisible:!1}},methods:{toCancel:function(){this.$emit("cancelAddbm","status2")},toBegin:function(){var t=this.id;this.$store.dispatch("beginProject",{id:t}),this.dialogVisible=!1}},watch:{status:function(t,e){this.dialogVisible=t}}},Bs=$s,Fs=(a("9341"),Object(E["a"])(Bs,Ns,Us,!1,null,"0a6a2960",null)),Vs=Fs.exports,Ks=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dismanage,id:"manageTable"}},[a("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"closer",label:"归档人/时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"marketType"},[t._v(t._s(e.row.closer))]),a("span",{staticClass:"marketType"},[t._v(t._s(t._f("timeFormat")(e.row.closeTime)))])]}}])}),a("el-table-column",{attrs:{prop:"projectPlatform",label:"投放平台",width:"100"}}),a("el-table-column",{attrs:{prop:"projectTarget",label:"项目目标"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toBegin(e.row.id)}}},[t._v("激活")])]}}])})],1)},Ws=[],zs={data:function(){return{}},computed:Object(D["a"])({},Object(M["b"])(["dismanage"])),created:function(){var t="",e="projectkwd";this.SETSTATE({k:e,v:t})},mounted:function(){var t=0;this.$store.dispatch("getManageOffList",{status:t})},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toBegin:function(t){this.$emit("beginProject",t)}})},Gs=zs,Hs=(a("9adb"),Object(E["a"])(Gs,Ks,Ws,!1,null,"31fb15a1",null)),qs=Hs.exports,Js={components:{NotmanageList:qs,ManageBegin:Vs},data:function(){return{size:20,status:!1,status2:"",state4:"",beginid:""}},computed:Object(D["a"])({},Object(M["b"])(["dismanage"]),Object(M["d"])(["total","pagesize"])),mounted:function(){this.SETSTATE({k:"managelist",v:[]})},watch:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{pageSizeChange:function(t){var e=t;this.size=t;var a=0;this.$store.dispatch("getManageOffList",{pageSize:e,status:a})},pageSwitch:function(t){var e=t,a=this.size,s=0;this.$store.dispatch("getManageOffList",{pageIndex:e,pageSize:a,status:s})},projectSearch:function(){var t=encodeURIComponent(this.state4),e="projectkwd",a=0;this.SETSTATE({k:e,v:t});var s=this.size;this.$store.dispatch("getManageOffList",{pageSize:s,status:a})},cancelAddbm:function(t){this[t]=!1},beginProject:function(t){this.status2=!0,this.beginid=t}})},Ys=Js,Xs=(a("0d70"),Object(E["a"])(Ys,Ls,Rs,!1,null,"95db1e96",null)),Zs=Xs.exports,Qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"title"},[t._v("规则列表")]),a("div",{staticClass:"list"},[a("div",{staticClass:"right"},[a("div",{staticClass:"ctrl"},[a("el-select",{staticClass:"select",attrs:{filterable:"","collapse-tags":"",placeholder:"状态"},on:{change:t.toSort},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statuslist,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索规则ID/名称","suffix-icon":"el-icon-search"},on:{input:t.reguSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),a("regular-list"),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.rg_pageNo,total:t.regulartotal,"page-size":t.rg_pageSize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)])])},ti=[],ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.regularlist}},[a("el-table-column",{attrs:{prop:"id",label:"规则ID",width:"140"}}),a("el-table-column",{attrs:{prop:"name",label:"规则名称",width:"300"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"140"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.row.ruleStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.setApp(e.row.id,0)}}},[t._v("测试")]):t._e(),1!=e.row.ruleStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.setApp(e.row.id,1)}}},[t._v("上架")]):t._e(),2!=e.row.ruleStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.setApp(e.row.id,2)}}},[t._v("下架")]):t._e()]}}])})],1)},ai=[],si={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["regularlist"])),methods:{switchChange:function(t,e){this.$store.dispatch("accountStatus",{status:t,id:e})},setApp:function(t,e){this.$store.dispatch("setRegularStatus",{status:e,id:t})}}},ii=si,ni=(a("26c8"),Object(E["a"])(ii,ei,ai,!1,null,"3127a839",null)),oi=ni.exports,ri=null,ci={components:{RegularList:oi},data:function(){return{status:"",state:"",statuslist:[{name:"不限",id:"-1"},{name:"测试",id:"0"},{name:"已上架",id:"1"},{name:"已下架",id:"2"}]}},mounted:function(){this.$store.dispatch("getRegular")},computed:Object(D["a"])({},Object(M["d"])(["regulartotal","rg_pageSize","rg_pageNo"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{pageSwitch:function(t){var e="rg_pageNo",a=t;this.SETSTATE({k:e,v:a}),this.toGetRegular()},pageSizeChange:function(t){var e="rg_pageSize",a=t;this.SETSTATE({k:e,v:a}),e="rg_pageNo",a=1,this.SETSTATE({k:e,v:a}),this.toGetRegular()},toSort:function(){var t="rg_ruleStatus",e="-1"==this.status?"":this.status;this.SETSTATE({k:t,v:e}),t="rg_pageNo",e=1,this.SETSTATE({k:t,v:e}),this.toGetRegular()},toGetRegular:function(){this.$store.dispatch("getRegular")},reguSearch:function(){var t=this,e="rg_keyword",a=this.state;this.SETSTATE({k:e,v:a}),e="rg_pageNo",a=1,this.SETSTATE({k:e,v:a}),clearTimeout(ri),ri=setTimeout(function(){t.toGetRegular()},300)}})},li=ci,ui=(a("7cf0"),Object(E["a"])(li,Qs,ti,!1,null,"8c04a7f4",null)),di=ui.exports,mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reguform"},[a("p",{staticClass:"title"},[t._v("规则报表")]),a("div",{staticClass:"ctrlbutton"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"规则"},on:{change:t.toSort},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.allrules,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),a("el-date-picker",{staticClass:"datar",attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.toSort},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._m(0),t._m(1),a("p",{staticClass:"download"},[a("span",{on:{click:t.outTable}},[t._v(" 导出全部\n      "),a("svg-icon",{attrs:{svgname:"save",svgclass:"save"}})],1)]),a("reguform-list")],1)},pi=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"piechart"},[a("div",{staticClass:"drawchart"},[a("p",{staticClass:"ctitle"},[t._v("规则启用比例")]),a("div",{staticClass:"chart",attrs:{id:"Chart1"}})]),a("div",{staticClass:"drawchart"},[a("p",{staticClass:"ctitle"},[t._v("规则触发比例")]),a("div",{staticClass:"chart",attrs:{id:"Chart2"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stripchart"},[a("div",{staticClass:"chart",attrs:{id:"Chart3"}})])}],fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"1200px"},attrs:{id:"regularList",data:t.ruleform},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"groupId",label:"规则ID",width:"140"}}),a("el-table-column",{attrs:{prop:"name",label:"规则名称",width:"400"}}),a("el-table-column",{attrs:{prop:"installChange",label:"安装变化",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.installChange?e.row.installChange.toFixed(2)+"%":"--")+"\n    ")]}}])}),a("el-table-column",{attrs:{prop:"costChange",label:"花费变化",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.costChange?e.row.costChange.toFixed(2)+"%":"--")+"\n    ")]}}])}),a("el-table-column",{attrs:{prop:"cpiChange",label:"CPI变化",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.cpiChange?e.row.cpiChange.toFixed(2)+"%":"--")+"\n    ")]}}])})],1)},hi=[],_i={data:function(){return{filters:{country:[],imporession:[]}}},methods:{sortChange:function(t){t.column;var e=t.prop,a=t.order,s="";switch(e){case"installsNum":s="ascending"==a?"installs_num asc":"installs_num desc";break;case"spend":s="ascending"==a?"spend asc":"spend desc";break;case"cpi":s="ascending"==a?"cpi asc":"cpi desc";break}this.$emit("tableSort",s)}},computed:Object(D["a"])({},Object(M["d"])(["ruleform"]))},vi=_i,gi=(a("b893"),Object(E["a"])(vi,fi,hi,!1,null,"3a1f8710",null)),bi=gi.exports,yi={components:{ReguformList:bi},data:function(){return{value:[(new Date).getTime()-5184e5,new Date],status:[]}},computed:Object(D["a"])({},Object(M["d"])(["allrules"])),mounted:function(){this.$store.dispatch("getAllRules");var t=this.$timeFormat(this.value[0],"yyyy-MM-dd"),e=this.$timeFormat(this.value[1],"yyyy-MM-dd");this.$store.dispatch("getReguFormData",{startTime:t,endTime:e}),myChart5=Vt.init(document.getElementById("Chart1")),myChart6=Vt.init(document.getElementById("Chart2")),myChart7=Vt.init(document.getElementById("Chart3"))},methods:{toSort:function(){var t=this.status.join(","),e=this.value?this.$timeFormat(this.value[0],"yyyy-MM-dd"):"",a=this.value?this.$timeFormat(this.value[1],"yyyy-MM-dd"):"";this.$store.dispatch("getReguFormData",{startTime:e,endTime:a,ruleGroupIds:t})},outTable:function(){var t="规则报表".concat(this.$timeFormat(this.value[0],"yyyy-MM-dd"),"_").concat(this.$timeFormat(this.value[1],"yyyy-MM-dd"));this.$exportHTML("regularList",t)}}},ki=yi,Ei=(a("55e7"),Object(E["a"])(ki,mi,pi,!1,null,"5fa7eb18",null)),Ci=Ei.exports,Oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("div",{staticClass:"ctrl"},[a("p",{staticClass:"title"},[t._v("消息中心")]),a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:t.setRead}},[t._v("全部已读")])],1),a("message-list"),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageIndex,total:t.messagetotal,"page-size":t.pageSize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)},wi=[],Ii=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"msglist"},[a("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.list,function(e,s){return a("el-collapse-item",{key:s,attrs:{title:"",name:e.id}},[a("template",{slot:"title"},[a("p",{staticClass:"dot"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"l.status == 0"}]})]),a("p",{class:{msgtitle:!0,read:0!=e.status},domProps:{innerHTML:t._s(e.title)}}),a("p",{class:{time:!0,read:0!=e.status}},[t._v(t._s(t._f("timeFormat")(e.createTime,"yyyy-MM-dd HH:mm")))])]),"asyncTask"==e.busiType?a("div",{staticClass:"msgdesc",domProps:{innerHTML:t._s(e.message)},on:{click:function(a){t.taskDetail(e.extraInfo,e.message)}}}):a("div",{staticClass:"msgdesc",domProps:{innerHTML:t._s(e.message)}})],2)}),1)],1)},Ti=[],xi={data:function(){return{activeNames:""}},computed:Object(D["a"])({},Object(M["d"])(["messagelist","msgpagesize","msgpageindex"]),{list:function(){var t=(this.msgpageindex-1)*this.msgpagesize,e=t+this.msgpagesize;return this.messagelist.slice(t,e)}}),mounted:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{handleChange:function(t){if(t){var e=this.list.find(function(e){return e.id==t});if(0==e.status){var a=e.id;this.$store.dispatch("updateMessage",{ids:a})}}},taskDetail:function(t,e){this.SETSTATE({k:"jobfailkey",v:t}),this.SETSTATE({k:"jobfaildetail",v:!0});var a=e.indexOf("taskDetail");if(-1!=a){var s=e.substr(a+11),i=s.lastIndexOf(")"),n=s.substring(0,i-1).split(",");console.log(n),this.SETSTATE({k:"taskfaildetail",v:n[1].trim().replace(",","")}),this.SETSTATE({k:"tasksuccessdetail",v:n[2].trim()}),this.SETSTATE({k:"tasknamedetail",v:n[3].trim().substr(1)})}}})},Si=xi,Ai=(a("7648"),a("9099"),Object(E["a"])(Si,Ii,Ti,!1,null,"6e597423",null)),ji=Ai.exports,Di={components:{MessageList:ji},beforeRouteLeave:function(t,e,a){clearInterval(s),a()},data:function(){return{pageSize:20,pageIndex:1}},computed:Object(D["a"])({},Object(M["d"])(["messagetotal"])),mounted:function(){var t=this;this.$store.dispatch("getMessageList"),s=setInterval(function(){t.$store.dispatch("getMessageList")},3e3)},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{setRead:function(){this.SETSTATE({k:"messagecount",v:0}),this.$store.dispatch("setAllRead")},pageSizeChange:function(t){this.pageSize=t,this.pageIndex=1;var e="msgpagesize",a=t;this.SETSTATE({k:e,v:a}),e="msgpageindex",a=1,this.SETSTATE({k:e,v:a})},pageSwitch:function(t){this.pageIndex=t;var e="msgpageindex",a=t;this.SETSTATE({k:e,v:a})}})},Mi=Di,Pi=(a("8ca5"),Object(E["a"])(Mi,Oi,wi,!1,null,"b064f918",null)),Li=Pi.exports,Ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("el-breadcrumb",{staticClass:"title",attrs:{separator:">"}},[a("el-breadcrumb-item",[t._v("模板制图")])],1),a("div",{staticClass:"ctrl"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:t.toCreateImage}},[t._v("制作图片")]),a("el-dropdown",{staticClass:"add",attrs:{"split-button":"",type:"primary"},on:{command:t.templateCtrl}},[t._v("\n      批量\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a",disabled:!t.ctrluse}},[t._v("下载")]),a("el-dropdown-item",{attrs:{command:"b",disabled:!t.ctrluse}},[t._v("删除")])],1)],1),a("el-button",{staticClass:"add",attrs:{type:"text"},on:{click:t.selectAll}},[t._v(t._s(t.selectall?"取消全选":"全选"))])],1),a("temp-list",{attrs:{selectall:t.selectall,ctrluse:t.ctrluse},on:{"update:selectall":function(e){t.selectall=e},"update:ctrluse":function(e){t.ctrluse=e}}}),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[20,50,80],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.tempimagestotal},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)},Ni=[],Ui=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"templist"},t._l(t.tempimages,function(e){return a("li",{key:e.id},[a("p",{staticClass:"image"},[a("img",{attrs:{src:e.filePath,alt:""}})]),a("el-checkbox",{staticClass:"select",on:{change:t.changeSelect},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"img.select"}})],1)}),0)},$i=[],Bi={props:["selectall","ctrluse"],data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["tempimages"])),methods:{changeSelect:function(){this.tempimages.find(function(t){return t.select})?this.$emit("update:ctrluse",!0):this.$emit("update:ctrluse",!1),this.tempimages.find(function(t){return!t.select})?this.$emit("update:selectall",!1):this.$emit("update:selectall",!0)}}},Fi=Bi,Vi=(a("9a47"),Object(E["a"])(Fi,Ui,$i,!1,null,"055621dc",null)),Ki=Vi.exports,Wi={components:{TempList:Ki},data:function(){return{createstatus:!0,selectall:!1,ctrluse:!1,pageindex:1,pagesize:20}},mounted:function(){this.getData()},watch:{},computed:Object(D["a"])({},Object(M["d"])(["tempimages","tempimagestotal"])),methods:{selectAll:function(){var t=this;this.selectall=!this.selectall,this.tempimages.forEach(function(e){e.select=t.selectall}),this.ctrluse=this.selectall},pageSizeChange:function(t){this.pagesize=t,this.getData()},pageSwitch:function(t){this.pageindex=t,this.getData()},getData:function(){this.$store.dispatch("getTempImages",{pageIndex:this.pageindex,pageSize:this.pagesize})},toCreateImage:function(){this.$router.push({name:"createtemp"})},templateCtrl:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a,s,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=this.tempimages.filter(function(t){return t.select}).map(function(t){return t.id}),t.t0=e,t.next="a"===t.t0?4:"b"===t.t0?6:8;break;case 4:return this.$confirm("确认打包下载所选图片吗？","下载",{confirmButtonText:"下载",cancelButtonText:"取消",type:"warning"}).then(Object(G["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:location.href="/api/files/downloadZip?fileIds=".concat(a.join(","));case 1:case"end":return t.stop()}},t,this)}))).catch(function(){}),t.abrupt("break",8);case 6:return this.$confirm("确认删除所选图片吗？","删除",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(G["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.$store.dispatch("deleteTempImages",{fileIds:a.join(",")});case 2:s=t.sent,s&&s.data?(Object(H["f"])("删除成功"),i.pageindex=1,i.getData()):Object(H["a"])("删除失败");case 4:case"end":return t.stop()}},t,this)}))).catch(function(){}),t.abrupt("break",8);case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},zi=Wi,Gi=(a("e172"),Object(E["a"])(zi,Ri,Ni,!1,null,"161908d7",null)),Hi=Gi.exports,qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"step"},[a("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:t.step,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"选择模板"}}),a("el-step",{attrs:{title:"上传物料"}})],1)],1),void 0===t.$route.params.tempid?a("select-temp",{on:{selectTemp:t.selectTemp}}):a("export-image",{on:{goBack:t.goBack}})],1)},Ji=[],Yi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("div",{staticClass:"sort"},[a("p",[a("span",{staticClass:"title"},[t._v("尺寸")]),a("el-radio-group",{on:{change:t.sortChange},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.tempsize,function(e){return a("el-radio",{key:e.name,attrs:{label:e.name}},[t._v(t._s(e.name))])}),1)],1),a("p",[a("span",{staticClass:"title"},[t._v("行业")]),a("el-radio-group",{on:{change:t.sortChange},model:{value:t.trade,callback:function(e){t.trade=e},expression:"trade"}},t._l(t.temptrade,function(e){return a("el-radio",{key:e.name,attrs:{label:e.name}},[t._v(t._s(e.name))])}),1)],1)]),a("ul",{staticClass:"templatelist"},t._l(t.templatelist,function(e){return a("li",{key:e.id,on:{click:function(a){t.selectTemp(e.id)}}},[a("p",{staticClass:"image"},[a("img",{attrs:{src:e.coverImage,alt:""}})]),a("p",{staticClass:"tip"},t._l(e.label.split(","),function(e){return a("el-tag",{key:e,staticClass:"tag",attrs:{size:"medium"}},[t._v(t._s(e))])}),1)])}),0),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[20,50,80],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.templatetotal},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)])},Xi=[],Zi={data:function(){return{pageindex:1,pagesize:20,size:"",trade:""}},methods:{selectTemp:function(t){this.$emit("selectTemp",t)},pageSizeChange:function(t){this.pagesize=t,this.getTemplateList()},pageSwitch:function(t){this.pageindex=t,this.getTemplateList()},sortChange:function(){this.pageindex=1,this.getTemplateList()},getTemplateList:function(){var t={size:this.size,business:this.trade,pageIndex:this.pageindex,pageSize:this.pagesize};this.$store.dispatch("getTemplateList",t)}},computed:Object(D["a"])({},Object(M["d"])(["templatelist","templatetotal","tempsize","temptrade"])),watch:{},mounted:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getSizeTrade","template_size");case 2:return t.next=4,this.$store.dispatch("getSizeTrade","template_business");case 4:if(0!=this.tempsize.length&&0!=this.temptrade.length){t.next=6;break}return t.abrupt("return");case 6:this.size=this.tempsize[0].name,this.trade=this.temptrade[0].name,this.getTemplateList();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},Qi=Zi,tn=(a("d07c"),Object(E["a"])(Qi,Yi,Xi,!1,null,"4c262678",null)),en=tn.exports,an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"contain"},[a("div",{staticClass:"module moduleline"},[a("p",{staticClass:"title"},[t._v("模板设置")]),a("div",{staticClass:"upload"},[a("span",{staticClass:"name"},[t._v("上传logo")]),a("div",{staticClass:"uploadbtn"},[a("templates-upload",{attrs:{disabled:!t.islogo},on:{imgUploading:t.tempUploading}}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("可不上传，建议分辨率"+t._s(t.islogo?t.logoResolution:"--"))])],1)]),a("ul",{staticClass:"imagelist"},t._l(t.logo,function(e){return a("li",{key:e.imageUrl,staticClass:"image"},[a("p",[a("span",{staticClass:"imgbox"},[a("img",{attrs:{src:t.logourl,alt:""}})])]),a("el-progress",{attrs:{percentage:e.process,status:100==e.process?"success":""}})],1)}),0),a("div",{staticClass:"upload"},[a("span",{staticClass:"name"},[t._v("上传图片")]),a("div",{staticClass:"uploadbtn"},[a("templates-upload",{ref:"templatesUpload",attrs:{type:"MUTIPLE"},on:{imgUploading:t.matterUploading}}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议分辨率"+t._s(t.imageResolution))])],1)]),t._l(t.allImages,function(e,s){return a("div",{key:s},[a("p",{staticClass:"theme"},[t._v("第"+t._s(s+1)+"张")]),a("draggable",{staticClass:"imagelist",attrs:{tag:"ul",list:e,group:"people"},on:{change:t.dragImages}},t._l(e,function(e,i){return a("li",{key:e.name},[a("p",[a("span",{staticClass:"imgbox"},[a("img",{attrs:{src:e.imageUrl,alt:""}})]),a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"m.process == 100"}],staticClass:"close",on:{click:function(a){t.deleteImage(s,i,e.imageUrl)}}},[t._v("x")])]),a("el-progress",{attrs:{percentage:e.process,status:100==e.process?"success":""}})],1)}),0)],1)})],2),a("div",{staticClass:"module"},[a("p",{staticClass:"title"},[t._v("效果预览")]),a("p",{staticClass:"restheme"},[t._v("第一张")]),a("p",{staticClass:"resimage"},[t.baseImage?a("image-template",{attrs:{id:"myCanvas1",baseImage:t.baseImage,baseWidth:t.baseWidth,baseHeight:t.baseHeight,fileDots:t.fileDots,fileImages:t.fileImages1,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,logoImages:t.logoImages,logoDots:t.logoDots}}):t._e()],1),a("p",{staticClass:"restheme"},[t._v("第二张")]),a("p",{staticClass:"resimage"},[t.baseImage?a("image-template",{attrs:{id:"myCanvas2",baseImage:t.baseImage,baseWidth:t.baseWidth,baseHeight:t.baseHeight,fileDots:t.fileDots,fileImages:t.fileImages2,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,logoImages:t.logoImages,logoDots:t.logoDots}}):t._e()],1),a("p",{staticClass:"resfont"},[t._v("显示前2张效果预览，共"+t._s(t.allImages.length)+"张")])])]),a("div",{staticClass:"button"},[a("el-button",{on:{click:t.goBack}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveTempImages}},[t._v("生成图片")])],1)])},sn=[],nn=(a("34ef"),a("4917"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:t.id}})}),on=[],rn={props:{id:{type:String,default:"myCanvas"},baseImage:{type:String,required:!0},baseWidth:{type:Number,required:!0},baseHeight:{type:Number,required:!0},canvasWidth:{type:Number},canvasHeight:{type:Number},fileImages:{type:Array,required:!0},fileDots:{type:Array,required:!0},logoImages:{type:Array},logoDots:{type:Array}},data:function(){return{canvas:null,ctx:null,canvaswidth:0,canvasheight:0,ratio:1}},watch:{fileImages:function(t,e){this.drawImages()},logoImages:function(t,e){this.drawImages()}},mounted:function(){this.canvaswidth=this.canvasWidth?this.canvasWidth:this.baseWidth,this.ratio=this.canvaswidth/this.baseWidth,this.canvasheight=this.baseHeight*this.ratio,this.canvas=document.getElementById(this.id),this.canvas.width=this.canvaswidth,this.canvas.height=this.canvasheight,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#f4f4f4",this.ctx.fillRect(0,0,this.canvaswidth,this.canvasheight),this.drawBackground()},methods:{drawImages:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("draw images"),e=this,this.ctx.clearRect(0,0,this.canvaswidth,this.canvasheight),a=this.fileDots.length,s=this.fileImages.slice(0,a),i=regeneratorRuntime.mark(function t(a){var i,n,r,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=o.fileDots[a].start,n=o.fileDots[a].end,r=n[0]-i[0],c=n[1]-i[1],t.next=6,o.imageSnip(s[a],r,c);case 6:return l=t.sent,t.next=9,function(){return new Le.a(function(t,a){var s=new Image;s.src=l,s.onload=function(){e.ctx.drawImage(s,i[0]*e.ratio,i[1]*e.ratio,r*e.ratio,c*e.ratio),t()}})}();case 9:case"end":return t.stop()}},t,this)}),n=0;case 7:if(!(n<s.length)){t.next=12;break}return t.delegateYield(i(n),"t0",9);case 9:n++,t.next=7;break;case 12:return t.next=14,this.drawBackground();case 14:0!=this.logoDots.length&&this.drawLogo();case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),drawLogo:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(e=this,a=this.logoDots.length,s=this.logoImages.slice(0,a),i=function(t){var a=o.logoDots[t].start,i=o.logoDots[t].end,n=i[0]-a[0],r=i[1]-a[1],c=new Image;c.src=s[t],c.onload=function(){e.ctx.drawImage(c,a[0]*e.ratio,a[1]*e.ratio,n*e.ratio,r*e.ratio)}},n=0;n<s.length;n++)i(n);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),drawBackground:function(){var t=this;console.log("draw background");var e=this,a=new Image;return a.src=this.baseImage,new Le.a(function(s,i){a.onload=function(){e.ctx.drawImage(a,0,0,t.canvaswidth,t.canvasheight),s()}})},exportTemplate:function(){var t=this.canvas.toDataURL("image/jpeg"),e=new Image;e.src=t},imageSnip:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a,s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Le.a(function(t,i){var n=new Image;n.src=e,n.onload=function(){n.width==a&&n.height==s&&t(e);var i=n.width*(s/a),o=1;o=i>n.height?n.height/s:n.width/a;var r=n.width/o,c=n.height/o,l=document.createElement("canvas"),u=l.getContext("2d");l.width=r,l.height=c,u.drawImage(n,0,0,r,c);var d=l.toDataURL("image/jpeg"),m=new Image;m.src=d,m.onload=function(){u.clearRect(0,0,r,c);var i=r/2-a/2,n=c/2-s/2;l.width=a,l.height=s,u.drawImage(m,i,n,a,s,0,0,a,s),e=l.toDataURL("image/jpeg"),t(e)}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));function e(e,a,s){return t.apply(this,arguments)}return e}()}},cn=rn,ln=(a("4472"),Object(E["a"])(cn,nn,on,!1,null,"199e8e2c",null)),un=ln.exports,dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uploadfile"},[a("el-button",{staticClass:"button",attrs:{size:"mini",type:"primary",disabled:t.disabled}},[t._v("上传")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:!t.disabled,expression:"!disabled"}],ref:"vueFileUploaderSINGER",staticClass:"fileuploadinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,requestOptions:t.fileOption,filters:t.imgfilters,multiple:"MUTIPLE"==t.type},on:{matchMD5:t.matchMD5,onAdd:t.onAddItem,uploadPic:t.uploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)},mn=[],pn=a("ca3e"),fn=a.n(pn),hn=a("84f2"),_n=a.n(hn),vn=a("77d2"),gn=new _n.a,bn={props:{type:{type:String,default:"SINGLE"},disabled:{type:Boolean,default:!1}},components:{VueFileUpload:fn.a},data:function(){return{fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],processIMG:[],eventsIMG:{onAddFileSuccess:function(t){var e=this,a=t.file;gn.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"img")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(t.remove(),0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e)}}}},watch:{wantupload:function(t,e){console.log("create-add wantupload:",t),0!=t&&t==this.uploadsize&&(console.log("%ccreate-add all ready","color: red"),this.$refs[this.dom].uploadAll())}},computed:Object(D["a"])({},Object(M["d"])(["wantupload"]),{uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{resetUploaded:function(t){this.processIMG=this.processIMG.filter(function(e){return e.imageUrl!=t})},matchMD5:function(t,e,a){var s=this;"SINGLE"==this.type&&(this.processIMG=[]),this.dom="img"==a?"vueFileUploaderSINGER":"vueFileUploaderVioSINGER",this.$store.dispatch("matchMutiFileMD5",{md5:[t],file:e,list:"img"==a?this.processIMG:this.processVIO,type:a,on:"",vdname:this.fmvideoname,callback:function(t){s.processIMG.forEach(function(e){e.imageHash==t.data[0].md5&&(e.imageWidth=t.data[0].width,e.imageHeight=t.data[0].height)}),s.$emit("imgUploading",s.processIMG)}})},onAddItem:function(t){console.log(t),this.SETSTATE({k:"wantupload",v:0}),this.uploadsize=t.length,console.log("create-add this.uploadsize:",this.uploadsize)},uploadRes:function(t){this.processIMG.forEach(function(e){e.name==t.data[0].originName&&(e.imageUrl=t.data[0].targetName,e.imageHash=t.data[0].md5,e.imageWidth=t.data[0].width,e.imageHeight=t.data[0].height)}),this.$emit("imgUploading",this.processIMG)},uploadError:function(t,e){this.processIMG=this.processIMG.filter(function(t){return t.name!=e.name})},uploadPic:function(t,e){this.disfile=t;var a={};a.name=t.name,a.process=e,a.size=t.size,a.file=t,this.processIMG.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processIMG.find(function(e){return e.name==t.name})||this.processIMG.push(a),"SINGLE"==this.type&&this.$emit("imgUploading",this.processIMG)},delIMG:function(t,e){t&&t.isUploading&&(t.cancel(),t.remove()),this.processIMG=this.processIMG.filter(function(t){return t.name!=e})}})},yn=bn,kn=(a("4b27"),a("9533"),Object(E["a"])(yn,dn,mn,!1,null,"b038711c",null)),En=kn.exports,Cn=a("5c96"),On=a.n(Cn),wn=a("5e15"),In={components:{ImageTemplate:un,TemplatesUpload:En,draggable:wn["a"]},data:function(){return{tempdetail:null,islogo:!0,logo:[],logourl:"",images:[],imagecount:0,baseImage:"",baseWidth:0,baseHeight:0,canvasWidth:0,canvasHeight:0,fileDots:[],fileImages1:[],fileImages2:[],allImages:[],logoDots:[],logoImages:[],logoResolution:"",imageResolution:""}},mounted:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getTempDetail",{id:this.$route.params.tempid});case 2:e=t.sent,this.baseImage=location.origin+e["designMaterial"],this.baseWidth=1*e["size"].split("x")[0],this.baseHeight=1*e["size"].split("x")[1],this.canvasWidth=560,this.logoDots=[],this.islogo="1"==e.isLogo,this.islogo&&(this.logoResolution=e["logoWidthHeight"],a=e["logoLocation"].split(",").map(function(t){return 1*t}),s=e["logoWidthHeight"].split("x").map(function(t){return 1*t}),i={start:a,end:[a[0]+s[0],a[1]+s[1]]},this.logoDots.push(i)),this.fileDots=[],n=JSON.parse(e["templateImage"]),n.forEach(function(t,e){0==e&&(o.imageResolution=t.width_height);var a=t.location.split(",").map(function(t){return 1*t}),s=t.width_height.split("x").map(function(t){return 1*t}),i={start:a,end:[a[0]+s[0],a[1]+s[1]]};o.fileDots.push(i)}),this.imagecount=this.fileDots.length;case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:Object(D["a"])({},Object(M["d"])(["templatelist"])),methods:{deleteImage:function(t,e,a){console.log(t,e),this.allImages[t].splice(e,1),this.$refs.templatesUpload.resetUploaded(a),this.setCanvas()},setCanvas:function(){this.allImages[0]&&(this.fileImages1=this.allImages[0].map(function(t){return t.imageUrl})),this.allImages[1]&&(this.fileImages2=this.allImages[1].map(function(t){return t.imageUrl}))},dragImages:function(){this.setCanvas()},saveTempImages:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r,c,l=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.allImages.find(function(t,a){if(0!=t.length&&t.length<l.imagecount)return e=a,t}),!a){t.next=4;break}return Object(H["g"])("第".concat(e+1,"张图片素材不全，请补全后再生成图片")),t.abrupt("return");case 4:s=Cn["Loading"].service({fullscreen:!0}),i=[],n=0;case 7:if(!(n<this.allImages.length)){t.next=17;break}if(0!=this.allImages[n].length){t.next=10;break}return t.abrupt("continue",14);case 10:return t.next=12,new $e({baseImage:this.baseImage,baseWidth:this.baseWidth,baseHeight:this.baseHeight,logoDots:this.logoDots,logoImages:this.logoImages,fileImages:this.allImages[n].map(function(t){return t.imageUrl}),fileDots:this.fileDots});case 12:o=t.sent,i.push(o);case 14:n++,t.next=7;break;case 17:return console.log(i),r=new FormData,i.forEach(function(t){var e=l.convertBase64UrlToBlob(t);r.append("file",e,"file_"+Date.parse(new Date)+".jpg")}),t.next=22,this.$store.dispatch("saveTempImages",{images:r});case 22:c=t.sent,s&&s.close(),c.data?(Object(H["f"])("制作成功"),setTimeout(function(){l.$router.push({name:"temp"})},500)):Msgerror("制作失败");case 25:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),convertBase64UrlToBlob:function(t){var e=t.split(","),a=e[0].match(/:(.*?);/)[1],s=atob(e[1]),i=s.length,n=new Uint8Array(i);while(i--)n[i]=s.charCodeAt(i);return new Blob([n],{type:a})},tempUploading:function(t){this.logo=t,this.logourl=(t[0].imageUrl?location.origin:"")+t[0].imageUrl,this.logourl&&(this.logoImages=[],this.logoImages.push(this.logourl))},matterUploading:function(t){var e=this,a=[];this.allImages.flat().concat(t).forEach(function(t){a.find(function(e){return e.imageUrl==t.imageUrl})||a.push(t)}),this.allImages=a,this.fileImages1=this.allImages.slice(0,this.imagecount).map(function(t){return t.imageUrl}),this.fileImages2=this.allImages.slice(this.imagecount,2*this.imagecount).map(function(t){return t.imageUrl});var s=[],i=0;s[i]=[],this.allImages.forEach(function(t){s[i].length<e.imagecount?s[i].push(t):(i++,s[i]=[],s[i].push(t))}),this.allImages=s},goBack:function(){this.$emit("goBack")}}},Tn=In,xn=(a("9f32"),Object(E["a"])(Tn,an,sn,!1,null,"2dc8b611",null)),Sn=xn.exports,An={components:{SelectTemp:en,ExportImage:Sn},data:function(){return{step:this.$route.params.tempid?1:0}},mounted:function(){},methods:{selectTemp:function(t){this.step=1,this.$router.push({name:"createtemp",params:{tempid:t}})},goBack:function(){this.step=0,this.$router.push({name:"createtemp"})}}},jn=An,Dn=(a("8cc8"),Object(E["a"])(jn,qi,Ji,!1,null,"0b51d5a1",null)),Mn=Dn.exports,Pn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"title"},[t._v("上传模板")]),a("div",{staticClass:"ctrl"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:t.addTemplates}},[t._v("上传模板")]),a("el-select",{staticClass:"fr",attrs:{clearable:"",placeholder:"请选择行业"},on:{change:t.getTemplateList},model:{value:t.trade,callback:function(e){t.trade=e},expression:"trade"}},t._l(t.temptrade,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1),a("el-select",{staticClass:"fr",attrs:{clearable:"",placeholder:"请选择尺寸"},on:{change:t.getTemplateList},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.tempsize,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1),a("el-button",{staticClass:"fr",attrs:{type:"text"},on:{click:function(e){t.tradestatus=!0}}},[t._v("行业管理")]),a("el-button",{staticClass:"fr",attrs:{type:"text"},on:{click:function(e){t.sizestatus=!0}}},[t._v("尺寸管理")])],1),a("templates-list",{on:{templistReset:t.templistReset}}),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[20,50,80],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.templatetotal},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),a("size-ctrl",{attrs:{status:t.sizestatus},on:{"update:status":function(e){t.sizestatus=e}}}),a("trade-ctrl",{attrs:{status:t.tradestatus},on:{"update:status":function(e){t.tradestatus=e}}})],1)},Ln=[],Rn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.templatelist}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),a("el-table-column",{attrs:{prop:"coverImage",label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("p",{staticClass:"image"},[a("img",{attrs:{src:t.row.coverImage,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"size",label:"尺寸",width:"140"}}),a("el-table-column",{attrs:{prop:"business",label:"行业",width:"140"}}),a("el-table-column",{attrs:{prop:"label",label:"标签",width:"140"}}),a("el-table-column",{attrs:{prop:"isLogo",label:"LOGO",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s("0"==e.row.isLogo?"不支持":"支持"))])]}}])}),a("el-table-column",{attrs:{prop:"templateImage",label:"素材",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(JSON.parse(e.row.templateImage).length)+"个")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editTemp(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteTemp(e.row.id)}}},[t._v("删除")])]}}])})],1)},Nn=[],Un={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["templatelist"])),methods:{deleteTemp:function(t){var e=this;this.$confirm("删除模板后将不可恢复，确认删除模板吗?","删除模板",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(G["a"])(regeneratorRuntime.mark(function a(){var s;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("deleteTemp",{id:t});case 2:s=a.sent,s.data&&e.$emit("templistReset");case 4:case"end":return a.stop()}},a,this)}))).catch(function(){})},editTemp:function(t){this.$router.push({name:"addtemplates",params:{eid:t}})}}},$n=Un,Bn=(a("8521"),Object(E["a"])($n,Rn,Nn,!1,null,"5cf7f7c3",null)),Fn=Bn.exports,Vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"尺寸管理",visible:t.status,width:"50%"},on:{close:t.handleClose}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"当前尺寸"}},t._l(t.tempsize,function(e){return a("el-tag",{key:e.name,staticClass:"size",attrs:{closable:""},on:{close:function(a){t.deleteSize(e.name,e.delete)}}},[t._v(t._s(e.name))])}),1),a("el-form-item",{attrs:{label:"新增尺寸"}},[a("div",[a("el-input",{staticClass:"smallinput",attrs:{size:"mini",placeholder:"宽"},model:{value:t.form.sizewidth,callback:function(e){t.$set(t.form,"sizewidth",e)},expression:"form.sizewidth"}}),a("span",{staticClass:"between"},[t._v("x")]),a("el-input",{staticClass:"smallinput",attrs:{size:"mini",placeholder:"高"},model:{value:t.form.sizeheight,callback:function(e){t.$set(t.form,"sizeheight",e)},expression:"form.sizeheight"}})],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addSize}},[t._v("新增")])],1)],1)],1)},Kn=[],Wn={props:["status"],data:function(){return{form:{sizewidth:0,sizeheight:0}}},mounted:function(){},computed:Object(D["a"])({},Object(M["d"])(["tempsize"])),methods:{addSize:function(){if(this.form.sizewidth&&this.form.sizeheight){var t=1*this.form.sizewidth+"x"+1*this.form.sizeheight;this.$store.dispatch("addSort",{key:"template_size",value:t}),this.reset()}else Object(H["g"])("尺寸不可为0或为空")},reset:function(){this.form.sizewidth=0,this.form.sizeheight=0},deleteSize:function(t,e){if(e){var a=t;this.$store.dispatch("deleteSizeTrade",{key:"template_size",value:a})}else Object(H["g"])("当前尺寸下有模板不可删除，请修改或删除模板")},handleClose:function(){this.$emit("update:status",!1),this.reset()}}},zn=Wn,Gn=(a("5672"),Object(E["a"])(zn,Vn,Kn,!1,null,"69bd0287",null)),Hn=Gn.exports,qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"行业管理",visible:t.status,width:"50%"},on:{close:t.handleClose}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"当前行业"}},t._l(t.temptrade,function(e){return a("el-tag",{key:e.name,staticClass:"size",attrs:{closable:""},on:{close:function(a){t.deleteTrade(e.name,e.delete)}}},[t._v(t._s(e.name))])}),1),a("el-form-item",{attrs:{label:"新增行业"}},[a("div",[a("el-input",{staticClass:"smallinput",attrs:{size:"mini",placeholder:"行业"},model:{value:t.form.trade,callback:function(e){t.$set(t.form,"trade",e)},expression:"form.trade"}})],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addTrade}},[t._v("新增")])],1)],1)],1)},Jn=[],Yn={props:["status"],data:function(){return{form:{trade:""}}},mounted:function(){},computed:Object(D["a"])({},Object(M["d"])(["temptrade"])),methods:{addTrade:function(){if(this.form.trade){var t=this.form.trade;this.$store.dispatch("addSort",{key:"template_business",value:t}),this.reset()}else Object(H["g"])("行业不能为空")},reset:function(){this.form.trade=""},deleteTrade:function(t,e){if(e){var a=t;this.$store.dispatch("deleteSizeTrade",{key:"template_business",value:a})}else Object(H["g"])("当前行业下有模板不可删除，请修改或删除模板")},handleClose:function(){this.$emit("update:status",!1),this.reset()}}},Xn=Yn,Zn=(a("5c76"),Object(E["a"])(Xn,qn,Jn,!1,null,"8c7ee384",null)),Qn=Zn.exports,to={components:{TemplatesList:Fn,SizeCtrl:Hn,TradeCtrl:Qn},data:function(){return{size:"",trade:"",pageindex:1,pagesize:20,sizestatus:!1,tradestatus:!1}},mounted:function(){this.getTemplateList(),this.getSortList()},computed:Object(D["a"])({},Object(M["d"])(["tempsize","temptrade","templatetotal"])),methods:{pageSizeChange:function(t){this.pagesize=t,this.getTemplateList()},pageSwitch:function(t){this.pageindex=t,this.getTemplateList()},getSortList:function(){this.$store.dispatch("getSizeTrade","template_size"),this.$store.dispatch("getSizeTrade","template_business")},templistReset:function(){this.pageindex=1,this.getTemplateList(),this.getSortList()},getTemplateList:function(){var t={size:this.size,business:this.trade,pageIndex:this.pageindex,pageSize:this.pagesize};this.$store.dispatch("getTemplateList",t)},addTemplates:function(){this.$router.push({name:"addtemplates"})}}},eo=to,ao=(a("1cf4"),Object(E["a"])(eo,Pn,Ln,!1,null,"a1802aa2",null)),so=ao.exports,io=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("el-breadcrumb",{staticClass:"title",attrs:{separator:">"}},[a("el-breadcrumb-item",[t._v("模板管理")]),a("el-breadcrumb-item",[t._v("上传模板")])],1),a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"60px","label-position":"left"}},[a("el-form-item",{attrs:{label:"尺寸"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择尺寸"},model:{value:t.form.size,callback:function(e){t.$set(t.form,"size",e)},expression:"form.size"}},t._l(t.tempsize,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"行业"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择行业"},model:{value:t.form.trade,callback:function(e){t.$set(t.form,"trade",e)},expression:"form.trade"}},t._l(t.temptrade,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"封面"}},[a("div",{staticClass:"upbox"},[a("templates-upload",{staticClass:"uploadline",on:{imgUploading:t.imgUploading}}),a("span",{staticClass:"size"},[t._v(t._s(t.form.size))]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议上传模板的成品，吸引用户使用")]),t._l(t.form.face,function(e){return a("p",{key:e.imageUrl,staticClass:"image"},[a("span",{staticClass:"box"},[a("img",{attrs:{src:t.form.faceurl,alt:""}})]),a("el-progress",{attrs:{percentage:e.process,status:100==e.process?"success":""}})],1)})],2)]),a("el-form-item",{attrs:{label:"模板"}},[a("div",{staticClass:"upbox"},[a("templates-upload",{staticClass:"uploadline",on:{imgUploading:t.tempUploading}}),a("span",{staticClass:"size"},[t._v(t._s(t.form.size))]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("素材放好位置后，会将模板覆盖在上面")]),t._l(t.form.temp,function(e){return a("p",{key:e.imageUrl,staticClass:"image"},[a("span",{staticClass:"box"},[a("img",{attrs:{src:t.form.tempurl,alt:""}})]),a("el-progress",{attrs:{percentage:e.process,status:100==e.process?"success":""}})],1)})],2)]),a("el-form-item",{attrs:{label:"logo"}},[a("div",[a("el-checkbox",{model:{value:t.form.logo["with"],callback:function(e){t.$set(t.form.logo,"with",e)},expression:"form.logo['with']"}},[t._v("支持放置logo")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.logo["with"],expression:"form.logo['with']"}],staticClass:"sizeinput"},[a("span",{staticClass:"font"},[t._v("位置")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"x"},model:{value:t.form.logo["x"],callback:function(e){t.$set(t.form.logo,"x",e)},expression:"form.logo['x']"}}),a("span",{staticClass:"between"},[t._v(",")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"y"},model:{value:t.form.logo["y"],callback:function(e){t.$set(t.form.logo,"y",e)},expression:"form.logo['y']"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.logo["with"],expression:"form.logo['with']"}],staticClass:"sizeinput"},[a("span",{staticClass:"font"},[t._v("宽高")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"宽"},model:{value:t.form.logo["w"],callback:function(e){t.$set(t.form.logo,"w",e)},expression:"form.logo['w']"}}),a("span",{staticClass:"between"},[t._v("x")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"高"},model:{value:t.form.logo["h"],callback:function(e){t.$set(t.form.logo,"h",e)},expression:"form.logo['h']"}})],1)],1)]),a("el-form-item",{attrs:{label:"素材"}},[a("div",[t._l(t.form.matter,function(e,s){return a("div",{key:s,staticClass:"matter"},[a("div",{staticClass:"sizeinput"},[a("span",{staticClass:"font"},[t._v("位置")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"x"},model:{value:e["x"],callback:function(a){t.$set(e,"x",a)},expression:"mt['x']"}}),a("span",{staticClass:"between"},[t._v(",")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"y"},model:{value:e["y"],callback:function(a){t.$set(e,"y",a)},expression:"mt['y']"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.form.matter.length>1,expression:"form.matter.length > 1"}],staticClass:"close",attrs:{type:"text",icon:"el-icon-close"},on:{click:function(e){t.deleteMatter(s)}}})],1),a("div",{staticClass:"sizeinput"},[a("span",{staticClass:"font"},[t._v("宽高")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"宽"},model:{value:e["w"],callback:function(a){t.$set(e,"w",a)},expression:"mt['w']"}}),a("span",{staticClass:"between"},[t._v("x")]),a("el-input-number",{staticClass:"smallinput",attrs:{size:"mini",min:0,placeholder:"高"},model:{value:e["h"],callback:function(a){t.$set(e,"h",a)},expression:"mt['h']"}})],1)])}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.moreMatter}},[t._v("新增")])],2)]),a("el-form-item",{attrs:{label:"标签"}},[a("div",[t._l(t.form.tags,function(e){return a("el-tag",{key:e,staticClass:"tags",attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleClose(e)}}},[t._v(t._s(e))])}),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e(),!t.inputVisible&&t.form.tags.length<2?a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("新增标签")]):t._e()],2)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)],1)},no=[],oo={components:{TemplatesUpload:En},data:function(){return{editid:"",form:{size:"",trade:"",face:[],faceurl:"",temp:[],tempurl:"",tempwidth:0,tempheight:0,logo:{with:!0,x:0,y:0,w:0,h:0},matter:[{x:0,y:0,w:0,h:0}],tags:[]},inputVisible:!1,inputValue:""}},mounted:function(){console.log(this.$route.params),this.editid=this.$route.params.eid,this.editid&&this.$store.dispatch("getTempDetail",{id:this.editid}),this.$store.dispatch("getSizeTrade","template_size"),this.$store.dispatch("getSizeTrade","template_business")},computed:Object(D["a"])({},Object(M["d"])(["tempsize","temptrade","tempdetail"])),watch:{tempdetail:function(t,e){var a=this;if(t){if(this.form.size=t.size,this.form.trade=t.business,this.form.face=[{process:100,imageUrl:t.coverImage}],this.form.faceurl=t.coverImage,this.form.temp=[{process:100,imageUrl:t.designMaterial}],this.form.tempurl=t.designMaterial,this.form.tempwidth=t.size.split("x")[0],this.form.tempheight=t.size.split("x")[1],this.form.logo["with"]=1==t.isLogo,1==t.isLogo){var s=t.logoLocation.split(",");this.form.logo["x"]=s[0],this.form.logo["y"]=s[1];var i=t.logoWidthHeight.split("x");this.form.logo["w"]=i[0],this.form.logo["h"]=i[1]}var n=JSON.parse(t.templateImage);this.form.matter=[],n.forEach(function(t){var e=t.location.split(","),s=t.width_height.split("x"),i={x:e[0],y:e[1],w:s[0],h:s[1]};a.form.matter.push(i)}),this.form.tags=t.label.split(",")}}},methods:{deleteMatter:function(t){this.form.matter.splice(t,1)},moreMatter:function(){this.form.matter.push({x:0,y:0,w:0,h:0})},tempUploading:function(t){this.form.temp=t,this.form.tempurl=t[0].imageUrl,this.form.tempwidth=t[0].imageWidth,this.form.tempheight=t[0].imageHeight},imgUploading:function(t){this.form.face=t,this.form.faceurl=t[0].imageUrl},dataCheck:function(){if(!this.form.size)return[!1,"请选择尺寸"];if(!this.form.trade)return[!1,"请选择行业"];if(!this.form.faceurl)return[!1,"请上传封面"];var t=this.form.size.split("x");return this.form.tempurl?this.form.tempwidth!=t[0]||this.form.tempheight!=t[1]?[!1,"模板尺寸与所选尺寸不一致，请重新上传"]:!this.form.logo["with"]||void 0!==this.form.logo["x"]&&void 0!==this.form.logo["y"]&&void 0!==this.form.logo["w"]&&void 0!==this.form.logo["h"]?this.form.matter.find(function(t){return void 0===t["x"]||void 0===t["y"]||void 0===t["w"]||void 0===t["h"]})?[!1,"素材位置或者宽高不能为空"]:0==this.form.tags.length?[!1,"请设置标签"]:[!0]:[!1,"logo位置或者宽高不能为空"]:[!1,"请上传模板"]},onSubmit:function(){var t=this.dataCheck();if(t[0]){var e=[];this.form.matter.forEach(function(t){var a={location:1*t.x+","+1*t.y,width_height:1*t.w+"x"+1*t.h};e.push(a)});var a={business:this.form.trade,coverImage:this.form.faceurl,designMaterial:this.form.tempurl,isLogo:1*this.form.logo.with,label:this.form.tags.join(","),logoLocation:1*this.form.logo.x+","+1*this.form.logo.y,logoWidthHeight:1*this.form.logo.w+"x"+1*this.form.logo.h,size:this.form.size,templateImage:_e()(e)};this.editid?(a.id=this.editid,this.$store.dispatch("editTemplate",{option:a,route:this.$router})):this.$store.dispatch("addTemplate",{option:a,route:this.$router})}else Object(H["g"])(t[1])},handleClose:function(t){this.form.tags.splice(this.form.tags.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&this.form.tags.push(t),this.inputVisible=!1,this.inputValue=""}}},ro=oo,co=(a("2522"),Object(E["a"])(ro,io,no,!1,null,"45bc4e24",null)),lo=co.exports,uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("el-breadcrumb",{staticClass:"title",attrs:{separator:">"}},[a("el-breadcrumb-item",[t._v("设置")])],1),a("div",{staticClass:"bindlist"},[a("div",{staticClass:"line"},[t._m(0),a("span",{staticClass:"name"},[t._v("AppsFlyer")]),t.afstate?a("span",{staticClass:"tip"},[t._v("已绑定，若密钥重置请重新绑定")]):a("span",{staticClass:"tip"},[t._v("获取各应用各投放平台的监测数据，以分析优化广告")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.setDetection}},[t._v(t._s(t.afstate?"重新绑定":"绑定"))])],1)]),a("setting-detection",{attrs:{status:t.status},on:{"update:status":function(e){t.status=e}}})],1)},mo=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"pic"},[a("img",{attrs:{src:"http://atom.unitymob.com/file/image/2019/04/29/1143712a-40b5-459a-b3f0-fbbef36e2e2f.png",alt:""}})])}],po=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"绑定AppsFlyer",visible:t.status},on:{close:t.toCancel}},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-position":"left","label-width":t.formLabelWidth}},[a("el-form-item",{attrs:{label:"API密钥"}},[a("el-input",{staticClass:"input",attrs:{"auto-complete":"off",placeholder:"请输入密钥"},model:{value:t.form.apikey1,callback:function(e){t.$set(t.form,"apikey1",e)},expression:"form.apikey1"}}),a("p",[t._v("绑定后可获取Appsflyer中的监测数据")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSet}},[t._v("确 定")])],1)],1)},fo=[],ho={props:["status","id","platform"],data:function(){return{form:{apikey1:""},formLabelWidth:"100px"}},mounted:function(){},computed:Object(D["a"])({},Object(M["b"])(["disapp"])),watch:{},methods:{toSet:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.form.apikey1){t.next=3;break}return Object(H["g"])("请输入api密钥"),t.abrupt("return");case 3:return t.next=5,this.$store.dispatch("setAF",{af_key:this.form.apikey1});case 5:if(e=t.sent,e){t.next=8;break}return t.abrupt("return");case 8:e.data?(Object(H["f"])("绑定成功"),this.$store.dispatch("getAfState"),this.toCancel()):Object(H["a"])("绑定失败");case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),formReset:function(){this.form.apikey1=""},toCancel:function(){this.$emit("update:status",!1),this.formReset()}}},_o=ho,vo=(a("64e4"),Object(E["a"])(_o,po,fo,!1,null,"3041df8e",null)),go=vo.exports,bo={components:{SettingDetection:go},data:function(){return{status:!1}},mounted:function(){this.$store.dispatch("getAfState")},computed:Object(D["a"])({},Object(M["d"])(["afstate"])),methods:{setDetection:function(){this.status=!0}}},yo=bo,ko=(a("488a"),Object(E["a"])(yo,uo,mo,!1,null,"100678d1",null)),Eo=ko.exports,Co=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("top-header")],1),a("el-container",{staticClass:"contain"},[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:t.menushow,expression:"menushow"}],staticClass:"aside",attrs:{width:"200px"}},[a("left-nav")],1),a("div",{staticClass:"rightcontent"},[a("router-view")],1)],1)],1)},Oo=[],wo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-col",{staticClass:"elcol",attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"0",router:!0}},[a("el-menu-item",{staticClass:"specialitem",attrs:{index:"/project/"+t.$route.params.id+"/ad"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{staticClass:"theme",attrs:{slot:"title"},slot:"title"},[t._v("广告管理")])]),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),a("span",{staticClass:"theme"},[t._v("推广计划")])]),a("el-menu-item-group",[a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/plan"}},[t._v("推广计划管理")]),a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/gener/1"}},[t._v("创建推广计划")])],1)],2),a("el-menu-item",{staticClass:"specialitem",attrs:{index:"/project/"+t.$route.params.id+"/target"}},[a("i",{staticClass:"el-icon-location-outline"}),a("span",{staticClass:"theme",attrs:{slot:"title"},slot:"title"},[t._v("受众管理")])]),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-edit"}),a("span",{staticClass:"theme"},[t._v("创意库    ")])]),a("el-menu-item-group",[a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/create"}},[t._v("创意管理")]),a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/sync"}},[t._v("同步记录")]),a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/createform"}},[t._v("创意报表")])],1)],2),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),a("span",{staticClass:"theme"},[t._v("规则引擎")])]),a("el-menu-item-group",[a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/rule"}},[t._v("规则管理")]),a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/optimize"}},[t._v("优化记录")])],1)],2),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-document"}),a("span",{staticClass:"theme"},[t._v("数据报表")])]),a("el-menu-item-group",[a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/matterform"}},[t._v("素材报表")]),a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/data"}},[t._v("账户报表")]),a("el-menu-item",{staticClass:"lstitle",attrs:{index:"/project/"+t.$route.params.id+"/daycpi"}},[t._v("每日CPI")])],1)],2)],1)],1)},Io=[],To={},xo=To,So=(a("4ab4"),Object(E["a"])(xo,wo,Io,!1,null,"68e0680c",null)),Ao=So.exports,jo={components:{TopHeader:wt,LeftNav:Ao},data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["menushow"]))},Do=jo,Mo=(a("6431"),Object(E["a"])(Do,Co,Oo,!1,null,"32a6de82",null)),Po=Mo.exports,Lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rule"},[a("bread-crumb",{attrs:{pageName:"规则管理"}}),a("div",{staticClass:"ctrlline"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"广告账户，可多选，支持编号和名称搜索"},on:{change:t.selectCondition},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addStatus=!0}}},[t._v("创建")]),a("el-input",{staticClass:"keyword",attrs:{placeholder:"请输入规则名称","suffix-icon":"el-icon-search"},on:{input:t.toSort},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("div",{staticClass:"rulelist"},[a("rule-list",{on:{editRule:t.editRule}})],1),a("rule-add",{ref:"ruleAdd",attrs:{status:t.addStatus},on:{"update:status":function(e){t.addStatus=e}}})],1)},Ro=[],No=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialogrule",attrs:{title:this.editid?"编辑规则":"创建规则",visible:t.status},on:{close:t.hideBox}},[a("el-form",{attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"广告账户","label-width":"110px"}},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",disabled:Boolean(t.editid)||"ad"==t.from,placeholder:"请选择广告账户，可搜索"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1)],1),a("el-form-item",{attrs:{label:"规则应用对象","label-width":"110px"}},[a("el-select",{staticClass:"select",attrs:{filterable:"",placeholder:"选择对象",disabled:Boolean(t.editid)},on:{change:t.selectObject},model:{value:t.form.ruleobject,callback:function(e){t.$set(t.form,"ruleobject",e)},expression:"form.ruleobject"}},[t._l(t.adObjectOption,function(t){return a("el-option",{key:t.difkey,attrs:{label:t.name,value:t.key}})}),t._l(t.objectOption,function(t){return a("el-option",{key:t.difkey,attrs:{label:t.name,value:t.key}})})],2)],1),a("el-form-item",{attrs:{label:"操作","label-width":"110px"}},[a("div",[a("el-cascader",{staticClass:"ctrlselect2",attrs:{options:t.ctrlList,"show-all-levels":!1,"expand-trigger":"hover"},on:{change:t.selectCtrl},model:{value:t.form.ctrlmethod,callback:function(e){t.$set(t.form,"ctrlmethod",e)},expression:"form.ctrlmethod"}}),a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&("increase"==t.form.ctrlmethodwant||"decrease"==t.form.ctrlmethodwant),expression:"form.ctrlmethodwant && (form.ctrlmethodwant == 'increase' || form.ctrlmethodwant == 'decrease')"}],staticClass:"ctrlnum",attrs:{placeholder:""},model:{value:t.ctrlway1.ctrlnum,callback:function(e){t.$set(t.ctrlway1,"ctrlnum",e)},expression:"ctrlway1.ctrlnum"}}),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&("increase"==t.form.ctrlmethodwant||"decrease"==t.form.ctrlmethodwant),expression:"form.ctrlmethodwant && (form.ctrlmethodwant == 'increase' || form.ctrlmethodwant == 'decrease')"}],staticClass:"unitselect",attrs:{filterable:"",placeholder:""},model:{value:t.ctrlway1.ruleunit,callback:function(e){t.$set(t.ctrlway1,"ruleunit",e)},expression:"ctrlway1.ruleunit"}},[a("el-option",{attrs:{label:"%",value:"PERCENTAGE"}}),a("el-option",{attrs:{label:"$",value:"ACCOUNT_CURRENCY"}})],1)],1),a("p",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant,expression:"form.ctrlmethodwant"}],staticClass:"methodtip"},["resize"==t.form.ctrlmethodwant?a("span",[t._v("使用每日预算和总预算的将分为两个存储桶，即每日预算移至其他每日预算且时间相同的广告组；总预算则用剩余预算来计算分配金额")]):a("span",[t._v("只有使用"+t._s(t.form.ctrlmethodname)+"的"+t._s(t.form.ruleobjectname)+"能受这个规则操作控制。")])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&("increase"==t.form.ctrlmethodwant||"decrease"==t.form.ctrlmethodwant),expression:"form.ctrlmethodwant && (form.ctrlmethodwant == 'increase' || form.ctrlmethodwant == 'decrease')"}],staticClass:"maxdaybudget",attrs:{label:t.form.ctrlmethodname+("decrease"==t.form.ctrlmethodwant?"下限":"上限"),"label-width":"110px"}},[a("el-input",{staticClass:"wid200",attrs:{placeholder:""},model:{value:t.ctrlway1.daybudget,callback:function(e){t.$set(t.ctrlway1,"daybudget",e)},expression:"ctrlway1.daybudget"}}),a("el-tooltip",{class:{item3:"daybudget"==t.form.ctrlmethodkey,item2:"bid"==t.form.ctrlmethodkey,item4:"totalbudget"==t.form.ctrlmethodkey},attrs:{effect:"dark",content:"这是在规则管理下每个"+t.form.ruleobjectname+"可获得的"+("decrease"==t.form.ctrlmethodwant?"最低":"最高")+t.form.ctrlmethodname,placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&"other"==t.form.ctrlmethodwant,expression:"form.ctrlmethodwant && form.ctrlmethodwant == 'other'"}],staticClass:"maxdaybudget",attrs:{label:"调整目标","label-width":"110px"}},[a("el-select",{staticClass:"wid300",attrs:{filterable:"",placeholder:""},model:{value:t.ctrlway2.target,callback:function(e){t.$set(t.ctrlway2,"target",e)},expression:"ctrlway2.target"}},t._l(t.targetList,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1),a("el-tooltip",{staticClass:"item2",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            竞价或预算将按此字段调整。\n            "),a("br"),t._v("对于每个广告组，我们会在计算如何更改竞价或预算时计算这个字段的当前值。\n            "),a("br"),t._v("根据容错范围字段，我们建议在下方添加“不介于”条件，否则，我们会继续尝试按实际值调整你的竞价或预算。\n            "),a("br"),t._v("例如，如果你的目标是 0.5 且容错率是 10%，你可以把字段值指定为“不介于” 0.45 到 0.55 之间。这样，当前值在此范围内时，规则就不会执行。\n          ")]),a("i",{staticClass:"el-icon-warning"})])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&"other"==t.form.ctrlmethodwant,expression:"form.ctrlmethodwant && form.ctrlmethodwant == 'other'"}],staticClass:"maxdaybudget",attrs:{label:"目标价值","label-width":"110px"}},[a("el-input",{staticClass:"wid200",attrs:{placeholder:""},model:{value:t.ctrlway2.targetworth,callback:function(e){t.$set(t.ctrlway2,"targetworth",e)},expression:"ctrlway2.targetworth"}}),a("el-tooltip",{staticClass:"item2",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            这是你为上方目标字段选择的目标值，系统将据此调整竞价或预算。\n            "),a("br"),t._v("我们会根据输入的目标值和目标字段的当前值按比例调整当前竞价或预算。通过判断目标值是否高于当前值，系统会相应提高或降低竞价或预算\n          ")]),a("i",{staticClass:"el-icon-warning"})])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&"other"==t.form.ctrlmethodwant,expression:"form.ctrlmethodwant && form.ctrlmethodwant == 'other'"}],staticClass:"maxdaybudget",attrs:{label:t.form.ctrlmethodname+"范围","label-width":"110px"}},[a("el-input",{staticClass:"wid100",attrs:{placeholder:""},model:{value:t.ctrlway2.firstdist,callback:function(e){t.$set(t.ctrlway2,"firstdist",e)},expression:"ctrlway2.firstdist"}}),a("span",[t._v("-")]),a("el-input",{staticClass:"wid100",attrs:{placeholder:""},model:{value:t.ctrlway2.seconddist,callback:function(e){t.$set(t.ctrlway2,"seconddist",e)},expression:"ctrlway2.seconddist"}}),a("el-tooltip",{class:{item3:"daybudget"==t.form.ctrlmethodkey,item2:"bid"==t.form.ctrlmethodkey,item4:"totalbudget"==t.form.ctrlmethodkey},attrs:{effect:"dark",content:"这是在规则管理下每个"+t.form.ruleobjectname+"可获得的"+("decrease"==t.form.ctrlmethodwant?"最低":"最高")+t.form.ctrlmethodname,placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            这是规则所管理的广告组"+t._s(t.form.ctrlmethodname)+"变化值限定范围。\n            "),a("br"),t._v("\n            定位规则的"+t._s(t.form.ctrlmethodname)+"上限值和下限值。当广告组的"+t._s(t.form.ctrlmethodname)+"达到范围界限并尝试调整到你的目标值时，"+t._s(t.form.ctrlmethodname)+"可能会有所增加或减少。\n          ")]),a("i",{staticClass:"el-icon-warning"})])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.ctrlmethodwant&&"resize"!=t.form.ctrlmethodwant,expression:"form.ctrlmethodwant && form.ctrlmethodwant != 'resize'"}],attrs:{label:"操作频率","label-width":"110px"}},[a("el-select",{staticClass:"wid200",attrs:{filterable:"",placeholder:"操作频率"},model:{value:t.frequency,callback:function(e){t.frequency=e},expression:"frequency"}},t._l(t.frequencyList,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"balance"==t.form.ctrlmethodkey,expression:"form.ctrlmethodkey == 'balance'"}],attrs:{label:"类型","label-width":"110px"}},[a("el-tooltip",{staticClass:"item2",staticStyle:{left:"-78px"},attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            暂停平分：暂停符合条件的广告组，平均分配给其他广告组\n            "),a("br"),t._v("暂停按比例分：暂停符合条件的广告组，根据调整目标按比例分配给其他广告组\n            "),a("br"),t._v("不暂停按比例分：根据调整目标按比例把符合条件的广告组预算分配给其他广告组，其他广告组预算=原预算+被分配的预算，符合条件的广告组预算=被分配的预算；例如5个广告组，展示量分别是10到50，每日预算均为3000，设置规则为展示量＜20，则预算分别是400、800、4200、4600、5000\n            "),a("br"),t._v("不暂停按比例分总预算：不暂停广告组，根据调整目标按比例把所有广告组预算重新分配给所有广告组，无法保证更好的广告组的预算不会减少；例如5个广告组，展示量分别是10到50，每日预算均为3000，设置规则为展示量＜20，则预算分别是1000、2000、3000、4000、5000\n          ")]),a("i",{staticClass:"el-icon-warning"})]),a("el-select",{staticClass:"wid200",attrs:{filterable:"",placeholder:"类型"},model:{value:t.ctrlway3.type,callback:function(e){t.$set(t.ctrlway3,"type",e)},expression:"ctrlway3.type"}},t._l(t.typeOption,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key},on:{change:t.typeChange}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"balance"==t.form.ctrlmethodkey&&"EVEN"!=t.ctrlway3.type,expression:"form.ctrlmethodkey == 'balance' && ctrlway3.type != 'EVEN'"}],attrs:{label:"调整目标","label-width":"110px"}},[a("el-tooltip",{staticClass:"item2",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("预算将按照此目标按比例调整")]),a("i",{staticClass:"el-icon-warning"})]),a("el-select",{staticClass:"wid200",attrs:{filterable:"",placeholder:"调整目标"},model:{value:t.ctrlway3.target,callback:function(e){t.$set(t.ctrlway3,"target",e)},expression:"ctrlway3.target"}},t._l(t.customIndicator,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value.split("|")[0]}})}),1),a("p",[a("span",[t._v("\n            "+t._s(t.ctrlway3.opposite?"正":"反")+"比，值越"+t._s(t.ctrlway3.opposite?"大":"小")+"预算越多，\n            "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.ctrlway3.opposite=!t.ctrlway3.opposite}}},[t._v(t._s(t.ctrlway3.opposite?"改为反比":"改为正比"))])],1)])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"balance"==t.form.ctrlmethodkey&&"EVEN"!=t.ctrlway3.type,expression:"form.ctrlmethodkey == 'balance' && ctrlway3.type != 'EVEN'"}],attrs:{label:"接收对象","label-width":"110px"}},[a("el-tooltip",{staticClass:"item2",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("即接受预算的对象，所有则平衡到所有对象；此外，还可指定是根据调整目标从大到小或者从小到大排的前几个作为接受对象")]),a("i",{staticClass:"el-icon-warning"})]),a("el-radio-group",{model:{value:t.ctrlway3.accept,callback:function(e){t.$set(t.ctrlway3,"accept",e)},expression:"ctrlway3.accept"}},[a("el-radio",{attrs:{label:1}},[t._v("所有")]),a("el-radio",{attrs:{label:2}},[t._v("\n            "+t._s(t.ctrlway3.opposite?"从大到小":"从小到大")+"排 前\n            "),a("el-input",{staticStyle:{width:"50px"},attrs:{size:"mini"},model:{value:t.ctrlway3.arrange,callback:function(e){t.$set(t.ctrlway3,"arrange",e)},expression:"ctrlway3.arrange"}}),t._v("个\n          ")],1)],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"balance"==t.form.ctrlmethodkey,expression:"form.ctrlmethodkey == 'balance'"}],attrs:{label:"广告系列","label-width":"110px"}},[a("el-tooltip",{staticClass:"item2",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("选择总预算不变，则代表预算只会在同一个广告系列下的广告组之间移动，一个广告系列下的广告组的总预算不变；选择总预算可变，则代表预算在所有广告系列的广告组之间移动，一个广告系列下的广告组的总预算也会变化")]),a("i",{staticClass:"el-icon-warning"})]),a("el-radio-group",{model:{value:t.ctrlway3.campaign,callback:function(e){t.$set(t.ctrlway3,"campaign",e)},expression:"ctrlway3.campaign"}},[a("el-radio",{attrs:{label:!1}},[t._v("总预算不变")]),a("el-radio",{attrs:{label:!0}},[t._v("总预算可变")])],1)],1)],1),a("el-form-item",{attrs:{label:"条件","label-width":"110px"}},[a("el-tooltip",{staticClass:"conditiontip",attrs:{effect:"dark",content:"实时规则建议把难度较高的规则放在前面，以便能及时触发；实时必须要有统计类指标，且某些统计类指标不支持实时",placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})]),t._l(t.form.conditionlist,function(e){return a("span",{key:e.key,staticClass:"tagline",on:{click:function(a){t.editCondition(e.key)}}},[a("el-tag",{staticClass:"tag",attrs:{closable:"",type:""},on:{close:function(a){t.deleteCondtion(e.key)}}},[t._v(t._s(e.name))])],1)}),a("rule-condition",{ref:"setCondition",attrs:{status:t.conditionStatus},on:{"update:status":function(e){t.conditionStatus=e},cancelCondition:t.cancelCondition,returnCondition:t.returnCondition}}),a("p",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.conditionStatus,expression:"!conditionStatus"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){t.conditionStatus=!0}}})],1),a("el-form-item",{attrs:{label:"时间范围","label-width":"110px"}},[a("el-cascader",{staticClass:"ctrlselect",attrs:{options:t.timeOption,"show-all-levels":!1,"expand-trigger":"hover"},model:{value:t.timerange,callback:function(e){t.timerange=e},expression:"timerange"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TRIGGER"!=t.form.schedulegrade,expression:"form.schedulegrade != 'TRIGGER'"}],attrs:{label:"统计时间窗","label-width":"110px"}},[a("el-radio-group",{model:{value:t.form.timewindow,callback:function(e){t.$set(t.form,"timewindow",e)},expression:"form.timewindow"}},[a("el-radio",{attrs:{label:1}},[t._v("账号默认设置")]),a("el-radio",{attrs:{label:2}},[t._v("自定义")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.form.timewindow,expression:"form.timewindow == 2"}],staticClass:"windowdeploy"},[t._v("\n          浏览广告后\n          "),a("el-select",{staticClass:"wid100",attrs:{filterable:"",placeholder:"",size:"mini"},model:{value:t.form.timecustom1,callback:function(e){t.$set(t.form,"timecustom1",e)},expression:"form.timecustom1"}},t._l(t.viewcustomlist,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1),t._v("点击广告后\n          "),a("el-select",{staticClass:"wid100",attrs:{filterable:"",placeholder:"",size:"mini"},model:{value:t.form.timecustom2,callback:function(e){t.$set(t.form,"timecustom2",e)},expression:"form.timecustom2"}},t._l(t.clickcustomlist,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1)],1)],1)],2),a("el-form-item",{attrs:{label:"排期","label-width":"110px"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"选择排期"},on:{change:t.selectSchedule},model:{value:t.form.schedule,callback:function(e){t.$set(t.form,"schedule",e)},expression:"form.schedule"}},[a("el-option",{attrs:{label:"实时（至多7分钟）",value:"TRIGGER|",disabled:!t.trigger||"SCHEDULE"==t.editschedulestatus}}),t._l(t.schedulelist,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key,disabled:"TRIGGER"==t.editschedulestatus||"balance"==t.form.ctrlmethodkey&&!("DAILY"==e.key.split("|")[1]||"CUSTOM"==e.key.split("|")[1])}})})],2),a("p",{directives:[{name:"show",rawName:"v-show",value:"TRIGGER"==t.form.schedulegrade,expression:"form.schedulegrade == 'TRIGGER'"}]},[t._v("实时无需设置统计时间窗")]),a("p",{directives:[{name:"show",rawName:"v-show",value:"DAILY"==t.form.schedulekey,expression:"form.schedulekey == 'DAILY'"}]},[t._v("每日的12点指的是广告账户时间")]),a("p",{directives:[{name:"show",rawName:"v-show",value:"CUSTOM"==t.form.schedulekey,expression:"form.schedulekey == 'CUSTOM'"}]},[t._v("每天12点；自定义的12点指的是广告账户时间")]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"CUSTOM"==t.form.schedulekey,expression:"form.schedulekey == 'CUSTOM'"}],staticClass:"select",attrs:{multiple:"","collapse-tags":"",placeholder:"选择星期"},model:{value:t.form.week,callback:function(e){t.$set(t.form,"week",e)},expression:"form.week"}},t._l(t.weeklist,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1)],1),a("el-form-item",{attrs:{label:"规则名称","label-width":"110px"}},[a("el-input",{staticClass:"select",attrs:{placeholder:"请输入规则名称"},model:{value:t.form.rulename,callback:function(e){t.$set(t.form,"rulename",e)},expression:"form.rulename"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveRule}},[t._v("确 定")]),a("el-button",{on:{click:t.hideBox}},[t._v("取 消")])],1)],1)},Uo=[],$o=a("e814"),Bo=a.n($o),Fo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"condition"},[a("el-cascader",{staticClass:"ctrlselect",attrs:{options:t.indicatorOption,"show-all-levels":!1,"expand-trigger":"hover",size:"mini",placeholder:"指标名称"},on:{change:t.selectIndicator},model:{value:t.indicator,callback:function(e){t.indicator=e},expression:"indicator"}}),a("el-select",{staticClass:"select",attrs:{size:"mini","no-data-text":"请先选择指标名称",placeholder:"运算"},on:{change:t.selectOperation},model:{value:t.operation,callback:function(e){t.operation=e},expression:"operation"}},t._l(t.operationlist,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1),a("el-input-number",{directives:[{name:"show",rawName:"v-show",value:1==t.indicatortype,expression:"indicatortype == 1"}],staticClass:"numberinput",attrs:{size:"mini",precision:2,min:0,step:.1},model:{value:t.indicatornum,callback:function(e){t.indicatornum=e},expression:"indicatornum"}}),a("el-input-number",{directives:[{name:"show",rawName:"v-show",value:1==t.indicatortype&&(3==t.operation||4==t.operation),expression:"indicatortype == 1 && (operation == 3 || operation == 4)"}],staticClass:"numberinput",attrs:{size:"mini",precision:2,min:0,step:.1},model:{value:t.indicatornumend,callback:function(e){t.indicatornumend=e},expression:"indicatornumend"}}),a("el-input",{directives:[{name:"show",rawName:"v-show",value:2==t.indicatortype,expression:"indicatortype == 2"}],staticClass:"select",attrs:{size:"mini",placeholder:""},model:{value:t.indicatordata,callback:function(e){t.indicatordata=e},expression:"indicatordata"}}),a("el-select",{directives:[{name:"show",rawName:"v-show",value:3==t.indicatortype,expression:"indicatortype == 3"}],staticClass:"selectcontent",attrs:{size:"mini","collapse-tags":"",multiple:"",placeholder:""},model:{value:t.indicatorselect,callback:function(e){t.indicatorselect=e},expression:"indicatorselect"}},t._l(t.indicatorselectlist,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:4==t.indicatortype&&(1==t.operation||2==t.operation),expression:"indicatortype == 4 && (operation == 1 || operation == 2)"}],staticClass:"timeselect",attrs:{size:"mini",type:"datetime",clearable:!1,placeholder:"选择日期时间"},model:{value:t.indicatortime,callback:function(e){t.indicatortime=e},expression:"indicatortime"}}),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:4==t.indicatortype&&(3==t.operation||4==t.operation),expression:"indicatortype == 4 && (operation == 3 || operation == 4)"}],staticClass:"timerange",attrs:{type:"datetimerange","range-separator":"至",size:"mini",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.indicatortimerange,callback:function(e){t.indicatortimerange=e},expression:"indicatortimerange"}}),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:t.determineSearch}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:t.cancelSearch}})],1)},Vo=[],Ko=a("91e6"),Wo=Ko["a"],zo=(a("3aa6"),Object(E["a"])(Wo,Fo,Vo,!1,null,"76e5ed04",null)),Go=zo.exports,Ho=a("5118"),qo={props:["status"],components:{RuleCondition:Go},data:function(){return{adObjectOption:[],objectOption:[{name:"投放中的全部广告系列",key:"CAMPAIGN",difkey:4},{name:"投放中的全部广告组",key:"ADSET",difkey:5},{name:"投放中的全部广告",key:"AD",difkey:6}],typeOption:[{name:"暂停平分",key:"EVEN"},{name:"暂停按比例分",key:"PROPORTIONAL"},{name:"不暂停按比例分",key:"NO_PAUSE_PROPORTIONAL"},{name:"不暂停按比例分总预算",key:"MATCHED_ONLY_PROPORTIONAL"}],ctrlList:[],ctrlOption:[{value:"PAUSE",label:"关闭",children:null},{value:"UNPAUSE",label:"开启",children:null},{value:"CHANGE_BUDGET",label:"调整预算",children:[{value:"daybudget_increase",label:"将单日预算增加"},{value:"daybudget_decrease",label:"将单日预算减少"},{value:"totalbudget_increase",label:"将总预算增加"},{value:"totalbudget_decrease",label:"将总预算减少"},{value:"daybudget_other",label:"根据目标调整单日预算"},{value:"totalbudget_other",label:"根据目标调整总预算"},{value:"balance_resize",label:"重新平衡预算"}]},{value:"CHANGE_BID",label:"调整手动竞价",children:[{value:"bid_increase",label:"将竞价提高"},{value:"bid_decrease",label:"将竞价降低"},{value:"bid_other",label:"根据目标调整竞价"}]}],form:{account:[],ruleobject:"",ruleobjectname:"",ctrlmethod:[],ctrlmethodkey:"",ctrlmethodname:"",ctrlmethodwant:"",conditionlist:[],timewindow:1,timecustom1:"1",timecustom2:"28",schedule:"TRIGGER|",schedulegrade:"TRIGGER",schedulekey:"",week:[],rulename:""},ctrlname:"",ctrlsort:"",ctrlway1:{ctrlnum:"",ruleunit:"PERCENTAGE",daybudget:""},ctrlway2:{target:"",targetworth:"",firstdist:"",seconddist:""},ctrlway3:{type:"",target:"",opposite:!0,accept:1,arrange:"",campaign:!1},frequency:"720",frequencyList:[{name:"每小时一次",key:"60"},{name:"每12小时一次",key:"720"},{name:"每周一次",key:"10080"},{name:"两周一次",key:"20160"}],specialIndicator:["campaign.name","adset.name","adset.placement.page_types","lifetime_budget","daily_budget","bid_amount","billing_event","optimization_goal","hours_since_creation","active_time","current_time","created_time","updated_time","start_time"],otherIndicator:["daily_ratio_spent","lifetime_ratio_spent","audience_reached_percentage","link_clicks","actions","estimated_budget_spending_percentage"],targetList:[{name:"广告花费回报 (ROAS) - 移动应用购物",key:"mobile_app_purchase_roas"},{name:"广告花费回报 (ROAS) - 网站购物",key:"website_purchase_roas"},{name:"单次移动应用安装费用",key:"cost_per_mobile_app_install"},{name:"单次移动应用购物费用",key:"cost_per_mobile_purchase"},{name:"单次成效费用",key:"cost_per"},{name:"千次展示费用",key:"cpm"},{name:"CPA",key:"cpa"},{name:"CPC",key:"cpc"}],timerange:["LIFETIME"],timeOption:[{label:"广告发布期间",value:"LIFETIME"},{label:"今天",value:"TODAY"},{label:"昨天",value:"YESTERDAY"},{label:"过去2天",value:"LAST_2D"},{label:"过去3天",value:"LAST_3D"},{label:"过去7天",value:"LAST_7D"},{label:"过去14天",value:"LAST_14D"},{label:"过去28天",value:"LAST_28D"},{label:"过去30天",value:"LAST_30D"},{label:"包括今天",value:"10",children:[{label:"过去2天（包括今天）",value:"LAST_2_DAYS"},{label:"过去3天（包括今天）",value:"LAST_3_DAYS"},{label:"过去7天（包括今天）",value:"LAST_7_DAYS"},{label:"过去14天（包括今天）",value:"LAST_14_DAYS"},{label:"过去28天（包括今天）",value:"LAST_28_DAYS"},{label:"过去30天（包括今天）",value:"LAST_30_DAYS"}]},{label:"过去7天",value:"11",children:[{label:"过去 14 天到过去 7 天",value:"LAST_ND_14_8"},{label:"过去 30 天到过去 7 天",value:"LAST_ND_30_8"},{label:"过去 60 天到过去 7 天",value:"LAST_ND_60_8"},{label:"过去 120 天到过去 7 天",value:"LAST_ND_120_8"},{label:"过去 180 天到过去 7 天",value:"LAST_ND_180_8"},{label:"广告发布期间到过去 7 天",value:"LAST_ND_LIFETIME_8"}]},{label:"过去28天",value:"12",children:[{label:"过去 60 天到过去 28 天",value:"LAST_ND_60_29"},{label:"过去 120 天到过去 28 天",value:"LAST_ND_120_29"},{label:"过去 180 天到过去 28 天",value:"LAST_ND_180_29"},{label:"广告发布期间到过去 28 天",value:"LAST_ND_LIFETIME_29"}]}],conditionStatus:!1,viewcustomlist:[{name:"无（不计算浏览的转化）",key:"0"},{name:"1天",key:"1"},{name:"7天",key:"7"},{name:"28天",key:"28"}],clickcustomlist:[{name:"无（不计算点击的转化）",key:"0"},{name:"1天",key:"1"},{name:"7天",key:"7"},{name:"28天",key:"28"}],schedulelist:[{name:"每半小时",key:"SCHEDULE|SEMI_HOURLY"},{name:"每小时",key:"SCHEDULE|HOURLY"},{name:"每日（每天0点）",key:"SCHEDULE|DAILY"},{name:"自定义",key:"SCHEDULE|CUSTOM"}],weeklist:[{name:"星期一",key:1},{name:"星期二",key:2},{name:"星期三",key:3},{name:"星期四",key:4},{name:"星期五",key:5},{name:"星期六",key:6},{name:"星期日",key:0}],editrule:null,adselect:[],adtype:"",idkey:"",from:"",trigger:!0,editid:"",editfbid:"",editschedulestatus:""}},mounted:function(){this.ctrlList=this.ctrlOption.slice(0,2)},computed:Object(D["a"])({},Object(M["d"])(["commonaccount","newrulelist","indicator"]),{customIndicator:function(){var t=this;return this.indicator.filter(function(e){return!t.specialIndicator.includes(e.value.split("|")[0])&&!t.otherIndicator.includes(e.value.split("|")[0])})}}),methods:{typeChange:function(){},adInit:function(t,e){switch(this.adselect=t,this.form.account=[t[0].accountId],this.from="ad",e){case"campaignName":this.adObjectOption=this.adObjectOption.concat([{name:"".concat(t.length,"个广告系列"),key:"CAMPAIGN|ad",difkey:1},{name:"".concat(t.length,"个广告系列中正在投放的广告组"),key:"ADSET|ad",difkey:2},{name:"".concat(t.length,"个广告系列中正在投放的广告"),key:"AD|ad",difkey:3}]),this.adtype="CAMPAIGN",this.idkey="campaignId";break;case"adSetName":this.adObjectOption=this.adObjectOption.concat([{name:"".concat(t.length,"个广告组"),key:"ADSET|ad",difkey:1},{name:"".concat(t.length,"个广告组中正在投放的广告"),key:"AD|ad",difkey:2}]),this.adtype="ADSET",this.idkey="adsetId";break;case"adName":this.adObjectOption=this.adObjectOption.concat([{name:"".concat(t.length,"个广告"),key:"AD|ad",difkey:1}]),this.adtype="AD",this.idkey="adId";break}},initEdit:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l,u,d,m,p,f,h,_,v,g,b,y,k,E,C,O=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=this.newrulelist.find(function(t){return t.id==e}),i=s.level,n=JSON.parse(s.evaluationSpec),o=JSON.parse(s.executionSpec),r=s.scheduleSpec?JSON.parse(s.scheduleSpec):null,this.form.account=s.fbAccountId.split(","),c=n["filters"].find(function(t){return"entity_type"==t.field}),l=n["filters"].find(function(t){return"campaign.id"==t.field||"adset.id"==t.field||"ad.id"==t.field||"id"==t.field}),l?(u="",d="","id"!=l.field&&(i=l.field.split(".")[0].toLocaleUpperCase()),m={CAMPAIGN:{key:"campaignId",type:"campaignName"},ADSET:{key:"adsetId",type:"adSetName"},AD:{key:"adId",type:"adName"}},u=m[i]["key"],d=m[i]["type"],p=l.value.map(function(t){var e={};return e[u]=t,e["accountId"]=s.fbAccountId,e}),this.adInit(p,d),this.form.ruleobject=c.value+"|ad"):this.form.ruleobject=c.value,this.selectObject(),this.form.ctrlmethod.push("REBALANCE_BUDGET"==o["execution_type"]?"CHANGE_BUDGET":o["execution_type"]),f=n["filters"].find(function(t){return-1!=t.field.indexOf("budget_reset_period")}),h=o["execution_options"]?o["execution_options"].find(function(t){return"change_spec"==t.field}):null,_=o["execution_options"]?o["execution_options"].find(function(t){return"rebalance_spec"==t.field}):null,!h){t.next=29;break}this.form.ctrlmethodkey=f?"day"==f[0]?"daybudget":"totalbudget":"bid",t.t0=this.form.ctrlmethodkey,t.next="daybudget"===t.t0?19:"totalbudget"===t.t0?21:"bid"===t.t0?23:25;break;case 19:return this.form.ctrlmethodname="单日预算",t.abrupt("break",25);case 21:return this.form.ctrlmethodname="总预算",t.abrupt("break",25);case 23:return this.form.ctrlmethodname="竞价",t.abrupt("break",25);case 25:h["value"]["target_field"]?(this.form.ctrlmethodwant="other",this.ctrlway2.targetworth=h["value"]["amount"]/100,this.ctrlway2.target=h["value"]["target_field"],this.ctrlway2.firstdist=h["value"]["limit"][0]/100,this.ctrlway2.seconddist=h["value"]["limit"][1]/100):(h["value"]["amount"]<0?this.form.ctrlmethodwant="decrease":this.form.ctrlmethodwant="increase",this.ctrlway1.ruleunit=h["value"]["unit"],this.ctrlway1.ctrlnum="ACCOUNT_CURRENCY"==this.ctrlway1.ruleunit?Math.abs(h["value"]["amount"]/100):Math.abs(h["value"]["amount"]),this.ctrlway1.daybudget=h["value"]["limit"]/100),this.form.ctrlmethod.push(this.form.ctrlmethodkey+"_"+this.form.ctrlmethodwant),t.next=30;break;case 29:_&&(this.form.ctrlmethodkey="balance",this.form.ctrlmethodname="平衡",this.form.ctrlmethodwant="resize",this.form.ctrlmethod.push(this.form.ctrlmethodkey+"_"+this.form.ctrlmethodwant),this.ctrlway3.type=_["value"]["type"],this.ctrlway3.campaign=1==_["value"]["is_cross_campaign"]||"1"==_["value"]["is_cross_campaign"],this.ctrlway3.target=_["value"]["target_field"]?_["value"]["target_field"]:"",this.ctrlway3.opposite=!_["value"]["is_inverse"]||_["value"]["is_inverse"],this.ctrlway3.accept=_["value"]["target_count"]?2:1,this.ctrlway3.arrange=_["value"]["target_count"]?_["value"]["target_count"]:"");case 30:if(!n["trigger"]){t.next=36;break}return v=n["trigger"],delete v["type"],t.next=35,this.$barrageTime(300);case 35:this.$refs.setCondition.editRuleInit([v]);case 36:return g=n["filters"].filter(function(t){return"EQUAL"!=t.operator}),g=g.filter(function(t){return-1==t.field.indexOf("budget_reset_period")&&t.field!=i.toLocaleLowerCase()+".id"&&"id"!=t.field}),t.next=40,this.$barrageTime(300);case 40:if(this.$refs.setCondition.editRuleInit(g),b=n["filters"].find(function(t){return"time_preset"==t.field}),this.timeOption.find(function(t){return t.value==b.value})?this.timerange=[b.value]:this.timeOption.forEach(function(t){var e=t.children?t.children.find(function(t){return t.value==b.value}):null;e&&(O.timerange=[t.value],O.timerange.push(e.value))}),"TRIGGER"==n["evaluation_type"]){t.next=65;break}y=n["filters"].find(function(t){return"attribution_window"==t.field}),t.t1=y.value,t.next="ACCOUNT_DEFAULT"===t.t1?48:"DEFAULT"===t.t1?50:"INLINE"===t.t1?54:58;break;case 48:return this.form.timewindow=1,t.abrupt("break",65);case 50:return this.form.timewindow=2,this.form.timecustom1="1",this.form.timecustom2,t.abrupt("break",65);case 54:return this.form.timewindow=2,this.form.timecustom1="0",this.form.timecustom2,t.abrupt("break",65);case 58:return this.form.timewindow=2,k=y.value.split("_"),E=k.indexOf("VIEW"),C=k.indexOf("CLICK"),this.form.timecustom1=-1!=E?k[E-1].replace("D",""):"0",this.form.timecustom2=-1!=C?k[C-1].replace("D",""):"0",t.abrupt("break",65);case 65:this.form.schedule=n["evaluation_type"]+"|"+(r?r["schedule_type"]:""),this.selectSchedule(),this.editschedulestatus=this.form.schedulegrade,r&&"CUSTOM"==r["schedule_type"]&&(this.form.week=r["schedule"][0]["days"]),this.form.rulename=s["name"],this.editid=e,this.editfbid=a;case 72:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),editCondition:function(t){var e=this.form.conditionlist.find(function(e){return e.key==t});this.form.conditionlist=this.form.conditionlist.filter(function(e){return e.key!=t}),this.conditionStatus=!0,this.$refs.setCondition.editInit(e),this.editrule=e},cancelCondition:function(){this.form.conditionlist.push(this.editrule)},deleteCondtion:function(t){this.form.conditionlist=this.form.conditionlist.filter(function(e){return e.key!=t}),this.setTriggerStatus()},setTriggerStatus:function(){var t=this;this.trigger=!0,"daybudget"!=this.form.ctrlmethodkey&&"totalbudget"!=this.form.ctrlmethodkey&&"bid"!=this.form.ctrlmethodkey&&"balance"!=this.form.ctrlmethodkey||(this.trigger=!1);var e=this.form.conditionlist.filter(function(e){return!t.specialIndicator.includes(e.key)});0==e.length?this.trigger=!1:this.form.conditionlist.forEach(function(e){e.trigger||(t.trigger=!1)}),this.editid?(this.form.schedule="",this.form.schedulegrade="",this.form.schedulekey=""):"balance"==this.form.ctrlmethodkey?(this.form.schedule="SCHEDULE|DAILY",this.form.schedulegrade="SCHEDULE",this.form.schedulekey="DAILY"):(this.form.schedule=this.trigger?"TRIGGER|":"SCHEDULE|SEMI_HOURLY",this.form.schedulegrade=this.trigger?"TRIGGER":"SCHEDULE",this.form.schedulekey=this.trigger?"":"SEMI_HOURLY")},returnCondition:function(t){this.form.conditionlist.push(t),this.setTriggerStatus()},selectSchedule:function(){var t=this.form.schedule.split("|");this.form.schedulegrade=t[0],this.form.schedulekey=t[1]},resetCtrlSelect:function(){this.ctrlway1["ctrlnum"]="",this.ctrlway1["ruleunit"]="PERCENTAGE",this.ctrlway1["daybudget"]="",this.ctrlway2["target"]="",this.ctrlway2["targetworth"]="",this.ctrlway2["firstdist"]="",this.ctrlway2["seconddist"]="",this.frequency="720"},selectCtrl:function(){if(this.form.ctrlmethod[1]){var t=this.form.ctrlmethod[1].split("_");this.form.ctrlmethodkey=t[0],this.form.ctrlmethodwant=t[1];var e={daybudget:{name:"单日预算"},totalbudget:{name:"总预算"},bid:{name:"竞价"},balance:{name:"平衡"}};this.form.ctrlmethodname=e[t[0]]["name"]}else this.form.ctrlmethodkey=this.form.ctrlmethod[0],this.form.ctrlmethodname="",this.form.ctrlmethodwant="";this.resetCtrlSelect(),this.setTriggerStatus()},selectObject:function(){switch(this.form.ruleobject.split("|")[0]){case"CAMPAIGN":this.form.ruleobjectname="广告系列",this.ctrlList=this.ctrlOption.slice(0,2);break;case"ADSET":this.form.ruleobjectname="广告组",this.ctrlList=this.ctrlOption.slice(0);break;case"AD":this.form.ruleobjectname="广告",this.ctrlList=this.ctrlOption.slice(0,2);break}this.form.ctrlmethod=[],this.form.ctrlmethodkey="",this.form.ctrlmethodname="",this.form.ctrlmethodwant="",this.resetCtrlSelect(),this.setTriggerStatus()},hideBox:function(){this.$emit("update:status",!1),this.reset()},dataCheck:function(){if(0==this.form.account.length)return[!1,"请选择广告账户"];if(!this.form.ruleobject)return[!1,"请选择规则应用对象"];if(0==this.form.ctrlmethod.length)return[!1,"请选择操作"];if("balance"==this.form.ctrlmethodkey){if(!this.ctrlway3.type)return[!1,"请选择类型"];if("EVEN"!=this.ctrlway3.type&&!this.ctrlway3.target)return[!1,"请选择调整目标"];if("EVEN"!=this.ctrlway3.type&&2==this.ctrlway3.accept&&!this.ctrlway3.arrange)return[!1,"请输入接收对象排列顺序"]}else if(this.form.ctrlmethodwant&&"other"!=this.form.ctrlmethodwant){if(!this.ctrlway1.ctrlnum)return[!1,"请输入操作信息"];if(!this.ctrlway1.daybudget)return[!1,"请输入预算"]}else if(this.form.ctrlmethodwant){if(!this.ctrlway2.target)return[!1,"请选择调整目标"];if(!this.ctrlway2.targetworth)return[!1,"请输入目标价值"];if(!this.ctrlway2.firstdist||!this.ctrlway2.seconddist)return[!1,"请输入预算范围"]}return 0==this.form.conditionlist.length?[!1,"请选择条件"]:this.form.schedule?"CUSTOM"==this.form.schedulekey&&0==this.form.week.length?[!1,"请选择排期自定义星期"]:this.form.rulename?[!0]:[!1,"请输入规则名称"]:[!1,"请选择排期"]},saveRule:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r,c,l,u,d,m,p,f=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.dataCheck(),e[0]){t.next=4;break}return Object(H["g"])(e[1]),t.abrupt("return");case 4:if(a=this.form.account,s=this.form.account.map(function(t){return f.commonaccount.find(function(e){return e.fbAccountId==t}).name}),i="ACCOUNT_DEFAULT",1==this.form.timewindow){t.next=19;break}t.t0=!0,t.next=t.t0===("1"==this.form.timecustom1&&"28"==this.form.timecustom2)?11:t.t0===("0"==this.form.timecustom1&&"0"==this.form.timecustom2)?13:15;break;case 11:return i="DEFAULT",t.abrupt("break",19);case 13:return i="INLINE",t.abrupt("break",19);case 15:return n="0"==this.form.timecustom1?"":this.form.timecustom1+"D_VIEW",o="0"==this.form.timecustom2?"":this.form.timecustom2+"D_CLICK",i="".concat(n).concat(n&&o?"_":"").concat(o),t.abrupt("break",19);case 19:r={fbAccountId:a.join(","),fbAccountName:s.join(","),evaluationSpec:{evaluation_type:this.form.schedulegrade,filters:[{field:"entity_type",value:this.form.ruleobject.split("|")[0],operator:"EQUAL"},{field:"time_preset",value:this.timerange.length>1?this.timerange[1]:this.timerange[0],operator:"EQUAL"}]},executionSpec:{execution_type:"balance"==this.form.ctrlmethodkey?"REBALANCE_BUDGET":this.form.ctrlmethod[0],execution_options:[]},name:this.form.rulename},c={field:"change_spec",value:{amount:0,unit:"",limit:0,target_field:""},operator:"EQUAL"},t.t1=this.form.ctrlmethodwant,t.next="increase"===t.t1?24:"decrease"===t.t1?24:"decrease"===t.t1?25:"other"===t.t1?27:29;break;case 24:c.value={amount:"ACCOUNT_CURRENCY"==this.ctrlway1.ruleunit?100*this.ctrlway1.ctrlnum:this.ctrlway1.ctrlnum,limit:100*this.ctrlway1.daybudget,unit:this.ctrlway1.ruleunit};case 25:return c.value.amount=-1*c.value.amount,t.abrupt("break",29);case 27:return c.value={amount:100*this.ctrlway2.targetworth,limit:[100*this.ctrlway2.firstdist,100*this.ctrlway2.seconddist],target_field:this.ctrlway2.target},t.abrupt("break",29);case 29:this.form.ruleobject.split("|")[1]&&"ad"==this.form.ruleobject.split("|")[1]&&(l={field:this.adtype==this.form.ruleobject.split("|")[0]?"id":"".concat(this.adtype.toLocaleLowerCase(),".id"),value:this.adselect.map(function(t){return t[f.idkey]}),operator:"IN"},r["evaluationSpec"]["filters"].push(l)),t.t2=this.form.ctrlmethodkey,t.next="daybudget"===t.t2?33:"totalbudget"===t.t2?33:"bid"===t.t2?34:"balance"===t.t2?37:41;break;case 33:r["evaluationSpec"]["filters"].push({field:"budget_reset_period",value:["daybudget"==this.form.ctrlmethodkey?"DAY":"LIFETIME"],operator:"IN"});case 34:return r["executionSpec"]["execution_options"].push({field:"action_frequency",value:Bo()(this.frequency),operator:"EQUAL"}),r["executionSpec"]["execution_options"].push(c),t.abrupt("break",41);case 37:return u={field:"rebalance_spec",value:{type:this.ctrlway3.type,is_cross_campaign:this.ctrlway3.campaign},operator:"EQUAL"},"EVEN"!=this.ctrlway3.type&&(u["value"]["target_field"]=this.ctrlway3.target,u["value"]["is_inverse"]=this.ctrlway3.opposite,2==this.ctrlway3.accept&&(u["value"]["target_count"]=1*this.ctrlway3.arrange)),r["executionSpec"]["execution_options"].push(u),t.abrupt("break",41);case 41:if(d=this.form.conditionlist,"TRIGGER"==this.form.schedulegrade&&(m=this.form.conditionlist.find(function(t){return!f.specialIndicator.includes(t.key)}),r["evaluationSpec"]["trigger"]=Object(D["a"])({type:"STATS_CHANGE"},m["option"]),d=this.form.conditionlist.filter(function(t){return t.key!=m.key})),r["evaluationSpec"]["filters"]=r["evaluationSpec"]["filters"].concat(d.map(function(t){return t.option})),"SCHEDULE"==this.form.schedulegrade&&(r["evaluationSpec"]["filters"].push({field:"attribution_window",value:i,operator:"EQUAL"}),r["scheduleSpec"]={schedule_type:this.form.schedulekey},"CUSTOM"==this.form.schedulekey&&(r["scheduleSpec"]["schedule"]=[{days:this.form.week,start_minute:720}])),r["executionSpec"]=_e()(r["executionSpec"]),r["evaluationSpec"]=_e()(r["evaluationSpec"]),r["scheduleSpec"]&&(r["scheduleSpec"]=_e()(r["scheduleSpec"])),p=null,this.editid){t.next=55;break}return t.next=52,this.$store.dispatch("addRule",{option:r,from:this.from});case 52:p=t.sent,t.next=60;break;case 55:return r["id"]=this.editid,r["fbId"]=this.editfbid,t.next=59,this.$store.dispatch("editRule",{option:r});case 59:p=t.sent;case 60:p&&p.data&&this.hideBox();case 61:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),reset:function(){this.form.account=[],this.form.ruleobject="",this.form.ruleobjectname="",this.form.ctrlmethod=[],this.form.ctrlmethodkey="",this.form.ctrlmethodname="",this.form.ctrlmethodwant="",this.form.conditionlist=[],this.form.timewindow=1,this.form.timecustom1="1",this.form.timecustom2="28",this.form.schedule="TRIGGER|",this.form.schedulegrade="TRIGGER",this.form.schedulekey="",this.form.week=[],this.form.rulename="",this.ctrlname="",this.ctrlsort="",this.ctrlway1.ctrlnum="",this.ctrlway1.ruleunit="PERCENTAGE",this.ctrlway1.daybudget="",this.ctrlway2.target="",this.ctrlway2.targetworth="",this.ctrlway2.firstdist="",this.ctrlway2.seconddist="",this.ctrlway3.type="",this.ctrlway3.target="",this.ctrlway3.opposite=!0,this.ctrlway3.accept=1,this.ctrlway3.arrange="",this.ctrlway3.campaign=!1,this.ctrlList=this.ctrlOption.slice(0,2),this.frequency="720",this.timerange=["LIFETIME"],this.editrule=null,this.adselect=[],this.adtype="",this.adObjectOption=[],this.idkey="",this.from="",this.trigger=!0,this.editid="",this.editfbid="",this.editschedulestatus="",this.$refs.setCondition.cancelSearch()}}},Jo=qo,Yo=(a("2f88"),a("4066"),Object(E["a"])(Jo,No,Uo,!1,null,"6c5c5c5b",null)),Xo=Yo.exports,Zo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newrulelist}},[a("el-table-column",{attrs:{prop:"",label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticClass:"statusswitch",attrs:{"active-value":"ENABLED","inactive-value":"DISABLED","active-color":"#13ce66","inactive-color":"#d7dae2"},on:{change:function(a){t.switchChange(e.row.id,e.row.status)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{prop:"",label:"名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.noedit?a("p",[t._v(t._s(e.row.name))]):a("p",{staticClass:"rulename",on:{click:function(a){t.toEdit(e.row.id,e.row.fbId)}}},[t._v(t._s(e.row.name))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.scheduleCnName))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"应用对象"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.relateRuleObjs.length>0?a("p",{staticClass:"rulename",on:{click:function(a){t.showDetail(e.row.name,e.row.targetObjName,e.row.id)}}},[t._v(t._s(e.row.targetObjName))]):a("p",[t._v(t._s(e.row.targetObjName))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"操作与条件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.executionSpecName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.evaluationSpecName))])]}}])}),a("el-table-column",{attrs:{prop:"result",label:"结果",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.lastOccurTime?a("div",[a("router-link",{staticClass:"rulename",attrs:{to:"/project/"+t.$route.params.id+"/optimize/"+e.row.fbId}},[t._v(t._s(e.row.result))]),a("p",{staticClass:"childtype"},[t._v(t._s(t._f("timeFormat")(e.row.lastOccurTime,"yyyy-MM-dd")))])],1):a("p",[t._v(t._s(e.row.result))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"广告账户"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.fbAccountName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.fbAccountId.replace("act_","")))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"创建人",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.createBy))]),a("p",{staticClass:"childtype"},[t._v(t._s(t._f("timeFormat")(e.row.createTime,"yyyy-MM-dd")))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"ctrl"},[a("el-button",{attrs:{type:"text",size:"mini",disabled:e.row.noedit},on:{click:function(a){t.toEdit(e.row.id,e.row.fbId)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"mini",disabled:e.row.iftrigger},on:{click:function(a){t.toExecute(e.row.fbId,e.row.levelCnName,e.row.evaluationSpecName)}}},[t._v("执行")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.toDelete(e.row.id)}}},[t._v("删除")])],1)]}}])})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.newruletotal,"page-size":t.ruleoption.pageSize,"current-page":t.ruleoption.pageIndex},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),a("rule-execute",{ref:"ruleExecute",attrs:{status:t.executeStatus},on:{"update:status":function(e){t.executeStatus=e}}}),a("rule-objdetail",{ref:"objDetail",attrs:{status:t.objStatus},on:{"update:status":function(e){t.objStatus=e}}})],1)},Qo=[],tr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:"规则执行预览",visible:t.status},on:{close:t.toCancel}},[a("p",{staticClass:"fonttip important"},[a("b",[t._v("如果现在运行规则，"+t._s(t.executelist.length>0?"以下":"选中的")+t._s(t.type)+t._s(t.executelist.length>0?"符合":"都不符合")+"你的条件，设置的条件是：")])]),a("div",{staticClass:"fonttip important",staticStyle:{"margin-bottom":"20px"}},t._l(t.condition,function(e,s){return a("p",{key:s},[t._v("· "+t._s(e))])}),0),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.executelist,border:"",id:"ruleExecute"}},[a("el-table-column",{attrs:{prop:"fbTargetName",label:"名称"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitExecute}},[t._v("执 行")])],1)],1)},er=[],ar={props:["status"],data:function(){return{id:"",type:"",condition:[]}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{initData:function(t,e,a){this.id=t,this.type=e,this.condition=a.split("且"),this.$store.dispatch("getExecute",t)},toCancel:function(){this.$emit("update:status",!1),this.SETSTATE({k:"executelist",v:[]})},submitExecute:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("executeRule",this.id);case 2:e=t.sent,e.data&&this.toCancel();case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),computed:Object(D["a"])({},Object(M["d"])(["executelist"])),watch:{}},sr=ar,ir=(a("bb65"),Object(E["a"])(sr,tr,er,!1,null,"514a653f",null)),nr=ir.exports,or=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:t.objname,visible:t.status},on:{close:t.toCancel}},[a("p",{staticClass:"fonttip important"},[a("b",[t._v(t._s(t.objname)+"受这个规则管理：")])]),a("p",{staticClass:"fonttip important",staticStyle:{"margin-bottom":"20px"}},[a("b",[t._v(t._s(t.name))])]),a("div",{staticClass:"targetlist"},[a("ul",t._l(t.detailobj,function(e){return a("li",{key:e.fbTargetId},[a("p",{staticClass:"targetname"},[t._v(t._s(e.fbTargetName))]),a("p",{staticClass:"targetid"},[t._v(t._s(e.fbTargetId))])])}),0)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toCancel}},[t._v("关 闭")])],1)])},rr=[],cr={props:["status"],data:function(){return{name:"",objname:"",detailobj:[]}},methods:{initData:function(t,e,a){this.objname=e,this.detailobj=a,this.name=t},toCancel:function(){this.$emit("update:status",!1)}},computed:{},watch:{}},lr=cr,ur=(a("532d"),Object(E["a"])(lr,or,rr,!1,null,"456b547c",null)),dr=ur.exports,mr={components:{RuleExecute:nr,RuleObjdetail:dr},data:function(){return{setapplist:[],switchstatus:!0,executeStatus:!1,pageIndex:1,pageSize:20,objStatus:!1}},computed:Object(D["a"])({},Object(M["d"])(["newrulelist","newruletotal","ruleoption"])),methods:Object(D["a"])({},Object(M["c"])(["SETOBJSTATE"]),{showDetail:function(t,e,a){var s=this.newrulelist.find(function(t){return t.id==a}),i=s.relateRuleObjs,n=e;this.objStatus=!0,this.$refs.objDetail.initData(t,n,i)},toEdit:function(t,e){this.$emit("editRule",t,e)},toExecute:function(t,e,a){this.executeStatus=!0,this.$refs.ruleExecute.initData(t,e,a)},toDelete:function(t){var e=this;this.$confirm("确定要删除此规则吗？此操作无法撤销","删除规则",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("deleteRule",t)}).catch(function(){})},switchChange:function(t,e){console.log(e),"ENABLED"==e?this.$store.dispatch("toOpenRule",t):this.$store.dispatch("toCloseRule",t)},pageSwitch:function(t){this.SETOBJSTATE({obj:"ruleoption",name:"pageIndex",v:t}),this.$store.dispatch("getRuleList")},pageSizeChange:function(t){this.SETOBJSTATE({obj:"ruleoption",name:"pageIndex",v:1}),this.SETOBJSTATE({obj:"ruleoption",name:"pageSize",v:t}),this.$store.dispatch("getRuleList")}})},pr=mr,fr=(a("f3f5"),Object(E["a"])(pr,Zo,Qo,!1,null,"2e8b7ff9",null)),hr=fr.exports,_r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"breadtitle"},[a("span",{class:{"el-icon-s-unfold":!t.menushow,"el-icon-s-fold":t.menushow,icon:!0},on:{click:t.showMenu}}),a("el-breadcrumb",{staticClass:"bread",attrs:{separator:">"}},[a("el-breadcrumb-item",[t._v("项目"+t._s(t.projectname))]),a("el-breadcrumb-item",[t._v(t._s(t.pageName))])],1)],1)},vr=[],gr={props:{pageName:{type:String,required:!0}},computed:Object(D["a"])({},Object(M["d"])(["menushow","itemlist"]),{projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName}}),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showMenu:function(){this.SETSTATE({k:"menushow",v:!this.menushow})}})},br=gr,yr=(a("a097"),Object(E["a"])(br,_r,vr,!1,null,"222a2316",null)),kr=yr.exports,Er={components:{RuleList:hr,RuleAdd:Xo,BreadCrumb:kr},data:function(){return{value2:!0,account:[],addStatus:!1,keyword:""}},mounted:function(){this.SETOBJSTATE({obj:"ruleoption",name:"projectId",v:this.$route.params.id}),this.getRuleDate(),this.$store.dispatch("commonAccount",{project_id:this.$route.params.id})},computed:Object(D["a"])({},Object(M["d"])(["commonaccount"])),methods:Object(D["a"])({},Object(M["c"])(["SETOBJSTATE"]),{toSort:function(){var t=this;Object(Ho["clearTimeout"])(i),i=Object(Ho["setTimeout"])(function(){t.SETOBJSTATE({obj:"ruleoption",name:"pageIndex",v:1}),t.SETOBJSTATE({obj:"ruleoption",name:"name",v:encodeURIComponent(t.keyword.trim())}),t.getRuleDate()},300)},selectCondition:function(){var t=this.account;this.SETOBJSTATE({obj:"ruleoption",name:"fbAccountIds",v:t.join(",")}),this.SETOBJSTATE({obj:"ruleoption",name:"pageIndex",v:1}),this.getRuleDate()},editRule:function(t,e){this.addStatus=!0,this.$refs.ruleAdd.initEdit(t,e)},getRuleDate:function(){this.$store.dispatch("getRuleList")},switchChange:function(t){var e=this.rulelist.find(function(e){return e.id==t}).status,a=this.$route.params.id,s=t;e?this.$store.dispatch("openRule",{projid:a,ruleGroupId:s}):this.$store.dispatch("closeRule",{projid:a,ruleGroupId:s})}})},Cr=Er,Or=(a("c17a"),Object(E["a"])(Cr,Lo,Ro,!1,null,"f15d4a5e",null)),wr=Or.exports,Ir=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"optimize"},[a("bread-crumb",{attrs:{pageName:"优化记录"}}),a("div",{staticClass:"sort"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"广告账户"},on:{change:t.toSort},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1),a("el-date-picker",{staticClass:"daterange",attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.toSort},model:{value:t.sortdate,callback:function(e){t.sortdate=e},expression:"sortdate"}}),a("el-checkbox",{on:{change:t.toSort},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("不显示未更改")])],1),a("div",{staticClass:"dialog"},[a("optimize-list")],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.optotal,"page-size":t.pagesize,"current-page":t.pageindex},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)},Tr=[],xr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.optimizelist}},[a("el-table-column",{attrs:{prop:"executionDetailInfo",label:"详细信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.executionDetailInfo?e.row.executionDetailInfo:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"ruleName",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.ruleName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.ruleCondition))])]}}])}),a("el-table-column",{attrs:{prop:"result",label:"更改对象",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.changeCount>0?a("p",{staticClass:"changeobj",on:{click:function(a){t.optimizeDetail(e.row.id,e.row.changeTargetInfo,e.row.targetType,e.row.ruleCondition,e.row.ruleName)}}},[t._v(t._s(e.row.changeTargetInfo))]):a("p",[t._v(t._s(e.row.changeTargetInfo))])]}}])}),a("el-table-column",{attrs:{prop:"fbAccountId",label:"广告账户",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.fbAccountName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.fbAccountId))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"createTime"},[t._v(t._s(t._f("timeFormat")(e.row.createTime,"yyyy-MM-dd",e.row.createTime)))]),a("span",{staticClass:"createTime"},[t._v(t._s(t._f("timeFormat")(e.row.createTime,"HH:mm:ss",e.row.createTime)))])]}}])})],1),a("optimize-detail",{ref:"optimizeDetail",attrs:{status:t.detailstatus},on:{"update:status":function(e){t.detailstatus=e}}})],1)},Sr=[],Ar=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:t.rulename+t.info,visible:t.status},on:{close:t.toCancel}},[a("p",{staticClass:"fonttip important"},[a("b",[t._v(t._s(t.optimizedetail.length)+"个"+t._s(t.typename)+"符合规则条件，设置的条件是：")])]),a("div",{staticClass:"fonttip important",staticStyle:{"margin-bottom":"20px"}},t._l(t.condition,function(e,s){return a("p",{key:s},[t._v("· "+t._s(e))])}),0),a("div",{staticClass:"targetlist"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.optimizedetail,border:"",id:"ruleExecute"}},[a("el-table-column",{attrs:{prop:"targetName",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"targetname",on:{click:function(a){t.targetDetail(e.row.fbTargetId,e.row.targetType)}}},[t._v(t._s(e.row.targetName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.fbTargetId))])]}}])}),a("el-table-column",{attrs:{prop:"actionsName",label:"详情"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toCancel}},[t._v("关 闭")])],1)])},jr=[],Dr={props:["status"],data:function(){return{info:"",rulename:"",typename:"",condition:[]}},methods:{initData:function(t,e,a,s,i){this.info=e,this.rulename=i;var n={CAMPAIGN:{name:"广告系列"},ADSET:{name:"广告组"},AD:{name:"广告"}};this.typename=n[a]["name"],this.condition=s.split("且").map(function(t){return t.trim()}),this.$store.dispatch("optimizeDetail",t)},toCancel:function(){this.$emit("update:status",!1)},targetDetail:function(t,e){this.$router.push({name:"ad",params:{kid:"".concat(t,"_").concat(e)}})}},computed:Object(D["a"])({},Object(M["d"])(["optimizedetail"])),watch:{}},Mr=Dr,Pr=(a("87bd"),Object(E["a"])(Mr,Ar,jr,!1,null,"6512001b",null)),Lr=Pr.exports,Rr={components:{OptimizeDetail:Lr},data:function(){return{detailstatus:!1,setapplist:[]}},computed:Object(D["a"])({},Object(M["d"])(["optimizelist"])),methods:{optimizeDetail:function(t,e,a,s,i){this.detailstatus=!0,this.$refs.optimizeDetail.initData(t,e,a,s,i)}}},Nr=Rr,Ur=(a("d008"),Object(E["a"])(Nr,xr,Sr,!1,null,"40e44f0f",null)),$r=Ur.exports,Br={props:["id"],components:{OptimizeList:$r,BreadCrumb:kr},data:function(){return{account:[],sortdate:[(new Date).setDate((new Date).getDate()-6),new Date],checked:!1,pageindex:1,pagesize:20,fbruleid:""}},computed:Object(D["a"])({},Object(M["d"])(["commonaccount","optotal"]),{ruleId:function(){return this.$route.params.ruleId}}),mounted:function(){this.fbruleid=this.$route.params.ruleId,this.toSort();var t=this.$route.params.id;this.$store.dispatch("commonAccount",{project_id:t})},methods:{pageSizeChange:function(t){this.pageindex=1,this.pagesize=t,this.toSort()},pageSwitch:function(t){this.pageindex=t,this.toSort()},toSort:function(){var t={projectId:this.$route.params.id,fbRuleId:this.fbruleid,fbAccountIds:this.account.map(function(t){return t.replace("act_","")}).join(","),startDate:this.sortdate&&this.sortdate.length>0?this.$timeFormat(this.sortdate[0],"yyyy-MM-dd"):"",endDate:this.sortdate&&this.sortdate.length>0?this.$timeFormat(this.sortdate[1],"yyyy-MM-dd"):"",withoutUnChange:this.checked.toString(),pageSize:this.pagesize,pageIndex:this.pageindex};this.$store.dispatch("getOptimizeList",t)}},watch:{ruleId:function(t,e){this.fbruleid=t,this.toSort()}}},Fr=Br,Vr=(a("3daa"),Object(E["a"])(Fr,Ir,Tr,!1,null,"3b1c7111",null)),Kr=Vr.exports,Wr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rule"},[a("bread-crumb",{attrs:{pageName:"创意管理"}}),a("div",{staticClass:"ctrlbutton"},[a("el-dropdown",{staticClass:"add",attrs:{"split-button":"",type:"primary"},on:{command:t.addCreateType}},[t._v("\n      新增创意\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[t._v("单图片/视频")]),a("el-dropdown-item",{attrs:{command:"b"}},[t._v("轮播")])],1)],1),a("el-button",{staticClass:"add",on:{click:t.syncAll}},[t._v("同步全部")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索创意名称/ID","suffix-icon":"el-icon-search"},on:{input:t.createSearch},model:{value:t.state4,callback:function(e){t.state4=e},expression:"state4"}})],1),a("div",{staticClass:"sort"},[a("el-dropdown",{staticClass:"select",attrs:{"split-button":"",type:"primary"},on:{command:t.handleCommand}},[t._v("\n      批量操作\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[t._v("批量新增")]),a("el-dropdown-item",{attrs:{command:"e"}},[t._v("批量同步")]),a("el-dropdown-item",{attrs:{command:"b"}},[t._v("批量开启")]),a("el-dropdown-item",{attrs:{command:"c"}},[t._v("批量关闭")]),a("el-dropdown-item",{attrs:{command:"d"}},[t._v("批量新增国家")])],1)],1),a("el-button",{staticClass:"fontbtn",attrs:{type:"text"},on:{click:t.toSelectAll}},[t._v(t._s(t.createcheckstatus?"取消全选":"全选"))]),a("el-select",{staticClass:"selectr",attrs:{placeholder:"状态"},on:{change:t.toSort},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.statuslist,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-select",{staticClass:"selectr",attrs:{placeholder:"性别"},on:{change:t.toSort},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}},t._l(t.sexlist,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-select",{staticClass:"selectr",attrs:{placeholder:"国家"},on:{change:t.toSort},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}},t._l(t.countries,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),a("el-select",{staticClass:"selectr",attrs:{placeholder:"分类"},on:{change:t.toSort},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}},t._l(t.classify,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("create-list",{on:{changeName:t.changeName,changeCountry:t.changeCountry}}),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.crtotal,"page-size":21},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),a("add-country",{attrs:{status:t.status3},on:{cancelAddbm:t.cancelAddbm,toAddCountries:t.toAddCountries}}),a("create-add",{attrs:{status:t.status4},on:{cancelAddbm:t.cancelAddbm}}),a("create-addwith",{attrs:{status:t.status5},on:{cancelAddbm:t.cancelAddbm,prevAddcreate:t.prevAddcreate}}),a("edit-name",{attrs:{status:t.status6,oldid:t.oldid,oldname:t.oldname},on:{cancelAddbm:t.cancelAddbm}}),a("edit-country",{attrs:{status:t.status7,oldid:t.oldid,oldcountry:t.oldcountry},on:{cancelAddbm:t.cancelAddbm}}),a("create-sync",{attrs:{status:t.status8,ifsyncall:t.ifsyncall},on:{cancelAddbm:t.cancelAddbm,toSync:t.toSync}}),a("create-carousel",{attrs:{status:t.status9},on:{cancelAddbm:t.cancelAddbm}})],1)},zr=[],Gr=a("bd86"),Hr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"选择需要同步的广告账户",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择广告账户，可搜索"},on:{change:t.toGettime},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbId,attrs:{label:t.name+"("+t.fbAccountId+")",value:t.fbId,disabled:1!=t.accountStatus}})}),1),a("p",{directives:[{name:"show",rawName:"v-show",value:t.account.length>0,expression:"account.length > 0"}],staticClass:"tip"},[t._v("\n    预计同步\n    "),a("span",[t._v(t._s(t.synctime))]),t._v("，同步时间随创意和广告账户数量而减少\n  ")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("确 定")])],1)],1)},qr=[],Jr={props:["status","ifsyncall"],data:function(){return{account:[],dialogFormVisible:!1,timeout:null}},watch:{status:function(t,e){this.dialogFormVisible=t}},computed:Object(D["a"])({},Object(M["d"])(["synctime","commonaccount"]),Object(M["b"])(["allcheckidstatus"])),methods:{toGettime:function(){if(0!=this.account.length){var t=this.account.join(","),e=this.ifsyncall?"":this.allcheckidstatus.map(function(t){return t.id}).join(","),a=this.$route.params.id;this.$store.dispatch("syncTime",{accountIds:t,ids:e,projectId:a})}},toAdd:function(){console.log(this.account),this.$emit("toSync",this.account),this.dialogFormVisible=!1},toCancel:function(){this.$emit("cancelAddbm","status8"),this.account=[]}},mounted:function(){}},Yr=Jr,Xr=(a("6e6f"),Object(E["a"])(Yr,Hr,qr,!1,null,"a801fd2c",null)),Zr=Xr.exports,Qr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"编辑国家",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{"label-width":"120px"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"选择国家"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",remote:"",placeholder:"请选择国家"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSave}},[t._v("确 定")])],1)],1)},tc=[],ec={props:["status","oldid","oldcountry"],components:{},data:function(){return{state:"",activeIndex:"1",dialogFormVisible:!1,title:"",country:this.oldcountry,value:"",value2:""}},watch:{status:function(t,e){this.dialogFormVisible=t},oldcountry:function(t,e){this.country=t}},computed:Object(D["a"])({},Object(M["d"])(["othercountries"])),methods:{toSave:function(){if(console.log(this.country),0!=this.country.length){var t=this.oldid,e=this.country.join(",");this.$store.dispatch("updateSex",{id:t,countryId:e}),this.dialogFormVisible=!1}else Object(H["g"])("请选择国家")},toCancel:function(){this.$emit("cancelAddbm","status7")}}},ac=ec,sc=(a("1084"),Object(E["a"])(ac,Qr,tc,!1,null,"42a50f08",null)),ic=sc.exports,nc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"修改创意标题",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{"label-width":"120px"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"创意标题"}},[a("el-input",{staticClass:"accountinput",attrs:{placeholder:"请输入创意标题"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSave}},[t._v("确 定")])],1)],1)},oc=[],rc={props:["status","oldid","oldname"],components:{},data:function(){return{state:"",activeIndex:"1",dialogFormVisible:!1,title:"",name:"",value:"",value2:""}},watch:{status:function(t,e){this.dialogFormVisible=t,1==t&&(this.name=this.oldname)}},computed:{},methods:{toSave:function(){if(""!=this.name.trim()){var t=this.oldid,e=this.name;this.$store.dispatch("updateSex",{id:t,creativityName:e}),this.dialogFormVisible=!1}else Object(H["g"])("请输入创意标题")},toCancel:function(){this.$emit("cancelAddbm","status6")}}},cc=rc,lc=(a("810c"),Object(E["a"])(cc,nc,oc,!1,null,"e3c16768",null)),uc=lc.exports,dc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alldialog"},[a("big-image",{attrs:{bigImageUrl:t.bigImageUrl,status:t.bigImageVisible},on:{hideBig:t.hideBig}}),a("select-img",{attrs:{status:t.selectstatus,multiple:""},on:{"update:status":function(e){t.selectstatus=e},select:t.selectImage}}),a("el-dialog",{staticClass:"dialog",attrs:{title:"批量新增创意",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"国家"}},[a("el-select",{staticClass:"search",attrs:{filterable:"",multiple:"",remote:"",placeholder:"请选择国家，可搜索"},model:{value:t.form.selectArr,callback:function(e){t.$set(t.form,"selectArr",e)},expression:"form.selectArr"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("全部")]),a("el-radio",{attrs:{label:"1"}},[t._v("男")]),a("el-radio",{attrs:{label:"2"}},[t._v("女")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"主页"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择主页"},on:{change:t.selectHomepage},model:{value:t.form.homepage,callback:function(e){t.$set(t.form,"homepage",e)},expression:"form.homepage"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"分类"}},[a("el-autocomplete",{staticClass:"search",attrs:{"fetch-suggestions":t.querySearchAsyncClassify,placeholder:"请输入分类，可搜索","suffix-icon":"el-icon-search"},on:{select:t.handleSelectClassify},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"创意类型"}},[a("el-radio-group",{on:{change:t.resetImgVideo},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:"0"}},[t._v("单图片")]),a("el-radio",{attrs:{label:"1"}},[t._v("单视频")]),a("el-radio",{attrs:{label:"2"}},[t._v("轮播")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:t.form.deeplink,callback:function(e){t.$set(t.form,"deeplink",e)},expression:"form.deeplink"}})],1),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toNext}},[t._v("下一步")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"批量新增创意",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e},close:t.toCancel2}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form2,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.form.type,expression:"form.type == 0"}],staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-button",{staticClass:"moreInfo",attrs:{size:"small",plain:""},on:{click:function(e){t.selectstatus=!t.selectstatus}}},[t._v("选择图片")]),a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),a("vue-file-upload",{ref:"vueFileUploader",staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,multiple:"",requestOptions:t.fileOption,filters:t.imgfilters},on:{uploadPic:t.uploadPic,onAdd:t.onAddItem,checkUploadPic:t.checkUploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.form.type,expression:"form.type == 1"}],staticClass:"cline uploadfile",attrs:{label:"视频"}},[a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传视频")]),a("vue-file-upload",{ref:"vueFileUploaderVio",staticClass:"fileinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsVIO,multiple:"",requestOptions:t.fileOption,filters:t.videofilters},on:{uploadVio:t.uploadVio,onAdd:t.onAddItem,checkUploadVio:t.checkUploadVio,uploadVioRes:t.uploadVioRes,uploadVioError:t.uploadVioError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processVIO,function(e,s){return a("li",{key:s},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fmname,expression:"item.fmname"}],staticClass:"videofm"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.fmname}},[t._v(t._s(e.fmname))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.fmprocess,expression:"item.fmprocess == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.fmprocess+"%"})]),a("span",[t._v(t._s(e.fmprocess)+"%")])]),a("div",{staticClass:"fmctrl"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.randomCreate(e.videoHash)}}},[t._v("随机生成")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("上传封面")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.showBig(e.fmUrl)}}},[t._v("查看大图")]),a("div",{staticClass:"uploadFmbox",on:{click:function(a){t.showUploading(e.name)}}},[a("vue-file-upload",{staticClass:"fileinputfm",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsFM,requestOptions:t.fileOptionFM,filters:t.imgfilters},on:{matchMD5:t.matchMD5,uploadFm:t.uploadFm,uploadFmRes:t.uploadFmRes,uploadFmError:t.uploadFmError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)],1)]),a("i",{staticClass:"el-icon-error processclose processvideo",on:{click:function(a){t.delVIO(e.file,e.name)}}})])}),0)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form2.descarr.length>0,expression:"form2.descarr.length > 0"}],staticClass:"descarea"},[a("span",{staticClass:"desctitle"},[t._v("文本")]),a("div",{staticClass:"tag"},t._l(t.form2.descarr,function(e){return a("span",{key:e,staticClass:"evtag"},[t._v("\n            "+t._s(e)+"\n            "),a("i",{staticClass:"el-icon-error",on:{click:function(a){t.delDesc(e)}}})])}),0)]),a("el-form-item",{staticClass:"cline",attrs:{label:t.form2.descarr.length>0?"":"文本"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入文字说明，介绍推广内容",autosize:{minRows:3.5,maxRows:3.5}},model:{value:t.form2.desc,callback:function(e){t.$set(t.form2,"desc",e)},expression:"form2.desc"}})],1),a("el-form-item",{staticClass:"addbutton"},[a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"},on:{click:t.addDesc}},[t._v("新增文本")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.form.type,expression:"form.type == 2"}],attrs:{label:"轮播数量"},on:{change:t.changeFocusaccount}},[a("el-input-number",{attrs:{min:3,max:10,label:"描述文字"},model:{value:t.form2.focuscount,callback:function(e){t.$set(t.form2,"focuscount",e)},expression:"form2.focuscount"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.form.type,expression:"form.type == 2"}],staticClass:"card"},[a("p",{staticClass:"cardname"},[a("span",{staticClass:"title"},[t._v("卡片设置")]),a("span",{staticClass:"cardtotal"},[t._v("共"+t._s(t.cardCount)+"个图片/视频，单个轮播创意中图片/视频不会重复")])]),a("el-form-item",{staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-button",{staticClass:"moreInfo",attrs:{size:"small",plain:""},on:{click:function(e){t.selectstatus=!t.selectstatus}}},[t._v("选择图片")]),a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),a("vue-file-upload",{ref:"vueFileUploaderLB",staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,multiple:"",requestOptions:t.fileOption,filters:t.imgfilters},on:{uploadPic:t.uploadPic,onAdd:t.onAddItem,checkUploadPic:t.checkUploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0)],1),a("el-form-item",{staticClass:"cline uploadfile",attrs:{label:"视频"}},[a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传视频")]),a("vue-file-upload",{ref:"vueFileUploaderVioLB",staticClass:"fileinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsVIO,multiple:"",requestOptions:t.fileOption,filters:t.videofilters},on:{uploadVio:t.uploadVio,onAdd:t.onAddItem,checkUploadVio:t.checkUploadVio,uploadVioRes:t.uploadVioRes,uploadVioError:t.uploadVioError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processVIO,function(e,s){return a("li",{key:s},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fmname,expression:"item.fmname"}],staticClass:"videofm"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.fmname}},[t._v(t._s(e.fmname))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.fmprocess,expression:"item.fmprocess == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.fmprocess+"%"})]),a("span",[t._v(t._s(e.fmprocess)+"%")])]),a("div",{staticClass:"fmctrl"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.randomCreate(e.videoHash)}}},[t._v("随机生成")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("上传封面")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.showBig(e.fmUrl)}}},[t._v("查看大图")]),a("div",{staticClass:"uploadFmbox",on:{click:function(a){t.showUploading(e.name)}}},[a("vue-file-upload",{staticClass:"fileinputfm",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsFM,requestOptions:t.fileOptionFM,filters:t.imgfilters},on:{matchMD5:t.matchMD5,uploadFm:t.uploadFm,uploadFmRes:t.uploadFmRes,uploadFmError:t.uploadFmError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)],1)]),a("i",{staticClass:"el-icon-error processclose processvideo",on:{click:function(a){t.delVIO(e.file,e.name)}}})])}),0)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form2.titlearr.length>0,expression:"form2.titlearr.length > 0"}],staticClass:"descarea"},[a("span",{staticClass:"desctitle"},[t._v("标题")]),a("div",{staticClass:"tag"},t._l(t.form2.titlearr,function(e){return a("span",{key:e,staticClass:"evtag"},[t._v("\n              "+t._s(e)+"\n              "),a("i",{staticClass:"el-icon-error",on:{click:function(a){t.delTitle(e)}}})])}),0)]),a("el-form-item",{staticClass:"cartitle",attrs:{label:t.form2.titlearr.length>0?"":"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form2.title,callback:function(e){t.$set(t.form2,"title",e)},expression:"form2.title"}})],1),a("el-form-item",{staticClass:"addbutton"},[a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"},on:{click:t.addTitle}},[t._v("新增标题")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2!=t.form.type&&t.form2.titlearr.length>0,expression:"form.type != 2 && form2.titlearr.length > 0"}],staticClass:"descarea"},[a("span",{staticClass:"desctitle"},[t._v("标题")]),a("div",{staticClass:"tag"},t._l(t.form2.titlearr,function(e){return a("span",{key:e,staticClass:"evtag"},[t._v("\n            "+t._s(e)+"\n            "),a("i",{staticClass:"el-icon-error",on:{click:function(a){t.delTitle(e)}}})])}),0)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=t.form.type,expression:"form.type != 2"}],staticClass:"cline",attrs:{label:t.form2.titlearr.length>0?"":"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form2.title,callback:function(e){t.$set(t.form2,"title",e)},expression:"form2.title"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=t.form.type,expression:"form.type != 2"}],staticClass:"addbutton"},[a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small"},on:{click:t.addTitle}},[t._v("新增标题")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"行动号召"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"",placeholder:"行动号召"},on:{change:t.actionChange},model:{value:t.form2.actionArr,callback:function(e){t.$set(t.form2,"actionArr",e)},expression:"form2.actionArr"}},t._l(t.allactions,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t}})}),1)],1),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{on:{click:t.toPrev}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("新增"+t._s(t.total)+"个创意")])],1)],1)],1)],1)},mc=[],pc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"imgdialog",attrs:{title:"选择图片",visible:t.status},on:{close:t.toCancel}},[a("ul",{staticClass:"templist"},t._l(t.tempimages,function(e,s){return a("li",{key:e.id,class:{singleselect:!t.multiple},on:{click:function(a){t.singleSelect(e)}}},[a("p",{staticClass:"image"},[a("img",{attrs:{src:e.filePath,alt:""}})]),t.multiple?a("el-checkbox",{staticClass:"select",on:{change:t.selectChange},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"img.select"}}):t._e()],1)}),0),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[20,50,80],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.tempimagestotal},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),t.multiple?a("div",{staticClass:"selectctrl"},[a("span",[t._v("已选"+t._s(t.selectcount)+"/"+t._s(t.tempimagestotal))]),a("p",[a("el-button",{on:{click:t.toCancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSelect}},[t._v("确定")])],1)]):t._e()])},fc=[],hc={components:{},props:{status:{type:Boolean,required:!0},multiple:{type:Boolean,default:!1}},data:function(){return{pageindex:1,pagesize:20,selectall:!1,ctrluse:!1,select:[],selectcount:0}},computed:Object(D["a"])({},Object(M["d"])(["tempimagestotal","tempimages"])),watch:{status:function(t,e){t&&this.$store.dispatch("getTempImages",{pageIndex:this.pageindex,pageSize:this.pagesize})}},methods:{selectChange:function(){this.select=this.tempimages.filter(function(t){return t.select}),this.selectcount=this.select.length},singleSelect:function(t){this.multiple||(this.$emit("select",[t]),this.toCancel())},pageSizeChange:function(){},pageSwitch:function(){},toCancel:function(){this.$emit("update:status",!1),this.toReset()},toReset:function(){this.pageindex=1,this.pagesize=20,this.select=[],this.selectcount=0},toSelect:function(){this.$emit("select",this.select),this.toCancel()}}},_c=hc,vc=(a("d8c3"),a("de42"),Object(E["a"])(_c,pc,fc,!1,null,"3afa7600",null)),gc=vc.exports,bc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.bigImageVisible},on:{"update:visible":function(e){t.bigImageVisible=e},close:t.toCancel}},[a("img",{attrs:{width:"100%",src:t.bigImageUrl,alt:""}})])},yc=[],kc={props:{status:{type:Boolean,required:!0},bigImageUrl:{type:String,required:!0}},data:function(){return{bigImageVisible:!1}},watch:{status:function(t,e){this.bigImageVisible=t}},methods:{toCancel:function(){this.$emit("hideBig")}}},Ec=kc,Cc=Object(E["a"])(Ec,bc,yc,!1,null,null,null),Oc=Cc.exports,wc=new _n.a,Ic={props:["status"],components:{VueFileUpload:fn.a,BigImage:Oc,SelectImg:gc},data:function(){return{ifcreate:!0,dialogFormVisible:!1,dialogFormVisible2:!1,bigImageVisible:!1,bigImageUrl:"",xtoken:localStorage.getItem("atom_token"),state:"",total:0,prevtype:"0",disfile:null,fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},fileOptionFM:{headers:{"X-Token":localStorage.getItem("atom_token")},formData:{type:"2"}},imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],videofilters:[{name:"videoFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|vob|ifo|mpg|mpeg|dat|mp4|3gp|mov|rm|ram|rmvb|wmv|asf|avi|asx|".indexOf(e)}}],uploadsize:0,dom:"",processIMG:[],processVIO:[],eventsIMG:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e),console.log("%cremove","color: red"),t.remove()},onAddFileSuccess:function(t){console.log("%cwaiting","color: red"),this.vm.$emit("checkUploadPic",t)}},eventsVIO:{onProgressUpload:function(t,e){this.vm.$emit("uploadVio",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadVioError",e,t);this.vm.$emit("uploadVioRes",e),console.log("%cremove","color: red"),t.remove()},onAddFileSuccess:function(t){console.log("%cwaiting","color: red"),this.vm.$emit("checkUploadVio",t)}},fmvideoname:"",eventsFM:{onProgressUpload:function(t,e){this.vm.$emit("uploadFm",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadFmError",e,t);this.vm.$emit("uploadFmRes",e)},onAddFileSuccess:function(t){var e=this,a=t.file;wc.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"fm")},function(t){})}},form:{selectArr:[],sex:"0",homepage:"",classify:"",type:"0",deeplink:""},form2:{imgvideo:[],descarr:[],desc:"",titlearr:[],title:"",actions:"",actionArr:[],actionidArr:[],focuscount:3,videoUrl:[]},msg:{selectArr:"请选择国家",homepage:"请选择主页",classify:"请输入分类",deeplink:""},msg2:{desc:"请输入文本",title:"请输入标题",actions:"请选择行动号召",imgvideo:"请上传图片",videoUrl:"请上传视频"},selectstatus:!1}},computed:Object(D["a"])({},Object(M["d"])(["othercountries","commonpage","withcreate","wantupload"]),Object(M["b"])(["createclassify","allactions"]),{cardCount:function(){return this.processIMG.length+this.processVIO.length},uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),watch:{status:function(t,e){this.dialogFormVisible=t},dialogFormVisible2:function(t,e){t&&("0"==this.form.type&&this.prevtype!=this.form.type&&(this.prevtype=this.form.type,this.$refs.uploadfile1&&this.$refs.uploadfile1.clearFiles(),this.form2.videoUrl=[],this.form2.imgvideo=[]),"1"==this.form.type&&this.prevtype!=this.form.type&&(this.prevtype=this.form.type,this.$refs.uploadfile2&&this.$refs.uploadfile2.clearFiles(),this.$refs.uploadfile3&&this.$refs.uploadfile3.clearFiles(),this.form2.videoUrl=[],this.form2.imgvideo=[]))},wantupload:function(t,e){console.log("wantupload:",t),0!=t&&t==this.uploadsize&&(console.log("%call ready","color: red"),this.$refs[this.dom].uploadAll())}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{selectImage:function(t){var e=this,a=[];t.forEach(function(t){if(!e.processIMG.find(function(e){return e.name==t.md5})){var s={name:t.md5,process:100,imageHash:t.md5,imageUrl:t.filePath};a.push(s)}}),this.processIMG=this.processIMG.concat(a)},matchMD5:function(t,e,a){var s=this;this.dom="img"==a?"vueFileUploader":"vueFileUploaderVio","2"==this.form.type&&(this.dom+="LB"),this.$store.dispatch("matchMutiFileMD5",{md5:[t],file:e,list:"img"==a?this.processIMG:this.processVIO,type:a,on:"withcreate",vdname:this.fmvideoname,callback:function(t){s.setTotal(),s.setVideoImage(a,t.data[0].md5)}})},randomCreate:function(t){this.setVideoImage("video",t,1)},showBig:function(t){this.bigImageVisible=!0,this.bigImageUrl=t},hideBig:function(){this.bigImageVisible=!1},setVideoImage:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a,s){var i,n,o,r,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<this.processVIO.length)){t.next=16;break}if(n=this.processVIO[i],"video"!=e||n.videoHash!=a){t.next=9;break}return t.next=6,this.$store.dispatch("getVideoImg",{videoMd5:n.videoHash,videoUrl:n.videoUrl,type:s});case 6:return o=t.sent,o.data&&(r=Object(D["a"])({},n,{fmname:o.data.imageMd5?o.data.imageMd5:"封面图",fmUrl:o.data.imageUrl,fmHash:o.data.imageMd5,fmprocess:100}),this.processVIO.splice(i,1),this.processVIO.splice(i,0,r)),t.abrupt("break",16);case 9:if("fm"!=e||n.fmHash!=a){t.next=13;break}return c={imageMd5:n.fmHash,imageUrl:n.fmUrl,videoMd5:n.videoHash,videoUrl:n.videoUrl},this.$store.dispatch("saveVideoImg",{option:c}),t.abrupt("break",16);case 13:i++,t.next=1;break;case 16:case"end":return t.stop()}},t,this)}));function e(e,a,s){return t.apply(this,arguments)}return e}(),onAddItem:function(t){console.log(t),this.SETSTATE({k:"wantupload",v:0}),this.uploadsize=t.length,console.log("this.uploadsize:",this.uploadsize)},changeFocusaccount:function(){this.setTotal()},resetImgVideo:function(){!this.disfile||this.disfile.isSuccess||this.disfile.isCancel||this.disfile.cancel(),"0"==this.form.type&&(this.processVIO=[]),"1"==this.form.type&&(this.processIMG=[]),this.SETSTATE({k:"withcreate",v:!0}),this.setTotal()},uploadFmError:function(t,e){this.SETSTATE({k:"withcreate",v:!0}),this.processVIO.forEach(function(t){t.fmname==e.name&&(t.fmname="",t.fmprocess="")})},uploadFmRes:function(t){var e=this;this.SETSTATE({k:"withcreate",v:!0}),this.processVIO.forEach(function(a){a.fmname==t.data[0].originName&&(a.fmUrl=t.data[0].targetName,a.fmHash=t.data[0].md5,console.log(t.data[0].md5),e.setVideoImage("fm",t.data[0].md5))}),console.log(this.processVIO)},showUploading:function(t){this.fmvideoname=t},uploadFm:function(t,e){var a=this;this.disfile=t;this.SETSTATE({k:"withcreate",v:!1});var s=null,i=null;this.processVIO.forEach(function(n,o){n.name==a.fmvideoname&&(s=a.processVIO[o],i=Object(D["a"])({},s,{fmname:t.name,fmprocess:e}),a.processVIO.splice(o,1),a.processVIO.splice(o,0,i))})},uploadVioError:function(t,e){this.SETSTATE({k:"withcreate",v:!0}),this.processVIO=this.processVIO.filter(function(t){return t.name!=e.name})},uploadVioRes:function(t){var e=this;this.SETSTATE({k:"withcreate",v:!0}),this.setTotal(),this.processVIO.forEach(function(a){a.name==t.data[0].originName&&(a.videoUrl=t.data[0].targetName,a.videoHash=t.data[0].md5,e.setVideoImage("video",t.data[0].md5))})},checkUploadVio:function(t){var e=this;if(this.processVIO.find(function(e){return e.name==t.name&&e.size==t.size}))t.remove(),Object(H["g"])("相同视频不可重复上传");else{var a=t.file;wc.md5(a,function(a,s){e.matchMD5(s,t,"video")},function(t){})}},uploadVio:function(t,e){this.disfile=t,this.SETSTATE({k:"withcreate",v:!1});var a={};a.name=t.name,a.process=e,a.file=t,a.size=t.size,a.fmname="",a.fmprocess=0,this.processVIO.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processVIO.find(function(e){return e.name==t.name})||this.processVIO.push(a)},uploadError:function(t,e){this.SETSTATE({k:"withcreate",v:!0}),this.processIMG=this.processIMG.filter(function(t){return t.name!=e.name})},uploadRes:function(t,e){this.SETSTATE({k:"withcreate",v:!0}),this.setTotal(),this.processIMG.forEach(function(e){e.name==t.data[0].originName&&(e.imageUrl=t.data[0].targetName,e.imageHash=t.data[0].md5)})},checkUploadPic:function(t){var e=this;if(this.processIMG.find(function(e){return e.name==t.name&&e.size==t.size}))t.remove(),Object(H["g"])("相同图片不可重复上传");else{var a=t.file;wc.md5(a,function(a,s){e.matchMD5(s,t,"img")},function(t){})}},uploadPic:function(t,e){this.disfile=t,this.SETSTATE({k:"withcreate",v:!1});var a={};a.name=t.name,a.process=e,a.size=t.size,a.file=t,this.processIMG.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processIMG.find(function(e){return e.name==t.name})||this.processIMG.push(a)},delIMG:function(t,e){console.log(t),t&&t.isUploading&&(t.cancel(),t.remove()),this.processIMG=this.processIMG.filter(function(t){return t.name!=e}),this.SETSTATE({k:"withcreate",v:!0}),this.setTotal()},delVIO:function(t,e){console.log(t),t&&t.isUploading&&(t.cancel(),t.remove()),this.processVIO=this.processVIO.filter(function(t){return t.name!=e}),this.SETSTATE({k:"withcreate",v:!0}),this.setTotal()},setTotal:function(){var t=0;t="0"==this.form.type?this.processIMG.length:"1"==this.form.type?this.processVIO.length:this.processIMG.length+this.processVIO.length;var e="2"==this.form.type?Math.ceil(t/this.form2.focuscount):t;this.total=e*this.form2.titlearr.length*this.form2.descarr.length*this.form2.actionArr.length},delTitle:function(t){this.form2.titlearr=this.form2.titlearr.filter(function(e){return e!=t}),this.setTotal()},addTitle:function(){if(""!=this.form2.title){var t=this.form2.title.trim();this.form2.titlearr=this.form2.titlearr.filter(function(e){return e!=t}),this.form2.titlearr.push(t),this.form2.title="",this.setTotal()}else Object(H["g"])("请在文本框内输入想要添加的标题名称")},delDesc:function(t){this.form2.descarr=this.form2.descarr.filter(function(e){return e!=t}),this.setTotal()},addDesc:function(){if(""!=this.form2.desc){var t=this.form2.desc.trim();this.form2.descarr=this.form2.descarr.filter(function(e){return e!=t}),this.form2.descarr.push(t),this.form2.desc="",this.setTotal()}else Object(H["g"])("请在文本框内输入想要添加的文本")},selectHomepage:function(){var t=this,e=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0];e.insId||(this.form.homepage="",Object(H["g"])("此主页无PBIA，请先同步"))},actionChange:function(){this.setTotal()},cancelAction:function(t){this.form2.actionArr=this.form2.actionArr.filter(function(e){return e.code==t})},toCancel2:function(){},toSubmit:function(){var t=this;if(console.log(this.form2),console.log(this.processVIO),this.withcreate)if("0"!=this.form.type||0!=this.processIMG.length)if("1"!=this.form.type||0!=this.processVIO.length)if("2"==this.form.type&&this.processIMG.length+this.processVIO.length<this.form2.focuscount)Object(H["g"])("图片+视频的数量要≥轮播数量");else if("1"!=this.form.type&&"2"!=this.form.type||!this.processVIO.find(function(t){return!t.fmname})){var e=this;if(0!=this.form2.descarr.length)if(0!=this.form2.titlearr.length)if(console.log(this.form2.actionArr),0!=this.form2.actionArr.length){var a=[],s=[];this.form.selectArr.forEach(function(t){a.push(t.code),s.push(t.name)});var i=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0],n=[],o="1"==this.form.type?this.processVIO:this.processIMG;if("2"==this.form.type){this.processIMG.forEach(function(t){t.type="1"}),this.processVIO.forEach(function(t){t.type="2"});var r,c,l=this.processIMG.concat(this.processVIO),u=[],d=[!0];if(console.log(l),l.forEach(function(t){"1"==t.type?(r={imageUrl:t.imageUrl,imageHash:t.imageHash},c={videoUrl:"",videoHash:""}):(r={imageUrl:t.fmUrl,imageHash:t.fmHash},c={videoUrl:t.videoUrl,videoHash:t.videoHash});var e={cardType:t.type,image:r,video:c};"1"==t.type?r.hasOwnProperty("imageUrl")&&""!=r["imageUrl"].trim()||(d=[!1,"".concat(t.name,"异常，请重新上传或更换素材")]):(c.hasOwnProperty("videoUrl")&&""!=c["videoUrl"].trim()||(d=[!1,"".concat(t.name,"异常，请重新上传或更换素材")]),r.hasOwnProperty("imageUrl")&&""!=r["imageUrl"].trim()||(d=[!1,"".concat(t.name,"对应的封面图").concat(t.fmname,"异常，请重新上传或更换素材")])),u.push(e)}),!d[0])return void Object(H["a"])(d[1]);var m=this.form2.focuscount-u.length%this.form2.focuscount;m<this.form2.focuscount&&(u=u.concat(u.slice(0,m)));for(var p=function(o){var r=u.slice(o,o+t.form2.focuscount);e.form2.descarr.forEach(function(o){e.form2.titlearr.forEach(function(c){e.form2.actionArr.forEach(function(l){r.forEach(function(t){t.cardTitle=c});var u={actionCallOn:l.code,actionCallOnName:l.name,classify:e.form.classify.trim(),countryId:a.join(","),countryName:s.join(","),creativityText:o,creativityType:e.form.type,deeplink:e.form.deeplink,card:_e()(r),pageId:i.pageId,pageLogo:i.picture,pageName:i.name,projectId:e.$route.params.id,sex:"0"==t.form.sex?"1,2":t.form.sex,token:e.xtoken};n.push(u)})})})},f=0;f<u.length;f+=this.form2.focuscount)p(f)}else o.forEach(function(o,r){var c,l,u=o.name;delete o["name"],delete o["file"],delete o["process"],delete o["size"],console.log(o["fmname"]),o["fmname"]&&(l=o["fmname"],c={imageUrl:o["fmUrl"],imageHash:o["fmHash"]},delete o["fmname"],delete o["fmUrl"],delete o["fmprocess"],delete o["fmHash"]),e.form2.descarr.forEach(function(r){e.form2.titlearr.forEach(function(d){e.form2.actionArr.forEach(function(m){var p={actionCallOn:m.code,actionCallOnName:m.name,classify:e.form.classify.trim(),countryId:a.join(","),countryName:s.join(","),creativityText:r,creativityTitle:d,creativityType:e.form.type,deeplink:e.form.deeplink,imageUrl:"0"==e.form.type?_e()(o):_e()(c),imageName:"1"==e.form.type?l:u,pageId:i.pageId,pageLogo:i.picture,pageName:i.name,projectId:e.$route.params.id,sex:"0"==t.form.sex?"1,2":t.form.sex,token:e.xtoken,videoUrl:"1"==e.form.type?_e()(o):"",videoName:"1"==e.form.type?u:""};p.imageUrl.length<10?Object(H["a"])("imageName: ".concat(u," 创建失败，请联系开发人员，并重新创建")):"1"==e.form.type&&p.videoUrl.length<10?Object(H["a"])("videoName: ".concat(u," 创建失败，请联系开发人员，并重新创建")):n.push(p)})})})});this.$store.dispatch("addCreates",{option:n,id:this.$route.params.id}),this.dialogFormVisible2=!1,this.toReset()}else Object(H["g"])("请选择行动号召");else Object(H["g"])("请输入标题");else Object(H["g"])("请输入文本")}else Object(H["g"])("每个视频都需上传一张封面图");else Object(H["g"])("请上传视频");else Object(H["g"])("请上传图片");else Object(H["g"])("图片/视频正在上传中...")},toNext:function(){var t=this,e=this.form;for(var a in e)if((""===e[a]||0==e[a].length)&&this.msg[a]&&""!=this.msg[a].trim())return void Object(H["g"])(this.msg[a]);this.dialogFormVisible=!1,setTimeout(function(e){t.dialogFormVisible2=!0},300)},toPrev:function(){this.dialogFormVisible2=!1,this.$emit("prevAddcreate","status5")},toCancel:function(){this.$emit("cancelAddbm","status5")},toReset:function(){this.form.selectArr=[],this.form.sex="0",this.form.homepage="",this.form.classify="",this.form.deeplink="",this.processIMG=[],this.processVIO=[],this.form2.imgvideo=[],this.form2.descarr.length=0,this.form2.desc="",this.form2.titlearr.length=0,this.form2.title="",this.form2.actions="",this.form2.actionArr=[],this.form2.focuscount=3,this.total=0},querySearchAsyncClassify:function(t,e){var a=this.createclassify,s=t?a.filter(this.createStateFilterClassify(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(s)},1e3*Math.random())},createStateFilterClassify:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelectClassify:function(t){this.form.classify=t.value}})},Tc=Ic,xc=(a("efec"),a("ebb2"),Object(E["a"])(Tc,dc,mc,!1,null,"39816a7f",null)),Sc=xc.exports,Ac=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("big-image",{attrs:{bigImageUrl:t.bigImageUrl,status:t.bigImageVisible},on:{hideBig:t.hideBig}}),a("select-img",{attrs:{status:t.selectstatus},on:{"update:status":function(e){t.selectstatus=e},select:t.selectImage}}),a("el-dialog",{staticClass:"dialog createdialog",attrs:{title:"新增创意",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"leftform"},[a("el-form-item",{staticClass:"cline",attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("全部")]),a("el-radio",{attrs:{label:"1"}},[t._v("男")]),a("el-radio",{attrs:{label:"2"}},[t._v("女")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"创意类型"}},[a("el-radio-group",{on:{change:t.resetImgVideo},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:"0"}},[t._v("单图片")]),a("el-radio",{attrs:{label:"1"}},[t._v("单视频")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.form.type,expression:"form.type == 0"}],staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.processIMG.length,expression:"processIMG.length == 0"}],staticClass:"moreInfo",attrs:{size:"small",plain:""},on:{click:function(e){t.selectstatus=!t.selectstatus}}},[t._v("选择图片")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.processIMG.length,expression:"processIMG.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==t.processIMG.length,expression:"processIMG.length == 0"}],ref:"vueFileUploaderSINGER",staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,requestOptions:t.fileOption,filters:t.imgfilters},on:{matchMD5:t.matchMD5,onAdd:t.onAddItem,uploadPic:t.uploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.form.type,expression:"form.type == 1"}],staticClass:"cline uploadfile",attrs:{label:"视频"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.processVIO.length,expression:"processVIO.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传视频")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==t.processVIO.length,expression:"processVIO.length == 0"}],ref:"vueFileUploaderVioSINGER",staticClass:"fileinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsVIO,requestOptions:t.fileOption,filters:t.videofilters},on:{matchMD5:t.matchMD5,onAdd:t.onAddItem,uploadVio:t.uploadVio,uploadVioRes:t.uploadVioRes,uploadVioError:t.uploadVioError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processVIO,function(e,s){return a("li",{key:s,on:{mouseover:function(a){t.fmvideoname=e.name}}},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fmname,expression:"item.fmname"}],staticClass:"videofm"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.fmname}},[t._v(t._s(e.fmname))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.fmprocess,expression:"item.fmprocess == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.fmprocess+"%"})]),a("span",[t._v(t._s(e.fmprocess)+"%")])]),a("div",{staticClass:"fmctrl"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.randomCreate}},[t._v("随机生成")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("上传封面")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.showBig(e.fmUrl)}}},[t._v("查看大图")]),a("div",{staticClass:"uploadFmbox"},[a("vue-file-upload",{staticClass:"fileinputfm",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsFM,requestOptions:t.fileOptionFM,filters:t.imgfilters},on:{matchMD5:t.matchMD5,uploadFm:t.uploadFm,uploadFmRes:t.uploadFmRes,uploadFmError:t.uploadFmError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)],1)]),a("i",{staticClass:"el-icon-error processclose processvideo",on:{click:function(a){t.delVIO(e.file,e.name)}}})])}),0)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:t.form.deeplink,callback:function(e){t.$set(t.form,"deeplink",e)},expression:"form.deeplink"}})],1)],1),a("div",{staticClass:"leftform"},[a("el-form-item",{staticClass:"cline",attrs:{label:"国家"}},[a("el-select",{staticClass:"search",attrs:{filterable:"",multiple:"",remote:"",placeholder:"请选择国家，可搜索"},model:{value:t.form.selectArr,callback:function(e){t.$set(t.form,"selectArr",e)},expression:"form.selectArr"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"主页"}},[a("el-select",{attrs:{placeholder:"请选择主页",filterable:""},on:{change:t.selectHomepage},model:{value:t.form.homepage,callback:function(e){t.$set(t.form,"homepage",e)},expression:"form.homepage"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"分类"}},[a("el-autocomplete",{staticClass:"search",attrs:{"fetch-suggestions":t.querySearchAsyncClassify,placeholder:"请输入分类，可搜索","suffix-icon":"el-icon-search"},on:{select:t.handleSelectClassify},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"文本"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入文字说明，介绍推广内容",autosize:{minRows:3.5,maxRows:3.5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"行动号召"}},[a("el-select",{attrs:{placeholder:"行动号召"},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.allactions,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.code}})}),1)],1)],1),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitOnly}},[t._v("立即创建")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitNext}},[t._v("保存并下一个")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)],1)},jc=[],Dc=new _n.a,Mc={props:["status"],components:{VueFileUpload:fn.a,BigImage:Oc,SelectImg:gc},data:function(){return{selectstatus:!1,ifcreate:!0,bigImageVisible:!1,bigImageUrl:"",state:"",timeout:null,restaurants:[],xtoken:localStorage.getItem("atom_token"),form:{name:"",sex:"0",type:"0",deeplink:"",homepage:"",classify:"",selectArr:[],desc:"",title:"",actions:""},msg:{name:"创意名称不可以为空",homepage:"请选择主页",classify:"请输入分类",desc:"请输入文本",title:"请输入标题",selectArr:"请选择国家",actions:"请选择行动号召",deeplink:"",imginfo:"请上传图片",videoinfo:"请上传视频",fminfo:"请上传封面图"},dialogFormVisible:!1,disfile:null,fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},fileOptionFM:{headers:{"X-Token":localStorage.getItem("atom_token")},formData:{type:"2"}},imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],videofilters:[{name:"videoFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|vob|ifo|mpg|mpeg|dat|mp4|3gp|mov|rm|ram|rmvb|wmv|asf|avi|asx|".indexOf(e)}}],uploadsize:0,dom:"",processIMG:[],processVIO:[],eventsIMG:{onAddFileSuccess:function(t){var e=this,a=t.file;Dc.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"img")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(t.remove(),0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e)}},eventsVIO:{onAddFileSuccess:function(t){var e=this,a=t.file;Dc.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"video")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadVio",t,e)},onSuccessUpload:function(t,e,a,s){if(t.remove(),0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadVioError",e,t);this.vm.$emit("uploadVioRes",e)}},fmvideoname:"",eventsFM:{onAddFileSuccess:function(t){var e=this,a=t.file;Dc.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"fm")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadFm",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadFmError",e,t);this.vm.$emit("uploadFmRes",e)}}}},mounted:function(){},watch:{status:function(t,e){this.dialogFormVisible=t},wantupload:function(t,e){console.log("create-add wantupload:",t),0!=t&&t==this.uploadsize&&(console.log("%ccreate-add all ready","color: red"),this.$refs[this.dom].uploadAll())}},computed:Object(D["a"])({},Object(M["d"])(["othercountries","commonpage","addcreate","wantupload"]),Object(M["b"])(["createclassify","allactions"]),{uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{selectImage:function(t){this.processIMG=[],this.processIMG.push({name:t[0].md5,process:100,imageUrl:t[0].filePath,imageHash:t[0].md5})},matchMD5:function(t,e,a){var s=this;this.dom="img"==a?"vueFileUploaderSINGER":"vueFileUploaderVioSINGER",this.$store.dispatch("matchMutiFileMD5",{md5:[t],file:e,list:"img"==a?this.processIMG:this.processVIO,type:a,on:"addcreate",vdname:this.fmvideoname,callback:function(){s.setVideoImage(a)}})},randomCreate:function(){this.setVideoImage("video",1)},showBig:function(t){this.bigImageVisible=!0,this.bigImageUrl=t},hideBig:function(){this.bigImageVisible=!1},setVideoImage:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=this.processVIO[0],"video"!=e){t.next=6;break}return t.next=4,this.$store.dispatch("getVideoImg",{videoMd5:s.videoHash,videoUrl:s.videoUrl,type:a});case 4:i=t.sent,i.data&&(n=Object(D["a"])({},s,{fmname:i.data.imageMd5?i.data.imageMd5:"封面图",fmUrl:i.data.imageUrl,fmHash:i.data.imageMd5,fmprocess:100}),this.processVIO.splice(0,1),this.processVIO.splice(0,0,n));case 6:"fm"==e&&(o={imageMd5:s.fmHash,imageUrl:s.fmUrl,videoMd5:s.videoHash,videoUrl:s.videoUrl},this.$store.dispatch("saveVideoImg",{option:o}));case 7:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),onAddItem:function(t){console.log(t),this.SETSTATE({k:"wantupload",v:0}),this.uploadsize=t.length,console.log("create-add this.uploadsize:",this.uploadsize)},resetImgVideo:function(){console.log(this.disfile),!this.disfile||this.disfile.isSuccess||this.disfile.isCancel||this.disfile.cancel(),"0"==this.form.type?this.processVIO=[]:this.processIMG=[],this.SETSTATE({k:"addcreate",v:!0})},uploadFmError:function(t,e){this.SETSTATE({k:"addcreate",v:!0}),this.processVIO.forEach(function(t){t.fmname==e.name&&(t.fmname="",t.fmprocess="")})},uploadFmRes:function(t){this.SETSTATE({k:"addcreate",v:!0}),this.processVIO.forEach(function(e){e.fmname==t.data[0].originName&&(e.fmUrl=t.data[0].targetName,e.fmHash=t.data[0].md5)}),this.setVideoImage("fm")},uploadFm:function(t,e){var a=this;this.disfile=t;this.SETSTATE({k:"addcreate",v:!1});var s=null,i=null;this.processVIO.forEach(function(n,o){n.name==a.fmvideoname&&(s=a.processVIO[o],i=Object(D["a"])({},s,{fmname:t.name,fmprocess:e}),a.processVIO.splice(o,1),a.processVIO.splice(o,0,i))})},uploadVioError:function(t,e){this.SETSTATE({k:"addcreate",v:!0}),this.processVIO=this.processVIO.filter(function(t){return t.name!=e.name})},uploadVioRes:function(t){this.SETSTATE({k:"addcreate",v:!0}),this.processVIO.forEach(function(e){e.name==t.data[0].originName&&(e.videoUrl=t.data[0].targetName,e.videoHash=t.data[0].md5)}),this.setVideoImage("video")},uploadVio:function(t,e){this.disfile=t,this.SETSTATE({k:"addcreate",v:!1});var a={};a.name=t.name,a.process=e,a.file=t,a.size=t.size,a.fmname="",a.fmprocess=0,this.processVIO.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processVIO.find(function(e){return e.name==t.name})||this.processVIO.push(a)},delVIO:function(t,e){t&&t.isUploading&&(t.cancel(),t.remove()),this.processVIO=this.processVIO.filter(function(t){return t.name!=e}),this.SETSTATE({k:"addcreate",v:!0})},uploadRes:function(t){this.SETSTATE({k:"addcreate",v:!0}),this.processIMG.forEach(function(e){e.name==t.data[0].originName&&(e.imageUrl=t.data[0].targetName,e.imageHash=t.data[0].md5)})},uploadError:function(t,e){this.SETSTATE({k:"addcreate",v:!0}),this.processIMG=this.processIMG.filter(function(t){return t.name!=e.name})},uploadPic:function(t,e){this.disfile=t,this.SETSTATE({k:"addcreate",v:!1});var a={};a.name=t.name,a.process=e,a.size=t.size,a.file=t,this.processIMG.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processIMG.find(function(e){return e.name==t.name})||this.processIMG.push(a)},delIMG:function(t,e){t&&t.isUploading&&(t.cancel(),t.remove()),this.processIMG=this.processIMG.filter(function(t){return t.name!=e}),this.SETSTATE({k:"addcreate",v:!0})},selectHomepage:function(){var t=this,e=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0];e.insId||(this.form.homepage="",Object(H["g"])("此主页无PBIA，请先同步"))},querySearchAsyncClassify:function(t,e){var a=this.createclassify,s=t?a.filter(this.createStateFilterClassify(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(s)},1e3*Math.random())},createStateFilterClassify:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelectClassify:function(t){this.form.classify=t.value},onSubmitNext:function(){this.onSubmit()&&this.toReset()},onSubmitOnly:function(){this.onSubmit()&&(this.dialogFormVisible=!1)},checkCondition:function(){var t=this.form;return console.log(this.processVIO),0==t["type"]&&0==this.processIMG.length?[!1,this.msg["imginfo"]]:1==t["type"]&&0==this.processVIO.length?[!1,this.msg["videoinfo"]]:1!=t["type"]||this.processVIO[0].fmname?0==t["selectArr"].length?[!1,this.msg["selectArr"]]:""==t["homepage"]?[!1,this.msg["homepage"]]:""==t["classify"].trim()?[!1,this.msg["classify"]]:""==t["desc"]?[!1,this.msg["desc"]]:""==t["title"]?[!1,this.msg["title"]]:""===t["actions"]?[!1,this.msg["actions"]]:[!0]:[!1,this.msg["fminfo"]]},onSubmit:function(){var t=this;if(console.log(this.form),this.addcreate){this.form;var e=this.checkCondition();if(e[0]){var a=[],s=[];this.form.selectArr.forEach(function(t){a.push(t.code),s.push(t.name)});var i=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0],n=this.allactions.filter(function(e){return e.code==t.form.actions})[0],o={imageUrl:0==this.form.type?this.processIMG[0].imageUrl:this.processVIO[0].fmUrl,imageHash:0==this.form.type?this.processIMG[0].imageHash:this.processVIO[0].fmHash},r=null;1==this.form.type&&(r={videoUrl:this.processVIO[0].videoUrl,videoHash:this.processVIO[0].videoHash});var c={actionCallOn:n.code,actionCallOnName:n.name,classify:this.form.classify.trim(),countryId:a.join(","),countryName:s.join(","),creativityName:this.form.name,creativityText:this.form.desc,creativityTitle:this.form.title,creativityType:this.form.type,deeplink:this.form.deeplink,imageUrl:_e()(o),pageId:i.pageId,pageLogo:i.picture,pageName:i.name,projectId:this.$route.params.id,sex:"0"==this.form.sex?"1,2":this.form.sex,token:this.xtoken,videoUrl:r?_e()(r):""};return this.$store.dispatch("toAddCreate",{option:c,id:this.$route.params.id}),!0}Object(H["g"])(e[1])}else Object(H["g"])("图片/视频正在上传中...")},toReset:function(){!this.disfile||this.disfile.isSuccess||this.disfile.isCancel||this.disfile.cancel(),this.processVIO=[],this.processIMG=[],this.SETSTATE({k:"addcreate",v:!0}),this.form.name="",this.form.sex="0",this.form.type="0",this.form.deeplink="",this.form.homepage="",this.form.classify="",this.form.selectArr=[],this.form.desc="",this.form.title="",this.form.actions=""},toCancel:function(){this.toReset(),this.$emit("cancelAddbm","status4")}})},Pc=Mc,Lc=(a("3f2e"),Object(E["a"])(Pc,Ac,jc,!1,null,"5f187a88",null)),Rc=Lc.exports,Nc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rulelist",attrs:{id:"createList"}},[t._l(t.createlist,function(e,s){return a("div",{key:s,staticClass:"box"},[a("div",{staticClass:"con"},[a("p",{staticClass:"master"},[a("span",{staticClass:"logo"},[a("img",{attrs:{src:e.pageLogo,alt:""}})]),a("span",{staticClass:"name"},[t._v(t._s(e.pageName))])]),a("p",{staticClass:"describe"},[a("pre",[t._v(t._s(e.creativityText))])]),2==e.creativityType?a("el-carousel",{attrs:{arrow:"never","indicator-position":"none"}},t._l(e.card,function(s,i){return a("el-carousel-item",{key:i},[a("p",{staticClass:"img"},[1==s.cardType?a("img",{attrs:{src:s.image.imageUrl,alt:""},on:{click:function(e){t.showBigImg(s.image.imageUrl)}}}):a("video",{attrs:{src:s.video.videoUrl,controls:"controls"}})]),a("div",{staticClass:"imginfo"},[a("p",{staticClass:"ititle"},[a("span",{attrs:{title:s.cardTitle}},[t._v(t._s(s.cardTitle))])]),a("el-button",{staticClass:"ibutton",attrs:{type:"primary",round:"",size:"small"}},[t._v(t._s(e.actionCallOnName))])],1)])}),1):0==e.creativityType?a("div",[a("p",{staticClass:"img"},[a("img",{attrs:{src:e.img,alt:""},on:{click:function(a){t.showBigImg(e.img)}}})]),a("div",{staticClass:"imginfo"},[a("p",{staticClass:"ititle"},[a("span",{attrs:{title:e.creativityTitle}},[t._v(t._s(e.creativityTitle))])]),a("el-button",{staticClass:"ibutton",attrs:{type:"primary",round:"",size:"small"}},[t._v(t._s(e.actionCallOnName))])],1)]):a("div",[a("p",{staticClass:"img"},[a("video",{attrs:{src:e.video,controls:"controls"}})]),a("div",{staticClass:"imginfo"},[a("p",{staticClass:"ititle"},[a("span",{attrs:{title:e.creativityTitle}},[t._v(t._s(e.creativityTitle))])]),a("el-button",{staticClass:"ibutton",attrs:{type:"primary",round:"",size:"small"}},[t._v(t._s(e.actionCallOnName))])],1)])],1),a("div",{staticClass:"other"},[a("p",{staticClass:"country"},[a("span",[a("i",{staticClass:"el-icon-edit",on:{click:function(a){t.toChangeCountry(e.id,e.countryId)}}}),t._v(t._s(e.countryId))])]),a("p",[t._v("ID："+t._s(e.id)+"\n        "),a("span",{class:{class:!0,noclassify:!e.classify}},[t._v(t._s(e.classify))])]),a("p",{staticClass:"name"},[a("span",{staticClass:"binfo"},[t._v(t._s(e.creater)+" "+t._s(t._f("timeFormat")(e.createTime,"yyyy-MM-dd HH:mm:ss",e.createTime)))]),a("span",{staticClass:"mutli"},[a("el-checkbox",{model:{value:t.createchecked[s],callback:function(e){t.$set(t.createchecked,s,e)},expression:"createchecked[index]"}})],1),a("span",{staticClass:"select"},[a("el-select",{staticClass:"sex",attrs:{size:"mini",placeholder:"请选择"},on:{change:function(a){t.updateSex(e.id,e.sex)}},model:{value:e.sex,callback:function(a){t.$set(e,"sex",a)},expression:"l.sex"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),a("p",{staticClass:"switch"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#d7dae2"},on:{change:function(a){t.toOpenClose(e.id,e.status)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"l.status"}})],1)])])}),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.originImg,expression:"originImg != ''"}],staticClass:"imgDetail",on:{click:t.hideBigImg}},[a("img",{attrs:{src:t.originImg,alt:""}})])])],2)},Uc=[],$c={data:function(){return{originImg:"",options:[{value:"1,2",label:"all"},{value:"1",label:"男"},{value:"2",label:"女"}]}},computed:Object(D["a"])({},Object(M["d"])(["createlist","createchecked"])),methods:{hideBigImg:function(){this.originImg=""},showBigImg:function(t){this.originImg="".concat(t)},toChangeCountry:function(t,e){this.$emit("changeCountry",t,e)},toChangeName:function(t,e){this.$emit("changeName",t,e)},updateSex:function(t,e){this.$store.dispatch("updateSex",{id:t,sex:e})},toOpenClose:function(t,e){var a=[];a.push({id:t,status:e}),1==e?this.$store.dispatch("openCreate",{option:a}):this.$store.dispatch("closeCreate",{option:a})}}},Bc=$c,Fc=(a("b407"),a("6b3e"),Object(E["a"])(Bc,Nc,Uc,!1,null,"88a40e48",null)),Vc=Fc.exports,Kc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"批量新增国家",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",remote:"",placeholder:"请选择国家"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("确 定")])],1)],1)},Wc=[],zc={props:["status"],data:function(){return{country:[],dialogFormVisible:!1,timeout:null,restaurants:[],selectArr:[]}},watch:{status:function(t,e){this.dialogFormVisible=t}},computed:Object(D["a"])({},Object(M["d"])(["othercountries"])),methods:{toAdd:function(){var t=this.country.join(",");this.$emit("toAddCountries",t)},toCancel:function(){this.$emit("cancelAddbm","status3"),this.selectArr=[],this.country=[]},cancelSelect:function(t){this.selectArr=this.selectArr.filter(function(e){return e.id!=t})}},mounted:function(){}},Gc=zc,Hc=(a("922a"),Object(E["a"])(Gc,Kc,Wc,!1,null,"57070fd4",null)),qc=Hc.exports,Jc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("big-image",{attrs:{bigImageUrl:t.bigImageUrl,status:t.bigImageVisible},on:{hideBig:t.hideBig}}),a("select-img",{attrs:{status:t.selectstatus},on:{"update:status":function(e){t.selectstatus=e},select:t.selectImage}}),a("el-dialog",{staticClass:"dialog createdialog",attrs:{title:"新增轮播创意",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"leftform"},[a("el-form-item",{staticClass:"cline",attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("全部")]),a("el-radio",{attrs:{label:"1"}},[t._v("男")]),a("el-radio",{attrs:{label:"2"}},[t._v("女")])],1)],1),a("div",{staticClass:"carousellist"},[t.tablist.length<10?a("div",{staticClass:"add",staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addTab(t.tabvalue)}}},[t._v("+")])],1):t._e(),a("el-tabs",{attrs:{type:"card"},model:{value:t.tabvalue,callback:function(e){t.tabvalue=e},expression:"tabvalue"}},t._l(t.tablist,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:s+1+"",name:e.name}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.tablist.length>3,expression:"tablist.length > 3"}],staticClass:"el-icon-close cardremove",on:{click:function(a){t.removeTab(e.name)}}}),a("el-form-item",{staticClass:"cline",attrs:{label:"类型"}},[a("el-radio-group",{on:{change:function(a){t.resetImgVideo(e.name)}},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},[a("el-radio",{attrs:{label:"1"}},[t._v("图片")]),a("el-radio",{attrs:{label:"2"}},[t._v("视频")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.type,expression:"item.type == '1'"}],staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.processIMG.length,expression:"item.processIMG.length == 0"}],staticClass:"moreInfo",attrs:{size:"small",plain:""},on:{click:function(e){t.selectstatus=!t.selectstatus}}},[t._v("选择图片")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.processIMG.length,expression:"item.processIMG.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),a("div",{staticClass:"filebutton"},[a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==e.processIMG.length,expression:"item.processIMG.length == 0"}],staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,requestOptions:t.fileOption,filters:t.imgfilters},on:{checkUpload:t.checkUpload,uploadPic:t.uploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1),a("ul",{staticClass:"reslist"},t._l(e.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"l.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file)}}})])}),0)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.type,expression:"item.type == '2'"}],staticClass:"cline uploadfile",attrs:{label:"视频"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.processVIO.length,expression:"item.processVIO.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传视频")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==e.processVIO.length,expression:"item.processVIO.length == 0"}],staticClass:"fileinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsVIO,requestOptions:t.fileOption,filters:t.videofilters},on:{checkUpload:t.checkUploadVio,uploadVio:t.uploadVio,uploadVioRes:t.uploadVioRes,uploadVioError:t.uploadVioError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(e.processVIO,function(e,s){return a("li",{key:s},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"g.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fmname,expression:"g.fmname"}],staticClass:"videofm"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.fmname}},[t._v(t._s(e.fmname))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.fmprocess,expression:"g.fmprocess == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.fmprocess+"%"})]),a("span",[t._v(t._s(e.fmprocess)+"%")])]),a("div",{staticClass:"fmctrl"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.randomCreate}},[t._v("随机生成")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("上传封面")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.showBig(e.fmUrl)}}},[t._v("查看大图")]),a("div",{staticClass:"uploadFmbox"},[a("vue-file-upload",{staticClass:"fileinputfm",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsFM,requestOptions:t.fileOptionFM,filters:t.imgfilters},on:{checkUploadFm:t.checkUploadFm,uploadFm:t.uploadFm,uploadFmRes:t.uploadFmRes,uploadFmError:t.uploadFmError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)],1)]),a("i",{staticClass:"el-icon-error processclose processvideo",on:{click:function(a){t.delVIO(e.file)}}})])}),0)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"item.title"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:e.deeplink,callback:function(a){t.$set(e,"deeplink",a)},expression:"item.deeplink"}})],1)],1)}),1)],1)],1),a("div",{staticClass:"leftform"},[a("el-form-item",{staticClass:"cline",attrs:{label:"国家"}},[a("el-select",{staticClass:"search",attrs:{filterable:"",multiple:"",remote:"",placeholder:"请选择国家，可搜索"},model:{value:t.form.selectArr,callback:function(e){t.$set(t.form,"selectArr",e)},expression:"form.selectArr"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"主页"}},[a("el-select",{attrs:{placeholder:"请选择主页",filterable:""},on:{change:t.selectHomepage},model:{value:t.form.homepage,callback:function(e){t.$set(t.form,"homepage",e)},expression:"form.homepage"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"分类"}},[a("el-autocomplete",{staticClass:"search",attrs:{"fetch-suggestions":t.querySearchAsyncClassify,placeholder:"请输入分类，可搜索","suffix-icon":"el-icon-search"},on:{select:t.handleSelectClassify},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"文本"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入文字说明，介绍推广内容",autosize:{minRows:3.5,maxRows:3.5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:t.form.deeplink,callback:function(e){t.$set(t.form,"deeplink",e)},expression:"form.deeplink"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"行动号召"}},[a("el-select",{attrs:{placeholder:"行动号召"},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.allactions,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.code}})}),1)],1)],1),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitOnly}},[t._v("立即创建")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitNext}},[t._v("保存并下一个")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)],1)},Yc=[],Xc=new _n.a,Zc={props:["status"],components:{VueFileUpload:fn.a,BigImage:Oc,SelectImg:gc},data:function(){return{selectstatus:!1,tablist:[{tab:"1",name:"t1",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"2",name:"t2",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"3",name:"t3",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]}],tabvalue:"t1",tabindex:3,bigImageVisible:!1,bigImageUrl:"",state:"",timeout:null,restaurants:[],xtoken:localStorage.getItem("atom_token"),form:{name:"",sex:"0",type:"0",deeplink:"",homepage:"",classify:"",selectArr:[],desc:"",title:"",actions:""},msg:{name:"创意名称不可以为空",homepage:"请选择主页",classify:"请输入分类",desc:"请输入文本",title:"请输入标题",selectArr:"请选择国家",actions:"请选择行动号召",deeplink:"",imginfo:"请上传图片",videoinfo:"请上传视频",fminfo:"请上传封面图"},dialogFormVisible:!1,fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},fileOptionFM:{headers:{"X-Token":localStorage.getItem("atom_token")},formData:{type:"2"}},imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],videofilters:[{name:"videoFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|vob|ifo|mpg|mpeg|dat|mp4|3gp|mov|rm|ram|rmvb|wmv|asf|avi|asx|".indexOf(e)}}],eventsIMG:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e)},onAddFileSuccess:function(t){this.vm.$emit("checkUpload",t)}},eventsVIO:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadVio",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadVioError",e,t);this.vm.$emit("uploadVioRes",e)},onAddFileSuccess:function(t){this.vm.$emit("checkUpload",t)}},eventsFM:{onProgressUpload:function(t,e){console.log(arguments),this.vm.$emit("uploadFm",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadFmError",e,t);this.vm.$emit("uploadFmRes",e)},onAddFileSuccess:function(t){this.vm.$emit("checkUploadFm",t)}}}},mounted:function(){},watch:{status:function(t,e){this.dialogFormVisible=t}},computed:Object(D["a"])({},Object(M["d"])(["othercountries","commonpage","cardcreate"]),Object(M["b"])(["createclassify","allactions"]),{uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),methods:{selectImage:function(t){var e=this,a=this.tablist.find(function(t){return t.name==e.tabvalue});a.processIMG=[],a.processIMG.push({name:t[0].md5,process:100,imageUrl:t[0].filePath,imageHash:t[0].md5})},matchMD5:function(t,e,a){var s=this;this.$store.dispatch("matchFileMD5",{md5:[t],file:e,list:this.tablist,type:a,tabvalue:this.tabvalue,on:"cardcreate",vdname:this.fmvideoname,callback:function(){s.setVideoImage(a)}})},randomCreate:function(){this.setVideoImage("video",1)},showBig:function(t){this.bigImageVisible=!0,this.bigImageUrl=t},hideBig:function(){this.bigImageVisible=!1},setVideoImage:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),s=0,i=this.tablist.find(function(t,e){if(t.name==c.tabvalue)return s=e,t}),n=i.processVIO[0],"video"!=e){t.next=9;break}return t.next=7,this.$store.dispatch("getVideoImg",{videoMd5:n.videoHash,videoUrl:n.videoUrl,type:a});case 7:o=t.sent,o.data&&(i.processVIO[0].fmname=o.data.imageMd5,i.processVIO[0].fmUrl=o.data.imageUrl,i.processVIO[0].fmHash=o.data.imageMd5,i.processVIO[0].fmprocess=100,this.tablist.splice(s,1),this.tablist.splice(s,0,i));case 9:"fm"==e&&(r={imageMd5:n.fmHash,imageUrl:n.fmUrl,videoMd5:n.videoHash,videoUrl:n.videoUrl},this.$store.dispatch("saveVideoImg",{option:r}));case 10:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),resetImgVideo:function(t){this.tablist.forEach(function(e){if(e.name==t)if("1"==e.type){var a=e.processVIO[0]?e.processVIO[0].fmfile||e.processVIO[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel(),e.processVIO=[]}else{a=e.processIMG[0]?e.processIMG[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel(),e.processIMG=[]}})},addTab:function(t){var e=++this.tabindex+"";this.tablist.push({tab:e,name:"t"+e,title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]}),this.tabvalue="t"+e},removeTab:function(t){this.tablist.forEach(function(e){if(e.name==t)if("1"==e.type){var a=e.processIMG[0]?e.processIMG[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel()}else{a=e.processVIO[0]?e.processVIO[0].fmfile||e.processVIO[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel()}});var e=this.tablist,a=this.tabvalue;a===t&&e.forEach(function(s,i){s.name==t&&(a=e[i+1]?e[i+1].name:e[i-1].name)}),this.tabvalue=a,this.tablist=e.filter(function(e){return e.name!==t})},uploadFmError:function(t,e){this.tablist.forEach(function(t){t.processVIO[0]&&t.processVIO[0].fmname==e.name&&(t.processVIO[0].fmname="",t.processVIO[0].fmprocess="")})},uploadFmRes:function(t){console.log(t),this.tablist.forEach(function(e){e.processVIO[0]&&e.processVIO[0].fmname==t.data[0].originName&&(e.processVIO[0].fmUrl=t.data[0].targetName,e.processVIO[0].fmHash=t.data[0].md5)}),this.setVideoImage("fm")},uploadFm:function(t,e){var a=this,s=this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].fmname==t.name});s?this.tablist.forEach(function(a){a.processVIO[0]&&a.processVIO[0].fmname==t.name&&(a.processVIO[0].fmprocess=e)}):this.tablist.forEach(function(s){s.name==a.tabvalue&&(s.processVIO[0].fmname=t.name,s.processVIO[0].fmprocess=e,s.processVIO[0].fmfile=t)})},uploadVioError:function(t,e){this.tablist.forEach(function(t){t.processVIO[0]&&t.processVIO[0].name==e.name&&(t.processVIO=[])})},uploadVioRes:function(t){this.tablist.forEach(function(e){e.processVIO[0]&&e.processVIO[0].name==t.data[0].originName&&(e.processVIO[0].videoUrl=t.data[0].targetName,e.processVIO[0].videoHash=t.data[0].md5)}),this.setVideoImage("video")},uploadVio:function(t,e){var a=this,s={};s.name=t.name,s.process=e,s.file=t,s.size=t.size,s.fmname="",s.fmprocess=0;var i=this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].name==t.name});i?this.tablist.forEach(function(a){a.processVIO[0]&&a.processVIO[0].name==t.name&&(a.processVIO[0].process=e)}):this.tablist.forEach(function(t){t.name==a.tabvalue&&t.processVIO.push(s)})},delVIO:function(t){var e=this;t&&t.isUploading&&(t.cancel(),t.remove()),this.tablist.forEach(function(t){t.name==e.tabvalue&&(t.processVIO=[])})},uploadRes:function(t){this.tablist.forEach(function(e){e.processIMG[0]&&e.processIMG[0].name==t.data[0].originName&&(e.processIMG[0].imageUrl=t.data[0].targetName,e.processIMG[0].imageHash=t.data[0].md5)})},uploadError:function(t,e){this.tablist.forEach(function(t){t.processIMG[0]&&t.processIMG[0].name==e.name&&(t.processIMG=[])})},checkUpload:function(t){var e=this;if(this.tablist.find(function(e){return e.processIMG[0]&&e.processIMG[0].name==t.name}))t.remove(),Object(H["g"])("相同图片不可重复上传，请更换图片或重新命名");else{var a=t.file;Xc.md5(a,function(a,s){e.matchMD5(s,t,"img")},function(t){})}},checkUploadVio:function(t){var e=this;if(this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].name==t.name}))t.remove(),Object(H["g"])("相同视频不可重复上传，请更换视频或重新命名");else{var a=t.file;Xc.md5(a,function(a,s){e.matchMD5(s,t,"video")},function(t){})}},checkUploadFm:function(t){var e=this;if(this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].fmname==t.name}))t.remove(),Object(H["g"])("暂时无法上传相同封面图，请更换封面图或重新命名");else{var a=t.file;Xc.md5(a,function(a,s){e.matchMD5(s,t,"fm")},function(t){})}},uploadPic:function(t,e){var a=this,s={};s.name=t.name,s.process=e,s.size=t.size,s.file=t;var i=this.tablist.find(function(e){return e.processIMG[0]&&e.processIMG[0].name==t.name});i?this.tablist.forEach(function(a){a.processIMG[0]&&a.processIMG[0].name==t.name&&(a.processIMG[0].process=e)}):this.tablist.forEach(function(t){t.name==a.tabvalue&&t.processIMG.push(s)})},delIMG:function(t){var e=this;t&&t.isUploading&&(t.cancel(),t.remove()),this.tablist.forEach(function(t){t.name==e.tabvalue&&(t.processIMG=[])})},selectHomepage:function(){var t=this,e=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0];e.insId||(this.form.homepage="",Object(H["g"])("此主页无PBIA，请先同步"))},querySearchAsyncClassify:function(t,e){var a=this.createclassify,s=t?a.filter(this.createStateFilterClassify(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(s)},1e3*Math.random())},createStateFilterClassify:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelectClassify:function(t){this.form.classify=t.value},onSubmitNext:function(){this.onSubmit()&&this.toReset()},onSubmitOnly:function(){this.onSubmit()&&(this.dialogFormVisible=!1)},checkCondition:function(){for(var t,e=this.form,a=0;a<this.tablist.length;a++){var s=this.tablist[a];if("1"==s.type){if(0==s.processIMG.length){t=[!1,"卡片".concat(a+1," 图片未上传")];break}if(100!=s.processIMG[0].process){t=[!1,"卡片".concat(a+1," 图片正在上传中……")];break}t=[!0]}else{if(0==s.processVIO.length){t=[!1,"卡片".concat(a+1," 视频未上传")];break}if(100!=s.processVIO[0].process){t=[!1,"卡片".concat(a+1," 视频正在上传中……")];break}if(!s.processVIO[0].fmname){t=[!1,"卡片".concat(a+1," 封面图未上传")];break}if(100!=s.processVIO[0].fmprocess){t=[!1,"卡片".concat(a+1," 封面图正在上传中……")];break}t=[!0]}if(""==s.title){t=[!1,"卡片".concat(a+1," 标题未填写")];break}}return t[0]?0==e["selectArr"].length?[!1,this.msg["selectArr"]]:""==e["homepage"]?[!1,this.msg["homepage"]]:""==e["classify"].trim()?[!1,this.msg["classify"]]:""==e["desc"]?[!1,this.msg["desc"]]:""===e["actions"]?[!1,this.msg["actions"]]:[!0]:t},onSubmit:function(){var t=this;console.log(this.tablist);var e=this.checkCondition();if(e[0]){this.form;var a=[],s=[];this.form.selectArr.forEach(function(t){a.push(t.code),s.push(t.name)});var i=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0],n=this.allactions.filter(function(e){return e.code==t.form.actions})[0],o=[],r=[!0];if(console.log(this.tablist),this.tablist.forEach(function(t,e){var a,s;"1"==t.type?(a={imageUrl:t.processIMG[0].imageUrl,imageHash:t.processIMG[0].imageHash},s={videoUrl:"",videoHash:""}):(a={imageUrl:t.processVIO[0].fmUrl,imageHash:t.processVIO[0].fmHash},s={videoUrl:t.processVIO[0].videoUrl,videoHash:t.processVIO[0].videoHash});var i={cardType:t.type,image:a,video:s,cardTitle:t.title,cardDeepLink:t.deeplink};"1"==t.type?a.hasOwnProperty("imageUrl")&&""!=a["imageUrl"].trim()||(r=[!1,"".concat(t.processIMG[0].name,"异常，请重新上传或更换素材")]):(s.hasOwnProperty("videoUrl")&&""!=s["videoUrl"].trim()||(r=[!1,"".concat(t.processVIO[0].name,"异常，请重新上传或更换素材")]),a.hasOwnProperty("imageUrl")&&""!=a["imageUrl"].trim()||(r=[!1,"".concat(t.processVIO[0].name,"对应的封面图").concat(t.processVIO[0].fmname,"异常，请重新上传或更换素材")])),o.push(i)}),r[0]){var c={actionCallOn:n.code,actionCallOnName:n.name,classify:this.form.classify.trim(),countryId:a.join(","),countryName:s.join(","),creativityName:this.form.name,creativityText:this.form.desc,creativityType:"2",deeplink:this.form.deeplink,card:_e()(o),pageId:i.pageId,pageLogo:i.picture,pageName:i.name,projectId:this.$route.params.id,sex:"0"==this.form.sex?"1,2":this.form.sex,token:this.xtoken};return this.$store.dispatch("toAddCreate",{option:c,id:this.$route.params.id}),!0}Object(H["a"])(r[1])}else Object(H["g"])(e[1])},toReset:function(){this.tablist.forEach(function(t){if("1"==t.type){var e=t.processIMG[0]?t.processIMG[0].file:null;!e||e.isSuccess||e.isCancel||e.cancel()}else{e=t.processVIO[0]?t.processVIO[0].fmfile||t.processVIO[0].file:null;!e||e.isSuccess||e.isCancel||e.cancel()}}),this.form.name="",this.form.sex="0",this.form.type="0",this.form.deeplink="",this.form.homepage="",this.form.classify="",this.form.selectArr=[],this.form.desc="",this.form.title="",this.form.actions="",this.tablist=[{tab:"1",name:"t1",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"2",name:"t2",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"3",name:"t3",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]}],this.tabvalue="t1",this.tabindex=3},toCancel:function(){this.toReset(),this.$emit("cancelAddbm","status9")}}},Qc=Zc,tl=(a("dd06"),Object(E["a"])(Qc,Jc,Yc,!1,null,"6ea97cb2",null)),el=tl.exports,al={components:{CreateList:Vc,AddCountry:qc,CreateAdd:Rc,CreateAddwith:Sc,EditName:uc,EditCountry:ic,CreateSync:Zr,CreateCarousel:el,BreadCrumb:kr},data:function(){var t;return t={status1:!1,status2:!1,status3:!1,status4:!1,status5:!1,status6:!1,status7:!1,status8:!1,status9:!1,value1:"",value2:"",value3:"",value4:"",value5:"",state4:"",pageindex:1,pagesize:20,oldid:"",ifsyncall:!1,oldname:"",oldcountry:[]},Object(Gr["a"])(t,"ifsyncall",!1),Object(Gr["a"])(t,"statuslist",[{value:"-1",label:"不限"},{value:"0",label:"关闭"},{value:"1",label:"开启"}]),Object(Gr["a"])(t,"sexlist",[{value:"-1",label:"不限"},{value:"1,2",label:"全部"},{value:"1",label:"男"},{value:"2",label:"女"}]),Object(Gr["a"])(t,"ctrllist",[{value:"1",label:"批量新增"},{value:"2",label:"批量开启"},{value:"3",label:"批量关闭"},{value:"4",label:"批量添加国家"}]),t},created:function(){var t={creativityName:"",classify:"",countryId:"",sex:"",status:"",pageIndex:1,pageSize:20};for(var e in t){var a="cr_"+e,s=t[e];this.SETSTATE({k:a,v:s})}},mounted:function(){var t=this;this.$store.dispatch("getClassify",this.$route.params.id),this.$store.dispatch("getCountries",this.$route.params.id),this.$store.dispatch("otherCountries");var e=this.$route.params.id;this.SETSTATE({k:"cr_projectId",v:e}),this.SETSTATE({k:"createlist",v:[]}),this.$store.dispatch("getCreateList",{loading:"createList"}),this.$store.dispatch("commonPage",{project_id:e}),this.$store.dispatch("getAllactions");this.itemlist.find(function(e){return e.id==t.$route.params.id});this.$store.dispatch("commonAccount",{project_id:this.$route.params.id})},watch:{},computed:Object(D["a"])({},Object(M["d"])(["itemlist","classify","countries","crtotal","crpagesize","createchecked"]),Object(M["b"])(["allcheckidstatus","createcheckstatus"])),methods:Object(D["a"])({},Object(M["c"])(["ALLSELECT","SETSTATE"]),{toSync:function(t){var e=t.join(","),a=this.allcheckidstatus.map(function(t){return t.id}).join(","),s=this.$route.params.id,i=!0;Object(H["b"])("创意同步",'创意同步中... <a class="synctodetail" href="#/project/'.concat(this.$route.params.id,'/sync">查看详情</a>'),i),this.ifsyncall?this.$store.dispatch("syncAll",{accountIds:e,projectId:s}):this.$store.dispatch("syncGroup",{accountIds:e,ids:a,projectId:s})},changeCountry:function(t,e){this.oldid=t,this.oldcountry=e.split(",").slice(0),console.log(e.split(",")),this.status7=!0},changeName:function(t,e){console.log(t,e),this.oldid=t,this.oldname=e,this.status6=!0},toAddCountries:function(t){var e=[];this.allcheckidstatus.forEach(function(t){e.push(t.id)});var a=e.join(","),s=t;this.$store.dispatch("addCountries",{creativityIds:a,countryId:s}),this.status3=!1},cancelAddbm:function(t){this[t]=!1},prevAddcreate:function(t){this[t]=!0},syncAll:function(){this.status8=!0,this.ifsyncall=!0},addCreateType:function(t){switch(t){case"a":this.status4=!0;break;case"b":this.status9=!0;break}},handleCommand:function(t){var e=this.allcheckidstatus;switch(console.log(e),t){case"a":this.status5=!0;break;case"b":if(0==this.createchecked.filter(function(t){return t}).length)return void Object(H["g"])("请先选择需要批量处理的创意");this.$store.dispatch("openCreate",{option:e});break;case"c":if(0==this.createchecked.filter(function(t){return t}).length)return void Object(H["g"])("请先选择需要批量处理的创意");this.$store.dispatch("closeCreate",{option:e});break;case"d":if(0==this.createchecked.filter(function(t){return t}).length)return void Object(H["g"])("请先选择需要批量处理的创意");this.status3=!0;break;case"e":if(0==this.createchecked.filter(function(t){return t}).length)return void Object(H["g"])("请先选择需要批量处理的创意");this.status8=!0,this.ifsyncall=!1;break}},toSelectAll:function(){this.ALLSELECT()},createSearch:function(){var t=this;clearTimeout(n),n=setTimeout(function(){t.toSort()},300)},pageSwitch:function(t){this.pageindex=t,this.toSort()},pageSizeChange:function(t){this.pagesize=t,this.toSort()},toSort:function(){var t={creativityName:this.state4,classify:"不限"==this.value5?"":this.value5,countryId:"不限"==this.value4?"":this.value4,sex:"-1"==this.value3?"":this.value3,status:"-1"==this.value2?"":this.value2,pageIndex:this.pageindex,pageSize:this.pagesize};for(var e in t){var a="cr_"+e,s=t[e];this.SETSTATE({k:a,v:s})}this.$store.dispatch("getCreateList")}})},sl=al,il=(a("fc58"),a("eac2"),Object(E["a"])(sl,Wr,zr,!1,null,"e3d8a0d6",null)),nl=il.exports,ol=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sync"},[a("bread-crumb",{attrs:{pageName:"同步记录"}}),a("div",{staticClass:"ctrl"},[a("el-select",{staticClass:"selectr",attrs:{filterable:"",placeholder:"广告账户"},on:{change:t.filterList},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbId,attrs:{label:t.name+(-1!=t.fbId?"("+t.fbAccountId+")":""),value:t.fbId,disabled:1!=t.accountStatus}})}),1),a("el-select",{staticClass:"selectr",attrs:{placeholder:"状态"},on:{change:t.filterList},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-button",{staticClass:"add",on:{click:t.syncAll}},[t._v("同步")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索创意编号","suffix-icon":"el-icon-search"},on:{input:t.createSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),a("div",{staticClass:"list",attrs:{id:"syncList"}},[a("sync-list",{on:{multiSelect:t.multiSelect}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.synctotal,"page-size":20},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)},rl=[],cl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.synclist,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.ifChecked}}),a("el-table-column",{attrs:{prop:"creativityId",label:"创意编号",width:"100"}}),a("el-table-column",{attrs:{prop:"address",label:"缩略图",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.img,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"fbAccountId",label:"账户ID",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.fbAccountId.split("_")[1]))]}}])}),a("el-table-column",{attrs:{prop:"adAccountName",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"platFrom",label:"平台",width:"100"}}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["同步失败"==e.row.statusName?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.message,placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})]):t._e(),"同步成功"==e.row.statusName?a("span",{staticClass:"success"},["同步成功"==e.row.statusName?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Facebook创意编号："+e.row.fbCreativeId,placement:"top-start"}},[a("svg-icon",{attrs:{svgname:"Facebook",svgclass:"facebookIcon"}})],1):t._e(),t._v("\n        "+t._s(e.row.statusName)+"\n      ")],1):"同步失败"==e.row.statusName?a("span",{staticClass:"fail"},[t._v(t._s(e.row.statusName))]):a("span",{staticClass:"other"},[t._v(t._s(e.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"synTime",label:"同步时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"time"},[t._v(t._s(t._f("timeFormat")(e.row.synTime,"yyyy-MM-dd")))]),a("span",{staticClass:"time"},[t._v(t._s(t._f("timeFormat")(e.row.synTime,"HH:mm:ss")))])]}}])})],1)},ll=[],ul={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["synclist"])),methods:{ifChecked:function(t,e){return"同步成功"!=t.statusName},handleSelectionChange:function(t){t.length>0&&this.$emit("multiSelect",t)}}},dl=ul,ml=(a("c09e"),Object(E["a"])(dl,cl,ll,!1,null,"628ae0f3",null)),pl=ml.exports,fl={data:function(){return{value:"",value2:"",state:"",pageindex:1,pagesize:20,idlist:[],options:[{value:"-1",label:"不限"},{value:"1",label:"同步成功"},{value:"0",label:"同步失败"},{value:"2",label:"同步中"}]}},components:{SyncList:pl,BreadCrumb:kr},created:function(){var t={status:"",fbAccountId:"",pageSize:20,pageIndex:1,projectId:""};for(var e in t){var a="sync_"+e,s=t[e];this.SETSTATE({k:a,v:s})}},mounted:function(){var t="sync_projectId",e=this.$route.params.id;this.SETSTATE({k:t,v:e}),this.SETSTATE({k:"synclist",v:[]}),this.$store.dispatch("syncList",{loading:"syncList"}),this.$store.dispatch("commonAccount",{project_id:this.$route.params.id})},watch:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{createSearch:function(){var t=this;clearTimeout(o),o=setTimeout(function(){t.toSort()},300)},pageSizeChange:function(t){this.pagesize=t,this.toSort()},pageSwitch:function(t){this.pageindex=t,this.toSort()},multiSelect:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.idlist=e.join(",")},syncAll:function(){if(""!=this.idlist){var t=this.idlist;this.idlist="",this.$store.dispatch("synclistall",{ids:t})}else Object(H["g"])("请先选择需要同步的记录")},filterList:function(){this.pageindex=1,this.toSort()},toSort:function(){var t={keyWords:encodeURIComponent(this.state),status:"-1"==this.value2?"":this.value2,fbAccountId:"-1"==this.value?"":this.value,pageSize:this.pagesize,pageIndex:this.pageindex,projectId:this.$route.params.id};for(var e in t){var a="sync_"+e,s=t[e];this.SETSTATE({k:a,v:s})}this.$store.dispatch("syncList")}}),computed:Object(D["a"])({},Object(M["d"])(["commonaccount","synctotal"]))},hl=fl,_l=(a("5f55"),Object(E["a"])(hl,ol,rl,!1,null,"39d5269c",null)),vl=_l.exports,gl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gener"},[a("bread-crumb",{attrs:{pageName:"创建推广计划"}}),a("gener-form",{on:{changeEdit:t.changeEdit}})],1)},bl=[],yl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formlist"},[a("div",{staticClass:"bidguide"},[a("gener-guide",{attrs:{bid:t.form.bid,maxbid:t.form.maxbid,moneytype:t.form.moneytype,money:t.form.money}})],1),t._m(0),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{attrs:{label:"推广计划名称"}},[a("el-input",{attrs:{placeholder:"请输入推广计划名称，用以展示在计划管理中"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"推广计划类型"}},[a("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:"manual"}},[t._v("通用推广计划")]),a("el-radio",{attrs:{label:"auto"}},[t._v("智能推广计划")])],1),a("span",{staticClass:"typetip1"},[t._v("需要手动创建广告和选择创意")]),a("span",{staticClass:"typetip2"},[t._v("每天11点自动选择创意并创建广告")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"广告账户"}},[a("el-select",{staticClass:"select accountselect",attrs:{multiple:"",filterable:"",placeholder:"请选择广告账户"},on:{change:t.accountToAudience},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.fbId.split("_")[1]+")",value:t.fbId,disabled:1!=t.accountStatus}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"国家"}},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"",placeholder:"请选择国家，可搜索"},on:{change:t.selectCountry},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"应用"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择应用"},on:{change:t.selectAction},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.commonapp,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.applicationId}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.actions,expression:"form.actions"}],staticClass:"cline timerange",attrs:{label:"平台"}},[a("el-radio-group",{on:{change:t.toGetsystem},model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},t._l(t.createplatform,function(t){return a("el-radio",{key:t.marketType,attrs:{label:t.marketType}})}),1)],1)],1),t._m(1),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{staticClass:"cline",attrs:{label:"受众"}},[a("div",{staticClass:"targettip"},[t._v("定位至少符合以下一项条件的用户")]),a("el-select",{staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(s){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.notarget.indexOf(s.audienceId+"|"+e.label),expression:"form.notarget.indexOf(`${item.audienceId}|${group.label}`) == -1"}],key:s.code,attrs:{label:s.name+"（"+s.audienceId+"）",value:s.audienceId+"|"+e.label}})}),1)}),1),a("el-checkbox-group",{model:{value:t.form.iftarget,callback:function(e){t.$set(t.form,"iftarget",e)},expression:"form.iftarget"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("不排除任何受众")])],1),1!=t.form.iftarget[0]?a("div",{staticClass:"targettip"},[t._v("排除至少符合以下一项条件的用户")]):t._e(),1!=t.form.iftarget[0]?a("el-select",{staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.notarget,callback:function(e){t.$set(t.form,"notarget",e)},expression:"form.notarget"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(s){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.target.indexOf(s.audienceId+"|"+e.label),expression:"form.target.indexOf(`${item.audienceId}|${group.label}`) == -1"}],key:s.code,attrs:{label:s.name+"（"+s.audienceId+"）",value:s.audienceId+"|"+e.label}})}),1)}),1):t._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],staticClass:"cline",attrs:{label:"系统版本"}},[a("el-select",{staticClass:"selectHalf",attrs:{placeholder:"最低版本"},model:{value:t.form.minversion,callback:function(e){t.$set(t.form,"minversion",e)},expression:"form.minversion"}},t._l(t.system,function(t,e){return a("el-option",{key:e,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),t._v("--\n      "),a("el-select",{staticClass:"selectHalf",attrs:{placeholder:"最高版本"},model:{value:t.form.maxversion,callback:function(e){t.$set(t.form,"maxversion",e)},expression:"form.maxversion"}},t._l(t.system,function(t,e){return a("el-option",{key:e,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),a("p",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("最高版本为空则无上限")])],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"预算"}},[a("el-radio-group",{on:{change:t.moneytypeChange},model:{value:t.form.moneytype,callback:function(e){t.$set(t.form,"moneytype",e)},expression:"form.moneytype"}},[a("el-radio",{attrs:{label:"day_budget"}},[t._v("单日预算")]),a("el-radio",{attrs:{label:"total_budget"}},[t._v("总预算")])],1),a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:"请输入预算金额（单位：美元）"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype,expression:"form.moneytype == 'total_budget'"}],attrs:{label:"投放日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype,expression:"form.moneytype == 'total_budget'"}],staticClass:"cline timerange",attrs:{label:"投放时段"}},[a("el-radio-group",{model:{value:t.form.timerange,callback:function(e){t.$set(t.form,"timerange",e)},expression:"form.timerange"}},[a("el-radio",{attrs:{label:"allday"}},[t._v("全天投放广告")]),a("el-radio",{attrs:{label:"schedule"}},[t._v("分时间段投放")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"schedule"==t.form.timerange,expression:"form.timerange == 'schedule'"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"selectsmall",attrs:{multiple:"",placeholder:"按广告受众所在时区"},model:{value:t.form.rdate,callback:function(e){t.$set(t.form,"rdate",e)},expression:"form.rdate"}},t._l(t.week,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.key}})}),1),a("el-time-picker",{staticClass:"timeselect",attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.form.rtime,callback:function(e){t.$set(t.form,"rtime",e)},expression:"form.rtime"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],attrs:{label:"设备"}},[a("el-checkbox-group",{model:{value:t.form.equip,callback:function(e){t.$set(t.form,"equip",e)},expression:"form.equip"}},["google_play"==t.form.platform?a("el-checkbox",{attrs:{label:"Android_Smartphone",name:"type"}},[t._v("安卓智能手机")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPhone",name:"type"}},[t._v("iPhone")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPad",name:"type"}},[t._v("iPad")]):t._e()],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"性别"}},[a("el-radio-group",{on:{change:t.getFilterCount},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("全部")]),a("el-radio",{attrs:{label:"1"}},[t._v("男")]),a("el-radio",{attrs:{label:"2"}},[t._v("女")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"年龄"}},[a("el-slider",{attrs:{range:"",min:13,max:65,"format-tooltip":t.formatTooltip},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"语言"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择语言，可搜索"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},t._l(t.language,function(t){return a("el-option",{key:t.localeId,attrs:{label:t.name,value:t.localeId}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"兴趣"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择兴趣，可搜索"},model:{value:t.form.interest,callback:function(e){t.$set(t.form,"interest",e)},expression:"form.interest"}},t._l(t.interests,function(t){return a("el-option",{key:t.featureId,attrs:{label:t.name,value:t.featureId}})}),1)],1),a("el-form-item",{attrs:{label:"自动版位"}},[a("el-checkbox-group",{model:{value:t.form.auto,callback:function(e){t.$set(t.form,"auto",e)},expression:"form.auto"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("是（Facebook自动选择最好的版位）")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=t.form.auto[0],expression:"form.auto[0] != 1"}],staticClass:"verpla",attrs:{label:"版位"}},[a("el-checkbox-group",{model:{value:t.form.verpla,callback:function(e){t.$set(t.form,"verpla",e)},expression:"form.verpla"}},[a("el-checkbox",{attrs:{label:"facebook",name:"type",disabled:-1!=t.form.verpla.indexOf("audience_network")||-1!=t.form.verpla.indexOf("messenger")}},[t._v("Facebook")]),a("el-checkbox",{attrs:{label:"instagram",name:"type"}},[t._v("Instagram")]),a("el-checkbox",{attrs:{label:"audience_network",name:"type",disabled:-1==t.form.verpla.indexOf("facebook")}},[t._v("Audience Network")]),a("el-checkbox",{attrs:{label:"messenger",name:"type",disabled:-1==t.form.verpla.indexOf("facebook")}},[t._v("Messenger")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"出价"}},[a("el-radio-group",{on:{change:t.maxbidDefault},model:{value:t.form.bid,callback:function(e){t.$set(t.form,"bid",e)},expression:"form.bid"}},[a("el-radio",{attrs:{label:"cpi"}},[t._v("CPI")]),a("el-radio",{attrs:{label:"cpm"}},[t._v("CPM")])],1)],1),a("el-form-item",{attrs:{label:"竞价上限"}},[a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:t.maxbidplace},model:{value:t.form.maxbid,callback:function(e){t.$set(t.form,"maxbid",e)},expression:"form.maxbid"}})],1)]),a("el-form-item",{staticClass:"cline",attrs:{label:"用户过滤"}},[a("el-checkbox-group",{model:{value:t.form.filtra,callback:function(e){t.$set(t.form,"filtra",e)},expression:"form.filtra"}},[a("el-checkbox",{attrs:{label:"1",name:"filtra"}},[t._v("过滤已安装用户")]),a("el-checkbox",{attrs:{label:"2",name:"filtra"}},[t._v("过滤已关注用户")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:-1!=t.form.filtra.indexOf("2"),expression:"form.filtra.indexOf('2') != -1"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"select",attrs:{multiple:"",placeholder:"请选择要过滤的主页，必选"},model:{value:t.form.filtrapage,callback:function(e){t.$set(t.form,"filtrapage",e)},expression:"form.filtrapage"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1)],1)],1),t._m(2),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{staticClass:"cline ctype",attrs:{label:"广告组数"}},[a("el-input-number",{attrs:{min:1,label:"广告组数"},model:{value:t.form.adcount,callback:function(e){t.$set(t.form,"adcount",e)},expression:"form.adcount"}}),a("div",{staticClass:"countfont"},[t._v("每个广告系列包含的广告组数量，太多也会有内部竞争影响整体效率")])],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"广告组创意数"}},[a("el-input-number",{attrs:{min:1,max:50,label:"广告组创意数"},on:{change:t.countChange},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}}),a("div",{staticClass:"countfont"},[t._v("每个广告组包含的创意数量。1-3个为佳，3个以上会有内部竞争影响整体效率")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline",attrs:{label:"创意类型"}},[a("el-checkbox-group",{on:{change:t.getFilterCount},model:{value:t.form.createtype,callback:function(e){t.$set(t.form,"createtype",e)},expression:"form.createtype"}},[a("el-checkbox",{attrs:{label:"0",name:"type"}},[t._v("单图片")]),a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("单视频")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[t._v("轮播")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline",attrs:{label:"选择分类"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",placeholder:"选填，为空则不限制分类"},on:{change:t.getFilterCount},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}},t._l(t.classifyforplan,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline ctype",attrs:{label:"创意数量"}},[a("el-input-number",{attrs:{min:1,label:"创意数量"},on:{change:t.createcountChange},model:{value:t.form.createcount,callback:function(e){t.$set(t.form,"createcount",e)},expression:"form.createcount"}}),a("div",{staticClass:"countfont"},[t._v("符合条件的创意总数为："+t._s(t.classifyfiltercount))])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline cline-strategy",attrs:{label:"选择策略"}},[a("el-radio-group",{staticClass:"strategy",model:{value:t.form.tactics,callback:function(e){t.$set(t.form,"tactics",e)},expression:"form.tactics"}},[a("el-radio",{attrs:{label:1}},[t._v("新创意优先")]),a("el-radio",{attrs:{label:2}},[t._v("完全随机")]),a("el-radio",{attrs:{label:3}},[t._v("高点击率优先")]),a("el-radio",{attrs:{label:4}},[t._v("视频/图片不同优先")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不同策略会选到不同的创意，请根据需求选择合适的策略",placement:"bottom-start"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),a("div",{staticClass:"elsubmit"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("提 交")])],1)],1)},kl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("基础信息")]),a("span",[t._v("推广计划保存后可编辑，也可多次生成广告")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("广告组")]),a("span",[t._v("同1个广告系列下的所有广告组的条件一致")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("结构和创意")]),a("span",[t._v("根据广告组数量、广告组创意数和创意数生成相对应的广告系列数量")])])}],El=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"guide"},[a("p",{staticClass:"title"},[t._v("出价指南")]),a("div",{staticClass:"nowprice"},[a("div",{staticClass:"price cpm"},[a("p",{staticClass:"unit"},[t._v("目前出价"+t._s(t.bid))]),a("p",{staticClass:"val"},[t._v(t._s(t.maxbid?"$"+t.maxbid:"--"))])]),a("div",{staticClass:"price"},[a("p",{staticClass:"unit"},[t._v("目前"+t._s("day_budget"==t.moneytype?"单日预算":"总预算"))]),a("p",{staticClass:"val"},[t._v(t._s(t.money?"$"+t.money:"--"))])])]),a("p",{staticClass:"title"},[t._v("不同价位最近一周效果\n    "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"根据所有广告账户下的广告组数据计算得出",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1),a("div",{staticClass:"effect"},[a("div",{class:{price:!0,on:0==t.effecttab},on:{click:function(e){t.effectSelect(0)}}},[a("p",{staticClass:"unit"},[t._v("CPI")]),a("p",{staticClass:"val"},[t._v(t._s(t.cpi_data))])]),a("div",{class:{price:!0,cpm:!0,on:1==t.effecttab},on:{click:function(e){t.effectSelect(1)}}},[a("p",{staticClass:"unit"},[t._v("花费")]),a("p",{staticClass:"val"},[t._v(t._s(t.spend_data))])]),a("div",{class:{price:!0,cpm:!0,on:2==t.effecttab},on:{click:function(e){t.effectSelect(2)}}},[a("p",{staticClass:"unit"},[t._v("安装量")]),a("p",{staticClass:"val"},[t._v(t._s(t.installs_data))])])]),a("div",{staticClass:"charts"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.effecttab,expression:"effecttab == 0"}],staticClass:"canvas",attrs:{id:"Canvas1"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.effecttab,expression:"effecttab == 1"}],staticClass:"canvas",attrs:{id:"Canvas2"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.effecttab,expression:"effecttab == 2"}],staticClass:"canvas",attrs:{id:"Canvas3"}})])])},Cl=[],Ol={props:["bid","maxbid","moneytype","money"],data:function(){return{effecttab:0,weebeffect:[{name:"CPI",price:"12.00"},{name:"花费",price:"1200"},{name:"安装量",price:"1200"}]}},mounted:function(){this.SETSTATE({k:"bidguide",v:[]}),myChart8=Vt.init(document.getElementById("Canvas1")),myChart9=Vt.init(document.getElementById("Canvas2")),myChart10=Vt.init(document.getElementById("Canvas3"))},computed:Object(D["a"])({},Object(M["d"])(["bidguide"]),{cpi_data:function(){var t=this,e=this.bidguide.find(function(e){return t.maxbid>=e.bidAmountStart&&t.maxbid<=e.bidAmountEnd});return e?-1!=e.cpi.toString().indexOf(".")?"$"+ps()(e.cpi).toFixed(2):"$"+e.cpi:"--"},spend_data:function(){var t=this,e=this.bidguide.find(function(e){return t.maxbid>=e.bidAmountStart&&t.maxbid<=e.bidAmountEnd});return e?-1!=e.spend.toString().indexOf(".")?"$"+ps()(e.spend).toFixed(2):"$"+e.spend:"--"},installs_data:function(){var t=this,e=this.bidguide.find(function(e){return t.maxbid>=e.bidAmountStart&&t.maxbid<=e.bidAmountEnd});return e?-1!=e.installs.toString().indexOf(".")?ps()(e.installs).toFixed(2):e.installs:"--"}}),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{effectSelect:function(t){this.effecttab=t}})},wl=Ol,Il=(a("7888"),Object(E["a"])(wl,El,Cl,!1,null,"6d81495c",null)),Tl=Il.exports,xl={components:{GenerGuide:Tl},data:function(){return{state:"",state2:"",state3:"",week:[{name:"周一",key:"1"},{name:"周二",key:"2"},{name:"周三",key:"3"},{name:"周四",key:"4"},{name:"周五",key:"5"},{name:"周六",key:"6"},{name:"周七",key:"7"}],maxbidplace:"请输入竞价上限（单位：美元）",form:{name:"",type:1==this.$route.params.fid?"manual":"auto",country:[],actions:"",platform:"",target:[],iftarget:["1"],notarget:[],minversion:"",maxversion:"",moneytype:"day_budget",money:"",date:[],timerange:"allday",rdate:[],rtime:[new Date(2016,9,10,0,0,0),new Date(2016,9,10,23,0,0)],equip:[],sex:"0",age:[13,65],language:[],interest:[],auto:["1"],verpla:["facebook","instagram"],bid:"cpi",maxbid:"0.02",filtra:["1","2"],filtrapage:[],account:[],adcount:1,count:1,createtype:[],classify:[],createcount:"100",tactics:1},msg:{name:"请输入推广计划名称",country:"请选择国家",actions:"请选择应用",platform:"请选择平台",version:"请选择系统版本",money:"请输入预算金额",date:"请选择投放日期",rdate:"请选择星期",equip:"请选择设备",language:"请选择语言",verpla:"请选择版位",maxbid:"请输入竞价上限",maxbidmax:"竞价上限必须大于0.02美元",filtra:"请选择用户过滤",filtrapage:"请选择需要过滤的主页",createtype:"请选择创意类型"}}},mounted:function(){},computed:Object(D["a"])({},Object(M["d"])(["itemlist","othercountries","language","interests","commonapp","createplatform","system","commonpage","genertarget","commonaccount","classifyforplan","classifyfiltercount"]),{equip:function(){return this.form.platform}}),watch:{equip:function(t,e){this.form.equip="google_play"==t?["Android_Smartphone"]:["iPhone","iPad"]},"form.name":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.type":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.country":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.platform":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.target":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.notarget":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.minversion":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.maxversion":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.moneytype":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.money":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.sex":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.language":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.interest":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.bid":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.maxbid":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.filtrapage":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.account":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.count":{handler:function(t,e){this.$emit("changeEdit",!1)}}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{selectAction:function(){this.showBidChart(),this.form.platform="";var t=this.form.actions;this.$store.dispatch("getCreatePlatform",{applicationid:t}),this.form.minversion="",this.form.maxversion="",this.SETSTATE({k:"system",v:[]})},getFilterCount:function(){if(0!=this.form.createtype.length&&0!=this.form.country.length){var t=this.form.country.join(","),e=this.form.sex,a=this.$route.params.id,s=this.form.createtype.join(","),i=this.form.classify.join(",");this.$store.dispatch("classifyFilterCountNoPlan",{country:t,gender:e,projectId:a,creativetype:s,classify:i})}else this.SETSTATE({k:"classifyfiltercount",v:0})},selectCountry:function(){this.getFilterCount(),this.showBidChart()},showBidChart:function(){if(0!=this.form.country.length&&this.form.actions){var t=this.form.country.join(","),e="cpi"==this.form.bid?"APP_INSTALLS":"IMPRESSIONS";this.$store.dispatch("bidGuide",{country:t,fbApplicationId:this.form.actions,billingEvent:e})}},accountToAudience:function(){if(this.form.target=[],this.form.notarget=[],0!=this.form.account.length){var t=this.form.account.join(",");this.$store.dispatch("generTargetList",{fb_account_ids:t})}else this.SETSTATE({k:"genertarget",v:[]})},moneytypeChange:function(){this.form.money=""},formatTooltip:function(t){if(65==t)return"65+"},maxbidDefault:function(){"cpi"==this.form.bid?(this.form.maxbid="0.02",this.maxbidplace="请输入竞价上限（单位：美元）"):(this.form.maxbid="",this.maxbidplace="选填"),this.showBidChart()},toSubmit:function(){console.log(this.form);var t=this,e=this.dataChecked();if(e[0]){var a=[],s=this.$createElement,i=Bo()((this.form.date[1]-this.form.date[0])/864e5);"day_budget"==this.form.moneytype&&ps()(this.form.money)>=5e3&&a.push(s("p",null,[s("span",{style:"color:#999"},"每日预算："),s("span",{style:"color:red"},"$".concat(this.form.money))])),"total_budget"==this.form.moneytype&&ps()(this.form.money)/i>=5e3&&a.push(s("p",null,[s("span",{style:"color:#999"},"总预算："),s("span",{style:"color:red"},"$".concat(this.form.money))])),"cpi"==this.form.bid&&this.form.maxbid>=50&&a.push(s("p",null,[s("span",{style:"color:#999"},"CPI出价："),s("span",{style:"color:red"},"$".concat(this.form.maxbid))])),"cpm"==this.form.bid&&this.form.maxbid>=50&&a.push(s("p",null,[s("span",{style:"color:#999"},"CPM出价："),s("span",{style:"color:red"},"$".concat(this.form.maxbid))])),a.length>0?this.$msgbox({title:"创建推广计划",message:s("div",null,[s("span",null,"确认创建此推广计划吗？")].concat(a)),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.toDispatch()}).catch(function(){}):t.toDispatch()}else Object(H["g"])(e[1])},toDispatch:function(){var t={},e={};this.form.target.forEach(function(e){var a=e.split("|"),s=a[1];t[s]||(t[s]=[]),t[s].push(a[0])}),this.form.notarget.forEach(function(t){var a=t.split("|"),s=a[1];e[s]||(e[s]=[]),e[s].push(a[0])});var a={planInfoVO:{adNum:this.form.count,applicationId:this.form.actions,bidAmount:""===this.form.maxbid?null:Bo()(100*this.form.maxbid),billingType:this.form.bid,budgetType:this.form.moneytype,country:this.form.country,createType:this.form.type,creativeNum:this.form.createcount,creativeType:this.form.createtype,dayBudget:Bo()(100*this.form.money),days:this.form.rdate,device:"itunes"==this.form.platform?this.form.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):this.form.equip.filter(function(t){return"Android_Smartphone"==t}),endMinute:this.$timeFormat(this.form.rtime[1],"HH")+":00",endTime:new Date(this.form.date[1]).getTime(),filteAttentionUser:this.form.filtrapage,filteInstalledUser:-1!=this.form.filtra.indexOf("1")?"yes":"",gender:[this.form.sex],goalBid:"",interest:this.form.interest,locales:this.form.language,maxAge:this.form.age[1],minAge:this.form.age[0],name:this.form.name,platform:this.form.platform,position:"1"==this.form.auto[0]?[]:this.form.verpla,projectId:this.$route.params.id,scheduleType:this.form.timerange,startMinute:this.$timeFormat(this.form.rtime[0],"HH")+":00",startTime:new Date(this.form.date[0]).getTime(),totalBudget:Bo()(100*this.form.money),fbAccountIds:this.form.account,includeAudiences:_e()(t),excludedAudiences:1==this.form.iftarget[0]?"":_e()(e),version:this.form.minversion,maxVersion:this.form.maxversion?this.form.maxversion:null,adsetNum:this.form.adcount,creativeStrategy:this.form.tactics,creativeClassify:this.form.classify},route:this.$router,projectid:this.$route.params.id};this.$emit("changeEdit",!0),this.$store.dispatch("createGener",{option:a})},dataChecked:function(){if(""==this.form.name)return[!1,this.msg.name];if(0==this.form.country.length)return[!1,this.msg.country];if(""==this.form.actions)return[!1,this.msg.actions];if(""==this.form.platform)return[!1,this.msg.platform];if(""==this.form.minversion)return[!1,this.msg.version];if(""==this.form.money)return[!1,this.msg.money];if("total_budget"==this.form.moneytype){if(!this.form.date||0==this.form.date.length)return[!1,this.msg.date];if("schedule"==this.form.timerange&&0==this.form.rdate.length)return[!1,this.msg.rdate]}return 0==this.form.equip.filter(function(t){return t}).length?[!1,this.msg.equip]:0==this.form.auto.length&&0==this.form.verpla.length?[!1,this.msg.verpla]:"cpi"==this.form.bid&&""==this.form.maxbid?[!1,this.msg.maxbid]:""!=this.form.maxbid&&(isNaN(Bo()(this.form.maxbid))||this.form.maxbid<.02)?[!1,this.msg.maxbidmax]:-1!=this.form.filtra.indexOf("2")&&0==this.form.filtrapage.length?[!1,this.msg.filtrapage]:"auto"==this.form.type&&0==this.form.createtype.length?[!1,this.msg.createtype]:[!0]},toGetsystem:function(){var t="itunes"==this.form.platform?"ios":"android";this.form.minversion="",this.form.maxversion="",this.$store.dispatch("getSystem",{os:t})},countChange:function(){},adcountChange:function(){},createcountChange:function(){}})},Sl=xl,Al=(a("d97f"),Object(E["a"])(Sl,yl,kl,!1,null,"7606f27f",null)),jl=Al.exports,Dl={beforeRouteLeave:function(t,e,a){this.ifcreate?a():this.$confirm("是否确定离开当前页面","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},data:function(){return{status:!1,status1:!1,ifcreate:!0}},components:{GenerForm:jl,BreadCrumb:kr},created:function(){this.SETSTATE({k:"classifyfiltercount",v:0})},mounted:function(){this.$store.dispatch("otherCountries"),this.$store.dispatch("getLanguage"),this.$store.dispatch("getInterests");var t=this.$route.params.id;this.$store.dispatch("commonPage",{project_id:t}),this.$store.dispatch("commonApp",{project_id:t});var e=this.$route.params.id;this.$store.dispatch("commonAccount",{project_id:e}),this.$store.dispatch("getClassifyForPlan",e)},computed:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{changeEdit:function(t){this.ifcreate=t},cancelAddbm:function(t){this[t]=!1}})},Ml=Dl,Pl=(a("20e2"),Object(E["a"])(Ml,gl,bl,!1,null,"1bb4f100",null)),Ll=Pl.exports,Rl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan"},[a("bread-crumb",{attrs:{pageName:"推广计划管理"}}),a("div",{staticClass:"ctrlbutton"},[a("el-dropdown",{staticClass:"select",attrs:{"split-button":"",type:"primary"}},[t._v("\n      创建\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"tocreate"},[a("router-link",{attrs:{to:"/project/"+t.$route.params.id+"/gener/2"}},[t._v("智能推广计划")])],1),a("el-dropdown-item",{staticClass:"tocreate"},[a("router-link",{attrs:{to:"/project/"+t.$route.params.id+"/gener/1"}},[t._v("通用推广计划")])],1)],1)],1),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索计划ID/名称","suffix-icon":"el-icon-search"},on:{input:t.createSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("el-select",{staticClass:"selectr",attrs:{placeholder:"平台"},on:{change:t.toSort},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.platform,function(t){return a("el-option",{key:t.id,attrs:{label:t.marketType,value:t.marketType}})}),1),a("el-select",{staticClass:"selectr",attrs:{placeholder:"国家"},on:{change:t.toSort},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.plancountry,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1)],1),a("div",{staticClass:"list",attrs:{id:"PlanList"}},[a("plan-list",{on:{showCreatelogBox:t.showCreatelogBox,showLogdetailbox:t.showLogdetailbox,showChangebox:t.showChangebox,showCreatebox:t.showCreatebox,showAccountbox:t.showAccountbox}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.pltotal,"page-size":t.plpagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),a("change-price",{attrs:{status:t.status,manageid:t.manageid,goalBid:t.goalBid},on:{cancelAddbm:t.cancelAddbm}}),a("select-create",{attrs:{status:t.status1,id:t.createid},on:{cancelAddbm:t.cancelAddbm,showCreatebox:t.showCreatebox}}),a("auto-select",{attrs:{status:t.status2,id:t.createid},on:{cancelAddbm:t.cancelAddbm}}),a("select-account",{attrs:{status:t.status3,id:t.accoundid},on:{cancelAddbm:t.cancelAddbm}}),a("log-detail",{attrs:{status:t.status4},on:{cancelAddbm:t.cancelAddbm}}),a("log-create",{attrs:{status:t.status5,id:t.createlogid,name:t.createlogname},on:{cancelAddbm:t.cancelAddbm,showLogdetailbox:t.showLogdetailbox}})],1)},Nl=[],Ul=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"创建广告",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"120px"}},[a("p",{staticClass:"loginfo"},[t._v(t._s(t.logcreateaccount)+"个广告账户各包含"+t._s(t.logcreatecampaign)+"个广告系列，每个广告系列包含"+t._s(t.logcreateset)+"个广告组，每个广告组包含"+t._s(t.logcreatecreative)+"个创意；"),a("br"),t._v("创建广告前请同步创意，不会使用停用的广告账户和创意创建广告")]),a("el-form-item",{staticClass:"cline",attrs:{label:"广告系列名称"}},[a("el-input",{staticClass:"accountinput",attrs:{placeholder:"请输入广告系列名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("span",[t._v(t._s(t.time))])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSave}},[t._v("创建广告")])],1)],1)},$l=[],Bl={props:["status","id","name"],components:{},data:function(){return{state:"",activeIndex:"1",dialogFormVisible:!1,title:"",form:{name:""},value:"",value2:""}},watch:{status:function(t,e){this.dialogFormVisible=t;var a=this.id;t&&this.$store.dispatch("getCreateNum",a)},name:function(t,e){this.form.name=t}},computed:Object(D["a"])({},Object(M["d"])(["logcreatecreative","logcreateaccount","logcreateset","logcreatecampaign"]),{time:function(){return"_".concat(this.$timeFormat(new Date,"yyyyMMddHHmmss"))}}),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toSave:function(){var t=this;if(""!=this.form.name.trim()){var e={campaignName:this.form.name+this.time,planId:this.id,projectId:this.$route.params.id};this.$store.dispatch("createLogad",{option:e}),this.dialogFormVisible=!1,setTimeout(function(e){var a="ifadcreate",s=!0;t.SETSTATE({k:a,v:s})},300)}else Object(H["g"])("请输入广告系列名称")},toCancel:function(){this.$emit("cancelAddbm","status5")}})},Fl=Bl,Vl=(a("64fe"),Object(E["a"])(Fl,Ul,$l,!1,null,"5c75ff68",null)),Kl=Vl.exports,Wl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:t.logdetailname+"创建详情",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("p",{staticClass:"allinfo"},[t._v("已成功创建\n      "),a("span",[t._v(t._s(t.detailcampaignsuccess))]),t._v("个广告系列，\n      "),a("span",[t._v(t._s(t.detailsetsuccess))]),t._v("个广告组，\n      "),a("span",[t._v(t._s(t.detailadsuccess))]),t._v("个广告\n      "),a("span",{staticClass:"see"},[a("router-link",{attrs:{to:"/project/"+t.$route.params.id+"/ad/"+t.logdetailid}},[t._v("查看")])],1)]),t._l(t.logdetail,function(e,s){return a("div",{key:s,staticClass:"listall"},[a("p",{staticClass:"infotop"},[t._v("账户ID："+t._s(e.fb_account_id.split("_")[1])+" 账户名称："+t._s(e.adaccountName))]),a("div",{class:{stepline:!0,process1:e.statuskey1,process2:e.statuskey2,process3:e.statuskey3}},[a("p",{staticClass:"spline"}),a("div",{staticClass:"step step1"},[a("p",{staticClass:"sicon"},[a("span",[t._v("1")])]),a("p",{staticClass:"stitle"},[t._v("创建广告系列")]),a("p",{staticClass:"sdetail"},[t._v("成功"+t._s(e.campaignDetail.createSuccess)+"个 失败"+t._s(e.campaignDetail.createFailed)+"个\n            "),e.campaignDetail.errorMsg.length>0?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.campaignDetail.errorMsg.join("<br/>"))},slot:"content"}),a("i",{staticClass:"el-icon-warning"})]):t._e()],1)]),a("div",{staticClass:"step step2"},[a("p",{staticClass:"sicon"},[a("span",[t._v("2")])]),a("p",{staticClass:"stitle"},[t._v("创建广告组")]),a("p",{staticClass:"sdetail"},[t._v("成功"+t._s(e.adsetDetail.createSuccess)+"个 失败"+t._s(e.adsetDetail.createFailed)+"个\n            "),e.adsetDetail.errorMsg.length>0?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.adsetDetail.errorMsg.join("<br/>"))},slot:"content"}),a("i",{staticClass:"el-icon-warning"})]):t._e()],1)]),a("div",{staticClass:"step step3"},[a("p",{staticClass:"sicon"},[a("span",[t._v("3")])]),a("p",{staticClass:"stitle"},[t._v("创建广告")]),a("p",{staticClass:"sdetail"},[t._v("成功"+t._s(e.adDetail.createSuccess)+"个 失败"+t._s(e.adDetail.createFailed)+"个\n            "),e.adDetail.errorMsg.length>0?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.adDetail.errorMsg.join("<br/>"))},slot:"content"}),a("i",{staticClass:"el-icon-warning"})]):t._e()],1)])])])})],2)],1)},zl=[],Gl={props:["status"],data:function(){return{dialogFormVisible:!1,form:{money:""}}},computed:Object(D["a"])({},Object(M["d"])(["logdetail","logdetailname","logdetailid"]),Object(M["b"])(["detailadsuccess","detailsetsuccess","detailcampaignsuccess"])),mounted:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toCancel:function(){var t="logdetail",e=[];this.SETSTATE({k:t,v:e}),t="logdetailname",e="",this.SETSTATE({k:t,v:e}),t="logdetailid",e="",this.SETSTATE({k:t,v:e}),t="ifadcreate",e=!1,this.SETSTATE({k:t,v:e})}}),watch:{status:function(t,e){var a=this;this.dialogFormVisible=t,t?rundetail=setInterval(function(){a.$store.dispatch("getLogdetail")},2e3):clearInterval(rundetail)}}},Hl=Gl,ql=(a("3458"),Object(E["a"])(Hl,Wl,zl,!1,null,"4274c424",null)),Jl=ql.exports,Yl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"选择广告账户",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("div",{staticClass:"set"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelectNav}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("加入")]),a("el-menu-item",{attrs:{index:"2"}},[t._v("未加入")])],1),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索广告账户ID/名称","suffix-icon":"el-icon-search"},on:{input:t.createSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("div",{staticClass:"sortline"},[a("p",{staticClass:"total"},[t._v("已选\n        "),a("span",[t._v(t._s(t.selectaccountlength))]),t._v(" 个广告账户，其中\n        "),a("span",[t._v(t._s(t.canselectaccountlength))]),t._v(" 个不可用(不生成广告)，\n        "),a("span",[t._v(t._s(t.badselectaccountlength))]),t._v(" 个异常(不生成广告)")]),1==t.activeIndex?a("el-select",{staticClass:"select",attrs:{placeholder:"启用/停用"},on:{change:t.statusChange},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):t._e(),1==t.activeIndex?a("el-button",{staticClass:"obutton",attrs:{type:"text"},on:{click:t.cancelAll}},[t._v("删除全部")]):t._e(),2==t.activeIndex?a("el-button",{staticClass:"obutton",attrs:{type:"text"},on:{click:t.selectAll}},[t._v("选择全部")]):t._e()],1)],1),1==t.activeIndex?a("account-on",{attrs:{pid:t.id,id:"accountOn"}}):t._e(),2==t.activeIndex?a("account-off",{attrs:{pid:t.id}}):t._e()],1)},Xl=[],Zl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"400",data:t.inuseaccount}},[a("el-table-column",{attrs:{prop:"fbAccountId",label:"账户ID",width:"160"}}),a("el-table-column",{attrs:{prop:"name",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"balance",label:"账户余额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    $"+t._s(e.row.balance)+"\n                ")])]}}])}),a("el-table-column",{attrs:{prop:"accountStatus",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(1==e.row.accountStatus?"正常":"异常")+"\n                ")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"启用/停用",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(0==e.row.status?"已停用":"已启用")+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toCancel(e.row.fbId)}}},[t._v("删除")])]}}])})],1)],1)},Ql=[],tu={props:["pid"],computed:Object(D["a"])({},Object(M["b"])(["inuseaccount"])),methods:Object(D["a"])({},Object(M["c"])(["CANCELCREATE"]),{toCancel:function(t){var e=[],a={fbAccountId:t,planId:this.pid};e.push(a),this.$store.dispatch("delAccount",{option:e})}})},eu=tu,au=(a("4b38"),Object(E["a"])(eu,Zl,Ql,!1,null,"011eff72",null)),su=au.exports,iu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"400",data:t.nouseaccount}},[a("el-table-column",{attrs:{prop:"fbAccountId",label:"账户ID",width:"160"}}),a("el-table-column",{attrs:{prop:"name",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"balance",label:"账户余额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    $"+t._s(e.row.balance)+"\n                ")])]}}])}),a("el-table-column",{attrs:{prop:"accountStatus",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(1==e.row.accountStatus?"正常":"异常")+"\n                ")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"启用/停用",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(0==e.row.status?"已停用":"已启用")+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:1!=e.row.accountStatus,type:"text",size:"small"},on:{click:function(a){t.toSelect(e.row.fbId,e.row.status)}}},[t._v("添加")])]}}])})],1)],1)},nu=[],ou={props:["pid"],computed:Object(D["a"])({},Object(M["b"])(["nouseaccount"])),methods:Object(D["a"])({},Object(M["c"])(["SELECTCREATE"]),{toSelect:function(t,e){var a=[],s={fbAccountId:t,planId:this.pid,accountStatus:e};a.push(s),this.$store.dispatch("addAccount",{option:a})}})},ru=ou,cu=(a("d0ea"),Object(E["a"])(ru,iu,nu,!1,null,"18e4869c",null)),lu=cu.exports,uu={props:["status","id"],components:{AccountOn:su,AccountOff:lu},data:function(){return{state:"",activeIndex:"1",dialogFormVisible:!1,title:"",options:[{value:"1",label:"已启用"},{value:"0",label:"未启用"}],value:"",value2:""}},watch:{status:function(t,e){this.dialogFormVisible=t;var a=this.id,s="accountOn";if(1==t)this.$store.dispatch("getAccountList",{plan_id:a,loadDom:s});else{this.state="";var i="accountkeyword",n="";this.SETSTATE({k:i,v:n})}},id:function(t,e){if(t);}},computed:Object(D["a"])({},Object(M["d"])(["inuseaccount","nouseaccount"]),Object(M["b"])(["selectaccountlength","canselectaccountlength","badselectaccountlength"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toAutoSelect:function(){this.$emit("showCreatebox","status2",this.id),this.dialogFormVisible=!1},selectAll:function(){var t=this,e=[];this.nouseaccount.forEach(function(a){var s={fbAccountId:a.fbId,planId:t.id,accountStatus:a.status};e.push(s)}),this.$store.dispatch("addAccount",{option:e})},cancelAll:function(){var t=this,e=[];this.inuseaccount.forEach(function(a){var s={fbAccountId:a.fbId,planId:t.id};e.push(s)}),this.$store.dispatch("delAccount",{option:e})},statusChange:function(){var t="accountstatus",e=this.value2;this.SETSTATE({k:t,v:e})},createSearch:function(){var t="accountkeyword",e=this.state;this.SETSTATE({k:t,v:e})},handleSelectNav:function(t){t!=this.activeIndex&&(console.log(t),this.activeIndex=t)},toCancel:function(){this.$emit("cancelAddbm","status3")},selectChange:function(){}})},du=uu,mu=(a("98ee"),Object(E["a"])(du,Yl,Xl,!1,null,"73ca6552",null)),pu=mu.exports,fu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog autodialog",attrs:{title:"智能选择",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"创意类型"}},[a("el-checkbox-group",{on:{change:t.getFilterCount},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-checkbox",{attrs:{label:"0",name:"type"}},[t._v("单图片")]),a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("单视频")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[t._v("轮播")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"选择分类"}},[a("el-select",{staticClass:"accountinput",attrs:{multiple:"",placeholder:"选填，为空则不限制分类"},on:{change:t.getFilterCount},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}},t._l(t.classifyforplan,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"创意数量"}},[a("el-input",{staticClass:"accountinput",attrs:{placeholder:"最多不超过2000"},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}}),a("p",{staticClass:"tip"},[t._v("符合条件的创意总数为："+t._s(t.classifyfiltercount))])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"选择策略"}},[a("el-radio-group",{model:{value:t.form.tactics,callback:function(e){t.$set(t.form,"tactics",e)},expression:"form.tactics"}},[a("el-radio",{attrs:{label:"1"}},[t._v("新创意优先")]),a("el-radio",{attrs:{label:"2"}},[t._v("完全随机")]),a("el-radio",{attrs:{label:"3"}},[t._v("高点击率优先")]),a("el-radio",{attrs:{label:"4"}},[t._v("视频/图片不同优先")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不同策略会选到不同的创意，请根据需求选择合适的策略",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSave}},[t._v("确 定")])],1)],1)},hu=[],_u={props:["status","id"],components:{},data:function(){return{state:"",activeIndex:"1",dialogFormVisible:!1,title:"",form:{type:[],count:"",tactics:"1",classify:[]},value:"",value2:""}},watch:{status:function(t,e){this.dialogFormVisible=t,t&&(this.SETSTATE({k:"classifyfiltercount",v:0}),this.$store.dispatch("getClassifyForPlan",this.$route.params.id))}},computed:Object(D["a"])({},Object(M["d"])(["classifyforplan","classifyfiltercount"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{getFilterCount:function(){if(0!=this.form.type.length){var t=this.id,e=this.form.type.join(","),a=this.form.classify.join(",");this.$store.dispatch("classifyFilterCount",{planid:t,creativetype:e,classify:a})}else this.SETSTATE({k:"classifyfiltercount",v:0})},reset:function(){this.form.type=[],this.form.count="",this.form.tactics="1",this.form.classify=[]},toSave:function(){if(0!=this.form.type.length)if(""!=this.form.count)if(Bo()(this.form.count)>2e3)Object(H["g"])("创意数量最多为2000");else{var t=this.id,e=this.form.type.join(","),a=Bo()(this.form.count),s=this.form.tactics,i=this.form.classify.join(",");this.$store.dispatch("autoSelect",{plan_id:t,creative_type:e,creative_num:a,creative_strategy:s,creative_classify:i}),this.dialogFormVisible=!1}else Object(H["g"])("请输入创意数量");else Object(H["g"])("请选择创意类型")},toCancel:function(){this.SETSTATE({k:"classifyfiltercount",v:0}),this.$emit("cancelAddbm","status2"),this.reset()}})},vu=_u,gu=(a("2f47"),a("1351"),Object(E["a"])(vu,fu,hu,!1,null,"91db01a0",null)),bu=gu.exports,yu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"选择创意",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("div",{staticClass:"set"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelectNav}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("已选")]),a("el-menu-item",{attrs:{index:"2"}},[t._v("未选")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:t.toAutoSelect}},[t._v("智能选择")]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索创意ID","suffix-icon":"el-icon-search"},on:{input:t.createSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("div",{staticClass:"sortline"},[a("p",{staticClass:"total"},[t._v("\n        已选\n        "),a("span",[t._v(t._s(t.inusetotal))]),t._v(" 个创意，其中\n        "),a("span",[t._v(t._s(t.canselectcreatelength))]),t._v(" 个不可用（不生成广告）\n      ")]),1==t.activeIndex?a("el-select",{staticClass:"select",attrs:{placeholder:"启用/停用"},on:{change:t.statusChange},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):t._e(),a("el-select",{staticClass:"select",attrs:{placeholder:"分类"},on:{change:t.classifyChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.classify,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),1==t.activeIndex?a("el-button",{staticClass:"obutton",attrs:{type:"text"},on:{click:t.cancelAll}},[t._v("删除全部")]):t._e(),2==t.activeIndex?a("el-button",{staticClass:"obutton",attrs:{type:"text"},on:{click:t.selectAll}},[t._v("选择全部")]):t._e()],1)],1),1==t.activeIndex?a("plan-on",{attrs:{id:"planon",pid:t.id}}):t._e(),2==t.activeIndex?a("plan-off",{attrs:{pid:t.id}}):t._e()],1)},ku=[],Eu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.inusecreate,height:"400"}},[a("el-table-column",{attrs:{prop:"id",label:"创意ID",width:"80"}}),a("el-table-column",{attrs:{prop:"creativityText",label:"文本"}}),a("el-table-column",{attrs:{prop:"creativityTypeName",label:"类型",width:"100"}}),a("el-table-column",{attrs:{prop:"picture",label:"缩略图",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.img,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"classify",label:"分类",width:"160"}}),a("el-table-column",{attrs:{prop:"status",label:"启用/停用",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(0==e.row.status?"已停用":"已启用")+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toCancel(e.row.id)}}},[t._v("取消")])]}}])})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.inusetotal,"page-size":20},on:{"current-change":t.pageSwitch}})],1)],1)},Cu=[],Ou={props:["pid"],data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["inusecreate","inusetotal"])),watch:{},methods:Object(D["a"])({},Object(M["c"])(["CANCELCREATE"]),{toCancel:function(t){var e=[],a={creativeId:t,planId:this.pid};e.push(a),this.$store.dispatch("delCreate",{option:e})},pageSwitch:function(t){var e=this.pid,a=t;this.$store.dispatch("getInuseCreate",{plan_id:e,pageIndex:a})}})},wu=Ou,Iu=(a("bf98"),Object(E["a"])(wu,Eu,Cu,!1,null,"18c086b0",null)),Tu=Iu.exports,xu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.nousecreate,height:"400"}},[a("el-table-column",{attrs:{prop:"id",label:"创意ID",width:"80"}}),a("el-table-column",{attrs:{prop:"creativityText",label:"文本"}}),a("el-table-column",{attrs:{prop:"creativityTypeName",label:"类型",width:"100"}}),a("el-table-column",{attrs:{prop:"picture",label:"缩略图",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.img,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"classify",label:"分类",width:"160"}}),a("el-table-column",{attrs:{prop:"status",label:"启用/停用",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                    "+t._s(0==e.row.status?"已停用":"已启用")+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toSelect(e.row.id,e.row.status)}}},[t._v("选择")])]}}])})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.nousetotal,"page-size":20},on:{"current-change":t.pageSwitch}})],1)],1)},Su=[],Au={props:["pid"],computed:Object(D["a"])({},Object(M["d"])(["nousecreate","nousetotal"])),methods:Object(D["a"])({},Object(M["c"])(["SELECTCREATE"]),{toSelect:function(t,e){var a=[],s={creativeId:t,planId:this.pid,creativeStatus:e};a.push(s),this.$store.dispatch("addCreate",{option:a})},pageSwitch:function(t){var e=this.pid,a=t;this.$store.dispatch("getNouseCreate",{plan_id:e,pageIndex:a})}})},ju=Au,Du=(a("4c10"),Object(E["a"])(ju,xu,Su,!1,null,"325e2c94",null)),Mu=Du.exports,Pu={props:["status","id"],components:{PlanOn:Tu,PlanOff:Mu},data:function(){return{state:"",activeIndex:"1",dialogFormVisible:!1,title:"",options:[{value:"1",label:"已启用"},{value:"0",label:"未启用"}],value:"",value2:""}},watch:{status:function(t,e){this.dialogFormVisible=t;var a=this.id,s="planon";1==t&&(this.$store.dispatch("getInuseCreate",{plan_id:a,loadDom:s}),this.$store.dispatch("getNouseCreate",{plan_id:a}))},id:function(t,e){if(t);}},computed:Object(D["a"])({},Object(M["d"])(["classify","nousecreate","inusecreate","inusetotal"]),Object(M["b"])(["selectcreatelength","canselectcreatelength"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toAutoSelect:function(){var t=this;this.dialogFormVisible=!1,setTimeout(function(e){t.$emit("showCreatebox","status2",t.id)},300)},selectAll:function(){this.$store.dispatch("addAllCreate",{planId:this.id})},cancelAll:function(){this.$store.dispatch("delAllCreate",{planId:this.id})},statusChange:function(){var t="plcreatestatus",e=this.value2;this.SETSTATE({k:t,v:e}),this.toGetlist()},classifyChange:function(){var t="plcreateclassify",e="不限"==this.value?"":this.value;this.SETSTATE({k:t,v:e}),this.toGetlist()},createSearch:function(){var t="plcreatekeyword",e=this.state,a=this;this.SETSTATE({k:t,v:e}),clearTimeout(r),r=setTimeout(function(){a.toGetlist()},300)},toGetlist:function(){var t=this.id;this.$store.dispatch("getInuseCreate",{plan_id:t}),this.$store.dispatch("getNouseCreate",{plan_id:t})},handleSelectNav:function(t){t!=this.activeIndex&&(console.log(t),this.activeIndex=t)},toCancel:function(){this.reset(),this.$emit("cancelAddbm","status1")},reset:function(){this.state="",this.value="",this.value2="",this.activeIndex="1",this.SETSTATE({k:"plcreatestatus",v:""}),this.SETSTATE({k:"plcreateclassify",v:""}),this.SETSTATE({k:"plcreatekeyword",v:""})}})},Lu=Pu,Ru=(a("fe4d"),Object(E["a"])(Lu,yu,ku,!1,null,"ce8c0138",null)),Nu=Ru.exports,Uu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.planlist}},[a("el-table-column",{attrs:{prop:"id",label:"计划ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"计划名称","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"nametip"},["auto"!=e.row.createType?a("span",{staticClass:"commonline"},[t._v("通用")]):a("span",{staticClass:"autoline"},[t._v("智能")]),t._v("\n        "+t._s(e.row.name)+"\n      ")])]}}])}),a("el-table-column",{attrs:{prop:"country",label:"国家",width:"100"}}),a("el-table-column",{attrs:{prop:"platform",label:"平台",width:"120"}}),a("el-table-column",{attrs:{prop:"creativeNum",label:"创意",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return["auto"!=e.row.createType?a("el-button",{attrs:{type:"text"},on:{click:function(a){t.toSelectcreate(e.row.id)}}},[t._v(t._s(e.row.creativeNum))]):a("span",[t._v("--")])]}}])}),a("el-table-column",{attrs:{prop:"goalBid",label:"目标出价($)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.toGiveprice(e.row.id,e.row.goalBid?e.row.goalBid/100:"")}}},[t._v(t._s(e.row.goalBid?e.row.goalBid/100:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"adaccountNum",label:"广告账户",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.toSelectaccount(e.row.id)}}},[t._v(t._s(e.row.adaccountNum))])]}}])}),a("el-table-column",{attrs:{prop:"createAmount",label:"创建记录",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"click",placement:"top",width:"600"}},[a("el-table",{attrs:{id:"createList"+e.row.id,data:t.loglist,height:"250"}},[a("el-table-column",{attrs:{property:"campaignName",label:"创建记录"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"campaignName",on:{click:function(a){t.toLogDetail(e.row.id,e.row.campaignName)}}},[t._v(t._s(e.row.campaignName))])]}}])}),a("el-table-column",{attrs:{width:"100",property:"createTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timeFormat")(e.row.createTime,"yyyy-MM-dd")))])]}}])}),a("el-table-column",{attrs:{width:"140",property:"creator",label:"创建人"}}),a("el-table-column",{attrs:{width:"60",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toLogDetail(e.row.id,e.row.campaignName)}}},[t._v("详情")])]}}])})],1),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){t.getLogid(e.row.id)}},slot:"reference"},[t._v(t._s(e.row.createAmount))])],1)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.editReset}},[a("router-link",{staticClass:"edit",attrs:{to:"/project/"+t.$route.params.id+"/edit/"+e.row.id}},[t._v("编辑")])],1),"auto"!=e.row.createType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.syncCreate(e.row.id,e.row.creativeNum)}}},[t._v("\n          同步创意\n        ")]):t._e()],1),a("p",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.editReset}},[a("router-link",{staticClass:"edit",attrs:{to:"/project/"+t.$route.params.id+"/copy/"+e.row.id}},[t._v("复制")])],1),"auto"!=e.row.createType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toCreateLog(e.row.id,e.row.adaccountNum,e.row.creativeNum,e.row.name)}}},[t._v("创建广告")]):t._e(),"auto"==e.row.createType?a("el-switch",{staticClass:"switch",attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#d7dae2"},on:{change:function(a){t.toOpenClose(e.row.id,e.row.status)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}}):t._e()],1)]}}])})],1)},$u=[],Bu={data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["planlist","loglist"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{syncCreate:function(t,e){var a=!0;0!=e?(Object(H["b"])("创意同步",'创意同步中... <a class="synctodetail" href="#/project/'.concat(this.$route.params.id,'/sync">查看详情</a>'),a),this.$store.dispatch("syncCreate",{planid:t,createnum:e,projectId:this.$route.params.id})):Object(H["g"])("请选择创意")},toOpenClose:function(t,e){var a=[];a.push(t),"0"==e?this.$store.dispatch("closePlan",{option:a}):this.$store.dispatch("openPlan",{option:a})},toGiveprice:function(t,e){this.$emit("showChangebox","status",t,e)},toSelectcreate:function(t){this.$emit("showCreatebox","status1",t)},toSelectaccount:function(t){this.$emit("showAccountbox","status3",t)},toCreateLog:function(t,e,a,s){a<=0?Object(H["g"])("请先同步创意"):e<=0?Object(H["g"])("请先同步广告账户"):this.$emit("showCreatelogBox","status5",t,s)},getLogid:function(t){var e=t,a="createList"+t;this.$store.dispatch("getLog",{plan_id:e,loadDom:a})},toLogDetail:function(t,e){var a="logdetailid",s=t;this.SETSTATE({k:a,v:s}),a="logdetailname",s=e,this.SETSTATE({k:a,v:s}),a="ifadcreate",s=!0,this.SETSTATE({k:a,v:s}),this.$store.dispatch("getLogdetail")},editReset:function(t,e){var a="disinfo",s=[];this.SETSTATE({k:a,v:s})}})},Fu=Bu,Vu=(a("d2c4"),a("a614"),Object(E["a"])(Fu,Uu,$u,!1,null,"4a02abf8",null)),Ku=Vu.exports,Wu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"调整目标出价",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"目标出价"}},[a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:"可为空"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1),a("p",{staticClass:"tip"},[t._v("为空则涉及到目标出价的规则对此推广计划无效，调整后目标出价将适用于此推广计划下所有广告")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.toSave}},[t._v("确 定")])],1)],1)},zu=[],Gu={props:["status","manageid","goalBid"],data:function(){return{dialogFormVisible:!1,form:{money:""}}},methods:{toCancel:function(){this.$emit("cancelAddbm","status")},toSave:function(){var t=100*this.form.money,e=this.manageid;this.$store.dispatch("changePrice",{goalBid:t,planId:e}),this.dialogFormVisible=!1,this.form.money=""}},watch:{status:function(t,e){this.dialogFormVisible=t,t&&(this.form.money=this.goalBid)}}},Hu=Gu,qu=(a("0f46"),Object(E["a"])(Hu,Wu,zu,!1,null,"876dd2e4",null)),Ju=qu.exports,Yu={components:{PlanList:Ku,ChangePrice:Ju,SelectCreate:Nu,AutoSelect:bu,SelectAccount:pu,LogDetail:Jl,LogCreate:Kl,BreadCrumb:kr},beforeRouteLeave:function(t,e,a){this.SETSTATE({k:"ifadcreate",v:!1}),clearInterval(rundetail),a()},data:function(){return{state:"",value:"",value2:"",manageid:"",goalBid:0,createid:"",accoundid:"",logdetailid:"",logdetailname:"",createlogid:"",createlogname:"",pageindex:1,status:!1,status1:!1,status2:!1,status3:!1,status5:!1}},created:function(){var t={project_id:"",country:"",platform:"",keyword:"",pageIndex:1,pageSize:20};for(var e in t){var a="pl_"+e,s=t[e];this.SETSTATE({k:a,v:s})}},mounted:function(){var t="pl_project_id",e=this.$route.params.id;if(this.SETSTATE({k:t,v:e}),this.$store.dispatch("getPlanlist"),this.actions){var a=this.actions;this.$store.dispatch("getPlatform",{applicationid:a})}this.$store.dispatch("otherCountries"),this.$store.dispatch("getPlanCountry",e),this.$store.dispatch("getClassify",this.$route.params.id),this.$route.params.planid&&(this.accoundid=this.$route.params.planid,this.status3=!0)},computed:Object(D["a"])({},Object(M["d"])(["itemlist","platform","othercountries","pltotal","plpagesize","plancountry","ifadcreate"]),{status4:function(){return this.ifadcreate},projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName},projectid:function(){return this.$route.params.id},actions:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).applicationId}}),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{pageSizeChange:function(t){var e="pl_pageSize",a=t;this.SETSTATE({k:e,v:a}),this.$store.dispatch("getPlanlist")},showCreatelogBox:function(t,e,a){this[t]=!0,this.createlogid=e,this.createlogname=a},showLogdetailbox:function(t,e,a){this[t]=!0},showAccountbox:function(t,e){this[t]=!0,this.accoundid=e},showChangebox:function(t,e,a){this[t]=!0,this.manageid=e,this.goalBid=a},showCreatebox:function(t,e){this[t]=!0,this.createid=e},cancelAddbm:function(t){this[t]=!1},pageSwitch:function(t){this.pageindex=t;var e="pl_pageIndex",a=t;this.SETSTATE({k:e,v:a}),this.$store.dispatch("getPlanlist")},createSearch:function(){var t=this,e="pl_keyword",a=this.state;this.SETSTATE({k:e,v:a}),e="pl_pageIndex",a=1,this.SETSTATE({k:e,v:a}),setTimeout(function(){t.$store.dispatch("getPlanlist")},300)},toSort:function(){var t="pl_country",e="不限"==this.value2?"":this.value2;this.SETSTATE({k:t,v:e}),t="pl_platform",e="不限"==this.value?"":this.value,this.SETSTATE({k:t,v:e}),t="pl_pageIndex",e=1,this.SETSTATE({k:t,v:e}),this.$store.dispatch("getPlanlist")}}),watch:{actions:function(t,e){if(t){var a=t;this.$store.dispatch("getPlatform",{applicationid:a})}},projectid:function(t,e){if(""!=t){var a="pl_project_id",s=t;if(this.SETSTATE({k:a,v:s}),this.SETSTATE({k:"planlist",v:[]}),this.$store.dispatch("getPlanlist",{loading:"PlanList"}),this.actions){var i=this.actions;this.$store.dispatch("getPlatform",{applicationid:i})}this.$store.dispatch("otherCountries"),this.$store.dispatch("getPlanCountry",s),this.$store.dispatch("getClassify",s)}}}},Xu=Yu,Zu=(a("e50c"),Object(E["a"])(Xu,Rl,Nl,!1,null,"09df17c6",null)),Qu=Zu.exports,td=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gener"},[a("bread-crumb",{attrs:{pageName:"编辑推广计划"}}),t._l(t.disinfo,function(e,s){return a("edit-form",{key:s,attrs:{createinfo:e},on:{changeEdit:t.changeEdit}})})],2)},ed=[],ad=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formlist"},[a("div",{staticClass:"bidguide"},[a("gener-guide",{attrs:{bid:t.form.bid,maxbid:t.form.maxbid,moneytype:t.form.moneytype,money:t.form.money}})],1),t._m(0),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{attrs:{label:"推广计划名称"}},[a("el-input",{attrs:{placeholder:"请输入推广计划名称，用以展示在计划管理中"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"推广计划类型"}},[a("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:"manual",disabled:""}},[t._v("通用推广计划")]),a("el-radio",{attrs:{label:"auto",disabled:""}},[t._v("智能推广计划")])],1),a("span",{staticClass:"typetip1"},[t._v("需要手动创建广告和选择创意")]),a("span",{staticClass:"typetip2"},[t._v("每天11点自动选择创意并创建广告")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"广告账户"}},[a("el-select",{staticClass:"select accountselect",attrs:{multiple:"",filterable:"",placeholder:"请选择广告账户"},on:{change:t.accountToAudience},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.fbId.split("_")[1]+")",value:t.fbId,disabled:1!=t.accountStatus}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"国家"}},[a("el-select",{staticClass:"select",attrs:{disabled:"",filterable:"",multiple:"",placeholder:"请选择国家，可搜索"},on:{change:t.showBidChart},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"应用"}},[a("el-select",{staticClass:"select",attrs:{disabled:"",placeholder:"请选择应用"},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.commonapp,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.applicationId}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.actions,expression:"form.actions != ''"}],staticClass:"cline timerange",attrs:{label:"平台"}},[a("el-radio-group",{on:{change:t.toGetsystem},model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},t._l(t.createplatform,function(t){return a("el-radio",{key:t.marketType,attrs:{label:t.marketType,disabled:""}})}),1)],1)],1),t._m(1),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{staticClass:"cline",attrs:{label:"受众"}},[a("div",{staticClass:"targettip"},[t._v("定位至少符合以下一项条件的用户")]),a("el-select",{staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(s){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.notarget.indexOf(s.audienceId+"|"+e.label),expression:"form.notarget.indexOf(`${item.audienceId}|${group.label}`) == -1"}],key:s.code,attrs:{label:s.name+"（"+s.audienceId+"）",value:s.audienceId+"|"+e.label}})}),1)}),1),a("el-checkbox-group",{model:{value:t.form.iftarget,callback:function(e){t.$set(t.form,"iftarget",e)},expression:"form.iftarget"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("不排除任何受众")])],1),1!=t.form.iftarget[0]?a("div",{staticClass:"targettip"},[t._v("排除至少符合以下一项条件的用户")]):t._e(),1!=t.form.iftarget[0]?a("el-select",{staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.notarget,callback:function(e){t.$set(t.form,"notarget",e)},expression:"form.notarget"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(s){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.target.indexOf(s.audienceId+"|"+e.label),expression:"form.target.indexOf(`${item.audienceId}|${group.label}`) == -1"}],key:s.code,attrs:{label:s.name+"（"+s.audienceId+"）",value:s.audienceId+"|"+e.label}})}),1)}),1):t._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],staticClass:"cline",attrs:{label:"系统版本"}},[a("el-select",{staticClass:"selectHalf",attrs:{placeholder:"最低版本"},model:{value:t.form.minversion,callback:function(e){t.$set(t.form,"minversion",e)},expression:"form.minversion"}},t._l(t.system,function(t,e){return a("el-option",{key:e,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),t._v("\n      --\n      "),a("el-select",{staticClass:"selectHalf",attrs:{placeholder:"最高版本"},model:{value:t.form.maxversion,callback:function(e){t.$set(t.form,"maxversion",e)},expression:"form.maxversion"}},t._l(t.system,function(t,e){return a("el-option",{key:e,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),a("p",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("最高版本为空则无上限")])],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"预算"}},[a("el-radio-group",{on:{change:t.moneytypeChange},model:{value:t.form.moneytype,callback:function(e){t.$set(t.form,"moneytype",e)},expression:"form.moneytype"}},[a("el-radio",{attrs:{label:"day_budget"}},[t._v("单日预算")]),a("el-radio",{attrs:{label:"total_budget"}},[t._v("总预算")])],1),a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:"请输入预算金额（单位：美元）"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype,expression:"form.moneytype == 'total_budget'"}],attrs:{label:"投放日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype,expression:"form.moneytype == 'total_budget'"}],staticClass:"cline timerange",attrs:{label:"投放时段"}},[a("el-radio-group",{model:{value:t.form.timerange,callback:function(e){t.$set(t.form,"timerange",e)},expression:"form.timerange"}},[a("el-radio",{attrs:{label:"allday"}},[t._v("全天投放广告")]),a("el-radio",{attrs:{label:"schedule"}},[t._v("分时间段投放")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"schedule"==t.form.timerange,expression:"form.timerange == 'schedule'"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"selectsmall",attrs:{multiple:"",placeholder:"按广告受众所在时区"},model:{value:t.form.rdate,callback:function(e){t.$set(t.form,"rdate",e)},expression:"form.rdate"}},t._l(t.week,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.key}})}),1),a("el-time-picker",{staticClass:"timeselect",attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.form.rtime,callback:function(e){t.$set(t.form,"rtime",e)},expression:"form.rtime"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],attrs:{label:"设备"}},[a("el-checkbox-group",{model:{value:t.form.equip,callback:function(e){t.$set(t.form,"equip",e)},expression:"form.equip"}},["google_play"==t.form.platform?a("el-checkbox",{attrs:{label:"Android_Smartphone",name:"type"}},[t._v("安卓智能手机")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPhone",name:"type"}},[t._v("iPhone")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPad",name:"type"}},[t._v("iPad")]):t._e()],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"性别"}},[a("el-radio-group",{on:{change:t.getFilterCount},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("全部")]),a("el-radio",{attrs:{label:"1"}},[t._v("男")]),a("el-radio",{attrs:{label:"2"}},[t._v("女")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"年龄"}},[a("el-slider",{attrs:{range:"",min:13,max:65,"format-tooltip":t.formatTooltip},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"语言"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择语言，可搜索"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},t._l(t.language,function(t){return a("el-option",{key:t.localeId,attrs:{label:t.name,value:t.localeId.toString()}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"兴趣"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择兴趣，可搜索"},model:{value:t.form.interest,callback:function(e){t.$set(t.form,"interest",e)},expression:"form.interest"}},t._l(t.interests,function(t){return a("el-option",{key:t.featureId,attrs:{label:t.name,value:t.featureId}})}),1)],1),a("el-form-item",{attrs:{label:"自动版位"}},[a("el-checkbox-group",{model:{value:t.form.auto,callback:function(e){t.$set(t.form,"auto",e)},expression:"form.auto"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("是（Facebook自动选择最好的版位）")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=t.form.auto[0],expression:"form.auto[0] != 1"}],staticClass:"verpla",attrs:{label:"版位"}},[a("el-checkbox-group",{model:{value:t.form.verpla,callback:function(e){t.$set(t.form,"verpla",e)},expression:"form.verpla"}},[a("el-checkbox",{attrs:{label:"facebook",name:"type",disabled:t.form.verpla&&(-1!=t.form.verpla.indexOf("audience_network")||-1!=t.form.verpla.indexOf("messenger"))}},[t._v("Facebook")]),a("el-checkbox",{attrs:{label:"instagram",name:"type"}},[t._v("Instagram")]),a("el-checkbox",{attrs:{label:"audience_network",name:"type",disabled:t.form.verpla&&-1==t.form.verpla.indexOf("facebook")}},[t._v("Audience Network")]),a("el-checkbox",{attrs:{label:"messenger",name:"type",disabled:t.form.verpla&&-1==t.form.verpla.indexOf("facebook")}},[t._v("Messenger")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"出价"}},[a("el-radio-group",{on:{change:t.maxbidDefault},model:{value:t.form.bid,callback:function(e){t.$set(t.form,"bid",e)},expression:"form.bid"}},[a("el-radio",{attrs:{label:"cpi"}},[t._v("CPI")]),a("el-radio",{attrs:{label:"cpm"}},[t._v("CPM")])],1)],1),a("el-form-item",{attrs:{label:"竞价上限"}},[a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:t.maxbidplace},model:{value:t.form.maxbid,callback:function(e){t.$set(t.form,"maxbid",e)},expression:"form.maxbid"}})],1)]),a("el-form-item",{staticClass:"cline",attrs:{label:"用户过滤"}},[a("el-checkbox-group",{model:{value:t.form.filtra,callback:function(e){t.$set(t.form,"filtra",e)},expression:"form.filtra"}},[a("el-checkbox",{attrs:{label:"1",name:"filtra"}},[t._v("过滤已安装用户")]),a("el-checkbox",{attrs:{label:"2",name:"filtra"}},[t._v("过滤已关注用户")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.filtra&&-1!=t.form.filtra.indexOf("2"),expression:"form.filtra && form.filtra.indexOf('2') != -1"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"select",attrs:{multiple:"",placeholder:"请选择要过滤的主页，必选"},model:{value:t.form.filtrapage,callback:function(e){t.$set(t.form,"filtrapage",e)},expression:"form.filtrapage"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1)],1)],1),t._m(2),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{staticClass:"cline ctype",attrs:{label:"广告组数"}},[a("el-input-number",{attrs:{min:1,label:"广告组数"},model:{value:t.form.adcount,callback:function(e){t.$set(t.form,"adcount",e)},expression:"form.adcount"}}),a("div",{staticClass:"countfont"},[t._v("每个广告系列包含的广告组数量，太多也会有内部竞争影响整体效率")])],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"广告组创意数"}},[a("el-input-number",{attrs:{min:1,max:50,label:"广告组创意数"},on:{change:t.countChange},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}}),a("div",{staticClass:"countfont"},[t._v("每个广告组包含的创意数量。1-3个为佳，3个以上会有内部竞争影响整体效率")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline",attrs:{label:"创意类型"}},[a("el-checkbox-group",{on:{change:t.getFilterCount},model:{value:t.form.createtype,callback:function(e){t.$set(t.form,"createtype",e)},expression:"form.createtype"}},[a("el-checkbox",{attrs:{label:"0",name:"type"}},[t._v("单图片")]),a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("单视频")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[t._v("轮播")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline",attrs:{label:"选择分类"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",placeholder:"选填，为空则不限制分类"},on:{change:t.getFilterCount},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}},t._l(t.classifyforplan,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline ctype",attrs:{label:"创意数量"}},[a("el-input-number",{attrs:{min:1,label:"创意数量"},on:{change:t.createcountChange},model:{value:t.form.createcount,callback:function(e){t.$set(t.form,"createcount",e)},expression:"form.createcount"}}),a("div",{staticClass:"countfont"},[t._v("符合条件的创意总数为："+t._s(t.classifyfiltercount))])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline cline-strategy",attrs:{label:"选择策略"}},[a("el-radio-group",{staticClass:"strategy",model:{value:t.form.tactics,callback:function(e){t.$set(t.form,"tactics",e)},expression:"form.tactics"}},[a("el-radio",{attrs:{label:1}},[t._v("新创意优先")]),a("el-radio",{attrs:{label:2}},[t._v("完全随机")]),a("el-radio",{attrs:{label:3}},[t._v("高点击率优先")]),a("el-radio",{attrs:{label:4}},[t._v("视频/图片不同优先")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不同策略会选到不同的创意，请根据需求选择合适的策略",placement:"bottom-start"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),a("div",{staticClass:"elsubmit"},[a("el-button",{attrs:{type:"primary"},on:{click:t.sexTip}},[t._v("提 交")])],1)],1)},sd=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("基础信息")]),a("span",[t._v("推广计划保存后可编辑，也可多次生成广告")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("广告组")]),a("span",[t._v("同1个广告系列下的所有广告组的条件一致")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("结构和创意")]),a("span",[t._v("根据广告组数量、广告组创意数和创意数生成相对应的广告系列数量")])])}],id={props:["createinfo"],components:{GenerGuide:Tl},data:function(){return{dialogVisible:!1,state:"",state2:"",state3:"",week:[{name:"周一",key:1},{name:"周二",key:2},{name:"周三",key:3},{name:"周四",key:4},{name:"周五",key:5},{name:"周六",key:6},{name:"周七",key:7}],maxbidplace:"cpi"==this.createinfo.billingType?"请输入竞价上限（单位：美元）":"选填",oldsex:this.createinfo.gender?this.createinfo.gender[0]:"",form:{name:this.createinfo.name,type:this.createinfo.createType,actions:this.createinfo.applicationId,country:this.createinfo.country?this.createinfo.country:[],platform:this.createinfo.platform,target:this.createinfo.included,iftarget:this.createinfo.excludedAudiences?[]:["1"],notarget:this.createinfo.excluded,minversion:this.createinfo.version,maxversion:this.createinfo.maxVersion?this.createinfo.maxVersion:"",moneytype:this.createinfo.budgetType,money:"day_budget"==this.createinfo.budgetType?this.createinfo.dayBudget/100:this.createinfo.totalBudget/100,date:[this.createinfo.startTime?new Date(this.createinfo.startTime):new Date,this.createinfo.endTime?new Date(this.createinfo.endTime):new Date],timerange:this.createinfo.scheduleType,rdate:this.createinfo.days?this.createinfo.days:[],rtime:[new Date(2016,9,10,this.createinfo.startMinute?this.createinfo.startMinute.split(":")[0]:0,0,0),new Date(2016,9,10,this.createinfo.endMinute?this.createinfo.endMinute.split(":")[0]:23,0,0)],equip:this.createinfo.device,sex:this.createinfo.gender?this.createinfo.gender[0]:"",age:[this.createinfo.minAge,this.createinfo.maxAge],language:this.createinfo.locales?this.createinfo.locales:[],interest:this.createinfo.interest?this.createinfo.interest:[],auto:this.createinfo.position&&0==this.createinfo.position.length?["1"]:[],verpla:this.createinfo.position?this.createinfo.position:[],bid:this.createinfo.billingType,maxbid:""===this.createinfo.bidAmount||null===this.createinfo.bidAmount?"":this.createinfo.bidAmount/100,filtra:[this.createinfo.filteInstalledUser?"1":"",this.createinfo.filteAttentionUser&&this.createinfo.filteAttentionUser.length>0?"2":""],filtrapage:this.createinfo.filteAttentionUser?this.createinfo.filteAttentionUser:[],account:this.createinfo.fbAccountIds,adcount:this.createinfo.adsetNum,count:this.createinfo.adNum,createtype:this.createinfo.creativeType?this.createinfo.creativeType:[],classify:this.createinfo.creativeClassify?this.createinfo.creativeClassify:[],createcount:this.createinfo.creativeNum,tactics:this.createinfo.creativeStrategy?this.createinfo.creativeStrategy:1},msg:{name:"请输入推广计划名称",country:"请选择国家",platform:"请选择平台",version:"请选择系统版本",money:"请输入预算金额",date:"请选择投放日期",rdate:"请选择星期",equip:"请选择设备",language:"请选择语言",verpla:"请选择版位",maxbid:"请输入竞价上限",maxbidmax:"竞价上限必须大于0.02美元",filtra:"请选择用户过滤",filtrapage:"请选择需要过滤的主页",createtype:"请选择创意类型"}}},mounted:function(){if(this.form.actions){var t=this.form.actions;if(this.$store.dispatch("getCreatePlatform",{applicationid:t}),0==this.form.country.length)return;var e=this.form.country.join(","),a="cpi"==this.form.bid?"APP_INSTALLS":"IMPRESSIONS";this.$store.dispatch("bidGuide",{country:e,fbApplicationId:t,billingEvent:a})}if(this.toGetsystem(),0!=this.form.account.length){var s=this.form.account.join(",");this.$store.dispatch("generTargetList",{fb_account_ids:s}),this.getFilterCount()}else this.SETSTATE({k:"genertarget",v:[]})},computed:Object(D["a"])({},Object(M["d"])(["itemlist","othercountries","language","interests","commonapp","createplatform","system","commonpage","genertarget","commonaccount","classifyforplan","classifyfiltercount"])),watch:{"form.name":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.type":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.country":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.platform":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.target":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.notarget":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.minversion":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.maxversion":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.moneytype":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.money":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.sex":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.language":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.interest":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.bid":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.maxbid":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.filtrapage":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.account":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.count":{handler:function(t,e){this.$emit("changeEdit",!1)}}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{getFilterCount:function(){if(0!=this.form.createtype.length){var t=this.form.country.join(","),e=this.form.sex,a=this.$route.params.id,s=this.form.createtype.join(","),i=this.form.classify.join(",");this.$store.dispatch("classifyFilterCountNoPlan",{country:t,gender:e,projectId:a,creativetype:s,classify:i})}else this.SETSTATE({k:"classifyfiltercount",v:0})},showBidChart:function(){if(0!=this.form.country.length&&this.form.actions){var t=this.form.country.join(","),e="cpi"==this.form.bid?"APP_INSTALLS":"IMPRESSIONS";this.$store.dispatch("bidGuide",{country:t,fbApplicationId:this.form.actions,billingEvent:e})}},accountToAudience:function(){if(this.form.target=[],this.form.notarget=[],0!=this.form.account.length){var t=this.form.account.join(",");this.$store.dispatch("generTargetList",{fb_account_ids:t})}else this.SETSTATE({k:"genertarget",v:[]})},moneytypeChange:function(){this.form.money=""},formatTooltip:function(t){if(65==t)return"65+"},maxbidDefault:function(){"cpi"==this.form.bid?(this.form.maxbid="0.02",this.maxbidplace="请输入竞价上限（单位：美元）"):(this.form.maxbid="",this.maxbidplace="选填"),this.showBidChart()},sexTip:function(){var t=this;"manual"==this.form.type&&this.form.sex!=this.oldsex?this.$confirm("修改性别后，建议清空已选创意并重新选择，否则有使用不符合性别的创意的风险").then(function(e){t.toSubmit()}).catch(function(t){}):this.toSubmit()},toSubmit:function(){var t=this,e=this.dataChecked();if(e[0]){var a=[],s=this.$createElement,i=Bo()((this.form.date[1]-this.form.date[0])/864e5);"day_budget"==this.form.moneytype&&ps()(this.form.money)>=5e3&&a.push(s("p",null,[s("span",{style:"color:#999"},"每日预算："),s("span",{style:"color:red"},"$".concat(this.form.money))])),"total_budget"==this.form.moneytype&&ps()(this.form.money)/i>=5e3&&a.push(s("p",null,[s("span",{style:"color:#999"},"总预算："),s("span",{style:"color:red"},"$".concat(this.form.money))])),"cpi"==this.form.bid&&this.form.maxbid>=50&&a.push(s("p",null,[s("span",{style:"color:#999"},"CPI出价："),s("span",{style:"color:red"},"$".concat(this.form.maxbid))])),"cpm"==this.form.bid&&this.form.maxbid>=50&&a.push(s("p",null,[s("span",{style:"color:#999"},"CPM出价："),s("span",{style:"color:red"},"$".concat(this.form.maxbid))])),a.length>0?this.$msgbox({title:"创建推广计划",message:s("div",null,[s("span",null,"确认创建此推广计划吗？")].concat(a)),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.toDispatch()}).catch(function(){}):t.toDispatch()}else Object(H["g"])(e[1])},toDispatch:function(){var t={},e={};this.form.target.forEach(function(e){var a=e.split("|"),s=a[1];t[s]||(t[s]=[]),t[s].push(a[0])}),this.form.notarget.forEach(function(t){var a=t.split("|"),s=a[1];e[s]||(e[s]=[]),e[s].push(a[0])});var a={planInfoVO:{adNum:this.form.count,applicationId:this.form.actions,bidAmount:""===this.form.maxbid?null:Bo()(100*this.form.maxbid),billingType:this.form.bid,budgetType:this.form.moneytype,country:this.form.country,createType:this.form.type,creativeNum:this.form.createcount,creativeType:this.form.createtype,dayBudget:Bo()(100*this.form.money),days:this.form.rdate,device:"itunes"==this.form.platform?this.form.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):this.form.equip.filter(function(t){return"Android_Smartphone"==t}),endMinute:this.$timeFormat(this.form.rtime[1],"HH")+":00",endTime:new Date(this.form.date[1]).getTime(),filteAttentionUser:this.form.filtrapage,filteInstalledUser:-1!=this.form.filtra.indexOf("1")?"yes":"",gender:[this.form.sex],goalBid:"",interest:this.form.interest,locales:this.form.language,maxAge:this.form.age[1],minAge:this.form.age[0],name:this.form.name,platform:this.form.platform,position:"1"==this.form.auto[0]?[]:this.form.verpla,projectId:this.$route.params.id,scheduleType:this.form.timerange,startMinute:this.$timeFormat(this.form.rtime[0],"HH")+":00",startTime:new Date(this.form.date[0]).getTime(),totalBudget:Bo()(100*this.form.money),fbAccountIds:this.form.account,includeAudiences:_e()(t),excludedAudiences:1==this.form.iftarget[0]?"":_e()(e),version:this.form.minversion,maxVersion:this.form.maxversion?this.form.maxversion:null,planId:this.$route.params.pid,adsetNum:this.form.adcount,creativeStrategy:this.form.tactics,creativeClassify:this.form.classify},route:this.$router,projectid:this.$route.params.id};this.$emit("changeEdit",!0),this.$store.dispatch("editGener",{option:a})},dataChecked:function(){if(""==this.form.name)return[!1,this.msg.name];if(0==this.form.country.length)return[!1,this.msg.country];if(""==this.form.platform)return[!1,this.msg.platform];if(""==this.form.minversion)return[!1,this.msg.version];if(""==this.form.money)return[!1,this.msg.money];if("total_budget"==this.form.moneytype){if(!this.form.date||0==this.form.date.length)return[!1,this.msg.date];if("schedule"==this.form.timerange&&0==this.form.rdate.length)return[!1,this.msg.rdate]}return 0==this.form.equip.filter(function(t){return t}).length?[!1,this.msg.equip]:0==this.form.auto.length&&0==this.form.verpla.length?[!1,this.msg.verpla]:"cpi"==this.form.bid&&""==this.form.maxbid?[!1,this.msg.maxbid]:""!=this.form.maxbid&&(isNaN(Bo()(this.form.maxbid))||this.form.maxbid<.02)?[!1,this.msg.maxbidmax]:-1!=this.form.filtra.indexOf("2")&&0==this.form.filtrapage.length?[!1,this.msg.filtrapage]:"auto"==this.form.type&&0==this.form.createtype.length?[!1,this.msg.createtype]:[!0]},toGetsystem:function(){var t="itunes"==this.form.platform?"ios":"android";this.$store.dispatch("getSystem",{os:t})},countChange:function(){},createcountChange:function(){}})},nd=id,od=(a("7591"),Object(E["a"])(nd,ad,sd,!1,null,"67c69638",null)),rd=od.exports,cd={beforeRouteLeave:function(t,e,a){this.ifedit?a():this.$confirm("是否确定离开当前页面","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},data:function(){return{status:!1,status1:!1,ifedit:!0}},components:{EditForm:rd,BreadCrumb:kr},created:function(){this.SETSTATE({k:"classifyfiltercount",v:0})},mounted:function(){this.$store.dispatch("otherCountries"),this.$store.dispatch("getLanguage"),this.$store.dispatch("getInterests");var t=this.$route.params.id;this.$store.dispatch("commonPage",{project_id:t}),this.$store.dispatch("commonApp",{project_id:t});var e=this.$route.params.pid;this.$store.dispatch("getCreateInfo",{plan_id:e});var a=this.$route.params.id;this.$store.dispatch("commonAccount",{project_id:a}),this.$store.dispatch("getClassifyForPlan",a)},computed:Object(D["a"])({},Object(M["d"])(["disinfo"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{changeEdit:function(t){this.ifedit=t},cancelAddbm:function(t){this[t]=!1}})},ld=cd,ud=(a("6a48"),Object(E["a"])(ld,td,ed,!1,null,"0bfa303b",null)),dd=ud.exports,md=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gener"},[a("bread-crumb",{attrs:{pageName:"复制推广计划"}}),t._l(t.disinfo,function(e,s){return a("copy-form",{key:s,attrs:{createinfo:e},on:{changeEdit:t.changeEdit}})})],2)},pd=[],fd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formlist"},[a("div",{staticClass:"bidguide"},[a("gener-guide",{attrs:{bid:t.form.bid,maxbid:t.form.maxbid,moneytype:t.form.moneytype,money:t.form.money}})],1),t._m(0),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{attrs:{label:"推广计划名称"}},[a("el-input",{attrs:{placeholder:"请输入推广计划名称，用以展示在计划管理中"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"推广计划类型"}},[a("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:"manual"}},[t._v("通用推广计划")]),a("el-radio",{attrs:{label:"auto"}},[t._v("智能推广计划")])],1),a("span",{staticClass:"typetip1"},[t._v("需要手动创建广告和选择创意")]),a("span",{staticClass:"typetip2"},[t._v("每天11点自动选择创意并创建广告")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"广告账户"}},[a("el-select",{staticClass:"select accountselect",attrs:{multiple:"",filterable:"",placeholder:"请选择广告账户"},on:{change:t.accountToAudience},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.fbId.split("_")[1]+")",value:t.fbId,disabled:1!=t.accountStatus}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"国家"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择国家，可搜索"},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"应用"}},[a("el-select",{staticClass:"select",attrs:{disabled:"",placeholder:"请选择应用"},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.commonapp,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.applicationId}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.actions,expression:"form.actions != ''"}],staticClass:"cline timerange",attrs:{label:"平台"}},[a("el-radio-group",{on:{change:t.toGetsystem},model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},t._l(t.createplatform,function(t){return a("el-radio",{key:t.marketType,attrs:{label:t.marketType}})}),1)],1)],1),t._m(1),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{staticClass:"cline",attrs:{label:"受众"}},[a("div",{staticClass:"targettip"},[t._v("定位至少符合以下一项条件的用户")]),a("el-select",{staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(s){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.notarget.indexOf(s.audienceId+"|"+e.label),expression:"form.notarget.indexOf(`${item.audienceId}|${group.label}`) == -1"}],key:s.code,attrs:{label:s.name+"（"+s.audienceId+"）",value:s.audienceId+"|"+e.label}})}),1)}),1),a("el-checkbox-group",{model:{value:t.form.iftarget,callback:function(e){t.$set(t.form,"iftarget",e)},expression:"form.iftarget"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("不排除任何受众")])],1),1!=t.form.iftarget[0]?a("div",{staticClass:"targettip"},[t._v("排除至少符合以下一项条件的用户")]):t._e(),1!=t.form.iftarget[0]?a("el-select",{staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.notarget,callback:function(e){t.$set(t.form,"notarget",e)},expression:"form.notarget"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(s){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.target.indexOf(s.audienceId+"|"+e.label),expression:"form.target.indexOf(`${item.audienceId}|${group.label}`) == -1"}],key:s.code,attrs:{label:s.name+"（"+s.audienceId+"）",value:s.audienceId+"|"+e.label}})}),1)}),1):t._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],staticClass:"cline",attrs:{label:"系统版本"}},[a("el-select",{staticClass:"selectHalf",attrs:{placeholder:"最低版本"},model:{value:t.form.minversion,callback:function(e){t.$set(t.form,"minversion",e)},expression:"form.minversion"}},t._l(t.system,function(t,e){return a("el-option",{key:e,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),t._v("\n      --\n      "),a("el-select",{staticClass:"selectHalf",attrs:{placeholder:"最高版本"},model:{value:t.form.maxversion,callback:function(e){t.$set(t.form,"maxversion",e)},expression:"form.maxversion"}},t._l(t.system,function(t,e){return a("el-option",{key:e,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),a("p",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("最高版本为空则无上限")])],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"预算"}},[a("el-radio-group",{on:{change:t.moneytypeChange},model:{value:t.form.moneytype,callback:function(e){t.$set(t.form,"moneytype",e)},expression:"form.moneytype"}},[a("el-radio",{attrs:{label:"day_budget"}},[t._v("单日预算")]),a("el-radio",{attrs:{label:"total_budget"}},[t._v("总预算")])],1),a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:"请输入预算金额（单位：美元）"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype,expression:"form.moneytype == 'total_budget'"}],attrs:{label:"投放日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype,expression:"form.moneytype == 'total_budget'"}],staticClass:"cline timerange",attrs:{label:"投放时段"}},[a("el-radio-group",{model:{value:t.form.timerange,callback:function(e){t.$set(t.form,"timerange",e)},expression:"form.timerange"}},[a("el-radio",{attrs:{label:"allday"}},[t._v("全天投放广告")]),a("el-radio",{attrs:{label:"schedule"}},[t._v("分时间段投放")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"schedule"==t.form.timerange,expression:"form.timerange == 'schedule'"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"selectsmall",attrs:{multiple:"",placeholder:"按广告受众所在时区"},model:{value:t.form.rdate,callback:function(e){t.$set(t.form,"rdate",e)},expression:"form.rdate"}},t._l(t.week,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.key}})}),1),a("el-time-picker",{staticClass:"timeselect",attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.form.rtime,callback:function(e){t.$set(t.form,"rtime",e)},expression:"form.rtime"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],attrs:{label:"设备"}},[a("el-checkbox-group",{model:{value:t.form.equip,callback:function(e){t.$set(t.form,"equip",e)},expression:"form.equip"}},["google_play"==t.form.platform?a("el-checkbox",{attrs:{label:"Android_Smartphone",name:"type"}},[t._v("安卓智能手机")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPhone",name:"type"}},[t._v("iPhone")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPad",name:"type"}},[t._v("iPad")]):t._e()],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"性别"}},[a("el-radio-group",{on:{change:t.getFilterCount},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("全部")]),a("el-radio",{attrs:{label:"1"}},[t._v("男")]),a("el-radio",{attrs:{label:"2"}},[t._v("女")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"年龄"}},[a("el-slider",{attrs:{range:"",min:13,max:65,"format-tooltip":t.formatTooltip},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"语言"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择语言，可搜索"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},t._l(t.language,function(t){return a("el-option",{key:t.localeId,attrs:{label:t.name,value:t.localeId.toString()}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"兴趣"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",filterable:"",placeholder:"请选择兴趣，可搜索"},model:{value:t.form.interest,callback:function(e){t.$set(t.form,"interest",e)},expression:"form.interest"}},t._l(t.interests,function(t){return a("el-option",{key:t.featureId,attrs:{label:t.name,value:t.featureId}})}),1)],1),a("el-form-item",{attrs:{label:"自动版位"}},[a("el-checkbox-group",{model:{value:t.form.auto,callback:function(e){t.$set(t.form,"auto",e)},expression:"form.auto"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("是（Facebook自动选择最好的版位）")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=t.form.auto[0],expression:"form.auto[0] != 1"}],staticClass:"verpla",attrs:{label:"版位"}},[a("el-checkbox-group",{model:{value:t.form.verpla,callback:function(e){t.$set(t.form,"verpla",e)},expression:"form.verpla"}},[a("el-checkbox",{attrs:{label:"facebook",name:"type",disabled:t.form.verpla&&(-1!=t.form.verpla.indexOf("audience_network")||-1!=t.form.verpla.indexOf("messenger"))}},[t._v("Facebook")]),a("el-checkbox",{attrs:{label:"instagram",name:"type"}},[t._v("Instagram")]),a("el-checkbox",{attrs:{label:"audience_network",name:"type",disabled:t.form.verpla&&-1==t.form.verpla.indexOf("facebook")}},[t._v("Audience Network")]),a("el-checkbox",{attrs:{label:"messenger",name:"type",disabled:t.form.verpla&&-1==t.form.verpla.indexOf("facebook")}},[t._v("Messenger")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"出价"}},[a("el-radio-group",{on:{change:t.maxbidDefault},model:{value:t.form.bid,callback:function(e){t.$set(t.form,"bid",e)},expression:"form.bid"}},[a("el-radio",{attrs:{label:"cpi"}},[t._v("CPI")]),a("el-radio",{attrs:{label:"cpm"}},[t._v("CPM")])],1)],1),a("el-form-item",{attrs:{label:"竞价上限"}},[a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:t.maxbidplace},model:{value:t.form.maxbid,callback:function(e){t.$set(t.form,"maxbid",e)},expression:"form.maxbid"}})],1)]),a("el-form-item",{staticClass:"cline",attrs:{label:"用户过滤"}},[a("el-checkbox-group",{model:{value:t.form.filtra,callback:function(e){t.$set(t.form,"filtra",e)},expression:"form.filtra"}},[a("el-checkbox",{attrs:{label:"1",name:"filtra"}},[t._v("过滤已安装用户")]),a("el-checkbox",{attrs:{label:"2",name:"filtra"}},[t._v("过滤已关注用户")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.filtra&&-1!=t.form.filtra.indexOf("2"),expression:"form.filtra && form.filtra.indexOf('2') != -1"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"select",attrs:{multiple:"",placeholder:"请选择要过滤的主页，必选"},model:{value:t.form.filtrapage,callback:function(e){t.$set(t.form,"filtrapage",e)},expression:"form.filtrapage"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1)],1)],1),t._m(2),a("el-form",{staticClass:"elform",attrs:{"label-position":"left","label-width":"110px",model:t.form}},[a("el-form-item",{staticClass:"cline ctype",attrs:{label:"广告组数"}},[a("el-input-number",{attrs:{min:1,label:"广告组数"},model:{value:t.form.adcount,callback:function(e){t.$set(t.form,"adcount",e)},expression:"form.adcount"}}),a("div",{staticClass:"countfont"},[t._v("每个广告系列包含的广告组数量，太多也会有内部竞争影响整体效率")])],1),a("el-form-item",{staticClass:"cline ctype",attrs:{label:"广告组创意数"}},[a("el-input-number",{attrs:{min:1,max:50,label:"广告组创意数"},on:{change:t.countChange},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}}),a("div",{staticClass:"countfont"},[t._v("每个广告组包含的创意数量。1-3个为佳，3个以上会有内部竞争影响整体效率")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline",attrs:{label:"创意类型"}},[a("el-checkbox-group",{on:{change:t.getFilterCount},model:{value:t.form.createtype,callback:function(e){t.$set(t.form,"createtype",e)},expression:"form.createtype"}},[a("el-checkbox",{attrs:{label:"0",name:"type"}},[t._v("单图片")]),a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("单视频")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[t._v("轮播")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline",attrs:{label:"选择分类"}},[a("el-select",{staticClass:"select",attrs:{multiple:"",placeholder:"选填，为空则不限制分类"},on:{change:t.getFilterCount},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}},t._l(t.classifyforplan,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline ctype",attrs:{label:"创意数量"}},[a("el-input-number",{attrs:{min:1,label:"创意数量"},on:{change:t.createcountChange},model:{value:t.form.createcount,callback:function(e){t.$set(t.form,"createcount",e)},expression:"form.createcount"}}),a("div",{staticClass:"countfont"},[t._v("符合条件的创意总数为："+t._s(t.classifyfiltercount))])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.form.type,expression:"form.type == 'auto'"}],staticClass:"cline cline-strategy",attrs:{label:"选择策略"}},[a("el-radio-group",{staticClass:"strategy",model:{value:t.form.tactics,callback:function(e){t.$set(t.form,"tactics",e)},expression:"form.tactics"}},[a("el-radio",{attrs:{label:1}},[t._v("新创意优先")]),a("el-radio",{attrs:{label:2}},[t._v("完全随机")]),a("el-radio",{attrs:{label:3}},[t._v("高点击率优先")]),a("el-radio",{attrs:{label:4}},[t._v("视频/图片不同优先")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不同策略会选到不同的创意，请根据需求选择合适的策略",placement:"bottom-start"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),a("div",{staticClass:"elsubmit"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("提 交")])],1)],1)},hd=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("基础信息")]),a("span",[t._v("推广计划保存后可编辑，也可多次生成广告")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("广告组")]),a("span",[t._v("同1个广告系列下的所有广告组的条件一致")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eltitle"},[a("b",[t._v("结构和创意")]),a("span",[t._v("根据广告组数量、广告组创意数和创意数生成相对应的广告系列数量")])])}],_d={props:["createinfo"],components:{GenerGuide:Tl},data:function(){return{state:"",state2:"",state3:"",week:[{name:"周一",key:1},{name:"周二",key:2},{name:"周三",key:3},{name:"周四",key:4},{name:"周五",key:5},{name:"周六",key:6},{name:"周七",key:7}],maxbidplace:"cpi"==this.createinfo.billingType?"请输入竞价上限（单位：美元）":"选填",form:{name:this.createinfo.name,type:this.createinfo.createType,actions:this.createinfo.applicationId,country:this.createinfo.country?this.createinfo.country:[],platform:this.createinfo.platform,target:this.createinfo.included,iftarget:this.createinfo.excludedAudiences?[]:["1"],notarget:this.createinfo.excluded,minversion:this.createinfo.version,maxversion:this.createinfo.maxVersion?this.createinfo.maxVersion:"",moneytype:this.createinfo.budgetType,money:"day_budget"==this.createinfo.budgetType?this.createinfo.dayBudget/100:this.createinfo.totalBudget/100,date:[this.createinfo.startTime?new Date(this.createinfo.startTime):new Date,this.createinfo.endTime?new Date(this.createinfo.endTime):new Date],timerange:this.createinfo.scheduleType,rdate:this.createinfo.days?this.createinfo.days:[],rtime:[new Date(2016,9,10,this.createinfo.startMinute?this.createinfo.startMinute.split(":")[0]:0,0,0),new Date(2016,9,10,this.createinfo.endMinute?this.createinfo.endMinute.split(":")[0]:23,0,0)],equip:this.createinfo.device,sex:this.createinfo.gender?this.createinfo.gender[0]:"",age:[this.createinfo.minAge,this.createinfo.maxAge],language:this.createinfo.locales?this.createinfo.locales:[],interest:this.createinfo.interest?this.createinfo.interest:[],auto:this.createinfo.position&&0==this.createinfo.position.length?["1"]:[],verpla:this.createinfo.position?this.createinfo.position:[],bid:this.createinfo.billingType,maxbid:""===this.createinfo.bidAmount||null===this.createinfo.bidAmount?"":this.createinfo.bidAmount/100,filtra:[this.createinfo.filteInstalledUser?"1":"",this.createinfo.filteAttentionUser&&this.createinfo.filteAttentionUser.length>0?"2":""],filtrapage:this.createinfo.filteAttentionUser?this.createinfo.filteAttentionUser:[],account:this.createinfo.fbAccountIds,adcount:this.createinfo.adsetNum,count:this.createinfo.adNum,createtype:this.createinfo.creativeType?this.createinfo.creativeType:[],classify:this.createinfo.creativeClassify?this.createinfo.creativeClassify:[],createcount:this.createinfo.creativeNum,tactics:this.createinfo.creativeStrategy?this.createinfo.creativeStrategy:1},msg:{name:"请输入推广计划名称",country:"请选择国家",platform:"请选择平台",version:"请选择系统版本",money:"请输入预算金额",date:"请选择投放日期",rdate:"请选择星期",equip:"请选择设备",language:"请选择语言",verpla:"请选择版位",maxbid:"请输入竞价上限",maxbidmax:"竞价上限必须大于0.02美元",filtra:"请选择用户过滤",filtrapage:"请选择需要过滤的主页",createtype:"请选择创意类型"}}},mounted:function(){if(this.form.actions){var t=this.form.actions;if(this.$store.dispatch("getCreatePlatform",{applicationid:t}),0==this.form.country.length)return;var e=this.form.country.join(","),a="cpi"==this.form.bid?"APP_INSTALLS":"IMPRESSIONS";this.$store.dispatch("bidGuide",{country:e,fbApplicationId:t,billingEvent:a})}if(this.toGetsystem(),0!=this.form.account.length){var s=this.form.account.join(",");this.$store.dispatch("generTargetList",{fb_account_ids:s}),this.getFilterCount()}else this.SETSTATE({k:"genertarget",v:[]})},computed:Object(D["a"])({},Object(M["d"])(["itemlist","othercountries","language","interests","commonapp","createplatform","system","commonpage","genertarget","commonaccount","classifyforplan","classifyfiltercount"]),{equip:function(){return this.form.platform},genernotarget:function(){var t=this;return this.genertarget.filter(function(e){return-1==t.form.target.indexOf(e.id.toString())})},generhastarget:function(){var t=this;return this.genertarget.filter(function(e){return-1==t.form.notarget.indexOf(e.id.toString())})}}),watch:{equip:function(t,e){this.form.equip="google_play"==t?["Android_Smartphone"]:["iPhone","iPad"]},"form.name":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.type":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.country":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.platform":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.target":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.notarget":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.minversion":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.maxversion":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.moneytype":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.money":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.sex":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.language":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.interest":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.bid":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.maxbid":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.filtrapage":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.account":{handler:function(t,e){this.$emit("changeEdit",!1)}},"form.count":{handler:function(t,e){this.$emit("changeEdit",!1)}}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{getFilterCount:function(){if(0!=this.form.createtype.length&&0!=this.form.country.length){var t=this.form.country.join(","),e=this.form.sex,a=this.$route.params.id,s=this.form.createtype.join(","),i=this.form.classify.join(",");this.$store.dispatch("classifyFilterCountNoPlan",{country:t,gender:e,projectId:a,creativetype:s,classify:i})}else this.SETSTATE({k:"classifyfiltercount",v:0})},showBidChart:function(){if(0!=this.form.country.length&&this.form.actions){var t=this.form.country.join(","),e="cpi"==this.form.bid?"APP_INSTALLS":"IMPRESSIONS";this.$store.dispatch("bidGuide",{country:t,fbApplicationId:this.form.actions,billingEvent:e})}},accountToAudience:function(){if(this.form.target=[],this.form.notarget=[],0!=this.form.account.length){var t=this.form.account.join(",");this.$store.dispatch("generTargetList",{fb_account_ids:t})}else this.SETSTATE({k:"genertarget",v:[]})},moneytypeChange:function(){this.form.money=""},formatTooltip:function(t){if(65==t)return"65+"},maxbidDefault:function(){"cpi"==this.form.bid?(this.form.maxbid="0.02",this.maxbidplace="请输入竞价上限（单位：美元）"):(this.form.maxbid="",this.maxbidplace="选填")},toSubmit:function(){console.log(this.form);var t=this,e=this.dataChecked();if(e[0]){var a=[],s=this.$createElement,i=Bo()((this.form.date[1]-this.form.date[0])/864e5);"day_budget"==this.form.moneytype&&ps()(this.form.money)>=5e3&&a.push(s("p",null,[s("span",{style:"color:#999"},"每日预算："),s("span",{style:"color:red"},"$".concat(this.form.money))])),"total_budget"==this.form.moneytype&&ps()(this.form.money)/i>=5e3&&a.push(s("p",null,[s("span",{style:"color:#999"},"总预算："),s("span",{style:"color:red"},"$".concat(this.form.money))])),"cpi"==this.form.bid&&this.form.maxbid>=50&&a.push(s("p",null,[s("span",{style:"color:#999"},"CPI出价："),s("span",{style:"color:red"},"$".concat(this.form.maxbid))])),"cpm"==this.form.bid&&this.form.maxbid>=50&&a.push(s("p",null,[s("span",{style:"color:#999"},"CPM出价："),s("span",{style:"color:red"},"$".concat(this.form.maxbid))])),a.length>0?this.$msgbox({title:"创建推广计划",message:s("div",null,[s("span",null,"确认创建此推广计划吗？")].concat(a)),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.toDispatch()}).catch(function(){}):t.toDispatch()}else Object(H["g"])(e[1])},toDispatch:function(){var t={},e={};this.form.target.forEach(function(e){var a=e.split("|"),s=a[1];t[s]||(t[s]=[]),t[s].push(a[0])}),this.form.notarget.forEach(function(t){var a=t.split("|"),s=a[1];e[s]||(e[s]=[]),e[s].push(a[0])});var a={planInfoVO:{adNum:this.form.count,applicationId:this.form.actions,bidAmount:""===this.form.maxbid?null:Bo()(100*this.form.maxbid),billingType:this.form.bid,budgetType:this.form.moneytype,country:this.form.country,createType:this.form.type,creativeNum:this.form.createcount,creativeType:this.form.createtype,dayBudget:Bo()(100*this.form.money),days:this.form.rdate,device:"itunes"==this.form.platform?this.form.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):this.form.equip.filter(function(t){return"Android_Smartphone"==t}),endMinute:this.$timeFormat(this.form.rtime[1],"HH")+":00",endTime:new Date(this.form.date[1]).getTime(),filteAttentionUser:this.form.filtrapage,filteInstalledUser:-1!=this.form.filtra.indexOf("1")?"yes":"",gender:[this.form.sex],goalBid:"",interest:this.form.interest,locales:this.form.language,maxAge:this.form.age[1],minAge:this.form.age[0],name:this.form.name,platform:this.form.platform,position:"1"==this.form.auto[0]?[]:this.form.verpla,projectId:this.$route.params.id,scheduleType:this.form.timerange,startMinute:this.$timeFormat(this.form.rtime[0],"HH")+":00",startTime:new Date(this.form.date[0]).getTime(),totalBudget:Bo()(100*this.form.money),fbAccountIds:this.form.account,includeAudiences:_e()(t),excludedAudiences:1==this.form.iftarget[0]?"":_e()(e),version:this.form.minversion,maxVersion:this.form.maxversion?this.form.maxversion:null,adsetNum:this.form.adcount,creativeStrategy:this.form.tactics,creativeClassify:this.form.classify},route:this.$router,projectid:this.$route.params.id};this.$emit("changeEdit",!0),this.$store.dispatch("createGener",{option:a})},dataChecked:function(){if(""==this.form.name)return[!1,this.msg.name];if(0==this.form.country.length)return[!1,this.msg.country];if(""==this.form.platform)return[!1,this.msg.platform];if(""==this.form.minversion)return[!1,this.msg.version];if(""==this.form.money)return[!1,this.msg.money];if("total_budget"==this.form.moneytype){if(!this.form.date||0==this.form.date.length)return[!1,this.msg.date];if("schedule"==this.form.timerange&&0==this.form.rdate.length)return[!1,this.msg.rdate]}return 0==this.form.equip.filter(function(t){return t}).length?[!1,this.msg.equip]:0==this.form.auto.length&&0==this.form.verpla.length?[!1,this.msg.verpla]:"cpi"==this.form.bid&&""==this.form.maxbid?[!1,this.msg.maxbid]:""!=this.form.maxbid&&(isNaN(Bo()(this.form.maxbid))||this.form.maxbid<.02)?[!1,this.msg.maxbidmax]:-1!=this.form.filtra.indexOf("2")&&0==this.form.filtrapage.length?[!1,this.msg.filtrapage]:"auto"==this.form.type&&0==this.form.createtype.length?[!1,this.msg.createtype]:[!0]},toGetsystem:function(){var t="itunes"==this.form.platform?"ios":"android";this.$store.dispatch("getSystem",{os:t})},countChange:function(){},createcountChange:function(){}})},vd=_d,gd=(a("8cd9"),Object(E["a"])(vd,fd,hd,!1,null,"f84b43be",null)),bd=gd.exports,yd={beforeRouteLeave:function(t,e,a){this.ifedit?a():this.$confirm("是否确定离开当前页面","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},data:function(){return{status:!1,status1:!1,ifedit:!0}},components:{CopyForm:bd,BreadCrumb:kr},created:function(){this.SETSTATE({k:"classifyfiltercount",v:0})},mounted:function(){this.$store.dispatch("otherCountries"),this.$store.dispatch("getLanguage"),this.$store.dispatch("getInterests");var t=this.$route.params.id;this.$store.dispatch("commonPage",{project_id:t}),this.$store.dispatch("commonApp",{project_id:t});var e=this.$route.params.pid;this.$store.dispatch("getCreateInfo",{plan_id:e});var a=this.$route.params.id;this.$store.dispatch("commonAccount",{project_id:a}),this.$store.dispatch("getClassifyForPlan",a)},computed:Object(D["a"])({},Object(M["d"])(["disinfo"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{changeEdit:function(t){this.ifedit=t},cancelAddbm:function(t){this[t]=!1}})},kd=yd,Ed=(a("d206"),Object(E["a"])(kd,md,pd,!1,null,"d09752ac",null)),Cd=Ed.exports,Od=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ad",style:{height:t.documentHeight+"px"}},[a("bread-crumb",{attrs:{pageName:"广告管理"}}),a("div",{staticClass:"ctrlbutton"},[a("el-select",{staticClass:"selectAccount",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"广告账户"},on:{change:t.toSortAccount},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1),a("el-date-picker",{staticClass:"datebox",attrs:{type:"daterange","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.dateSort},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"ctrlbutton"},[t.disCondition.length<5?a("el-dropdown",{staticClass:"select",attrs:{"split-button":"",type:"primary"},on:{command:t.handleCommand}},[t._v("\n      搜索\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"fbCampaignId_广告系列编号"}},[t._v("广告系列编号")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"campaignName_广告系列名称"}},[t._v("广告系列名称")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"fbAdSetId_广告组编号"}},[t._v("广告组编号")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"adSetName_广告组名称"}},[t._v("广告组名称")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"fbAdId_广告编号"}},[t._v("广告编号")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"adName_广告名称"}},[t._v("广告名称")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"planId_推广计划编号"}},[t._v("推广计划编号")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"planName_推广计划名称"}},[t._v("推广计划名称")])],1)],1):t._e(),t.disCondition.length<5?a("div",{staticClass:"at-dropdown",on:{mouseleave:t.searchStatus}},[t._m(0),a("div",{staticClass:"droplist",style:{width:""!=t.firstSearch?"360px":"160px"}},[a("div",{staticClass:"listarr",attrs:{id:"firstList"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.conditionlist.length>0,expression:"conditionlist.length > 0"}],staticClass:"list",on:{mouseenter:t.getSaveSearch}},[t._v("\n            已保存条件\n            "),a("i",{staticClass:"el-icon-caret-right"})]),t._l(t.searchList,function(e,s){return a("div",{key:s,staticClass:"list",on:{mouseenter:function(a){t.searchClick(e.name,e.key)}}},[t._v("\n            "+t._s(e.name)+"\n            "),a("i",{staticClass:"el-icon-caret-right"})])})],2),"savecondition"!=t.firstKey?a("div",{staticClass:"listarr otherarr",attrs:{id:"secondList"}},t._l(t.secondSearchList,function(e,s){return a("div",{key:s,class:{list:!0,selected:e.checked},on:{click:function(a){t.selectSearch(e.cname,e.checked,e.key)}}},[t._v(t._s(e.cname))])}),0):t._e(),"savecondition"==t.firstKey?a("div",{staticClass:"listarr otherarr",attrs:{id:"secondList"}},t._l(t.conditionlist,function(e,s){return a("div",{key:s,staticClass:"list",on:{click:function(a){t.selectSaveSearch(e.id)}}},[t._v("\n            "+t._s(e.tagName)+"\n            "),a("i",{staticClass:"el-icon-close",on:{click:function(a){a.stopPropagation(),t.deleteSaveSearch(e.id,"1")}}})])}),0):t._e()])]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.searchType,expression:"searchType == 1"}],staticClass:"conditionLine"},[a("p",{staticClass:"firstName"},[t._v(t._s(t.prevFirstSearch))]),a("div",{staticClass:"dealType"},[a("el-radio-group",{model:{value:t.conditiondeal,callback:function(e){t.conditiondeal=e},expression:"conditiondeal"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("是")]),a("el-radio",{staticClass:"radio",attrs:{label:2}},[t._v("不是")])],1)],1),a("p",{staticClass:"firstName"},[a("el-select",{staticClass:"elselect",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择",size:"mini"},on:{change:t.downselectChange},model:{value:t.conditionSelArr,callback:function(e){t.conditionSelArr=e},expression:"conditionSelArr"}},t._l(t.secondDownList,function(t,e){return a("el-option",{key:e,attrs:{label:t.cname,value:t.cname}})}),1)],1),a("p",{staticClass:"ctrl"},[a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:t.determineSearch}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:t.cancelSearch}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.searchType,expression:"searchType == 2"}],staticClass:"conditionLine"},[a("p",{staticClass:"firstName"},[t._v(t._s(t.conditionSel))]),a("div",{staticClass:"dealType"},[a("el-select",{staticClass:"elselect",attrs:{placeholder:"请选择",size:"mini"},model:{value:t.conditiondeal,callback:function(e){t.conditiondeal=e},expression:"conditiondeal"}},[a("el-option",{key:1,attrs:{label:"大于",value:1}}),a("el-option",{key:2,attrs:{label:"小于",value:2}}),a("el-option",{key:3,attrs:{label:"介于",value:3}}),a("el-option",{key:4,attrs:{label:"不介于",value:4}})],1)],1),a("el-input-number",{staticClass:"numberinput",attrs:{size:"mini",precision:2,min:0,step:.1},model:{value:t.conditionState,callback:function(e){t.conditionState=e},expression:"conditionState"}}),-1!=t.specilkey100.indexOf(t.conditionSelkey)?a("span",{staticClass:"unit"},[t._v("%")]):t._e(),a("el-input-number",{directives:[{name:"show",rawName:"v-show",value:3==t.conditiondeal||4==t.conditiondeal,expression:"conditiondeal == 3 || conditiondeal == 4"}],staticClass:"numberinput",attrs:{size:"mini",precision:2,min:0,step:.1},model:{value:t.conditionState2,callback:function(e){t.conditionState2=e},expression:"conditionState2"}}),-1==t.specilkey100.indexOf(t.conditionSelkey)||3!=t.conditiondeal&&4!=t.conditiondeal?t._e():a("span",{staticClass:"unit"},[t._v("%")]),a("p",{staticClass:"ctrl"},[a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:t.determineSearch}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:t.cancelSearch}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.searchType,expression:"searchType == 3"}],staticClass:"conditionLine"},[a("p",{staticClass:"firstName"},[t._v(t._s(t.conditionSel))]),a("div",{staticClass:"dealType"},[a("el-radio-group",{model:{value:t.conditiondeal,callback:function(e){t.conditiondeal=e},expression:"conditiondeal"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("包含")]),a("el-radio",{staticClass:"radio",attrs:{label:2}},[t._v("不包含")])],1)],1),a("el-input",{staticClass:"ptinput",attrs:{placeholder:"多个关键词空格隔开",size:"mini"},model:{value:t.conditionInput,callback:function(e){t.conditionInput=e},expression:"conditionInput"}}),a("p",{staticClass:"ctrl"},[a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:t.determineSearch}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:t.cancelSearch}})],1)],1),a("div",{staticClass:"tagall"},[t._l(t.disCondition,function(e,s){return a("span",{key:s,staticClass:"tagline",on:{click:function(a){t.editCondition(e)}}},[a("el-tag",{staticClass:"tag",attrs:{closable:"",type:""},on:{close:function(a){t.deleteCondtion(e.regkey)}}},[t._v(t._s(e.name))])],1)}),t.disCondition.length>0?a("div",{staticClass:"saveClear"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.setCondition("1")}}},[t._v("保存")]),a("el-button",{on:{click:t.clearLocalCondition}},[t._v("清空")])],1):t._e()],2)],1),a("div",{staticClass:"tablist"},[a("el-tabs",{staticClass:"eltabs",attrs:{type:"card"},on:{"tab-click":t.resetPageData},model:{value:t.tabname,callback:function(e){t.tabname=e},expression:"tabname"}},[a("el-tab-pane",{attrs:{label:t.mutilselect.length>0?"广告系列（已选"+t.mutilselect.length+"个）":"广告系列",name:"first"}},[a("ad-setbox",{ref:"campaignName",attrs:{opDefault:[{name:"广告系列名称",key:"campaignName",tool:!0,link:!0}],defaultOption:t.defaultOption,type:"campaignName"},on:{wantEdit:t.toCreateAd,wantCopy:t.wantCopy,changeReplace:t.changeReplace,toCreateAd:t.toCreateAd,selectSort:t.selectSort,showOptionbox:t.showOptionbox,showRemainBox:t.showRemainBox,tabJump:t.tabJump,ruleCreate:t.ruleCreate,ruleAdd:t.ruleAdd,ruleRemove:t.ruleRemove,optionSelect:t.optionSelect,setCondition:t.setCondition,deleteSaveSearch:t.deleteSaveSearch}})],1),a("el-tab-pane",{attrs:{label:t.mutilsetselect.length>0?"广告组（已选"+t.mutilsetselect.length+"个）":"广告组",name:"second"}},[a("ad-setbox",{ref:"adSetName",attrs:{opDefault:[{name:"广告组名称",key:"adSetName",tool:!0,link:!0}],defaultOption:t.defaultOption,type:"adSetName"},on:{wantEdit:t.toCreateAd,wantCopy:t.wantCopy,changeReplace:t.changeReplace,toCreateAd:t.toCreateAd,selectSort:t.selectSetSort,showOptionbox:t.showOptionbox,showRemainBox:t.showRemainBox,tabJump:t.tabJump,ruleCreate:t.ruleCreate,ruleAdd:t.ruleAdd,ruleRemove:t.ruleRemove,optionSelect:t.optionSelect,setCondition:t.setCondition,deleteSaveSearch:t.deleteSaveSearch}})],1),a("el-tab-pane",{attrs:{label:t.mutiladselect.length>0?"广告（已选"+t.mutiladselect.length+"个）":"广告",name:"third"}},[a("ad-setbox",{ref:"adName",attrs:{opDefault:[{name:"广告名称",key:"adName",tool:!0}],defaultOption:t.defaultOption,type:"adName"},on:{wantEdit:t.toCreateAd,wantCopy:t.wantCopy,changeReplace:t.changeReplace,toCreateAd:t.toCreateAd,selectSort:t.selectAdSort,showOptionbox:t.showOptionbox,showRemainBox:t.showRemainBox,tabJump:t.tabJump,ruleCreate:t.ruleCreate,ruleAdd:t.ruleAdd,ruleRemove:t.ruleRemove,optionSelect:t.optionSelect,setCondition:t.setCondition,deleteSaveSearch:t.deleteSaveSearch}})],1)],1),a("div",{staticClass:"updatetime"},[a("el-popover",{attrs:{placement:"top",width:"320",trigger:"hover",content:"123",disabled:!(t.copyjoblistdetail.length>1)}},[t._l(t.copyjoblistdetail,function(e,s){return a("div",{key:s,staticClass:"progressDetail"},[a("div",{staticClass:"prgs"},[a("el-progress",{attrs:{"show-text":!1,"stroke-width":10,percentage:e.percent,status:"success"}})],1),a("span",{staticClass:"prgsfont"},[t._v(t._s(e.name)+" "+t._s(e.completed)+"/"+t._s(e.total))])])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.jobtotal>0,expression:"jobtotal > 0"}],staticClass:"prgsline",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"prgs"},[a("el-progress",{attrs:{"show-text":!1,"stroke-width":10,percentage:t.jobtotal?100*t.jobcomplete/t.jobtotal:0,status:"success"}})],1),a("span",{staticClass:"prgsfont"},[t._v("正在发布"+t._s(t.jobcomplete)+"/"+t._s(t.jobtotal))])])],2),a("i",{staticClass:"el-icon-refresh",staticStyle:{cursor:"pointer"},on:{click:t.resetPageData}}),t._v("\n      更新时间："+t._s(t.datestatus)+"\n      "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Appsflyer相关字段每天更新一次",placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})])],1)],1),a("save-condition",{ref:"saveCondtion",attrs:{savetype:t.savetype},on:{save:t.saveCondtion}}),a("ad-create",{ref:"adCreate"}),a("seek-replace",{ref:"seekReplace",attrs:{type:t.tabtype},on:{resetPageData:t.resetPageData}}),a("ad-copy",{ref:"adCopy"}),a("list-option",{ref:"listOption",attrs:{status:t.optionstatus,type:t.tabtype,customEvent:t.adcustomevent,customUnit:t.customunit,opDefault:t.opDefault,setDefaultOption:t.defaultListOption},on:{outOption:t.outOption,hideOptionbox:t.hideOptionbox}}),a("import-remain",{attrs:{status:t.remainstatus,type:t.tabtype},on:{"update:status":function(e){t.remainstatus=e},hideRemainBox:t.hideRemainBox}}),a("rule-select",{ref:"ruleSelect",attrs:{status:t.ruleselectstatus},on:{"update:status":function(e){t.ruleselectstatus=e}}}),a("rule-remove",{ref:"ruleRemove",attrs:{status:t.ruleremovestatus},on:{"update:status":function(e){t.ruleremovestatus=e}}}),a("rule-add",{ref:"ruleAdd",attrs:{status:t.ruleaddstatus},on:{"update:status":function(e){t.ruleaddstatus=e}}}),a("big-image",{attrs:{bigImageUrl:t.bigImageUrl,status:t.bigImageVisible},on:{hideBig:t.hideBig}})],1)},wd=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"theme"},[a("span",[t._v("\n          筛选\n          "),a("i",{staticClass:"el-icon-arrow-down"})])])}],Id=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:"应用于"+t.id+t.typename+"的规则",visible:t.status},on:{close:t.toCancel}},[a("div",{staticClass:"fonttip important"},[a("p",[t._v("以下是应用于此对象的规则，选择后可移除：")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.hascantselect,expression:"hascantselect"}],staticClass:"notice"},[t._v("置灰列表不可删除，请直接删除此规则")])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.singlerules,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.ifSelect,fixed:"",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"",label:"操作与条件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.executionSpecName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.evaluationSpecName))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitExecute}},[t._v("移 除")])],1)],1)},Td=[],xd={props:["status"],data:function(){return{id:"",type:"",typename:"",ruleids:[],level:"",hascantselect:!1}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{ifSelect:function(t,e){return t.ruleObjCount>1||(this.hascantselect=!0,!1)},toCancel:function(){this.$emit("update:status",!1),this.ruleids=[],this.SETSTATE({k:"singlerules",v:[]}),this.hascantselect=!1},submitExecute:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.ruleids.length){t.next=3;break}return Object(H["g"])("请选择规则"),t.abrupt("return");case 3:return e=this.id,a=this.ruleids.join(","),t.next=7,this.$store.dispatch("removeRules",{objId:e,ruleIds:a,objLevel:this.level});case 7:t.sent,this.toCancel();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleSelectionChange:function(t){this.ruleids=t.map(function(t){return t.fbId})},initData:function(t,e){switch(this.id=t,this.type=e,e){case"campaignName":this.typename="广告系列",this.level="CAMPAIGN";break;case"adSetName":this.typename="广告组",this.level="ADSET";break;case"adName":this.typename="广告",this.level="AD";break}this.$store.dispatch("singleRules",t)}}),computed:Object(D["a"])({},Object(M["d"])(["singlerules"])),watch:{}},Sd=xd,Ad=(a("8184"),Object(E["a"])(Sd,Id,Td,!1,null,"7d8e1344",null)),jd=Ad.exports,Dd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:"应用广告账户"+t.accountid+"的规则",visible:t.status},on:{close:t.toCancel}},[a("p",{staticClass:"fonttip important"},[a("b",[t._v("可选择规则并应用到已选择的对象中")])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.adrulelist,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"",label:"操作与条件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.executionSpecName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.evaluationSpecName))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitExecute}},[t._v("应 用")])],1)],1)},Md=[],Pd={props:["status"],data:function(){return{accountid:"",objids:[],ruleids:[],level:""}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{adInit:function(t,e){var a="";switch(this.accountid=t[0].accountId,e){case"campaignName":this.level="CAMPAIGN",a="campaignId";break;case"adSetName":this.level="ADSET",a="adsetId";break;case"adName":this.level="AD",a="adId";break}this.objids=t.map(function(t){return t[a]}),this.$store.dispatch("ruleListForAdd",{fbAccountIds:this.accountid,level:this.level})},toCancel:function(){this.$emit("update:status",!1),this.SETSTATE({k:"adrulelist",v:[]}),this.objids=[],this.ruleids=[]},submitExecute:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.ruleids.length){t.next=3;break}return Object(H["g"])("请选择规则"),t.abrupt("return");case 3:return e=this.objids.join(","),a=this.ruleids.join(","),t.next=7,this.$store.dispatch("useRules",{objIds:e,ruleIds:a,objLevel:this.level});case 7:s=t.sent,s.data&&this.toCancel();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleSelectionChange:function(t){console.log(t),this.ruleids=t.map(function(t){return t.fbId})}}),computed:Object(D["a"])({},Object(M["d"])(["adrulelist"])),watch:{}},Ld=Pd,Rd=(a("311c"),Object(E["a"])(Ld,Dd,Md,!1,null,"35c5031a",null)),Nd=Rd.exports,Ud=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outbox"},[a("div",{staticClass:"ctrlbutton"},[a("div",{staticClass:"createbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.createAd}},[t._v("创建")])],1),a("el-dropdown",{staticClass:"select",attrs:{"split-button":"",type:"primary"},on:{click:function(e){t.toCtrlAll("Edit")},command:t.handleCommand}},[t._v("\n      编辑\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"a",disabled:t.archivedbutton}},[t._v("开启")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"b",disabled:t.archivedbutton}},[t._v("关闭")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"c",disabled:t.archivedbutton}},[t._v("重命名")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"d",disabled:t.archivedbutton}},[t._v("查找替换")])],1)],1),a("div",{staticClass:"createbutton"},[a("el-button",{attrs:{type:"text",icon:"el-icon-news",disabled:t.archivedbutton},on:{click:function(e){t.toCtrlAll("Copy")}}},[t._v("复制")])],1),a("div",{staticClass:"createbutton"},[a("el-button",{attrs:{type:"text",icon:"el-icon-menu",disabled:t.archivedbutton},on:{click:function(e){t.toCtrlAll("ARCHIVED")}}},[t._v("归档")])],1),a("div",{staticClass:"createbutton"},[a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(e){t.toCtrlAll("DELETED")}}},[t._v("删除")])],1),a("div",{staticClass:"createbutton"},[a("el-dropdown",{on:{command:t.ruleCtrl}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n          规则\n          "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a",disabled:0==t.mutilselect.length}},[t._v("创建规则")]),a("el-dropdown-item",{attrs:{command:"b",disabled:0==t.mutilselect.length}},[t._v("应用现有规则")])],1)],1)],1),a("p",{staticClass:"download"},[a("span",{style:{color:t.exportstatus?"":"#999"},on:{click:t.outTable}},[t._v("\n        导出全部\n        "),a("svg-icon",{style:{color:t.exportstatus?"":"#999"},attrs:{svgname:"save",svgclass:"save"}})],1)]),a("div",{staticClass:"at-dropdown",on:{mouseenter:function(e){t.sortDown=!t.sortDown},mouseleave:t.searchStatus}},[t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.sortDown,expression:"sortDown"}],staticClass:"droplist",style:{width:t.firstSearch?"280px":"160px"}},[a("div",{staticClass:"listarr",attrs:{id:"firstList"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.careData.length>0,expression:"this.careData.length > 0"}],staticClass:"list",on:{mouseenter:t.sweepCare,click:t.clearCare}},[t._v("清空所有细分")]),t._l(t.searchList,function(e,s){return a("div",{key:s,staticClass:"list",on:{mouseenter:function(a){t.searchClick(e.name,e.key,e.importkey)},click:function(a){t.selectCare("",e.importkey)}}},[t._v("\n            "+t._s(e.name)+"\n            "),e.importkey?t._e():a("i",{staticClass:"el-icon-caret-right"})])})],2),a("div",{staticClass:"listarr rightarr",attrs:{id:"secondList"}},t._l(t.secondSearchList,function(e,s){return a("div",{key:s,class:{list:!0,selected:e.checked},on:{click:function(a){t.selectCare(e.key,e.key)}}},[t._v(t._s(e.cname))])}),0)])]),a("div",{staticClass:"autolist"},[a("span",{on:{click:t.importRemain}},[a("i",{staticClass:"el-icon-download"}),t._v("\n        导入留存\n      ")]),a("div",{staticClass:"autooption",on:{mouseenter:function(e){t.optionmenu=!0},mouseleave:function(e){t.optionmenu=!1}}},[t._m(1),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.optionmenu,expression:"optionmenu"}],staticClass:"optionlist"},[a("p",{class:{on:"default"==t.optionselect},on:{click:function(e){t.optionSelect("default")}}},[a("span",{staticClass:"name"},[t._v("常用")])]),t._l(t.saveoption,function(e,s){return a("p",{key:s,class:{on:t.optionselect==e.name},on:{click:function(a){t.optionSelect(e.name)}}},[a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("i",{staticClass:"el-icon-close other",on:{click:function(a){a.stopPropagation(),t.deleteOption(e.id,e.name)}}})])}),a("p",{class:{on:"auto"==t.optionselect}},[a("span",{staticClass:"name",on:{click:t.outListOption}},[t._v("自定义")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"auto"==t.optionselect,expression:"optionselect == 'auto'"}],staticClass:"other",on:{click:function(e){return e.stopPropagation(),t.saveOption(e)}}},[t._v("保存")])])],2)])],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.adlisttimeout,expression:"adlisttimeout"}],staticClass:"timeout"},[t._v("\n    加载失败请\n    "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.toGetdata(!1)}}},[t._v("重试")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.adlisttimeout,expression:"!adlisttimeout"}],staticClass:"list",attrs:{id:"AdList"}},[a("ad-setlist",{attrs:{customOption:t.customOptionDefault,type:t.type},on:{toCopy:t.toCopy,toEdit:t.toEdit,reName:t.reName,mutilSelect:t.mutilSelect,tableSort:t.tableSort,tabJump:t.tabJump,setRule:t.setRule}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.adlisttimeout,expression:"!adlisttimeout"}],staticClass:"pageswitch"},[a("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[20,50,80],"page-size":t.adpagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.adtotal},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),a("ad-rename",{ref:"reName",attrs:{type:t.type}})],1)},$d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"theme"},[a("span",[t._v("\n          细分数据\n          "),a("i",{staticClass:"el-icon-arrow-down"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"el-dropdown-link"},[t._v("\n          自定义列\n          "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])}],Bd=(a("55dd"),a("b6d0")),Fd=a.n(Bd),Vd=a("75fc"),Kd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{key:t.customOption.map(function(t){return t.name}).join(","),ref:"multipleTable"+t.type,staticStyle:{width:"100%"},attrs:{id:"outAdList",data:t.datalist,height:600,border:"","show-summary":"","summary-method":t.getSummaries},on:{"selection-change":t.handleSelectionChange,"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.ifSelect,fixed:"",width:"55"}}),a("el-table-column",{attrs:{label:"状态",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{directives:[{name:"show",rawName:"v-show",value:e.row.jobStatus,expression:"scope.row.jobStatus"}],staticClass:"el-icon-loading jobstatus"}),e.row.iscare?t._e():a("el-tooltip",{staticClass:"item",attrs:{disabled:!e.row.effectiveStatus||"ACTIVE"==e.row.effectiveStatus||"PAUSED"==e.row.effectiveStatus,effect:"dark",content:"ARCHIVED"==e.row.effectiveStatus?"已归档不可开关":"已删除不可开关",placement:"top-start"}},[a("el-switch",{staticClass:"statusswitch",attrs:{disabled:e.row.jobStatus||e.row.load||"ARCHIVED"==e.row.effectiveStatus||"DELETED"==e.row.effectiveStatus,"active-value":"ACTIVE","inactive-value":"PAUSED","active-color":"#13ce66","inactive-color":"#d7dae2"},on:{change:function(a){t.switchChange(e.row.switchStatus,e.row[t.typeData.effectIdsPush])}},model:{value:e.row.switchStatus,callback:function(a){t.$set(e.row,"switchStatus",a)},expression:"scope.row.switchStatus"}})],1),e.row.iscare?t._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.row.load,expression:"scope.row.load"}],staticClass:"statusload",attrs:{"element-loading-text":"","element-loading-spinner":"el-icon-loading"}}),e.row.iscare?a("p"):t._e()]}}])}),t._l(t.customOption,function(e,s){return a("el-table-column",{key:s,attrs:{prop:e.key,fixed:!e.checked,label:e.name,sortable:"广告系列名称"!=e.name&&"广告组名称"!=e.name&&"广告名称"!=e.name&&!e.isevent&&"custom",width:-1==e.name.indexOf("名称")&&-1==e.name.indexOf("编号")?"100":"200"},scopedSlots:t._u([{key:"default",fn:function(s){return[!s.row.iscare&&e.link?a("p",{class:{canjump:!0,linedata:!0,iscare:s.row.iscare},attrs:{title:"广告系列名称"!=e.name&&"广告组名称"!=e.name?"":s.row[e.key]},on:{click:function(e){t.tabJump(s.row)}}},[t._v(t._s(s.row[e.key]||0===s.row[e.key]||"0"===s.row[e.key]?s.row[e.key]:"--"))]):s.row.iscare||"广告名称"!=e.name?!s.row.careimg||"广告系列名称"!=e.name&&"广告组名称"!=e.name&&"广告名称"!=e.name?a("p",{class:{linedata:!0,iscare:s.row.iscare},attrs:{title:"广告名称"!=e.name?"":s.row[e.key]}},[t._v(t._s(s.row[e.key]||0===s.row[e.key]||"0"===s.row[e.key]?s.row[e.key]:"--"))]):a("p",{domProps:{innerHTML:t._s(s.row[e.key]?s.row[e.key]:"--")}}):a("p",{staticClass:"adname"},[a("span",{staticClass:"headpic"},[a("a",{attrs:{href:s.row.materialText,target:"_blank"}},[a("img",{attrs:{src:s.row.materialText}})])]),a("span",{staticClass:"name",attrs:{title:s.row[e.key]}},[t._v(t._s(s.row[e.key]))])]),"effectiveStatusName"==e.key&&s.row.effectiveImport!=s.row.effectiveStatus?a("p",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v(t._s(s.row.effectiveImportName))]):t._e(),!e.tool||s.row.iscare||"ARCHIVED"==s.row.effectiveStatus||"DELETED"==s.row.effectiveStatus||"广告系列名称"!=e.name&&"广告组名称"!=e.name&&"广告名称"!=e.name?t._e():a("p",{staticClass:"namectrl"},[a("el-button",{attrs:{icon:"el-icon-edit-outline",type:"text",size:"mini",disabled:s.row.jobStatus},on:{click:function(e){t.toEdit(s.row[t.typeData.effectIdsPush],[s.row.campaignName,s.row.adSetName,s.row.adName])}}},[t._v("编辑")]),a("el-button",{attrs:{icon:"el-icon-news",type:"text",size:"mini",disabled:s.row.jobStatus},on:{click:function(e){t.toCopy(s.row[t.typeData.effectIdsPush],s.row[t.typeData.originalId],s.row[t.typeData.originalName],s.row.accountId)}}},[t._v("复制")]),a("el-button",{attrs:{icon:"el-icon-setting",type:"text",size:"mini",disabled:s.row.jobStatus},on:{click:function(e){t.setRule(s.row[t.typeData.effectIdsPush])}}},[t._v("规则")]),a("el-button",{staticClass:"rename",attrs:{icon:"el-icon-edit",type:"text",size:"mini",disabled:s.row.jobStatus},on:{click:function(a){t.reName(s.row[t.typeData.effectIdsPush],s.row[e.key])}}})],1)]}}])})})],2)},Wd=[],zd={props:["customOption","type"],data:function(){return{}},computed:Object(D["a"])({},Object(M["d"])(["adcampaignlist","adsetlist","adadlist","adlisttotal"]),{totalWidth:function(){var t=0;return t+=140,this.customOption.forEach(function(e){"广告系列名称"==e.name?t+=220:t+=120}),t},datalist:function(){return"campaignName"==this.type?JSON.parse(this.adcampaignlist):"adSetName"==this.type?JSON.parse(this.adsetlist):"adName"==this.type?JSON.parse(this.adadlist):void 0},typeData:function(){var t={};switch(this.type){case"campaignName":t.effectIds="adCampaignIds",t.effectIdsPush="campaignId",t.originalId="campaignId",t.originalName="campaignName";break;case"adSetName":t.effectIds="adSetIds",t.effectIdsPush="adsetId",t.originalId="campaignId",t.originalName="campaignName";break;case"adName":t.effectIds="adIds",t.effectIdsPush="adId",t.originalId="adsetId",t.originalName="adSetName";break}return t}}),created:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE","CHANGEADLOAD"]),{getSummaries:function(t){var e=this,a=t.columns,s=(t.data,[]),i=["ctr","afMinsRate","afRetentionRate","cvr","afCtr","afLoyalUsersRate","afROI","afConversionRate","afReRate1","afReRate2","afReRate3","afReRate4","afReRate5","afReRate6","afReRate7"];return a.forEach(function(t,a){switch(a){case 0:s[a]="合计";break;case 1:case 2:s[a]="";break;default:var n=e.adlisttotal[t.property]||0===e.adlisttotal[t.property]?e.adlisttotal[t.property]:"";s[a]=n+(n&&-1!=i.indexOf(t.property)?"%":"");break}}),s},tabJump:function(t){var e="";e="campaignName"==this.type?"second":"third",this.$emit("tabJump",e,t,this.type),this.$refs["multipleTable"+this.type].clearSelection(),this.$refs["multipleTable"+this.type].toggleRowSelection(t,!0)},setRule:function(t){this.$emit("setRule",t)},toEdit:function(t,e){this.$emit("toEdit",[t],e)},toCopy:function(t,e,a,s,i,n){var o={id:t,orgid:e,orgname:a,creative:i,marketurl:n},r=[o];this.$emit("toCopy",r,s)},ifSelect:function(t,e){return!t.iscare&&"DELETED"!=t.effectiveStatus&&!t.jobStatus},reName:function(t,e){this.$emit("reName",t,e)},sortChange:function(t){t.column;var e=t.prop,a=t.order;if(e){var s=e;s+="ascending"==a?" asc":" desc",this.$emit("tableSort",s)}else this.$emit("tableSort","")},handleSelectionChange:function(t){this.$emit("mutilSelect",t)},switchChange:function(t,e){var a={effectiveStatus:t};a[this.typeData.effectIds]=e,this.$store.dispatch("changeAdstatus",{option:a,type:this.type,fullScreen:!0}),this.CHANGEADLOAD(e)}})},Gd=zd,Hd=(a("55da"),a("86f6"),Object(E["a"])(Gd,Kd,Wd,!1,null,"7aaf0e82",null)),qd=Hd.exports,Jd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"重命名"+t.count+"个"+t.typeData.name,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"名称","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.conditionName,callback:function(e){t.conditionName=e},expression:"conditionName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveCondtion}},[t._v("确 定")])],1)],1)},Yd=[],Xd={props:["type"],data:function(){return{dialogFormVisible:!1,conditionName:"",key:""}},methods:{showBox:function(t,e){this.key=t,this.conditionName=e,this.dialogFormVisible=!0},saveCondtion:function(){""!=this.conditionName.trim()?(this.$store.dispatch("resetName",{id:this.key,name:this.conditionName,type:this.type}),this.dialogFormVisible=!1,this.conditionName="",this.key=""):Object(H["g"])("请输入名称")}},computed:{count:function(){return this.key.split(",").length},typeData:function(){var t={name:"",effect:"",effectIds:""};switch(this.type){case"campaignName":t.name="广告系列";break;case"adSetName":t.name="广告组";break;case"adName":t.name="广告";break}return t}}},Zd=Xd,Qd=Object(E["a"])(Zd,Jd,Yd,!1,null,null,null),tm=Qd.exports,em={props:["opDefault","type","defaultOption"],data:function(){return{optionmenu:!1,sortDown:!1,firstSearch:"",firstKey:"",secondSearchList:[],state:"",value2:"",customOption:this.defaultOption.concat(this.opDefault),pageindex:1,mutilselect:[],archivedbutton:!1,sort:"",order:!0,statuslist:[{name:"不限",code:"-1"},{name:"投放中",code:"ACTIVE"},{name:"已暂停",code:"PAUSED"},{name:"已归档",code:"ARCHIVED"},{name:"已删除",code:"DELETED"}]}},components:{AdSetlist:qd,AdRename:tm},mounted:function(){},watch:{},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{optionSelect:function(t){this.$emit("optionSelect",t)},deleteOption:function(t,e){this.$emit("deleteSaveSearch",t,"2",e)},saveOption:function(){this.$emit("setCondition","2")},ruleCtrl:function(t){if(Object(Vd["a"])(new Fd.a(this.mutilselect.map(function(t){return t.accountId}))).length>1)Object(H["g"])("暂不支持跨广告账户设置规则，请选择同一个广告账户下的对象");else switch(t){case"a":this.$emit("ruleAdd",this.mutilselect,this.type);break;case"b":this.$emit("ruleCreate",this.mutilselect,this.type);break}},setRule:function(t){this.$emit("ruleRemove",t,this.type)},tabJump:function(t,e,a){this.$emit("tabJump",t,e,a)},toEdit:function(t,e){this.$emit("wantEdit",this.type,t,e)},toCopy:function(t,e){this.$emit("wantCopy",this.type,t,e)},resetCare:function(){this.searchList.forEach(function(t){t.list.forEach(function(t){t.checked=!1})}),this.SETSTATE({k:"careData",v:[]})},clearCare:function(){this.resetCare(),this.toGetdata()},sweepCare:function(){this.secondSearchList=[],this.firstSearch=""},selectCare:function(t,e){var a=this;if(t||void 0!==e){this.searchList.forEach(function(t){t.key==a.firstKey&&t.list.forEach(function(t){t.checked=!1})}),t&&this.secondSearchList.forEach(function(e){e.key==t&&(e.checked=!0)});var s={key:this.firstKey,vl:e||t},i=this.careData;i=i.filter(function(t){return t.key!=a.firstKey}),i.push(s),this.SETSTATE({k:"careData",v:i}),this.toGetdata()}},createAd:function(){this.$emit("toCreateAd",this.type)},reName:function(t,e){this.$refs.reName.showBox(t,e)},searchStatus:function(){this.sortDown=!this.sortDown,this.secondSearchList=[],this.firstSearch=""},searchClick:function(t,e,a){var s=this;this.firstSearch=a?"":t,this.firstKey=e,this.secondSearchList=a?[]:this.searchList.find(function(t){return s.firstSearch==t.name}).list},tableSort:function(t){this.sort=t,this.toGetdata(!0)},adSearch:function(){var t=this;""!=this.value&&(clearTimeout(c),c=setTimeout(function(){t.toSort()},300))},outListOption:function(){this.$emit("showOptionbox",this.type)},importRemain:function(){this.$emit("showRemainBox",this.type)},outTable:function(){if(this.exportstatus)if(this.adtotal>5e4)Object(H["g"])("数据请少于5万条");else{var t="".concat(this.projectname).concat(this.opDefault[0].name.replace("名称","")).concat(this.$timeFormat(new Date,"yyyyMMddHHmmss")),e=this.$notify({title:"正在导出...",message:"广告管理数据量较大，请稍等",duration:0,showClose:!1});this.SETSTATE({k:"exportstatus",v:!1});var a="",s=this.typeData.optionName;a=this[s],a.pageSize=this.adtotal,this.$store.dispatch("getAdlist",{option:a,name:t,fullScreen:!1,customOption:this.customOptionDefault,type:this.type,editType:"export",outNotify:e})}},toSort:function(){this.toGetdata(!0)},pageSwitch:function(t){this.pageindex=t,this.toGetdata()},pageSizeChange:function(t){this.SETSTATE({k:"adpagesize",v:t}),this.toGetdata(!0)},sortConditionLogic:function(t){var e="ACTIVE,PAUSED",a=t["adSetStatusStr"]?"adSetStatusStr":"adCampaignStatusStr";t[a]&&(e="",-1==t[a].indexOf("ACTIVE")&&-1==t[a].indexOf("PAUSED")||(e="ACTIVE,PAUSED"),-1!=t[a].indexOf("ARCHIVED")&&(e+=",ARCHIVED"),-1!=t[a].indexOf("DELETED")&&(e+=",DELETED")),this.SETSTATE({k:"sortdefault",v:e.replace(/^,/,"")})},toGetdata:function(t){var e=this,a=this.$route.params.bid,s=localStorage.getItem(adFilterLS.new)?JSON.parse(localStorage.getItem(adFilterLS.new)):{},i=s[this.$route.params.id]?s[this.$route.params.id]:[];t&&(this.pageindex=1);var n={pageNo:this.pageindex,pageSize:this.adpagesize,projectId:this.$route.params.id,batchId:a};this.sort&&(n.orderByCause=this.sort),this.value2&&(n[this.typeData.effect]=this.value2),this.state&&(n[this.typeData.searchKeyword]=this.state),this.careData.forEach(function(t){t.vl&&(n[t.key]=t.vl)}),i.forEach(function(t){n[t.key]&&t.key!=e.typeData.defaultFilter?n[t.key]+=" and "+t.option:n[t.key]=t.option}),this.sortConditionLogic(n),n[this.typeData.defaultFilter]=n[this.typeData.defaultFilter]?n[this.typeData.defaultFilter]:this.sortdefault;var o=Object(D["a"])({},n),r=this.typeData.optionName;this.SETSTATE({k:r,v:o}),this.$store.dispatch("getAdlist",{option:n,type:this.type,order:this.order})},mutilSelect:function(t){this.mutilselect=t,this.archivedbutton=!!this.mutilselect.find(function(t){return"ARCHIVED"==t.effectiveStatus}),this.$emit("selectSort",t)},toCtrlAll:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a,s,i,n,o,r,c,l,u,d,m,p,f,h,_,v,g,b,y=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.mutilselect.length){t.next=3;break}return Object(H["g"])("请先选择要处理的广告系列/广告组/广告"),t.abrupt("return");case 3:if(!(this.mutilselect.length>200)){t.next=6;break}return Object(H["g"])("批量操作最大条数为200"),t.abrupt("return");case 6:if("Edit"!=e||!this.mutilselect.find(function(t){return"ARCHIVED"==t.effectiveStatus})){t.next=9;break}return Object(H["g"])("已选项中包含已归档项，已归档无法编辑"),t.abrupt("return");case 9:if(a=e,s=[],i=[],this.mutilselect.forEach(function(t){var e={id:t[y.typeData.effectIdsPush],orgid:t[y.typeData.originalId],orgname:t[y.typeData.originalName]};i.push(e),s.push(t[y.typeData.effectIdsPush])}),s=s.join(","),"ARCHIVED"!=e){t.next=32;break}if([],n=[],o="",[],[],r="","adName"!=this.type){t.next=29;break}return t.next=23,this.$store.dispatch("creativeDetail",{creativeId:this.mutilselect.map(function(t){return t.creativeId}).join(","),fullScreen:!0});case 23:c=t.sent,l=c.data.filter(function(t){return t.assetFeedSpec&&"null"!=t.assetFeedSpec}),u=l.map(function(t){return t["fbCreativeId"]}),d=this.mutilselect.filter(function(t){return-1!=u.indexOf(t["creativeId"])}),n=d.map(function(t){return t["adId"]}),n.length>0&&(r="选中了至少一条使用动态创意的广告。归档此类型广告后，广告组也会自动归档",s=s.split(",").filter(function(t){return-1==n.indexOf(t)}).join(","),o=n.join(","));case 29:this.$confirm(r||"确认对".concat(this.mutilselect.length,"个").concat(this.typeData.name,"执行归档操作？归档后无法恢复"),"提示",{confirmButtonText:"归档",cancelButtonText:"取消",type:"warning"}).then(function(){y.commandExecute(s,a,o)}).catch(function(){}),t.next=60;break;case 32:if("DELETED"!=e){t.next=51;break}if([],m=[],p="",[],[],f="","adName"!=this.type){t.next=48;break}return t.next=42,this.$store.dispatch("creativeDetail",{creativeId:this.mutilselect.map(function(t){return t.creativeId}).join(","),fullScreen:!0});case 42:h=t.sent,_=h.data.filter(function(t){return t.assetFeedSpec&&"null"!=t.assetFeedSpec}),v=_.map(function(t){return t["fbCreativeId"]}),g=this.mutilselect.filter(function(t){return-1!=v.indexOf(t["creativeId"])}),m=g.map(function(t){return t["adId"]}),m.length>0&&(f="选中了至少一条使用动态创意的广告。删除此类型广告后，广告组也会自动删除",s=s.split(",").filter(function(t){return-1==m.indexOf(t)}).join(","),p=m.join(","));case 48:this.$confirm(f||"确认对".concat(this.mutilselect.length,"个").concat(this.typeData.name,"执行删除操作？删除后无法恢复"),"提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){y.commandExecute(s,a,p)}).catch(function(){}),t.next=60;break;case 51:if("Copy"!=e){t.next=59;break}if(!(Object(Vd["a"])(new Fd.a(this.mutilselect.map(function(t){return t.accountId}))).length>1)){t.next=55;break}return Object(H["g"])("暂不支持跨广告账户复制，请选择同一个广告账户下的对象"),t.abrupt("return");case 55:b=this.mutilselect[0].accountId,this.$emit("wantCopy",this.type,i,b),t.next=60;break;case 59:"Edit"==e&&this.$emit("wantEdit",this.type,this.mutilselect.map(function(t){return t[y.typeData.effectIdsPush]}),[Object(Vd["a"])(new Fd.a(this.mutilselect.map(function(t){return t.campaignName}))).join(","),Object(Vd["a"])(new Fd.a(this.mutilselect.map(function(t){return t.adSetName}))).join(","),Object(Vd["a"])(new Fd.a(this.mutilselect.map(function(t){return t.adName}))).join(",")]);case 60:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handleCommand:function(t){var e=this;if(0!=this.mutilselect.length)if(this.mutilselect.length>200)Object(H["g"])("批量操作最大条数为200");else{var a,s=[];this.mutilselect.forEach(function(t){t.seekid=t[e.typeData.effectIdsPush],s.push(t[e.typeData.effectIdsPush])}),s=s.join(","),"a"==t&&(a="ACTIVE",this.commandExecute(s,a)),"b"==t&&(a="PAUSED",this.commandExecute(s,a)),"c"==t&&this.reName(s),"d"==t&&this.$emit("changeReplace",this.type,this.mutilselect)}else Object(H["g"])("请先选择广告")},commandExecute:function(t,e,a){var s={effectiveStatus:e};s[this.typeData.effectIds]=t,s["isActiveAdIds"]=a,this.$store.dispatch("changeAdstatus",{option:s,type:this.type,fullScreen:!0})}}),computed:Object(D["a"])({},Object(M["d"])(["itemlist","adcampaigntotal","adsettotal","adadtotal","ad_option","campain_option","set_option","searchList","careData","adpagesize","adlisttimeout","exportstatus","sortdefault","optionselect","saveoption"]),{customOptionDefault:function(){var t=this.defaultOption;return"597615686992125"!=this.applicationId&&(t=this.defaultOption.filter(function(t){return"AF_次日留存率"!=t.name})),"adName"==this.type?this.opDefault.concat(t.filter(function(t){return"广告名称"!=t.name})):"campaignName"==this.type?this.opDefault.concat(t.filter(function(t){return"相关度"!=t.name&&"广告编号"!=t.name&&"广告组编号"!=t.name&&"广告组名称"!=t.name&&"广告系列名称"!=t.name&&"广告名称"!=t.name})):this.opDefault.concat(t.filter(function(t){return"相关度"!=t.name&&"广告编号"!=t.name&&"广告名称"!=t.name&&"广告组名称"!=t.name}))},typeData:function(){var t={name:"",effect:"",effectIds:""};switch(this.type){case"campaignName":t.name="广告系列",t.effect="adCampaignStatus",t.effectIds="adCampaignIds",t.effectIdsPush="campaignId",t.effectName="campaignName",t.optionName="campain_option",t.searchKeyword="campaignName",t.listTotal="adcampaigntotal",t.originalId="campaignId",t.originalName="campaignName",t.defaultFilter="adCampaignStatusStr";break;case"adSetName":t.name="广告组",t.effect="adSetStatus",t.effectIds="adSetIds",t.effectIdsPush="adsetId",t.effectName="adSetName",t.optionName="set_option",t.searchKeyword="adSetName",t.listTotal="adsettotal",t.originalId="campaignId",t.originalName="campaignName",t.defaultFilter="adSetStatusStr";break;case"adName":t.name="广告",t.effect="effectiveStatus",t.effectIds="adIds",t.effectIdsPush="adId",t.effectName="adName",t.optionName="ad_option",t.searchKeyword="adName",t.listTotal="adadtotal",t.originalId="adsetId",t.originalName="adSetName",t.defaultFilter="adStatusStr";break}return t},adtotal:function(){var t=this[this.typeData.listTotal];return t},projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName},applicationId:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).applicationId}})},am=em,sm=(a("8516"),Object(E["a"])(am,Ud,$d,!1,null,"99c9f636",null)),im=sm.exports,nm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create"},[a("select-img",{attrs:{status:t.selectstatus,multiple:"active"==t.selectkey},on:{"update:status":function(e){t.selectstatus=e},select:t.selectImage}}),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"cr-content"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.breadcrumb,function(e,s){return a("el-breadcrumb-item",{key:s,class:{tabnav:!0,important:e.important},attrs:{title:e.name}},[t._v(t._s(e.name))])}),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"campaignName"==t.type,expression:"type == 'campaignName'"}],staticClass:"infobox"},[a("create-campaign",{ref:"createCampaign",attrs:{editId:t.editId},on:{changeEdit:t.changeEdit}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"adSetName"==t.type,expression:"type == 'adSetName'"}],staticClass:"infobox adsetbox"},[a("create-adset",{ref:"createAdset",attrs:{editId:t.editId},on:{changeEdit:t.changeEdit}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"adName"==t.type,expression:"type == 'adName'"}],staticClass:"infobox"},[a("create-ad",{ref:"createAd",attrs:{editId:t.editId},on:{showTempImages:t.showTempImages,changeEdit:t.changeEdit}})],1),a("div",{staticClass:"buttomctrl"},[a("el-button",{attrs:{size:"medium"},on:{click:t.hideBox}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"medium",disabled:t.hascreatead},on:{click:t.saveInfo}},[t._v("保存")])],1)])]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"cr-shadow",on:{click:t.hideBox}})])],1)},om=[],rm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-campaign"},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-width":"110px","label-position":"left"}},[a("el-form-item",{attrs:{label:"当前广告账户"}},[t.mutilAccount?t._e():a("el-select",{staticClass:"formselect",attrs:{filterable:"",placeholder:"请选择广告账户",disabled:t.editId.length>0},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1),t.mutilAccount?a("p",[t._v("多项内容")]):t._e()],1),t.editId.length>0?a("el-form-item",{attrs:{label:"广告系列编号"}},[a("span",{staticClass:"adnum",attrs:{id:"copyCampaign"}},[t._v(t._s(t.editId.length>1?"多项内容":t.editId[0]))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.editId.length,expression:"editId.length == 1"}],attrs:{id:"copyButtonCampaign","data-clipboard-action":"copy","data-clipboard-target":"#copyCampaign",type:"primary",size:"mini"}},[t._v("复制")])],1):t._e(),a("el-form-item",{attrs:{label:"广告系列名称"}},[t.mutil.name?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.name,expression:"mutilstatus.name"}]},[t._v("多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.name=!t.mutilstatus.name}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.name,expression:"!mutilstatus.name"}]},[t._v("多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.name=!t.mutilstatus.name}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.name,expression:"!mutilstatus.name"}],attrs:{placeholder:"请输入广告系列名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("h1",{staticClass:"secondtitle"},[t._v("广告系列详情")]),t._m(0)],1)},cm=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info"},[a("p",[a("span",{staticClass:"theme"},[t._v("目标")]),a("span",[t._v("应用安装量")])]),a("p",[a("span",{staticClass:"theme"},[t._v("购买类型")]),a("span",[t._v("竞拍")])])])}],lm={props:["editId"],data:function(){return{mutilAccount:!1,form:{account:"",name:""},mutilstatus:{},mutil:{name:!1}}},mounted:function(){this.$textCopy("#copyButtonCampaign")},methods:{extractInfo:function(){if(this.form.account){if(this.form.name||this.mutilstatus.name){var t={accountId:this.form.account,name:this.form.name,campaignId:this.editId};return t}Object(H["g"])("请输入广告系列名称")}else Object(H["g"])("请选择广告账户")},reset:function(){this.mutilAccount=!1,this.form.name="",this.form.account="",this.mutilstatus={},this.mutil={name:!1}},initData:function(){var t=this;this.adaccountid.length>1?this.form.account="":this.form.account=0==this.adaccountid.length?"":this.adaccountid[0],setTimeout(function(){t.$emit("changeEdit",!1)},100)}},computed:Object(D["a"])({},Object(M["d"])(["commonaccount","adaccountid","editcampaignlist"])),watch:{editcampaignlist:function(t,e){var a=this;if(t.length>0){var s=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.accountId})));this.form.account=s.length>1?"":s[0],this.mutilAccount=s.length>1,this.form.name=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.name}))).length>1?"":t[0].name,this.mutil={name:!this.form.name},this.mutilstatus=fe()({},this.mutil),setTimeout(function(){a.$emit("changeEdit",!1)},100)}},"form.account":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.name":{handler:function(t,e){this.$emit("changeEdit",!0)}}}},um=lm,dm=(a("e802"),Object(E["a"])(um,rm,cm,!1,null,"7cabc7fa",null)),mm=dm.exports,pm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-adset"},[a("el-form",{staticClass:"form",attrs:{model:t.form,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"当前广告系列"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutil.campaign,expression:"!mutil.campaign"}],staticClass:"formselect",attrs:{remote:"","remote-method":t.remoteMethod,disabled:t.editId.length>0,filterable:"",placeholder:"请选择广告系列"},on:{change:t.accountToAudience},model:{value:t.form.campaign,callback:function(e){t.$set(t.form,"campaign",e)},expression:"form.campaign"}},t._l(t.createcampaignlist,function(t){return a("el-option",{key:t.campaignId,staticClass:"selectOption",attrs:{label:t.campaiggName+"("+t.campaignId+")",value:t.campaignId+"|"+t.fbAccount}})}),1),t.mutil.campaign?a("p",[t._v("多项内容")]):t._e()],1),t.editId.length>0?a("el-form-item",{attrs:{label:"广告组编号"}},[a("span",{staticClass:"adnum",attrs:{id:"copyAdset"}},[t._v(t._s(t.editId.length>1?"多项内容":t.editId[0]))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.editId.length,expression:"editId.length == 1"}],attrs:{id:"copyButtonAdset","data-clipboard-action":"copy","data-clipboard-target":"#copyAdset",type:"primary",size:"mini"}},[t._v("复制")])],1):t._e(),a("el-form-item",{attrs:{label:"广告组名称"}},[t.mutil.name?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.name,expression:"mutilstatus.name"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.name=!t.mutilstatus.name}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.name,expression:"!mutilstatus.name"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.name=!t.mutilstatus.name}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.name,expression:"!mutilstatus.name"}],attrs:{placeholder:"请输入广告组名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticClass:"activecreate",attrs:{label:"动态创意"}},[t.mutil.activecreate?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.activecreate,expression:"mutilstatus.activecreate"}]},[t._v("多项内容")])]):t._e(),a("el-switch",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.activecreate,expression:"!mutilstatus.activecreate"}],attrs:{"active-color":"#13ce66","inactive-color":"#d7dae2",disabled:t.editId.length>0},model:{value:t.form.activecreate,callback:function(e){t.$set(t.form,"activecreate",e)},expression:"form.activecreate"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.activecreate,expression:"!mutilstatus.activecreate"}],staticClass:"tipfont"},[t._v("提供图片和标题等素材，并自动为受众生成创意组合")])],1),a("el-form-item",{attrs:{label:"国家"}},[t.mutil.country?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.country,expression:"mutilstatus.country"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.country=!t.mutilstatus.country}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.country,expression:"!mutilstatus.country"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.country=!t.mutilstatus.country}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.country,expression:"!mutilstatus.country"}],staticClass:"formselect",attrs:{multiple:"",filterable:"",placeholder:"请选择国家，可搜索"},on:{change:t.showBidChart},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1)],1),a("el-form-item",{attrs:{label:"应用"}},[t.mutil.action?a("p",[t._v("多项内容")]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.action,expression:"!mutilstatus.action"}],staticClass:"formselect",attrs:{placeholder:"请选择应用"},on:{change:t.getPlatform},model:{value:t.form.action,callback:function(e){t.$set(t.form,"action",e)},expression:"form.action"}},t._l(t.adapplist,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.applicationId}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.form.action,expression:"form.action"}],attrs:{label:"平台"}},[t.mutil.platform?a("p",[t._v("多项内容")]):t._e(),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutil.platform,expression:"!mutil.platform"}],on:{change:t.toGetsystem},model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},t._l(t.createplatform,function(e){return a("el-radio",{key:e.marketType,attrs:{label:e.marketType,disabled:t.editId.length>0}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],staticClass:"cline versionline",attrs:{label:"系统版本"}},[t.mutil.version?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.version,expression:"mutilstatus.version"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.version=!t.mutilstatus.version}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.version,expression:"!mutilstatus.version"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.version=!t.mutilstatus.version}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.version,expression:"!mutilstatus.version"}],staticClass:"versionselect",attrs:{placeholder:"最低版本"},model:{value:t.form.lowversion,callback:function(e){t.$set(t.form,"lowversion",e)},expression:"form.lowversion"}},t._l(t.system,function(t){return a("el-option",{key:t.version,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.version,expression:"!mutilstatus.version"}]},[t._v("-")]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.version,expression:"!mutilstatus.version"}],staticClass:"versionselect",attrs:{placeholder:"最高版本"},model:{value:t.form.highversion,callback:function(e){t.$set(t.form,"highversion",e)},expression:"form.highversion"}},t._l(t.system,function(t){return a("el-option",{key:t.version,attrs:{label:t.os+" "+t.version,value:t.version}})}),1),a("p",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("最高版本为空则无上限")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"受众"}},[t.mutil.target?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.target,expression:"mutilstatus.target"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.target=!t.mutilstatus.target}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.target,expression:"!mutilstatus.target"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.target=!t.mutilstatus.target}}},[t._v("撤销编辑")])],1)]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.target,expression:"!mutilstatus.target"}],staticClass:"targettip"},[t._v("定位至少符合以下一项条件的用户")]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.target,expression:"!mutilstatus.target"}],staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.notarget.indexOf(""+e.audienceId),expression:"form.notarget.indexOf(`${item.audienceId}`) == -1"}],key:e.code,attrs:{label:e.name+"（"+e.audienceId+"）",value:""+e.audienceId}})}),1)}),1),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.target,expression:"!mutilstatus.target"}],model:{value:t.form.iftarget,callback:function(e){t.$set(t.form,"iftarget",e)},expression:"form.iftarget"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("不排除任何受众")])],1),1!=t.form.iftarget[0]?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.target,expression:"!mutilstatus.target"}],staticClass:"targettip"},[t._v("排除至少符合以下一项条件的用户")]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.target&&1!=t.form.iftarget[0],expression:"!mutilstatus.target && form.iftarget[0] != 1"}],staticClass:"select accountselect",attrs:{"no-data-text":"暂无受众，请修改账户或新增受众",multiple:"",filterable:"",placeholder:"请选择受众，可搜索"},model:{value:t.form.notarget,callback:function(e){t.$set(t.form,"notarget",e)},expression:"form.notarget"}},t._l(t.genertarget,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label.split("_")[1]}},t._l(e.options,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.target.indexOf(""+e.audienceId),expression:"form.target.indexOf(`${item.audienceId}`) == -1"}],key:e.code,attrs:{label:e.name+"（"+e.audienceId+"）",value:""+e.audienceId}})}),1)}),1)],1),a("el-form-item",{attrs:{label:"预算"}},[t.mutil.moneytype?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.moneytype,expression:"mutilstatus.moneytype"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.moneytype=!t.mutilstatus.moneytype}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.moneytype,expression:"!mutilstatus.moneytype"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.moneytype=!t.mutilstatus.moneytype}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.moneytype,expression:"!mutilstatus.moneytype"}],model:{value:t.form.moneytype,callback:function(e){t.$set(t.form,"moneytype",e)},expression:"form.moneytype"}},[a("el-radio",{attrs:{label:"day_budget"}},[t._v("单日预算")]),a("el-radio",{attrs:{label:"total_budget"}},[t._v("总预算")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.moneytype,expression:"!mutilstatus.moneytype"}],staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:"请输入预算金额（单位：美元）"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype&&!t.mutilstatus.moneytype,expression:"form.moneytype == 'total_budget' && !mutilstatus.moneytype"}],attrs:{label:"投放日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"total_budget"==t.form.moneytype&&!t.mutilstatus.moneytype,expression:"form.moneytype == 'total_budget' && !mutilstatus.moneytype"}],staticClass:"cline timerange",attrs:{label:"投放时段"}},[a("el-radio-group",{model:{value:t.form.timerange,callback:function(e){t.$set(t.form,"timerange",e)},expression:"form.timerange"}},[a("el-radio",{attrs:{label:"allday"}},[t._v("全天投放广告")]),a("el-radio",{attrs:{label:"schedule"}},[t._v("分时间段投放")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"schedule"==t.form.timerange,expression:"form.timerange == 'schedule'"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"selectsmall",attrs:{multiple:"",placeholder:"按广告受众所在时区"},model:{value:t.form.rdate,callback:function(e){t.$set(t.form,"rdate",e)},expression:"form.rdate"}},t._l(t.week,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.key}})}),1),a("el-time-picker",{staticClass:"timeselect",attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.form.rtime,callback:function(e){t.$set(t.form,"rtime",e)},expression:"form.rtime"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.platform,expression:"form.platform != ''"}],attrs:{label:"设备"}},[t.mutil.equip?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.equip,expression:"mutilstatus.equip"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.equip=!t.mutilstatus.equip}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.equip,expression:"!mutilstatus.equip"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.equip=!t.mutilstatus.equip}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.equip,expression:"!mutilstatus.equip"}],model:{value:t.form.equip,callback:function(e){t.$set(t.form,"equip",e)},expression:"form.equip"}},["google_play"==t.form.platform?a("el-checkbox",{attrs:{label:"Android_Smartphone",name:"type"}},[t._v("安卓智能手机")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPhone",name:"type"}},[t._v("iPhone")]):t._e(),"itunes"==t.form.platform?a("el-checkbox",{attrs:{label:"iPad",name:"type"}},[t._v("iPad")]):t._e()],1)],1),a("el-form-item",{attrs:{label:"性别"}},[t.mutil.sex?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.sex,expression:"mutilstatus.sex"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.sex=!t.mutilstatus.sex}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.sex,expression:"!mutilstatus.sex"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.sex=!t.mutilstatus.sex}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.sex,expression:"!mutilstatus.sex"}],model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:0}},[t._v("全部")]),a("el-radio",{attrs:{label:1}},[t._v("男")]),a("el-radio",{attrs:{label:2}},[t._v("女")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"年龄"}},[t.mutil.age?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.age,expression:"mutilstatus.age"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.age=!t.mutilstatus.age}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.age,expression:"!mutilstatus.age"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.age=!t.mutilstatus.age}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-slider",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.age,expression:"!mutilstatus.age"}],attrs:{range:"",min:13,max:65,"format-tooltip":t.formatTooltip},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),a("el-form-item",{attrs:{label:"语言"}},[t.mutil.language?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.language,expression:"mutilstatus.language"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.language=!t.mutilstatus.language}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.language,expression:"!mutilstatus.language"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.language=!t.mutilstatus.language}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.language,expression:"!mutilstatus.language"}],staticClass:"formselect",attrs:{multiple:"",filterable:"",placeholder:"请选择语言，可搜索"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},t._l(t.language,function(t){return a("el-option",{key:t.localeId,attrs:{label:t.name,value:t.localeId}})}),1)],1),a("el-form-item",{attrs:{label:"兴趣"}},[t.mutil.interest?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.interest,expression:"mutilstatus.interest"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.interest=!t.mutilstatus.interest}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.interest,expression:"!mutilstatus.interest"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.interest=!t.mutilstatus.interest}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.interest,expression:"!mutilstatus.interest"}],staticClass:"formselect",attrs:{multiple:"",filterable:"",placeholder:"请选择兴趣，可搜索"},model:{value:t.form.interest,callback:function(e){t.$set(t.form,"interest",e)},expression:"form.interest"}},t._l(t.interests,function(t){return a("el-option",{key:t.featureId,attrs:{label:t.name,value:t.featureId}})}),1)],1),a("el-form-item",{attrs:{label:"自动版位"}},[t.mutil.auto?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.auto,expression:"mutilstatus.auto"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.auto=!t.mutilstatus.auto}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.auto,expression:"!mutilstatus.auto"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.auto=!t.mutilstatus.auto}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.auto,expression:"!mutilstatus.auto"}],model:{value:t.form.auto,callback:function(e){t.$set(t.form,"auto",e)},expression:"form.auto"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("是（Facebook自动选择最好的版位）")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=t.form.auto[0]&&!t.mutilstatus.auto,expression:"form.auto[0] != 1 && !mutilstatus.auto"}],staticClass:"verpla",attrs:{label:"版位"}},[a("el-checkbox-group",{staticStyle:{width:"500px"},model:{value:t.form.verpla,callback:function(e){t.$set(t.form,"verpla",e)},expression:"form.verpla"}},[a("el-checkbox",{attrs:{label:"facebook",name:"type",disabled:-1!=t.form.verpla.indexOf("audience_network")||-1!=t.form.verpla.indexOf("messenger")}},[t._v("Facebook")]),a("el-checkbox",{attrs:{label:"instagram",name:"type"}},[t._v("Instagram")]),a("el-checkbox",{attrs:{label:"audience_network",name:"type",disabled:-1==t.form.verpla.indexOf("facebook")}},[t._v("Audience Network")]),a("el-checkbox",{attrs:{label:"messenger",name:"type",disabled:-1==t.form.verpla.indexOf("facebook")}},[t._v("Messenger")])],1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"出价"}},[t.mutil.bid?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.bid,expression:"mutilstatus.bid"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.bid=!t.mutilstatus.bid}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.bid,expression:"!mutilstatus.bid"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.bid=!t.mutilstatus.bid}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.bid,expression:"!mutilstatus.bid"}],on:{change:t.maxbidDefault},model:{value:t.form.bid,callback:function(e){t.$set(t.form,"bid",e)},expression:"form.bid"}},[a("el-radio",{attrs:{label:"cpi"}},[t._v("CPI")]),a("el-radio",{attrs:{label:"cpm"}},[t._v("CPM")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.bid,expression:"!mutilstatus.bid"}],attrs:{label:"竞价上限"}},[a("div",{staticClass:"moneyinput"},[a("span",{staticClass:"moneyus"},[t._v("$")]),a("el-input",{staticClass:"minput",attrs:{placeholder:t.maxbidplace},model:{value:t.form.maxbid,callback:function(e){t.$set(t.form,"maxbid",e)},expression:"form.maxbid"}})],1)]),a("el-form-item",{staticClass:"cline",attrs:{label:"用户过滤"}},[t.mutil.filtra?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.filtra,expression:"mutilstatus.filtra"}]},[t._v("\n          多项内容，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.filtra=!t.mutilstatus.filtra}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.filtra,expression:"!mutilstatus.filtra"}]},[t._v("\n          多项内容，已编辑，\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.filtra=!t.mutilstatus.filtra}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.filtra,expression:"!mutilstatus.filtra"}],model:{value:t.form.filtra,callback:function(e){t.$set(t.form,"filtra",e)},expression:"form.filtra"}},[a("el-checkbox",{attrs:{label:"1",name:"filtra"}},[t._v("过滤已安装用户")]),a("el-checkbox",{attrs:{label:"2",name:"filtra"}},[t._v("过滤已关注用户")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:-1!=t.form.filtra.indexOf("2")&&!t.mutilstatus.filtra,expression:"form.filtra.indexOf('2') != -1 && !mutilstatus.filtra"}],staticClass:"moneyinput"},[a("el-select",{staticClass:"formselect",attrs:{multiple:"",placeholder:"请选择要过滤的主页，必选"},model:{value:t.form.filtrapage,callback:function(e){t.$set(t.form,"filtrapage",e)},expression:"form.filtrapage"}},t._l(t.createallpagelist,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1)],1)],1)],1),a("div",{staticClass:"bidguide"},[a("gener-guide",{attrs:{bid:t.form.bid,maxbid:t.form.maxbid,moneytype:t.form.moneytype,money:t.form.money}})],1)],1)},fm=[],hm={props:["editId"],data:function(){return{maxbidplace:"请输入竞价上限（单位：美元）",editArray:[],week:[{name:"周一",key:1},{name:"周二",key:2},{name:"周三",key:3},{name:"周四",key:4},{name:"周五",key:5},{name:"周六",key:6},{name:"周七",key:7}],form:{campaign:"",name:"",activecreate:!1,country:[],action:"",platform:"",lowversion:"",highversion:"",target:[],notarget:[],iftarget:["1"],moneytype:"day_budget",money:"",date:[],timerange:"allday",rdate:[],rtime:[new Date(2016,9,10,0,0,0),new Date(2016,9,10,23,0,0)],equip:[],sex:0,age:[13,65],language:[],interest:[],auto:["1"],verpla:["facebook","instagram"],bid:"cpi",maxbid:"0.02",filtra:["1","2"],filtrapage:[]},mutilstatus:{},mutil:{campaign:!1,name:!1,activecreate:!1,country:!1,action:!1,target:!1,platform:!1,version:!1,moneytype:!1,equip:!1,sex:!1,age:!1,language:!1,interest:!1,auto:!1,bid:!1,filtra:!1},msg:{campaign:"请选择广告系列",name:"请输入广告组名称",country:"请选择国家",platform:"请选择平台",version:"请选择系统版本",moneytype:"请选择预算",money:"请输入预算金额",date:"请选择投放日期",rdate:"请选择星期",equip:"请选择设备",sex:"请选择性别",language:"请选择语言",verpla:"请选择版位",maxbid:"请输入竞价上限",maxbidmax:"竞价上限必须大于0.02美元",filtra:"请选择用户过滤",filtrapage:"请选择需要过滤的主页"}}},components:{GenerGuide:Tl},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{accountToAudience:function(){this.form.target=[],this.form.notarget=[];var t=this.form.campaign.split("|")[1];this.$store.dispatch("generTargetList",{fb_account_ids:t})},showBidChart:function(){if(0!=this.form.country.length&&this.form.action){var t=this.form.country,e="cpi"==this.form.bid?"APP_INSTALLS":"IMPRESSIONS";this.$store.dispatch("bidGuide",{country:t,fbApplicationId:this.form.action,billingEvent:e})}},remoteMethod:function(t){""!==t?this.$store.dispatch("getCreateCampaignlist",{keyword:t,projectId:this.$route.params.id}):this.SETSTATE({k:"createcampaignlist",v:[]})},formatTooltip:function(t){if(65==t)return"65+"},maxbidDefault:function(){"cpi"==this.form.bid?(this.form.maxbid="0.02",this.maxbidplace="请输入竞价上限（单位：美元）"):(this.form.maxbid="",this.maxbidplace="选填"),this.showBidChart()},dataChecked:function(){if(""==this.form.campaign&&!this.mutilstatus.campaign)return[!1,this.msg.campaign];if(""==this.form.name&&!this.mutilstatus.name)return[!1,this.msg.name];if(0==this.form.country.length&&!this.mutilstatus.country)return[!1,this.msg.country];if(""==this.form.platform&&!this.mutilstatus.platform)return[!1,this.msg.platform];if(""==this.form.lowversion&&!this.mutilstatus.version)return[!1,this.msg.version];if(""==this.form.moneytype&&!this.mutilstatus.moneytype)return[!1,this.msg.moneytype];if(""==this.form.money&&!this.mutilstatus.moneytype)return[!1,this.msg.money];if("total_budget"==this.form.moneytype){if(!this.form.date||0==this.form.date.length)return[!1,this.msg.date];if("schedule"==this.form.timerange&&0==this.form.rdate.length)return[!1,this.msg.rdate]}return this.form.platform||0!=this.form.equip.filter(function(t){return t}).length||this.mutilstatus.equip?null!==this.form.sex||this.mutilstatus.sex?0!=this.form.auto.length||0!=this.form.verpla.length||this.mutilstatus.auto?"cpi"!=this.form.bid||""!=this.form.maxbid||this.mutilstatus.bid?""!==this.form.maxbid&&(isNaN(Bo()(this.form.maxbid))||this.form.maxbid<.02)&&!this.mutilstatus.bid?[!1,this.msg.maxbidmax]:-1!=this.form.filtra.indexOf("2")&&0==this.form.filtrapage.length?[!1,this.msg.filtrapage]:[!0]:[!1,this.msg.maxbid]:[!1,this.msg.verpla]:[!1,this.msg.sex]:[!1,this.msg.equip]},extractInfo:function(){var t=this,e=this.dataChecked();if(e[0]){var a=[];return this.editArray.length>0?(this.editArray.forEach(function(e){var s={};s.adAccount=t.mutilstatus.campaign?"act_"+e.accountId:t.form.campaign.split("|")[1],s.adSet=e.adsetId,s.adSetName=t.mutilstatus.name?e.name:t.form.name,s.applicationId=t.form.action,s.dynamicCreative=e.isDynamicCreative,t.mutilstatus.target?(s.includeAudience=e.included,s.excludeAudience=e.excluded):(s.includeAudience=t.form.target,s.excludeAudience="1"==t.form.iftarget[0]?[]:t.form.notarget),t.mutilstatus.bid?(s.bidAmount=""===e.bidAmount?null:Bo()(100*e.bidAmount),s.billingType=e.bid):(s.bidAmount=""===t.form.maxbid?null:Bo()(100*t.form.maxbid),s.billingType=t.form.bid),t.mutilstatus.moneytype?(s.budgetType=e.moneytype,"day_budget"==s.budgetType?s.dayBudget=Bo()(100*e.dailyBudget):s.totalBudget=Bo()(100*e.lifetimeBudget),s.startTime="day_budget"==s.budgetType?null:e.startTime,s.endTime="day_budget"==s.budgetType?null:e.endTime,s.scheduleType="day_budget"==s.budgetType?null:e.timerange,s.days="total_budget"==s.budgetType&&"schedule"==s.scheduleType?e.weekday.map(function(t){return Bo()(t)+1}):null,s.startMinute="total_budget"==s.budgetType&&"schedule"==s.scheduleType?"".concat(Bo()(e.startMinute/60),":").concat(e.startMinute%60):null,s.endMinute="total_budget"==s.budgetType&&"schedule"==s.scheduleType?"".concat(Bo()(e.endMinute/60),":").concat(e.endMinute%60):null):(s.budgetType=t.form.moneytype,"day_budget"==s.budgetType?s.dayBudget=Bo()(100*t.form.money):s.totalBudget=Bo()(100*t.form.money),s.startTime="day_budget"==s.budgetType?null:new Date(t.form.date[0]).getTime(),s.endTime="day_budget"==s.budgetType?null:new Date(t.form.date[1]).getTime(),s.scheduleType="day_budget"==s.budgetType?null:t.form.timerange,s.days="total_budget"==s.budgetType&&"schedule"==s.scheduleType?t.form.rdate:null,s.startMinute="total_budget"==s.budgetType&&"schedule"==s.scheduleType?t.$timeFormat(t.form.rtime[0],"HH")+":00":null,s.endMinute="total_budget"==s.budgetType&&"schedule"==s.scheduleType?t.$timeFormat(t.form.rtime[1],"HH")+":00":null),s.campaignList=[e.campaignId],s.country=t.mutilstatus.country?e.country:t.form.country,s.platform=e.platform,t.mutilstatus.platform?(s.device="itunes"==e.platform?e.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):e.equip.filter(function(t){return"Android_Smartphone"==t}),s.minVersion=e.lowversion,s.maxVersion=e.highversion):(t.mutilstatus.equip?s.device="itunes"==e.platform?e.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):e.equip.filter(function(t){return"Android_Smartphone"==t}):s.device="itunes"==e.platform?t.form.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):t.form.equip.filter(function(t){return"Android_Smartphone"==t}),s.minVersion=t.mutilstatus.version?e.lowversion:t.form.lowversion,s.maxVersion=t.mutilstatus.version?e.highversion:t.form.highversion),t.mutilstatus.filtra?(s.filteAttentionUser=e.filtrapage,s.filteInstalledUser=-1!=e.filtra.indexOf("1")?"yes":""):(s.filteAttentionUser=-1!=t.form.filtra.indexOf("2")?t.form.filtrapage:[],s.filteInstalledUser=-1!=t.form.filtra.indexOf("1")?"yes":""),s.gender=t.mutilstatus.sex?e.sex:t.form.sex,s.interest=t.mutilstatus.interest?e.interest:t.form.interest,s.locales=t.mutilstatus.language?e.language:t.form.language,s.maxAge=t.mutilstatus.age?e.maxage:t.form.age[1],s.minAge=t.mutilstatus.age?e.minage:t.form.age[0],t.mutilstatus.auto?s.position=e.verpla:s.position="1"==t.form.auto[0]?[]:t.form.verpla,a.push(s)}),a):this.form}Object(H["g"])(e[1])},toGetsystem:function(){var t="itunes"==this.form.platform?"ios":"android";this.form.version="",this.$store.dispatch("getSystem",{os:t})},reset:function(){this.SETSTATE({k:"createcampaignlist",v:[]}),this.SETSTATE({k:"adapplist",v:[]}),this.SETSTATE({k:"genertarget",v:[]}),this.editArray=[],this.form={campaign:"",name:"",country:[],action:"",activecreate:!1,platform:"",target:[],notarget:[],iftarget:["1"],lowversion:"",highversion:"",moneytype:"day_budget",money:"",date:[],timerange:"allday",rdate:[],rtime:[new Date(2016,9,10,0,0,0),new Date(2016,9,10,23,0,0)],equip:[],sex:0,age:[13,65],language:[],interest:[],auto:["1"],verpla:["facebook","instagram"],bid:"cpi",maxbid:"0.02",filtra:["1","2"],filtrapage:[]},this.mutilstatus={},this.mutil={campaign:!1,name:!1,country:!1,action:!1,platform:!1,version:!1,moneytype:!1,equip:!1,sex:!1,age:!1,language:!1,interest:!1,auto:!1,bid:!1,filtra:!1}},initData:function(t){var e=this;this.SETSTATE({k:"genertarget",v:[]}),this.campainsortlist.length>1?this.form.campaign="":(this.form.campaign=0==this.campainsortlist.length?"":this.campainsortlist[0].campaignId+"|act_"+this.campainsortlist[0].accountId,this.accountToAudience()),this.form.campaign&&this.$store.dispatch("getCreateCampaignlist",{keyword:this.campainsortlist[0].campaignId,projectId:this.$route.params.id}),setTimeout(function(){e.$emit("changeEdit",!1)},100)},getPlatform:function(){this.showBidChart(),this.form.platform="",this.form.lowversion="",this.form.highversion="",this.SETSTATE({k:"system",v:[]}),this.$store.dispatch("getCreatePlatform",{applicationid:this.form.action})}}),computed:Object(D["a"])({},Object(M["d"])(["campainsortlist","createcampaignlist","othercountries","language","interests","adapplist","itemlist","system","createplatform","createallpagelist","editadsetlist","genertarget"]),{equip:function(){return this.form.platform}}),mounted:function(){this.$textCopy("#copyButtonAdset")},watch:{editadsetlist:function(t,e){var a=this;if(t.length>0){this.editArray=t,this.form.action=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.applicationId}))).length>1?"":t[0].applicationId,this.form.campaign=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.campaignId}))).length>1?"":t[0].campaignId+"|act_"+t[0].accountId,this.form.name=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.name}))).length>1?"":t[0].name,this.form.activecreate=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.isDynamicCreative}))).length>1?"":t[0].isDynamicCreative,this.form.target=t.length>1?[]:t[0].included,this.form.notarget=t.length>1?[]:t[0].excluded,this.form.iftarget=1==t.length&&t[0].excluded.length>0?[]:["1"],this.form.country=this.$equalArray(t.map(function(t){return t.country}))?t[0].country:[],this.form.platform=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.platform}))).length>1?"":t[0].platform,this.form.platform&&this.toGetsystem(),this.form.lowversion=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.lowversion}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.highversion}))).length>1?"":t[0].lowversion,this.form.lowversion&&(this.form.highversion=t[0].highversion);var s=!0;(Object(Vd["a"])(new Fd.a(t.map(function(t){return t.moneytype}))).length>1||"day_budget"==t[0].moneytype&&Object(Vd["a"])(new Fd.a(t.map(function(t){return t.dailyBudget}))).length>1||"total_budget"==t[0].moneytype&&Object(Vd["a"])(new Fd.a(t.map(function(t){return t.lifetimeBudget}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.startTime}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.endTime}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.startMinute}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.endMinute}))).length>1||!this.$equalArray(t.map(function(t){return t.weekday})))&&(s=!1),this.form.moneytype=s?t[0].moneytype:"",this.form.moneytype&&("day_budget"==this.form.moneytype?this.form.money=ps()(t[0].dailyBudget/100):(this.form.money=ps()(t[0].lifetimeBudget/100),this.form.date=[new Date(t[0].startTime),new Date(t[0].endTime)],this.form.timerange=t[0].timerange,"schedule"==this.form.timerange&&(this.form.rdate=t[0].weekday.map(function(t){return Bo()(t)+1}),this.form.rtime=[new Date(2016,9,10,Bo()(t[0].startMinute/60),0,0),new Date(2016,9,10,Bo()(t[0].endMinute/60),0,0)]))),this.form.equip=this.$equalArray(t.map(function(t){return t.equip}))?t[0].equip:[],this.form.sex=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.sex}))).length>1?null:t[0].sex,this.form.age=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.minage}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.maxage}))).length>1?[13,65]:[Bo()(t[0].minage),Bo()(t[0].maxage)],this.form.language=this.$equalArray(t.map(function(t){return t.language}))?t[0].language:[],this.form.interest=this.$equalArray(t.map(function(t){return t.interest}))?t[0].interest:[];var i=this.$equalArray(t.map(function(t){return t.verpla}));if(this.form.verpla=i?t[0].verpla:[],this.form.auto=i&&0==t[0].verpla.length?["1"]:[],this.form.bid=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.bid}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.bidAmount}))).length>1?"":t[0].bid,this.form.bid&&(this.form.maxbid=t[0].bidAmount?t[0].bidAmount/100:""),this.form.filtra=this.$equalArray(t.map(function(t){return t.filtra}))&&this.$equalArray(t.map(function(t){return t.filtrapage}))?t[0].filtra:[],-1!=this.form.filtra.indexOf("2")){this.form.filtrapage=t[0].filtrapage;var n=this.createallpagelist;n=n.filter(function(t){return-1==a.form.filtrapage.indexOf(t.id)}),n=n.concat(t[0].filtrapageObj),this.SETSTATE({k:"createallpagelist",v:n})}this.mutil={campaign:!this.form.campaign,name:!this.form.name,activecreate:""===this.form.activecreate,country:0==this.form.country.length,target:t.length>1,action:!this.form.action,platform:!this.form.platform,version:t.length>1&&!this.form.lowversion,moneytype:!this.form.moneytype,equip:0==this.form.equip.length,sex:null===this.form.sex,age:Object(Vd["a"])(new Fd.a(t.map(function(t){return t.minage}))).length>1||Object(Vd["a"])(new Fd.a(t.map(function(t){return t.maxage}))).length>1,language:t.length>1&&0==this.form.language.length,interest:t.length>1&&0==this.form.interest.length,auto:!i,bid:!this.form.bid,filtra:t.length>1&&0==this.form.filtra.length},this.mutilstatus=fe()({},this.mutil),this.form.campaign&&this.$store.dispatch("getCreateCampaignlist",{keyword:t[0].campaignId,projectId:this.$route.params.id});var o=Object(Vd["a"])(new Fd.a(t.map(function(t){return t.accountId}))).map(function(t){return"act_".concat(t)}).join(",");this.$store.dispatch("generTargetList",{fb_account_ids:o}),this.form.action&&(this.$store.dispatch("getAppInfo",this.form.action),this.$store.dispatch("getCreatePlatform",{applicationid:this.form.action})),setTimeout(function(){a.$emit("changeEdit",!1)},100)}},equip:function(t,e){this.form.equip="google_play"==t?["Android_Smartphone"]:["iPhone","iPad"]},"form.campaign":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.name":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.country":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.platform":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.lowversion":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.highversion":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.moneytype":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.money":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.sex":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.language":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.interest":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.bid":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.maxbid":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.filtrapage":{handler:function(t,e){this.$emit("changeEdit",!0)}}}},_m=hm,vm=(a("c1a2"),Object(E["a"])(_m,pm,fm,!1,null,"c67e2050",null)),gm=vm.exports,bm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{staticClass:"form",attrs:{model:t.form,"label-width":"110px","label-position":"left"}},[a("el-form-item",{attrs:{label:"当前广告组"}},[t.mutil.adset?a("p",[t._v("多项内容")]):t._e(),a("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.mutil.adset,expression:"!mutil.adset"}],staticClass:"formselect",attrs:{disabled:t.editId.length>0,filterable:"",remote:"","remote-method":t.remoteMethod,placeholder:"请选择广告组",loading:t.adsetlistload,"loading-text":"加载中..."},on:{change:t.setFbAccountId},model:{value:t.form.adset,callback:function(e){t.$set(t.form,"adset",e)},expression:"form.adset"}},t._l(t.createadsetlist,function(t){return a("el-option",{key:t.adSetId,attrs:{label:t.adSetName+"("+t.adSetId+")",value:t.adSetId+"|"+t.fbAccountId}})}),1),a("p",{directives:[{name:"show",rawName:"v-show",value:t.hascreatead,expression:"hascreatead"}],staticClass:"wrongti"},[t._v("广告组不可用，此动态创意广告组已有广告")])],1),t.editId.length>0?a("el-form-item",{attrs:{label:"广告编号"}},[a("span",{staticClass:"adnum",attrs:{id:"copyAd"}},[t._v(t._s(t.editId.length>1?"多项内容":t.editId[0]))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.editId.length,expression:"editId.length == 1"}],attrs:{id:"copyButtonAd","data-clipboard-action":"copy","data-clipboard-target":"#copyAd",type:"primary",size:"mini"}},[t._v("复制")])],1):t._e(),a("el-form-item",{attrs:{label:"广告名称"}},[t.mutil.name?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.name,expression:"mutilstatus.name"}]},[t._v("\n        多项内容，\n        "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.name=!t.mutilstatus.name}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.name,expression:"!mutilstatus.name"}]},[t._v("\n        多项内容，已编辑，\n        "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.name=!t.mutilstatus.name}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.name,expression:"!mutilstatus.name"}],staticClass:"forminput",attrs:{placeholder:"请输入广告名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t.isactive?a("el-form-item",{attrs:{label:"创意"}},[t.mutil.type?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.type,expression:"mutilstatus.type"}]},[t._v("\n        多项内容，"+t._s(t.activespecial?"不可同时编辑普通创意和动态创意":"")+"\n        "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.activespecial,expression:"!activespecial"}],attrs:{type:"text"},on:{click:function(e){t.mutilstatus.type=!t.mutilstatus.type}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.type,expression:"!mutilstatus.type"}]},[t._v("\n        多项内容，已编辑，将替换旧创意，\n        "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.type=!t.mutilstatus.type}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.type,expression:"!mutilstatus.type"}],model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:0}},[t._v("图片或视频")]),a("el-radio",{attrs:{label:1}},[t._v("轮播图片")])],1)],1):t._e(),t.isactive?a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.type,expression:"!mutilstatus.type"}],attrs:{label:""}},[a("el-tabs",{staticClass:"cardtab",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.form.activeName,callback:function(e){t.$set(t.form,"activeName",e)},expression:"form.activeName"}},[a("el-tab-pane",{attrs:{label:"创建创意",name:"first"}},[a("active-create",{ref:"activeCreate",attrs:{createType:t.form.type,createObject:t.createObject},on:{showTempImages:t.showTempImages}})],1)],1)],1):t._e(),t.isactive?t._e():a("el-form-item",{attrs:{label:"创意"}},[t.mutil.type?a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.mutilstatus.type,expression:"mutilstatus.type"}]},[t._v("\n        多项内容，\n        "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.type=!t.mutilstatus.type}}},[t._v("编辑")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.type,expression:"!mutilstatus.type"}]},[t._v("\n        多项内容，已编辑，将替换旧创意，\n        "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.mutilstatus.type=!t.mutilstatus.type}}},[t._v("撤销编辑")])],1)]):t._e(),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.type,expression:"!mutilstatus.type"}],model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:0}},[t._v("单图片")]),a("el-radio",{attrs:{label:1}},[t._v("单视频")]),a("el-radio",{attrs:{label:2}},[t._v("轮播")])],1)],1),t.isactive?t._e():a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.mutilstatus.type,expression:"!mutilstatus.type"}],attrs:{label:""}},[a("el-tabs",{staticClass:"cardtab",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.form.activeName,callback:function(e){t.$set(t.form,"activeName",e)},expression:"form.activeName"}},[a("el-tab-pane",{attrs:{label:t.editId.length>0?"编辑创意":"创建创意",name:"first"}},[2==t.form.type?a("creativity-carousel",{ref:"createCarousel",attrs:{createObject:t.createObject},on:{changeEdit:t.changeEdit,showTempImages:t.showTempImages}}):a("creativity-normal",{ref:"createNormal",attrs:{createType:t.form.type,createObject:t.createObject},on:{changeEdit:t.changeEdit,showTempImages:t.showTempImages}})],1),a("el-tab-pane",{attrs:{label:"选择创意",name:"second"}},[a("div",{staticClass:"createlist"},[a("create-list",{ref:"createList",attrs:{creativeType:t.form.type},on:{selectCreate:t.selectCreate}})],1)])],1)],1)],1)},ym=[],km=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-select"},[a("div",{staticClass:"select-on"},[a("span",{staticClass:"title"},[t._v("当前选择创意：")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.selectCreate.creativityName,expression:"!selectCreate.creativityName"}]},[t._v("无")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.selectCreate.creativityName,expression:"selectCreate.creativityName"}]},[a("span",{staticClass:"selecthead"},[a("img",{attrs:{src:t.selectCreate.image,alt:""}})]),a("span",{staticClass:"createtitle",attrs:{title:t.selectCreate.creativityText+"（"+t.selectCreate.countryId+","+t.selectCreate.sexName+"）"}},[t._v(t._s(t.selectCreate.creativityText)+"（"+t._s(t.selectCreate.countryId)+","+t._s(t.selectCreate.sexName)+"）")]),a("span",[t._v("创意ID："+t._s(t.selectCreate.id))]),a("span",[t._v("分类："+t._s(t.selectCreate.classify))]),a("span",{staticClass:"ctrl"},[a("el-button",{attrs:{type:"text"},on:{click:t.setCurrent}},[t._v("取消")])],1)])]),a("div",{staticClass:"select-sort"},[a("el-input",{staticClass:"search",attrs:{placeholder:"搜索创意ID","suffix-icon":"el-icon-search"},on:{input:t.createSearch},model:{value:t.searchstate,callback:function(e){t.searchstate=e},expression:"searchstate"}}),a("el-select",{staticClass:"select",attrs:{placeholder:"分类"},on:{change:t.classifyChange},model:{value:t.classifyselect,callback:function(e){t.classifyselect=e},expression:"classifyselect"}},t._l(t.classify,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("div",{staticClass:"select-table"},[a("el-table",{ref:"singleTable",attrs:{height:"393","highlight-current-row":"",data:t.adcreatelist,"show-header":!1},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"id",label:"创意ID",width:"60"}}),a("el-table-column",{attrs:{prop:"creativityText",label:"文本"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creativityText)),a("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"}},[t._v(t._s(e.row.countryId))]),a("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"}},[t._v(t._s(e.row.sexName))])]}}])}),a("el-table-column",{attrs:{prop:"picture",label:"缩略图",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.image,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"classify",label:"分类",width:"100"}})],1)],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:t.adcreatetotal,"page-size":40},on:{"current-change":t.pageSwitch}})],1)])},Em=[],Cm={props:["creativeType"],data:function(){return{classifyselect:"",searchstate:"",pageindex:1,selectCreate:{}}},computed:Object(D["a"])({},Object(M["d"])(["adcreatelist","adcreatetotal","classify"])),methods:{reset:function(){this.selectCreate={}},createSearch:function(){var t=this;this.pageindex=1,clearTimeout(u),u=setTimeout(function(){t.dataUpdata()},300)},classifyChange:function(){this.pageindex=1,this.dataUpdata()},handleCurrentChange:function(t){t&&(this.selectCreate=fe()({},t)),this.toSelectCreate()},setCurrent:function(t){this.$refs.singleTable.setCurrentRow(t),this.toSelectCreate()},toSelectCreate:function(){this.$emit("selectCreate",this.selectCreate)},dataUpdata:function(){this.$store.dispatch("getSelectCreateList",{creativityType:this.creativeType,creativityName:this.searchstate,classify:"不限"==this.classifyselect?"":this.classifyselect,pageIndex:this.pageindex,projectId:this.$route.params.id})},pageSwitch:function(t){this.pageindex=t,this.dataUpdata()}},watch:{creativeType:function(t,e){this.pageindex=1,this.dataUpdata()}}},Om=Cm,wm=(a("3a8c"),a("cc7d"),Object(E["a"])(Om,km,Em,!1,null,"0c9aaec2",null)),Im=wm.exports,Tm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px","label-position":"left"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"主页"}},[a("el-select",{attrs:{placeholder:"请选择主页",filterable:""},on:{change:t.selectHomepage},model:{value:t.form.homepage,callback:function(e){t.$set(t.form,"homepage",e)},expression:"form.homepage"}},[t.otherpageid?a("el-option",{attrs:{label:t.otherpagename,value:t.otherpageid}}):t._e(),t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})})],2)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.createType,expression:"createType == 0"}],staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.processIMG.length,expression:"processIMG.length == 0"}],staticClass:"moreInfo",attrs:{size:"small",plain:""},on:{click:t.showTempImages}},[t._v("选择图片")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.processIMG.length,expression:"processIMG.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==t.processIMG.length,expression:"processIMG.length == 0"}],ref:"vueFileUploaderSINGER",staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,requestOptions:t.fileOption,filters:t.imgfilters},on:{matchMD5:t.matchMD5,onAdd:t.onAddItem,uploadPic:t.uploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.createType,expression:"createType == 1"}],staticClass:"cline uploadfile",attrs:{label:"视频"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.processVIO.length,expression:"processVIO.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传视频")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==t.processVIO.length,expression:"processVIO.length == 0"}],ref:"vueFileUploaderVioSINGER",staticClass:"fileinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsVIO,requestOptions:t.fileOption,filters:t.videofilters},on:{matchMD5:t.matchMD5,onAdd:t.onAddItem,uploadVio:t.uploadVio,uploadVioRes:t.uploadVioRes,uploadVioError:t.uploadVioError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(t.processVIO,function(e,s){return a("li",{key:s,on:{mouseover:function(a){t.fmvideoname=e.name}}},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fmname,expression:"item.fmname"}],staticClass:"videofm"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.fmname}},[t._v(t._s(e.fmname))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.fmprocess,expression:"item.fmprocess == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.fmprocess+"%"})]),a("span",[t._v(t._s(e.fmprocess)+"%")])]),a("div",{staticClass:"fmctrl"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.randomCreate(e.videoHash)}}},[t._v("随机生成")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("上传封面")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.showBig(e.fmUrl)}}},[t._v("查看大图")]),a("div",{staticClass:"uploadFmbox"},[a("vue-file-upload",{staticClass:"fileinputfm",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsFM,requestOptions:t.fileOptionFM,filters:t.imgfilters},on:{matchMD5:t.matchMD5,uploadFm:t.uploadFm,uploadFmRes:t.uploadFmRes,uploadFmError:t.uploadFmError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)],1)]),a("i",{staticClass:"el-icon-error processclose processvideo",on:{click:function(a){t.delVIO(e.file,e.name)}}})])}),0)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"文本"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入文字说明，介绍推广内容",autosize:{minRows:3.5,maxRows:3.5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"行动号召"}},[a("el-select",{attrs:{placeholder:"行动号召"},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.allactions,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.code}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:t.form.deeplink,callback:function(e){t.$set(t.form,"deeplink",e)},expression:"form.deeplink"}})],1)],1)},xm=[],Sm=new _n.a,Am={props:["createType","createObject"],components:{VueFileUpload:fn.a},data:function(){return{form:{homepage:"",deeplink:"",desc:"",title:"",actions:""},otherpageid:"",otherpagename:"",msg:{homepage:"请选择主页",desc:"请输入文本",title:"请输入标题",actions:"请选择行动号召",deeplink:"",imginfo:"请上传图片",videoinfo:"请上传视频",fminfo:"请上传封面图"},processIMG:[],processVIO:[],disfile:null,xtoken:localStorage.getItem("atom_token"),fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},fileOptionFM:{headers:{"X-Token":localStorage.getItem("atom_token")},formData:{type:"2"}},imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],videofilters:[{name:"videoFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|vob|ifo|mpg|mpeg|dat|mp4|3gp|mov|rm|ram|rmvb|wmv|asf|avi|asx|".indexOf(e)}}],eventsIMG:{onAddFileSuccess:function(t){var e=this,a=t.file;Sm.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"img")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(t.remove(),0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e)}},eventsVIO:{onAddFileSuccess:function(t){var e=this,a=t.file;Sm.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"video")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadVio",t,e)},onSuccessUpload:function(t,e,a,s){if(t.remove(),0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadVioError",e,t);this.vm.$emit("uploadVioRes",e)}},fmvideoname:"",eventsFM:{onAddFileSuccess:function(t){var e=this,a=t.file;Sm.md5(a,function(a,s){e.vm.$emit("matchMD5",s,t,"fm")},function(t){})},onProgressUpload:function(t,e){this.vm.$emit("uploadFm",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadFmError",e,t);this.vm.$emit("uploadFmRes",e)}}}},computed:Object(D["a"])({},Object(M["d"])(["commonpage","adcreateadd","wantupload","edittype"]),Object(M["b"])(["allactions"]),{uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),mounted:function(){var t=this.createObject;t&&(this.commonpage.find(function(e){return e.pageId==t.pageId})||(this.otherpagename=t.pageName?t.pageName:"",this.otherpageid=t.pageId?t.pageId:""),this.edittype==this.createType&&this.dataSet(t))},watch:{createObject:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,this.$barrageTime(100);case 3:this.reset(),!e||e.cards||e.assetFeedSpec||(this.commonpage.find(function(t){return t.pageId==e.pageId})||(this.otherpageid=e.pageId?e.pageId:"",this.otherpagename=e.pageName?e.pageName:""),this.SETSTATE({k:"edittype",v:this.createType}),this.dataSet(e));case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),createType:function(t,e){this.reset(),this.edittype==t&&this.createObject&&this.dataSet(this.createObject)},"form.homepage":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.deeplink":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.desc":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.title":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.actions":{handler:function(t,e){this.$emit("changeEdit",!0)}},processIMG:function(){this.$emit("changeEdit",!0)},processVIO:function(){this.$emit("changeEdit",!0)},wantupload:function(t,e){console.log("create-add wantupload:",t),0!=t&&t==this.uploadsize&&(console.log("%ccreate-add all ready","color: red"),this.$refs[this.dom].uploadAll())}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showTempImages:function(){this.$emit("showTempImages","normal")},selectImage:function(t){this.processIMG=[],this.processIMG.push({name:t[0].md5,process:100,imageUrl:t[0].filePath,imageHash:t[0].md5}),console.log(t)},dataSet:function(t){this.form.homepage=t.pageId?t.pageId:"",this.form.deeplink=t.deeplink?t.deeplink:"",this.form.desc=t.creativityText?t.creativityText:"",this.form.title=t.creativityTitle?t.creativityTitle:"",this.form.actions=t.actionCallOn?t.actionCallOn:"",console.log(this.processVIO),t.videoId?this.processVIO.push({name:t.videoName?t.videoName:t.videoId,process:100,file:null,size:0,videoUrl:"",videoHash:"",videoId:t.videoId,fmname:t.imageName?t.imageName:t.imageHash,fmprocess:100,fmUrl:t.imageUrl,fmHash:t.imageHash}):this.processIMG.push({name:t.imageName?t.imageName:t.imageHash,process:100,size:0,file:null,imageUrl:"",imageHash:t.imageHash})},reset:function(){!this.disfile||this.disfile.isSuccess||this.disfile.isCancel||this.disfile.cancel(),this.processIMG=[],this.processVIO=[],this.form={homepage:"",deeplink:"",desc:"",title:"",actions:""},this.SETSTATE({k:"adcreateadd",v:!0})},initData:function(){this.otherpageid="",this.otherpagename=""},getCheckData:function(){var t=this,e=this.form;if(!this.adcreateadd)return[!1,"图片/视频正在上传中..."];if(""==e["homepage"])return[!1,this.msg["homepage"]];if(0==this.createType&&0==this.processIMG.length)return[!1,this.msg["imginfo"]];if(1==this.createType&&0==this.processVIO.length)return[!1,this.msg["videoinfo"]];if(1==this.createType&&!this.processVIO[0].fmname)return[!1,this.msg["fminfo"]];if(""==e["desc"])return[!1,this.msg["desc"]];if(""==e["title"])return[!1,this.msg["title"]];if(""===e["actions"])return[!1,this.msg["actions"]];var a=this.createObject?this.createObject:{actionCallOn:0,actionCallOnName:"",card:"",cards:"",classify:"",countryId:"",countryName:"",createTime:"",creater:"",creativityName:"",creativityText:"",creativityTitle:"",creativityType:0,deeplink:"",fbAccountId:"",fbAdId:"",fbCreativeId:"",id:0,image:"",imageHash:"",imageName:"",imageUrl:"",pageId:"",pageLogo:"",pageName:"",platFromUrl:"",projectId:0,sex:"",status:0,token:"",videoId:"",videoName:"",videoUrl:""},s=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0],i=this.allactions.filter(function(e){return e.code==t.form.actions})[0];return a.pageId=s?s.pageId:this.otherpageid,a.pageLogo=s?s.picture:"",a.pageName=s?s.name:this.otherpagename,a.actionCallOn=i.code,a.actionCallOnName=i.name,a.creativityText=this.form.desc,a.creativityTitle=this.form.title,a.token=this.xtoken,a.deeplink=this.form.deeplink,a.imageUrl=1==this.createType?this.processVIO[0].fmUrl:this.processIMG[0].imageUrl,a.videoUrl=1==this.createType?this.processVIO[0].videoUrl:"",a.videoUrl?a.videoId="":a.videoId=1==this.createType?this.processVIO[0].videoId:"",a.imageUrl?a.imageHash="":a.imageHash=1==this.createType?this.processVIO[0].fmHash:this.processIMG[0].imageHash,[!0,a]},onAddItem:function(t){console.log(t),this.SETSTATE({k:"wantupload",v:0}),this.uploadsize=t.length,console.log("create-add this.uploadsize:",this.uploadsize)},matchMD5:function(t,e,a){var s=this;this.dom="img"==a?"vueFileUploaderSINGER":"vueFileUploaderVioSINGER",this.$store.dispatch("matchMutiFileMD5",{md5:[t],file:e,list:"img"==a?this.processIMG:this.processVIO,type:a,on:"adcreateadd",vdname:this.fmvideoname,callback:function(){s.setVideoImage(a)}})},randomCreate:function(){this.setVideoImage("video",1)},showBig:function(t){this.SETSTATE({k:"bigimagevisible",v:!0}),this.SETSTATE({k:"bigimageurl",v:t})},setVideoImage:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=this.processVIO[0],"video"!=e){t.next=6;break}return t.next=4,this.$store.dispatch("getVideoImg",{videoMd5:s.videoHash,videoUrl:s.videoUrl,type:a});case 4:i=t.sent,i.data&&(n=Object(D["a"])({},s,{fmname:i.data.imageMd5?i.data.imageMd5:"封面图",fmUrl:i.data.imageUrl,fmHash:i.data.imageMd5,fmprocess:100}),this.processVIO.splice(0,1),this.processVIO.splice(0,0,n));case 6:"fm"==e&&(o={imageMd5:s.fmHash,imageUrl:s.fmUrl,videoMd5:s.videoHash,videoUrl:s.videoUrl},this.$store.dispatch("saveVideoImg",{option:o}));case 7:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),uploadFmError:function(t,e){this.SETSTATE({k:"adcreateadd",v:!0}),this.processVIO.forEach(function(t){t.fmname==e.name&&(t.fmname="",t.fmprocess="")})},uploadFmRes:function(t){this.SETSTATE({k:"adcreateadd",v:!0}),this.processVIO.forEach(function(e){e.fmname==t.data[0].originName&&(e.fmUrl=t.data[0].targetName,e.fmHash=t.data[0].md5)}),this.setVideoImage("fm")},uploadFm:function(t,e){var a=this;this.disfile=t;this.SETSTATE({k:"adcreateadd",v:!1});var s=null,i=null;this.processVIO.forEach(function(n,o){n.name==a.fmvideoname&&(s=a.processVIO[o],i=Object(D["a"])({},s,{fmname:t.name,fmprocess:e}),a.processVIO.splice(o,1),a.processVIO.splice(o,0,i))})},uploadVioError:function(t,e){this.SETSTATE({k:"adcreateadd",v:!0}),this.processVIO=this.processVIO.filter(function(t){return t.name!=e.name})},uploadVioRes:function(t){this.SETSTATE({k:"adcreateadd",v:!0}),this.processVIO.forEach(function(e){e.name==t.data[0].originName&&(e.videoUrl=t.data[0].targetName,e.videoHash=t.data[0].md5)}),this.setVideoImage("video")},uploadVio:function(t,e){this.disfile=t,this.SETSTATE({k:"adcreateadd",v:!1});var a={};a.name=t.name,a.process=e,a.file=t,a.size=t.size,a.fmname="",a.fmprocess=0,a.videoId="",this.processVIO.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processVIO.find(function(e){return e.name==t.name})||this.processVIO.push(a)},delVIO:function(t,e){t&&t.isUploading&&(t.cancel(),t.remove()),this.processVIO=this.processVIO.filter(function(t){return t.name!=e}),this.SETSTATE({k:"adcreateadd",v:!0})},uploadRes:function(t){this.SETSTATE({k:"adcreateadd",v:!0}),this.processIMG.forEach(function(e){e.name==t.data[0].originName&&(e.imageUrl=t.data[0].targetName,e.imageHash=t.data[0].md5)})},uploadError:function(t,e){this.SETSTATE({k:"adcreateadd",v:!0}),this.processIMG=this.processIMG.filter(function(t){return t.name!=e.name})},uploadPic:function(t,e){this.disfile=t,this.SETSTATE({k:"adcreateadd",v:!1});var a={};a.name=t.name,a.process=e,a.size=t.size,a.file=t,this.processIMG.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processIMG.find(function(e){return e.name==t.name})||this.processIMG.push(a)},delIMG:function(t,e){t&&t.isUploading&&(t.cancel(),t.remove()),this.processIMG=this.processIMG.filter(function(t){return t.name!=e}),this.SETSTATE({k:"adcreateadd",v:!0})},selectHomepage:function(){var t=this,e=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0];e&&!e.insId&&(this.form.homepage="",Object(H["g"])("此主页无PBIA，请先同步"))}})},jm=Am,Dm=(a("7a3f"),a("c600"),Object(E["a"])(jm,Tm,xm,!1,null,"526cb2f0",null)),Mm=Dm.exports,Pm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px","label-position":"left"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"主页"}},[a("el-select",{attrs:{placeholder:"请选择主页",filterable:""},on:{change:t.selectHomepage},model:{value:t.form.homepage,callback:function(e){t.$set(t.form,"homepage",e)},expression:"form.homepage"}},[t.otherpagename?a("el-option",{attrs:{label:t.otherpagename,value:t.otherpageid}}):t._e(),t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})})],2)],1),a("div",{staticClass:"carousellist"},[t.tablist.length<10?a("div",{staticClass:"add"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addTab(t.tabvalue)}}},[t._v("+")])],1):t._e(),a("el-tabs",{attrs:{type:"card"},model:{value:t.tabvalue,callback:function(e){t.tabvalue=e},expression:"tabvalue"}},t._l(t.tablist,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:s+1+"",name:e.name}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.tablist.length>3,expression:"tablist.length > 3"}],staticClass:"el-icon-close cardremove",on:{click:function(a){t.removeTab(e.name)}}}),a("el-form-item",{staticClass:"cline",attrs:{label:"类型"}},[a("el-radio-group",{on:{change:function(a){t.resetImgVideo(e.name)}},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},[a("el-radio",{attrs:{label:"1"}},[t._v("图片")]),a("el-radio",{attrs:{label:"2"}},[t._v("视频")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.type,expression:"item.type == '1'"}],staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.processIMG.length,expression:"item.processIMG.length == 0"}],staticClass:"moreInfo",attrs:{size:"small",plain:""},on:{click:t.showTempImages}},[t._v("选择图片")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.processIMG.length,expression:"item.processIMG.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),a("div",{staticClass:"filebutton"},[a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==e.processIMG.length,expression:"item.processIMG.length == 0"}],staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,requestOptions:t.fileOption,filters:t.imgfilters},on:{checkUpload:t.checkUpload,uploadPic:t.uploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1),a("ul",{staticClass:"reslist"},t._l(e.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"l.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file)}}})])}),0)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.type,expression:"item.type == '2'"}],staticClass:"cline uploadfile",attrs:{label:"视频"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.processVIO.length,expression:"item.processVIO.length == 0"}],staticClass:"moreInfo",attrs:{type:"primary",size:"small"}},[t._v("上传视频")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:0==e.processVIO.length,expression:"item.processVIO.length == 0"}],staticClass:"fileinput",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsVIO,requestOptions:t.fileOption,filters:t.videofilters},on:{checkUpload:t.checkUploadVio,uploadVio:t.uploadVio,uploadVioRes:t.uploadVioRes,uploadVioError:t.uploadVioError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("ul",{staticClass:"reslist"},t._l(e.processVIO,function(e,s){return a("li",{key:s},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"g.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.fmname,expression:"g.fmname"}],staticClass:"videofm"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.fmname}},[t._v(t._s(e.fmname))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.fmprocess,expression:"g.fmprocess == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.fmprocess+"%"})]),a("span",[t._v(t._s(e.fmprocess)+"%")])]),a("div",{staticClass:"fmctrl"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.randomCreate(e.videoHash)}}},[t._v("随机生成")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("上传封面")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.showBig(e.fmUrl)}}},[t._v("查看大图")]),a("div",{staticClass:"uploadFmbox"},[a("vue-file-upload",{staticClass:"fileinputfm",attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsFM,requestOptions:t.fileOptionFM,filters:t.imgfilters},on:{checkUploadFm:t.checkUploadFm,uploadFm:t.uploadFm,uploadFmRes:t.uploadFmRes,uploadFmError:t.uploadFmError}},[a("span",{attrs:{slot:"label"},slot:"label"})])],1)],1)]),a("i",{staticClass:"el-icon-error processclose processvideo",on:{click:function(a){t.delVIO(e.file)}}})])}),0)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"item.title"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:e.deeplink,callback:function(a){t.$set(e,"deeplink",a)},expression:"item.deeplink"}})],1)],1)}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"文本"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入文字说明，介绍推广内容",autosize:{minRows:3.5,maxRows:3.5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{staticClass:"cline",attrs:{label:"行动号召"}},[a("el-select",{attrs:{placeholder:"行动号召"},model:{value:t.form.actions,callback:function(e){t.$set(t.form,"actions",e)},expression:"form.actions"}},t._l(t.allactions,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.code}})}),1)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:t.form.deeplink,callback:function(e){t.$set(t.form,"deeplink",e)},expression:"form.deeplink"}})],1)],1)},Lm=[],Rm=new _n.a,Nm={props:["createType","createObject"],components:{VueFileUpload:fn.a},data:function(){return{tabvalue:"t1",tabindex:3,tablist:[{tab:"1",name:"t1",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"2",name:"t2",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"3",name:"t3",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]}],form:{type:"0",deeplink:"",homepage:"",desc:"",title:"",actions:""},otherpagename:"",otherpageid:"",msg:{homepage:"请选择主页",desc:"请输入文本",actions:"请选择行动号召"},xtoken:localStorage.getItem("atom_token"),fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},fileOptionFM:{headers:{"X-Token":localStorage.getItem("atom_token")},formData:{type:"2"}},imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],videofilters:[{name:"videoFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|vob|ifo|mpg|mpeg|dat|mp4|3gp|mov|rm|ram|rmvb|wmv|asf|avi|asx|".indexOf(e)}}],eventsIMG:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e)},onAddFileSuccess:function(t){this.vm.$emit("checkUpload",t)}},eventsVIO:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadVio",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadVioError",e,t);this.vm.$emit("uploadVioRes",e)},onAddFileSuccess:function(t){this.vm.$emit("checkUpload",t)}},eventsFM:{onProgressUpload:function(t,e){console.log(arguments),this.vm.$emit("uploadFm",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadFmError",e,t);this.vm.$emit("uploadFmRes",e)},onAddFileSuccess:function(t){this.vm.$emit("checkUploadFm",t)}}}},computed:Object(D["a"])({},Object(M["d"])(["commonpage"]),Object(M["b"])(["allactions"]),{uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),mounted:function(){var t=this,e=this.createObject;if(e&&(this.otherpageid=e.pageId?e.pageId:"",this.commonpage.find(function(t){return t.pageId==e.pageId})||(this.otherpagename=e.pageName?e.pageName:"")),e&&e.cards){this.SETSTATE({k:"edittype",v:"2"}),this.form.homepage=e.pageId?e.pageId:"",this.form.deeplink=e.deeplink?e.deeplink:"",this.form.desc=e.creativityText?e.creativityText:"",this.form.actions=e.actionCallOn?e.actionCallOn:"",this.tablist=[];var a=JSON.parse(e.cards);a.forEach(function(e,a){var s={tab:a+1,name:"t".concat(a+1),title:e.title,deeplink:e.cardDeepLink,type:e.cardType.toString(),processIMG:[],processVIO:[]};if(e.videoId){var i={name:e.videoId,process:100,file:null,size:0,fmname:e.imageHash,fmprocess:100,videoId:e.videoId,videoUrl:e.videoUrl?e.videoUrl:"",videoHash:"",fmUrl:e.imageUrl?e.imageUrl:"",fmHash:e.imageHash?e.imageHash:""};s.processVIO.push(i)}else{var n={name:e.imageHash,imageUrl:e.imageUrl?e.imageUrl:"",imageHash:e.imageHash?e.imageHash:"",process:100,size:0,file:null};s.processIMG.push(n)}t.tablist.push(s)}),console.log(this.tablist)}},watch:{"form.homepage":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.deeplink":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.desc":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.actions":{handler:function(t,e){this.$emit("changeEdit",!0)}},tablist:function(){this.$emit("changeEdit",!0)},createType:function(t,e){this.tablist.forEach(function(t){if("1"==t.type){var e=t.processIMG[0]?t.processIMG[0].file:null;!e||e.isSuccess||e.isCancel||e.cancel()}else{e=t.processVIO[0]?t.processVIO[0].fmfile||t.processVIO[0].file:null;!e||e.isSuccess||e.isCancel||e.cancel()}}),this.form.type="0",this.form.deeplink="",this.form.homepage="",this.form.desc="",this.form.title="",this.form.actions="",this.tablist=[{tab:"1",name:"t1",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"2",name:"t2",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]},{tab:"3",name:"t3",title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]}],this.tabvalue="t1",this.tabindex=3,this.otherpagename="",this.otherpageid=""}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showTempImages:function(){this.$emit("showTempImages","carousel")},selectImage:function(t){var e=this,a=this.tablist.find(function(t){return t.name==e.tabvalue});a.processIMG=[],a.processIMG.push({name:t[0].md5,process:100,imageUrl:t[0].filePath,imageHash:t[0].md5})},getCheckData:function(){for(var t,e=this,a=this.form,s=0;s<this.tablist.length;s++){var i=this.tablist[s];if(""==a["homepage"])return[!1,this.msg["homepage"]];if("1"==i.type){if(0==i.processIMG.length){t=[!1,"卡片".concat(s+1," 图片未上传")];break}if(100!=i.processIMG[0].process){t=[!1,"卡片".concat(s+1," 图片正在上传中……")];break}t=[!0]}else{if(0==i.processVIO.length){t=[!1,"卡片".concat(s+1," 视频未上传")];break}if(100!=i.processVIO[0].process){t=[!1,"卡片".concat(s+1," 视频正在上传中……")];break}if(!i.processVIO[0].fmname){t=[!1,"卡片".concat(s+1," 封面图未上传")];break}if(100!=i.processVIO[0].fmprocess){t=[!1,"卡片".concat(s+1," 封面图正在上传中……")];break}t=[!0]}if(""==i.title){t=[!1,"卡片".concat(s+1," 标题未填写")];break}}if(!t[0])return t;if(""==a["desc"])return[!1,this.msg["desc"]];if(""===a["actions"])return[!1,this.msg["actions"]];var n=this.createObject?this.createObject:{actionCallOn:0,actionCallOnName:"",card:"",cards:"",classify:"",countryId:"",countryName:"",createTime:"",creater:"",creativityName:"",creativityText:"",creativityTitle:"",creativityType:0,deeplink:"",fbAccountId:"",fbAdId:"",fbCreativeId:"",id:0,image:"",imageHash:"",imageName:"",imageUrl:"",pageId:"",pageLogo:"",pageName:"",platFromUrl:"",projectId:0,sex:"",status:0,token:"",videoId:"",videoName:"",videoUrl:""},o=this.commonpage.filter(function(t){return t.pageId==e.form.homepage})[0],r=this.allactions.filter(function(t){return t.code==e.form.actions})[0];n.pageId=o.pageId,n.pageLogo=o.picture,n.pageName=o.name,n.actionCallOn=r.code,n.actionCallOnName=r.name,n.creativityText=this.form.desc,n.token=this.xtoken,n.deeplink=this.form.deeplink;var c=[];return this.tablist.forEach(function(t,e){var a,s;"1"==t.type?(a={imageUrl:t.processIMG[0].imageUrl,imageHash:t.processIMG[0].imageHash},s={videoUrl:"",videoHash:"",videoId:""}):(a={imageUrl:t.processVIO[0].fmUrl,imageHash:t.processVIO[0].fmHash},s={videoUrl:t.processVIO[0].videoUrl,videoHash:t.processVIO[0].videoHash,videoId:t.processVIO[0].videoId});var i={cardType:t.type,title:t.title,cardDeepLink:t.deeplink};i.imageUrl=a.imageUrl,i.videoUrl=s.videoUrl,a.imageUrl||(i.imageHash=a.imageHash),s.videoUrl||(i.videoId=s.videoId),c.push(i)}),n.cards=_e()(c),[!0,n]},matchMD5:function(t,e,a){var s=this;this.$store.dispatch("matchFileMD5",{md5:[t],file:e,list:this.tablist,type:a,tabvalue:this.tabvalue,on:"cardcreate",vdname:this.fmvideoname,callback:function(){s.setVideoImage(a)}})},randomCreate:function(){this.setVideoImage("video",1)},showBig:function(t){this.SETSTATE({k:"bigimagevisible",v:!0}),this.SETSTATE({k:"bigimageurl",v:t})},setVideoImage:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),s=0,i=this.tablist.find(function(t,e){if(t.name==c.tabvalue)return s=e,t}),n=i.processVIO[0],"video"!=e){t.next=9;break}return t.next=7,this.$store.dispatch("getVideoImg",{videoMd5:n.videoHash,videoUrl:n.videoUrl,type:a});case 7:o=t.sent,o.data&&(i.processVIO[0].fmname=o.data.imageMd5,i.processVIO[0].fmUrl=o.data.imageUrl,i.processVIO[0].fmHash=o.data.imageMd5,i.processVIO[0].fmprocess=100,this.tablist.splice(s,1),this.tablist.splice(s,0,i));case 9:"fm"==e&&(r={imageMd5:n.fmHash,imageUrl:n.fmUrl,videoMd5:n.videoHash,videoUrl:n.videoUrl},this.$store.dispatch("saveVideoImg",{option:r}));case 10:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),resetImgVideo:function(t){this.tablist.forEach(function(e){if(e.name==t)if("1"==e.type){var a=e.processVIO[0]?e.processVIO[0].fmfile||e.processVIO[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel(),e.processVIO=[]}else{a=e.processIMG[0]?e.processIMG[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel(),e.processIMG=[]}})},addTab:function(t){var e=++this.tabindex+"";this.tablist.push({tab:e,name:"t"+e,title:"",deeplink:"",type:"1",processIMG:[],processVIO:[]}),this.tabvalue="t"+e},removeTab:function(t){this.tablist.forEach(function(e){if(e.name==t)if("1"==e.type){var a=e.processIMG[0]?e.processIMG[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel()}else{a=e.processVIO[0]?e.processVIO[0].fmfile||e.processVIO[0].file:null;!a||a.isSuccess||a.isCancel||a.cancel()}});var e=this.tablist,a=this.tabvalue;a===t&&e.forEach(function(s,i){s.name==t&&(a=e[i+1]?e[i+1].name:e[i-1].name)}),this.tabvalue=a,this.tablist=e.filter(function(e){return e.name!==t})},uploadFmError:function(t,e){this.tablist.forEach(function(t){t.processVIO[0]&&t.processVIO[0].fmname==e.name&&(t.processVIO[0].fmname="",t.processVIO[0].fmprocess="")})},uploadFmRes:function(t){console.log(t),this.tablist.forEach(function(e){e.processVIO[0]&&e.processVIO[0].fmname==t.data[0].originName&&(e.processVIO[0].fmUrl=t.data[0].targetName,e.processVIO[0].fmHash=t.data[0].md5)}),this.setVideoImage("fm")},uploadFm:function(t,e){var a=this,s=this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].fmname==t.name});s?this.tablist.forEach(function(a){a.processVIO[0]&&a.processVIO[0].fmname==t.name&&(a.processVIO[0].fmprocess=e)}):this.tablist.forEach(function(s){s.name==a.tabvalue&&(s.processVIO[0].fmname=t.name,s.processVIO[0].fmprocess=e,s.processVIO[0].fmfile=t)})},uploadVioError:function(t,e){this.tablist.forEach(function(t){t.processVIO[0]&&t.processVIO[0].name==e.name&&(t.processVIO=[])})},uploadVioRes:function(t){this.tablist.forEach(function(e){e.processVIO[0]&&e.processVIO[0].name==t.data[0].originName&&(e.processVIO[0].videoUrl=t.data[0].targetName,e.processVIO[0].videoHash=t.data[0].md5)}),this.setVideoImage("video")},uploadVio:function(t,e){var a=this,s={};s.name=t.name,s.process=e,s.file=t,s.size=t.size,s.fmname="",s.fmprocess=0,s.videoId="";var i=this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].name==t.name});i?this.tablist.forEach(function(a){a.processVIO[0]&&a.processVIO[0].name==t.name&&(a.processVIO[0].process=e)}):this.tablist.forEach(function(t){t.name==a.tabvalue&&t.processVIO.push(s)})},delVIO:function(t){var e=this;t&&t.isUploading&&(t.cancel(),t.remove()),this.tablist.forEach(function(t){t.name==e.tabvalue&&(t.processVIO=[])})},uploadRes:function(t){this.tablist.forEach(function(e){e.processIMG[0]&&e.processIMG[0].name==t.data[0].originName&&(e.processIMG[0].imageUrl=t.data[0].targetName,e.processIMG[0].imageHash=t.data[0].md5)})},uploadError:function(t,e){this.tablist.forEach(function(t){t.processIMG[0]&&t.processIMG[0].name==e.name&&(t.processIMG=[])})},checkUpload:function(t){var e=this;if(this.tablist.find(function(e){return e.processIMG[0]&&e.processIMG[0].name==t.name}))t.remove(),Object(H["g"])("相同图片不可重复上传，请更换图片或重新命名");else{var a=t.file;Rm.md5(a,function(a,s){e.matchMD5(s,t,"img")},function(t){})}},checkUploadVio:function(t){var e=this;if(this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].name==t.name}))t.remove(),Object(H["g"])("相同视频不可重复上传，请更换视频或重新命名");else{var a=t.file;Rm.md5(a,function(a,s){e.matchMD5(s,t,"video")},function(t){})}},checkUploadFm:function(t){var e=this;if(this.tablist.find(function(e){return e.processVIO[0]&&e.processVIO[0].fmname==t.name}))t.remove(),Object(H["g"])("暂时无法上传相同封面图，请更换封面图或重新命名");else{var a=t.file;Rm.md5(a,function(a,s){e.matchMD5(s,t,"fm")},function(t){})}},uploadPic:function(t,e){var a=this,s={};s.name=t.name,s.process=e,s.size=t.size,s.file=t;var i=this.tablist.find(function(e){return e.processIMG[0]&&e.processIMG[0].name==t.name});i?this.tablist.forEach(function(a){a.processIMG[0]&&a.processIMG[0].name==t.name&&(a.processIMG[0].process=e)}):this.tablist.forEach(function(t){t.name==a.tabvalue&&t.processIMG.push(s)})},delIMG:function(t){var e=this;t&&t.isUploading&&(t.cancel(),t.remove()),this.tablist.forEach(function(t){t.name==e.tabvalue&&(t.processIMG=[])})},selectHomepage:function(){var t=this,e=this.commonpage.filter(function(e){return e.pageId==t.form.homepage})[0];e&&!e.insId&&(this.form.homepage="",Object(H["g"])("此主页无PBIA，请先同步"))}})},Um=Nm,$m=(a("d867"),a("95c5"),Object(E["a"])(Um,Pm,Lm,!1,null,"2eb9fba1",null)),Bm=$m.exports,Fm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{staticClass:"cline",attrs:{label:"主页"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择主页"},on:{change:t.selectHomepage},model:{value:t.form.homepage,callback:function(e){t.$set(t.form,"homepage",e)},expression:"form.homepage"}},[t.otherpageid?a("el-option",{attrs:{label:t.otherpagename,value:t.otherpageid}}):t._e(),t._l(t.allpagelist,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})})],2)],1),0==t.createType?a("el-form-item",{staticClass:"cline uploadfile",attrs:{label:"图片或视频"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"亮起日期有数据，建议上传无数据的日期。上传亮起日期的留存，旧数据会被覆盖",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n        图片总数：小于 10\n        "),a("br"),t._v("推荐图片参数：宽高比 1.9:1\n        "),a("br"),t._v("如果包含 Instagram 版位，请考虑使用正方形图片，以获得更好的表现\n        "),a("br"),t._v("推荐图片尺寸：1,200 x 628 像素\n        "),a("br"),t._v("视频：如果包含 Instagram 版位，则只能使用正方形视频或横向视频\n      ")]),a("i",{staticClass:"el-icon-question elnotice"})]),a("el-button",{staticClass:"moreInfo",attrs:{disabled:t.processIMG.length>=10,size:"small",plain:""},on:{click:t.showTempImages}},[t._v("选择图片")]),a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small",disabled:t.processIMG.length>=10&&t.processVIO.length>=10}},[t._v("上传")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:t.processIMG.length<10||t.processVIO.length<10,expression:"processIMG.length < 10 || processVIO.length < 10"}],ref:"vueFileUploader",staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,multiple:"",requestOptions:t.fileOption,filters:t.matterfilters},on:{uploadPic:t.uploadPic,onAdd:t.onAddItem,checkUploadPic:t.checkUploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("span",{staticClass:"fonttip"},[t._v(t._s(t.processIMG.length)+"/10个图片，"+t._s(t.processVIO.length)+"/10个视频")]),a("ul",{staticClass:"reslist"},t._l(t.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0),a("ul",{staticClass:"reslist"},t._l(t.processVIO,function(e,s){return a("li",{key:s},[a("div",{staticClass:"video"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-document"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0)],1):a("el-form-item",{staticClass:"cline uploadfile",attrs:{label:"图片"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"亮起日期有数据，建议上传无数据的日期。上传亮起日期的留存，旧数据会被覆盖",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n        图片总数：小于 10\n        "),a("br"),t._v("推荐图片参数：宽高比 1.9:1\n        "),a("br"),t._v("如果包含 Instagram 版位，请考虑使用正方形图片，以获得更好的表现\n        "),a("br"),t._v("推荐图片尺寸：1,200 x 628 像素\n      ")]),a("i",{staticClass:"el-icon-question elnotice2"})]),a("el-button",{staticClass:"moreInfo",attrs:{disabled:t.processIMG.length>=10,size:"small",plain:""},on:{click:t.showTempImages}},[t._v("选择图片")]),a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small",disabled:t.processIMG.length>=10}},[t._v("上传图片")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:t.processIMG.length<10,expression:"processIMG.length < 10"}],ref:"vueFileUploaderLB",staticClass:"fileinput",staticStyle:{left:"90px"},attrs:{name:"file",url:t.uploadFileUrl,events:t.eventsIMG,multiple:"",requestOptions:t.fileOption,filters:t.imgfilters},on:{uploadPic:t.uploadPic,onAdd:t.onAddItem,checkUploadPic:t.checkUploadPic,uploadRes:t.uploadRes,uploadError:t.uploadError}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("span",{staticClass:"fonttip"},[t._v(t._s(t.processIMG.length)+"/10个图片")]),a("ul",{staticClass:"reslist"},t._l(t.processIMG,function(e,s){return a("li",{key:s},[a("div",{staticClass:"image"},[a("p",{staticClass:"processname"},[a("span",{staticClass:"el-icon-picture-outline"}),a("span",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:100==e.process,expression:"item.process == 100"}],staticClass:"el-icon-check"})])],1),a("p",{staticClass:"processline"},[a("i",{staticClass:"line"},[a("em",{style:"width:"+e.process+"%"})]),a("span",[t._v(t._s(e.process)+"%")])])]),a("i",{staticClass:"el-icon-error processclose",on:{click:function(a){t.delIMG(e.file,e.name)}}})])}),0)],1),a("el-form-item",{staticClass:"cline",attrs:{label:"文本"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.descarr.length>0,expression:"form.descarr.length > 0"}],staticClass:"descarea"},[a("div",{staticClass:"tag"},t._l(t.form.descarr,function(e){return a("span",{key:e,staticClass:"evtag"},[t._v("\n          "+t._s(e)+"\n          "),a("i",{staticClass:"el-icon-error",on:{click:function(a){t.delDesc(e)}}})])}),0)]),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入文字说明，介绍推广内容",maxlength:"1024",autosize:{minRows:3.5,maxRows:3.5}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}}),a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small",disabled:t.form.descarr.length>=5},on:{click:t.addDesc}},[t._v("新增文本")]),a("span",{staticClass:"fonttip"},[t._v(t._s(t.form.descarr.length)+"/5个文本")])],1),a("el-form-item",{staticClass:"cartitle",attrs:{label:"标题"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.titlearr.length>0,expression:"form.titlearr.length > 0"}],staticClass:"descarea"},[a("div",{staticClass:"tag"},t._l(t.form.titlearr,function(e){return a("span",{key:e,staticClass:"evtag"},[t._v("\n          "+t._s(e)+"\n          "),a("i",{staticClass:"el-icon-error",on:{click:function(a){t.delTitle(e)}}})])}),0)]),a("el-input",{attrs:{placeholder:"请输入标题",maxlength:"255"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),a("el-button",{staticClass:"moreInfo",attrs:{type:"primary",size:"small",disabled:t.form.titlearr.length>=5},on:{click:t.addTitle}},[t._v("新增标题")]),a("span",{staticClass:"fonttip"},[t._v(t._s(t.form.titlearr.length)+"/5个标题")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"行动号召"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"",placeholder:"行动号召"},on:{change:t.actionChange},model:{value:t.form.actionArr,callback:function(e){t.$set(t.form,"actionArr",e)},expression:"form.actionArr"}},t._l(t.allactions,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.name,disabled:t.form.actionArr.length>=5}})}),1),a("span",{staticClass:"fonttip"},[t._v(t._s(t.form.actionArr.length)+"/5个行动号召")])],1),a("el-form-item",{staticClass:"cline",attrs:{label:"deeplink"}},[a("el-input",{attrs:{placeholder:"可跳转到APP指定页面，选填，为空则仅下载APP"},model:{value:t.form.deeplink,callback:function(e){t.$set(t.form,"deeplink",e)},expression:"form.deeplink"}})],1)],1)},Vm=[],Km=new _n.a,Wm={props:["createType","createObject"],components:{VueFileUpload:fn.a},data:function(){return{form:{homepage:"",descarr:[],desc:"",titlearr:[],title:"",actionArr:[],deeplink:""},msg:{homepage:"请选择主页",imgvideo:"请上传图片",videoUrl:"请上传视频",imginfo:"请上传至少2张图片",matterinfo:"请上传图片或视频",desc:"请输入文本",title:"请输入标题",actions:"请选择行动号召"},otherpageid:"",otherpagename:"",disfile:null,fileOption:{headers:{"X-Token":localStorage.getItem("atom_token")}},matterfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|vob|ifo|mpg|mpeg|dat|mp4|3gp|mov|rm|ram|rmvb|wmv|asf|avi|asx|".indexOf(e)}}],imgfilters:[{name:"imageFilter",fn:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}}],uploadsize:0,dom:"",processIMG:[],processVIO:[],eventsIMG:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){if(0!=e.code)return Object(H["a"])(e.msg),void this.vm.$emit("uploadError",e,t);this.vm.$emit("uploadRes",e,t),console.log("%cremove","color: red"),t.remove()},onAddFileSuccess:function(t){console.log("%cwaiting","color: red"),this.vm.$emit("checkUploadPic",t)}}}},computed:Object(D["a"])({},Object(M["d"])(["allpagelist","allactions","wantupload","withcreatead","edittype"]),{uploadFileUrl:function(){return"".concat(vn["a"]["production"].UPLOAD_URL,"/file/")}}),watch:{createObject:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$barrageTime(100);case 2:this.reset(),e&&e.assetFeedSpec&&(this.allpagelist.find(function(t){return t.pageId==e.pageId})||(this.otherpageid=e.pageId?e.pageId:"",this.otherpagename=e.pageName?e.pageName:""),this.SETSTATE({k:"edittype",v:this.createType}),this.dataSet(e));case 4:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),createType:function(t,e){this.reset(),this.edittype==t&&this.createObject&&this.dataSet(this.createObject)},wantupload:function(t,e){console.log("wantupload:",t),0!=t&&t==this.uploadsize&&(console.log("%call ready","color: red"),this.$refs[this.dom].uploadAll())}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showTempImages:function(){this.$emit("showTempImages","active")},selectImage:function(t){var e=this,a=[];t.forEach(function(t){if(!e.processIMG.find(function(e){return e.name==t.md5})){var s={name:t.md5,process:100,imageHash:t.md5,imageUrl:t.filePath};a.push(s)}}),this.processIMG=this.processIMG.concat(a),this.processIMG.length>10&&(this.processIMG=this.processIMG.slice(0,10),Object(H["g"])("图片素材最多上传10张"))},dataSet:function(t){var e=this,a=JSON.parse(t.assetFeedSpec);this.form.homepage=t.pageId?t.pageId:"",this.form.deeplink=a.link_urls[0].deeplink_url,this.form.descarr=a.bodies.map(function(t){return t.text}),this.form.titlearr=a.titles.map(function(t){return t.text}),this.form.actionArr=a.call_to_action_types,a.images&&a.images.forEach(function(t){e.processIMG.push({name:t.hash,process:100,size:0,file:null,imageUrl:"",imageHash:t.hash})}),0==this.createType&&a.videos&&a.videos.forEach(function(t){e.processVIO.push({name:t.video_id,process:100,file:null,size:0,videoUrl:"",videoHash:"",videoId:t.video_id})})},reset:function(){!this.disfile||this.disfile.isSuccess||this.disfile.isCancel||this.disfile.cancel(),this.processIMG=[],this.processVIO=[],this.form={homepage:"",descarr:[],desc:"",titlearr:[],title:"",actionArr:[],deeplink:""},this.SETSTATE({k:"withcreatead",v:!0})},selectHomepage:function(){var t=this,e=this.allpagelist.filter(function(e){return e.pageId==t.form.homepage})[0];e.insId||(this.form.homepage="",Object(H["g"])("此主页无PBIA，请先同步"))},actionChange:function(){},getCheckData:function(){var t=this,e=this.form;if(!this.withcreatead)return[!1,"图片/视频正在上传中..."];if(""==e["homepage"])return[!1,this.msg["homepage"]];if(1==this.createType&&this.processIMG.length<2)return[!1,this.msg["imginfo"]];if(0==this.createType&&0==this.processIMG.length&&0==this.processVIO.length)return[!1,this.msg["matterinfo"]];if(0==e["descarr"].length)return[!1,this.msg["desc"]];if(0==e["titlearr"].length)return[!1,this.msg["title"]];if(0==e["actionArr"].length)return[!1,this.msg["actions"]];var a=this.processIMG.length+this.processVIO.length+this.form.descarr.length+this.form.titlearr.length+this.form.actionArr.length+(this.form.deeplink?1:0);if(0==this.createType&&a>28)return[!1,"图片+视频+文本+标题+行动号召+deeplink总数不能超过28"];var s=this.createObject?this.createObject:{actionCallOn:0,actionCallOnName:"",card:"",cards:"",classify:"",countryId:"",countryName:"",createTime:"",creater:"",creativityName:"",creativityText:"",creativityTitle:"",creativityType:0,deeplink:"",fbAccountId:"",fbAdId:"",fbCreativeId:"",id:0,image:"",imageHash:"",imageName:"",imageUrl:"",pageId:"",pageLogo:"",pageName:"",platFromUrl:"",projectId:0,sex:"",status:0,token:"",videoId:"",videoName:"",videoUrl:"",images:"",videos:"",bodies:"",callToActionTypes:"",titles:"",adFormats:""},i=this.allpagelist.filter(function(e){return e.pageId==t.form.homepage})[0];s.callToActionTypes=this.form.actionArr.map(function(t){return t.replace(/\s/g,"_").toLocaleUpperCase()}).join(","),s.deeplink=this.form.deeplink,s.pageId=i?i.pageId:this.otherpageid,s.pageLogo=i?i.picture:"",s.pageName=i?i.name:this.otherpagename,s.bodies=this.form.descarr.join("/"),s.titles=this.form.titlearr.join("/"),s.adFormats=0==this.createType?"AUTOMATIC_FORMAT":"CAROUSEL_IMAGE",s.token=this.xtoken;var n=this.processIMG.filter(function(t){return t.imageUrl}),o=this.processIMG.filter(function(t){return!t.imageUrl&&t.imageHash});if(s.images=n.length>0?n.map(function(t){return t.imageUrl}).join(","):"",s.imageHashs=o.length>0?o.map(function(t){return t.imageHash}).join(","):"",0==this.createType){var r=this.processVIO.filter(function(t){return t.videoUrl}),c=this.processVIO.filter(function(t){return!t.videoUrl&&t.videoId});s.videos=r.length>0?r.map(function(t){return t.videoUrl}).join(","):"",s.videoIds=c.length>0?c.map(function(t){return t.videoId}).join(","):""}else s.videos="",s.videoIds="";return[!0,s]},delTitle:function(t){this.form.titlearr=this.form.titlearr.filter(function(e){return e!=t})},addTitle:function(){if(""!=this.form.title.trim())if(this.form.title.trim().length>255)Object(H["g"])("文本不超过 255 个字符");else{var t=this.form.title.trim();this.form.titlearr=this.form.titlearr.filter(function(e){return e!=t}),this.form.titlearr.push(t),this.form.title=""}else Object(H["g"])("请在文本框内输入想要添加的标题名称")},delDesc:function(t){this.form.descarr=this.form.descarr.filter(function(e){return e!=t})},addDesc:function(){if(""!=this.form.desc.trim())if(this.form.desc.trim().length>1024)Object(H["g"])("文本不超过 1024 个字符");else{var t=this.form.desc.trim();this.form.descarr=this.form.descarr.filter(function(e){return e!=t}),this.form.descarr.push(t),this.form.desc=""}else Object(H["g"])("请在文本框内输入想要添加的文本")},matchMD5:function(t,e,a){this.dom="vueFileUploader","1"==this.createType&&(this.dom+="LB"),this.$store.dispatch("matchMutiFileMD5",{md5:[t],file:e,list:"img"==a?this.processIMG:this.processVIO,type:a,on:"withcreatead",vdname:this.fmvideoname,maxcount:"fm"==a?0:10,callback:function(){}})},onAddItem:function(t){console.log(t),this.SETSTATE({k:"wantupload",v:0}),this.SETSTATE({k:"imgspwant",v:0}),this.SETSTATE({k:"viospwant",v:0}),this.uploadsize=t.length,console.log("this.uploadsize:",this.uploadsize)},changeFocusaccount:function(){},showUploading:function(t){this.fmvideoname=t},uploadError:function(t,e){this.SETSTATE({k:"withcreatead",v:!0}),this.processIMG=this.processIMG.filter(function(t){return t.name!=e.name}),this.processVIO=this.processVIO.filter(function(t){return t.name!=e.name})},uploadRes:function(t,e){this.SETSTATE({k:"withcreatead",v:!0}),/jpg|png|jpeg|bmp|gif/.test(e.type)?this.processIMG.forEach(function(e){e.name==t.data[0].originName&&(e.imageUrl=t.data[0].targetName,e.imageHash=t.data[0].md5)}):this.processVIO.forEach(function(e){e.name==t.data[0].originName&&(e.videoUrl=t.data[0].targetName,e.videoHash=t.data[0].md5)})},checkUploadPic:function(t){var e=this,a=this.processIMG.find(function(e){return e.name==t.name&&(!e.size||e.size&&e.size==t.size)}),s=this.processVIO.find(function(e){return e.name==t.name&&(!e.size||e.size&&e.size==t.size)}),i=!1,n=/jpg|png|jpeg|bmp|gif/;switch(!0){case Boolean(a):Object(H["g"])("相同图片不可重复上传"),i=!0;break;case Boolean(s):Object(H["g"])("相同视频不可重复上传"),i=!0;break}if(i)t.remove();else{var o=t.file;Km.md5(o,function(a,s){e.matchMD5(s,t,n.test(o.type)?"img":"video")},function(t){})}},uploadPic:function(t,e){this.disfile=t,this.SETSTATE({k:"withcreatead",v:!1});var a={};a.name=t.name,a.process=e,a.size=t.size,a.file=t,/jpg|png|jpeg|bmp|gif/.test(t.type)?(this.processIMG.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processIMG.find(function(e){return e.name==t.name})||this.processIMG.push(a)):(a.fmname="",a.fmprocess=0,this.processVIO.forEach(function(a){a.name==t.name&&(a.process=e)}),this.processVIO.find(function(e){return e.name==t.name})||this.processVIO.push(a))},delIMG:function(t,e){console.log(t),t&&t.isUploading&&(t.cancel(),t.remove()),this.processIMG=this.processIMG.filter(function(t){return t.name!=e}),this.processVIO=this.processVIO.filter(function(t){return t.name!=e}),this.SETSTATE({k:"withcreatead",v:!0})}})},zm=Wm,Gm=(a("382b"),Object(E["a"])(zm,Fm,Vm,!1,null,"87d06932",null)),Hm=Gm.exports,qm={props:["editId"],components:{CreateList:Im,CreativityNormal:Mm,CreativityCarousel:Bm,ActiveCreate:Hm},data:function(){return{editArray:[],createObject:null,fbAccountId:"",isactive:!1,activespecial:!1,form:{adset:"",name:"",type:0,activeName:"first",checkcreate:null},mutilstatus:{},mutil:{adset:!1,name:!1,type:!1},selectkey:""}},computed:Object(D["a"])({},Object(M["d"])(["createadsetlist","setsortlist","editadlist","adsetlistload","hascreatead"])),mounted:function(){this.$textCopy("#copyButtonAd"),this.$store.dispatch("commonPage",{project_id:this.$route.params.id}),this.$store.dispatch("getAllactions")},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showTempImages:function(t){this.selectkey=t,this.$emit("showTempImages",t)},selectImage:function(t){switch(this.selectkey){case"normal":this.$refs.createNormal.selectImage(t);break;case"carousel":this.$refs.createCarousel.selectImage(t);break;case"active":this.$refs.activeCreate.selectImage(t);break}},selectCreate:function(t){this.form.checkcreate=t?t.id:null},remoteMethod:function(t){""!==t?(this.SETSTATE({k:"adsetlistload",v:!0}),this.$store.dispatch("getCreateAdsetlist",{keyword:t,projectId:this.$route.params.id})):this.SETSTATE({k:"createadsetlist",v:[]})},reset:function(){this.SETSTATE({k:"createadsetlist",v:[]}),this.SETSTATE({k:"hascreatead",v:!1}),this.isactive?0==this.form.type&&this.$refs.activeCreate.reset():(0==this.form.type&&this.$refs.createNormal.reset(),this.$refs.createList.reset()),this.editArray=[],this.fbAccountId="",this.form={adset:"",name:"",type:0,activeName:"first",checkcreate:null},this.createObject=null,this.mutilstatus={},this.mutil={adset:!1,name:!1,type:!1},this.isactive=!1,this.activespecial=!1},dataChecked:function(){return this.form.adset||this.mutilstatus.adset?this.form.name.trim()||this.mutilstatus.name?[!0]:[!1,"请输入广告名称"]:[!1,"请选择广告组"]},createChecked:function(){return this.mutilstatus.type?[!0]:this.isactive?this.$refs.activeCreate.getCheckData():"first"==this.form.activeName?2==this.form.type?this.$refs.createCarousel.getCheckData():this.$refs.createNormal.getCheckData():this.form.checkcreate?[!0]:[!1,"请选择创意"]},setFbAccountId:function(){this.fbAccountId=this.form.adset.split("|")[1],this.adsetIfdynamicCreative(),this.form.type=0},adsetIfdynamicCreative:function(){var t=this,e=this.createadsetlist.find(function(e){return e.adSetId==t.form.adset.split("|")[0]});this.isactive=e.isDynamicCreative,this.SETSTATE({k:"hascreatead",v:!1}),e.isDynamicCreative&&this.$store.dispatch("isActiveAd",e.adSetId)},extractInfo:function(){var t=this,e=this.dataChecked();if(e[0]){var a,s=this.createChecked();if(s[0]){if(a=s[1],a){a.fbAccountId=this.fbAccountId;var i={adName:this.mutilstatus.name?null:this.form.name,creativeVO:a,creativeType:this.isactive?"3":this.form.type,projectId:this.$route.params.id};return this.editArray.length>0?(i.adIds=this.editArray.map(function(t){return t.adId}),i.adSetId=null):(i.adIds=[],i.adSetId=this.form.adset.split("|")[0]),[i,"create"]}if(this.editArray.length>0){var n=[];return this.editArray.forEach(function(e){var a={};a.adId=e.adId,a.fbCreativeId=t.mutilstatus.type?e.creativeId:null,a.adName=t.mutilstatus.name?e.name:t.form.name,a.creativeId=t.mutilstatus.type?null:t.form.checkcreate,a.adSetId=t.mutilstatus.adset?e.adsetId:t.form.adset.split("|")[0],n.push(a)}),[n,"select"]}var o={adId:null,fbCreativeId:null,adName:this.form.name,creativeId:this.form.checkcreate,adSetId:this.form.adset.split("|")[0]};return[[o],"select"]}Object(H["g"])(s[1])}else Object(H["g"])(e[1])},initData:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.setsortlist.length>1?this.form.adset="":this.form.adset=0==this.setsortlist.length?"":this.setsortlist[0].adsetId+"|act_"+this.setsortlist[0].accountId,!this.form.adset){t.next=6;break}return this.fbAccountId=this.form.adset.split("|")[1],t.next=5,this.$store.dispatch("getCreateAdsetlist",{keyword:this.setsortlist[0].adsetId,projectId:this.$route.params.id});case 5:this.adsetIfdynamicCreative();case 6:this.$refs.createNormal.initData(),setTimeout(function(){e.$emit("changeEdit",!1)},100);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),changeEdit:function(t){this.$emit("changeEdit",t)},handleClick:function(){}}),watch:{editadlist:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n,o,r,c,l,u,d=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=45;break}return this.editArray=e,this.fbAccountId="act_"+e[0].accountId,s=Object(Vd["a"])(new Fd.a(e.map(function(t){return t.adsetId}))),this.form.adset=s.length>1?"":e[0].adsetId+"|act_"+e[0].accountId,this.form.name=Object(Vd["a"])(new Fd.a(e.map(function(t){return t.name}))).length>1?"":e[0].name,this.mutil={adset:!this.form.adset,name:!this.form.name,type:e.length>1},this.mutilstatus=fe()({},this.mutil),1==e.length&&this.$store.dispatch("getCreateAdsetlist",{keyword:e[0].adsetId,projectId:this.$route.params.id}),i=e.map(function(t){return t.creativeId}),n=Object(Vd["a"])(new Fd.a(i)).join(","),o=Cn["Loading"].service({fullscreen:!0}),t.next=14,this.$store.dispatch("creativeDetail",{creativeId:n});case 14:r=t.sent,o.close(),c=r.data.find(function(t){return t.assetFeedSpec&&"null"!=t.assetFeedSpec}),l=r.data.find(function(t){return!t.assetFeedSpec||"null"==t.assetFeedSpec}),t.t0=!0,t.next=t.t0===(Boolean(c)&&Boolean(l))?21:t.t0===Boolean(c)?24:26;break;case 21:return this.isactive=!0,this.activespecial=!0,t.abrupt("break",28);case 24:return this.isactive=!0,t.abrupt("break",28);case 26:return this.isactive=!1,t.abrupt("break",28);case 28:return t.next=30,this.$barrageTime(100);case 30:if(1!=i.length){t.next=44;break}if(this.createObject=r.data[0],!this.createObject.assetFeedSpec||"null"==this.createObject.assetFeedSpec){t.next=43;break}u=JSON.parse(this.createObject.assetFeedSpec),t.t1=u.ad_formats[0],t.next="AUTOMATIC_FORMAT"===t.t1?37:"CAROUSEL_IMAGE"===t.t1?39:41;break;case 37:return this.form.type=0,t.abrupt("break",41);case 39:return this.form.type=1,t.abrupt("break",41);case 41:t.next=44;break;case 43:this.createObject.cards?this.form.type=2:this.createObject.videoId?this.form.type=1:this.form.type=0;case 44:setTimeout(function(){d.$emit("changeEdit",!1)},200);case 45:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),"form.adset":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.name":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.type":{handler:function(t,e){this.$emit("changeEdit",!0)}},"form.checkcreate":{handler:function(t,e){this.$emit("changeEdit",!0)}}}},Jm=qm,Ym=(a("783d"),a("5060"),Object(E["a"])(Jm,bm,ym,!1,null,"35f87ae5",null)),Xm=Ym.exports,Zm={components:{CreateAdset:gm,CreateCampaign:mm,CreateAd:Xm,SelectImg:gc},data:function(){return{selectstatus:!1,typeName:"",status:!1,breadcrumb:[],type:"",editId:[],editName:[],ifEdit:!1,selectkey:""}},mounted:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{showTempImages:function(t){this.selectkey=t,this.selectstatus=!0},selectImage:function(t){this.$refs.createAd.selectImage(t)},saveInfo:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r,c,l=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=this.type,t.next="campaignName"===t.t0?3:"adSetName"===t.t0?18:"adName"===t.t0?34:58;break;case 3:if(e=this.$refs.createCampaign.extractInfo(),e){t.next=6;break}return t.abrupt("return");case 6:if(!(this.editId&&this.editId.length>0)){t.next=13;break}return t.next=9,this.$store.dispatch("editCampaign",e);case 9:a=t.sent,s="编辑成功",t.next=17;break;case 13:return t.next=15,this.$store.dispatch("createCampaign",e);case 15:a=t.sent,s="创建成功";case 17:return t.abrupt("break",58);case 18:if(i=this.$refs.createAdset.extractInfo(),i){t.next=21;break}return t.abrupt("return");case 21:if(!(this.editId&&this.editId.length>0)){t.next=28;break}return t.next=24,this.$store.dispatch("editAdset",i);case 24:a=t.sent,s="编辑成功",t.next=33;break;case 28:return e={adAccount:i.campaign.split("|")[1],adSetName:i.name,applicationId:i.action,bidAmount:""===i.maxbid?null:Bo()(100*i.maxbid),billingType:i.bid,budgetType:i.moneytype,campaignList:[i.campaign.split("|")[0]],country:i.country,dayBudget:Bo()(100*i.money),days:i.rdate,device:"itunes"==i.platform?i.equip.filter(function(t){return"iPhone"==t||"iPad"==t}):i.equip.filter(function(t){return"Android_Smartphone"==t}),endMinute:this.$timeFormat(i.rtime[1],"HH")+":00",dynamicCreative:i.activecreate,endTime:new Date(i.date[1]).getTime(),filteAttentionUser:i.filtrapage,filteInstalledUser:-1!=i.filtra.indexOf("1")?"yes":"",gender:i.sex,interest:i.interest,locales:i.language,maxAge:i.age[1],minAge:i.age[0],platform:i.platform,position:"1"==i.auto[0]?[]:i.verpla,scheduleType:i.timerange,startMinute:this.$timeFormat(i.rtime[0],"HH")+":00",startTime:new Date(i.date[0]).getTime(),totalBudget:Bo()(100*i.money),minVersion:i.lowversion,maxVersion:i.highversion,includeAudience:i.target,excludeAudience:"1"==i.iftarget[0]?[]:i.notarget},t.next=31,this.$store.dispatch("createAdset",e);case 31:a=t.sent,s="创建成功";case 33:return t.abrupt("break",58);case 34:if(n=this.$refs.createAd.extractInfo(),n){t.next=37;break}return t.abrupt("return");case 37:if("select"!=n[1]){t.next=51;break}if(!(this.editId&&this.editId.length>0)){t.next=45;break}return t.next=41,this.$store.dispatch("editAd",n[0]);case 41:a=t.sent,s="编辑成功",t.next=49;break;case 45:return t.next=47,this.$store.dispatch("createAd",n[0]);case 47:a=t.sent,s="创建成功";case 49:t.next=57;break;case 51:return o=Cn["Loading"].service({fullscreen:!0}),t.next=54,this.$store.dispatch("createEditAdAsync",n[0]);case 54:r=t.sent,o.close(),r&&(this.ifEdit=!1,this.hideBox());case 57:return t.abrupt("break",58);case 58:if(a){t.next=60;break}return t.abrupt("return");case 60:c=a.data.filter(function(t){return"failed"==t.status}),0==c.length?(Object(H["f"])(s),this.ifEdit=!1,this.hideBox()):this.editId&&this.editId.length>0?this.$alert("".concat(c.map(function(t){return'<b style="color: #409eff">'.concat(t[l.typeName],"</b> ").concat(t.errMsg)}).join("<br/>")),"错误信息",{confirmButtonText:"重新编辑",dangerouslyUseHTMLString:!0,callback:function(){}}):Object(H["a"])("创建失败：".concat(c[0].errMsg));case 62:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),hideBox:function(){var t=this;this.ifEdit?this.$confirm("是否确定离开当前页面","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.status=!1,t.reset()}).catch(function(){}):(this.status=!1,this.reset())},reset:function(){this.breadcrumb=[],this.editId=[],this.editName=[],this.SETSTATE({k:"editcampaignlist",v:[]}),this.SETSTATE({k:"editadsetlist",v:[]}),this.SETSTATE({k:"editadlist",v:[]}),this.SETSTATE({k:"campaigncount",v:[]}),this.$refs.createCampaign.reset(),this.$refs.createAdset.reset(),this.$refs.createAd.reset()},showBox:function(t){var e=t.type,a=t.id,s=t.name;switch(this.status=!0,this.type=e,this.editId=a||[],s&&(this.editName=s),this.type){case"campaignName":this.typeName="campaignId",this.editId&&this.editId.length>0?(this.$store.dispatch("getCampaignInfo",{campaignId:this.editId}),this.$store.dispatch("calcuCount",{id:this.editId,type:"campaign"})):(this.breadcrumb=[{name:"创建广告系列",important:!0}],this.$refs.createCampaign.initData());break;case"adSetName":this.typeName="adSetId",this.editId&&this.editId.length>0?(this.$store.dispatch("getAdsetInfo",{adsetId:this.editId,applicationid:this.actions}),this.$store.dispatch("calcuCount",{id:this.editId,type:"adset"})):(this.breadcrumb=[{name:"创建广告组",important:!0}],this.$refs.createAdset.initData()),this.$store.dispatch("otherCountries"),this.$store.dispatch("getLanguage"),this.$store.dispatch("getInterests"),this.$store.dispatch("getAdsetCreateApplist",{project_id:this.$route.params.id}),this.$store.dispatch("getAdsetCreateAllpages");break;case"adName":this.typeName="adId",this.editId&&this.editId.length>0?(this.$store.dispatch("getAdInfo",{adId:this.editId}),this.$store.dispatch("calcuCount",{id:this.editId,type:"ad"})):(this.breadcrumb=[{name:"创建广告",important:!0}],this.$refs.createAd.initData()),this.$store.dispatch("getSelectCreateList",{creativityType:0,creativityName:"",classify:"",pageIndex:1,projectId:this.$route.params.id}),this.$store.dispatch("getClassify",this.$route.params.id);break}},changeEdit:function(t){this.ifEdit=t}}),computed:Object(D["a"])({},Object(M["d"])(["adcount","adsetcount","campaigncount","editcampaignlist","itemlist","hascreatead"]),{actions:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).applicationId}}),watch:{campaigncount:function(t,e){t>0&&(this.breadcrumb=[{name:this.campaigncount>1?"".concat(this.campaigncount,"个广告系列"):this.editName[0],important:"campaignName"==this.type},{name:"adSetName"!=this.type&&"adName"!=this.type||1!=this.adsetcount?"".concat(this.adsetcount,"个广告组"):this.editName[1],important:"adSetName"==this.type},{name:"adName"==this.type&&1==this.adcount?this.editName[2]:"".concat(this.adcount,"个广告"),important:"adName"==this.type}])}}},Qm=Zm,tp=(a("0cef"),a("03d3"),a("7eb3"),Object(E["a"])(Qm,nm,om,!1,null,"52152a8d",null)),ep=tp.exports,ap=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"复制"+t.typeData.name,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.hideCopy}},["campaignName"==t.type?a("el-form",{attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"目标广告账户","label-width":"170px"}},[a("el-select",{staticClass:"accountselect",attrs:{filterable:"",placeholder:"选择广告账户，可搜索"},on:{change:t.selectAccount},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},t._l(t.adaccountOption,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1)}),1)],1),a("el-form-item",{attrs:{label:"每个广告系列副本数量","label-width":"170px"}},[a("el-input-number",{attrs:{min:1,step:1,disabled:t.ifstride,label:"描述文字"},model:{value:t.everyCount,callback:function(e){t.everyCount=e},expression:"everyCount"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.ifstride,expression:"ifstride"}]},[t._v("跨广告账户复制暂只支持1个副本")])],1)],1):t._e(),"adSetName"==t.type?a("el-form",{attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"复制到","label-width":"80px"}},[a("div",{staticClass:"target"},[a("el-radio",{attrs:{label:1},model:{value:t.targetArea,callback:function(e){t.targetArea=e},expression:"targetArea"}},[t._v("原广告系列")]),a("p",{directives:[{name:"show",rawName:"v-show",value:1==t.targetArea,expression:"targetArea == 1"}]},[t._v(t._s(t.originName))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.originId&&1==t.targetArea,expression:"originId && targetArea == 1"}]},[t._v("ID:"+t._s(t.originId))])],1),a("div",{staticClass:"target"},[a("el-radio",{attrs:{label:2},model:{value:t.targetArea,callback:function(e){t.targetArea=e},expression:"targetArea"}},[t._v("其他已有广告系列")]),a("p",{directives:[{name:"show",rawName:"v-show",value:2==t.targetArea,expression:"targetArea == 2"}]},[a("el-select",{staticClass:"alreadyHas",attrs:{filterable:"",placeholder:"请输入广告系列名称/编号搜索，包含所有广告账户内的",remote:"","remote-method":t.searchCampaign},on:{change:t.selectCampaignAdset},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.copyCampaign,function(t){return a("el-option",{key:t.campaignId,attrs:{label:t.campaiggName+"("+t.campaignId+")",value:t.campaignId+"|"+t.fbAccount.replace("act_","")}})}),1)],1)],1),a("div",{staticClass:"target"},[a("el-radio",{attrs:{label:3},model:{value:t.targetArea,callback:function(e){t.targetArea=e},expression:"targetArea"}},[t._v("新广告系列")]),a("p",{directives:[{name:"show",rawName:"v-show",value:3==t.targetArea,expression:"targetArea == 3"}]},[a("el-input",{staticClass:"alreadyHas",attrs:{placeholder:"请输入新广告系列名称"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),a("el-form-item",{attrs:{label:"目标广告账户","label-width":"100px"}},[a("el-select",{staticClass:"accountselect",attrs:{filterable:"",placeholder:"选择广告账户，可搜索"},on:{change:t.selectAccount},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},t._l(t.adaccountOption,function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1)}),1)],1)],1)],1)]),a("el-form-item",{attrs:{label:"每个广告组副本数量","label-width":"155px"}},[a("el-input-number",{attrs:{min:1,step:1,disabled:t.ifstride,label:"描述文字"},model:{value:t.everyCount,callback:function(e){t.everyCount=e},expression:"everyCount"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.ifstride,expression:"ifstride"}]},[t._v("跨广告账户复制暂只支持1个副本")])],1)],1):t._e(),"adName"==t.type?a("el-form",{attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"复制到","label-width":"80px"}},[a("div",{staticClass:"target"},[a("el-radio",{attrs:{label:1},model:{value:t.targetArea,callback:function(e){t.targetArea=e},expression:"targetArea"}},[t._v("原广告组")]),a("p",{directives:[{name:"show",rawName:"v-show",value:1==t.targetArea,expression:"targetArea == 1"}]},[t._v(t._s(t.originName))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.originId&&1==t.targetArea,expression:"originId && targetArea == 1"}]},[t._v("ID:"+t._s(t.originId))])],1),a("div",{staticClass:"target"},[a("el-radio",{attrs:{label:2},model:{value:t.targetArea,callback:function(e){t.targetArea=e},expression:"targetArea"}},[t._v("其他已有广告组")]),a("p",{directives:[{name:"show",rawName:"v-show",value:2==t.targetArea,expression:"targetArea == 2"}]},[a("el-select",{staticClass:"alreadyHas",attrs:{filterable:"",placeholder:"请输入广告组名称/编号搜索，包含所有广告账户内的",remote:"","remote-method":t.searchAdset},on:{change:t.selectCampaignAdset},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.copyAdset,function(t){return a("el-option",{key:t.adsetId,attrs:{label:t.adSetName+"("+t.adSetId+")",value:t.adSetId+"|"+t.fbAccountId.replace("act_","")}})}),1)],1)],1)]),a("el-form-item",{attrs:{label:"每个广告副本数量","label-width":"140px"}},[a("el-input-number",{attrs:{min:1,step:1,disabled:t.ifstride,label:"描述文字"},model:{value:t.everyCount,callback:function(e){t.everyCount=e},expression:"everyCount"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.ifstride,expression:"ifstride"}]},[t._v("跨广告账户复制暂只支持1个副本")])],1)],1):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideCopy}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveCopy}},[t._v("确 定")])],1)],1)},sp=[],ip={data:function(){return{dialogFormVisible:!1,targetArea:1,state:"",newName:"",account:"",everyCount:1,originId:"",originName:"",type:"",accountId:"",orgId:[],distId:[],adaccountOption:[],ifstride:!1,disAccount:""}},watch:{targetArea:function(t,e){this.ifstride=!1,this.disAccount="",this.account="",this.state=""}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{hideCopy:function(){this.dialogFormVisible=!1,this.reset()},reset:function(){this.state="",this.newName="",this.originId="",this.originName="",this.everyCount=1,this.orgId=[],this.distId=[],this.account="",this.ifstride=!1,this.disAccount="",this.targetArea=1,this.SETSTATE({k:"copycampaignlist",v:[]}),this.SETSTATE({k:"copyAdset",v:[]})},showBox:function(t,e,a){var s=this;this.type=t,this.accountId=a,1==e.length?(this.originId=e[0].orgid,this.originName=e[0].orgname,this.orgId=[e[0].id],this.distId=[e[0].orgid]):(this.originId="",this.originName="多项内容",this.orgId=e.map(function(t){return t.id}),this.distId=e.map(function(t){return t.orgid})),this.adaccountOption=[];var i=[{label:"所在广告账户",options:this.commonaccount.filter(function(t){return t.fbId==s.accountId})}],n=[{label:"其他",options:this.commonaccount.filter(function(t){return t.fbId!=s.accountId})}];this.adaccountOption=i.concat(n),this.dialogFormVisible=!0},searchCampaign:function(t){var e=this;console.log(t),t?(Object(Ho["clearTimeout"])(d),d=Object(Ho["setTimeout"])(function(){e.$store.dispatch("adGetCampaignlist",{projectId:e.$route.params.id,keyword:t})},300)):this.SETSTATE({k:"copycampaignlist",v:[]})},selectCampaignAdset:function(){this.disAccount=this.state.split("|")[1],this.setStride()},setStride:function(){this.disAccount!=this.accountId?(this.ifstride=!0,this.everyCount=1):this.ifstride=!1},searchAdset:function(t){var e=this;console.log(t),t?(Object(Ho["clearTimeout"])(d),d=Object(Ho["setTimeout"])(function(){e.$store.dispatch("adGetAdsetList",{projectId:e.$route.params.id,keyword:t})},300)):this.SETSTATE({k:"copyAdset",v:[]})},selectAccount:function(){this.disAccount=this.account,this.setStride()},saveCopy:function(){if(this.everyCount)if(console.log(this.disAccount),"campaignName"!=this.type||this.account){if(2==this.targetArea){if(!this.state)return void Object(H["g"])("请先选择需要复制到的广告系列/广告组");this.distId=[this.state.split("|")[0]]}else if(3==this.targetArea)return this.newName.trim()?this.account?(this.$store.dispatch("copyCreateCampaign",{name:this.newName,accountId:this.disAccount,orgId:this.orgId,count:this.everyCount,identify:this.typeData["identify"],type:this.type,projectId:this.$route.params.id,ifstride:this.ifstride}),void this.hideCopy()):void Object(H["g"])("请选择广告账户"):void Object(H["g"])("请输入新广告系列名称");this.$store.dispatch("adCopy",{orgId:this.orgId,distId:this.distId,count:this.everyCount,identify:this.typeData["identify"],type:this.type,projectId:this.$route.params.id,fbAccountId:this.ifstride?this.disAccount:null}),this.hideCopy()}else Object(H["g"])("请选择广告账户");else Object(H["g"])("请输入需要复制的数量")}}),computed:Object(D["a"])({},Object(M["d"])(["copycampaignlist","copyadsetlist","commonaccount"]),{copyCampaign:function(){var t=this;return this.copycampaignlist.filter(function(e){return e.campaignId!=t.originId})},copyAdset:function(){var t=this;return this.copyadsetlist.filter(function(e){return e.adSetId!=t.originId})},typeData:function(){var t={name:"",effect:"",effectIds:""};switch(this.type){case"campaignName":t.name="广告系列",t.identify="campaign";break;case"adSetName":t.name="广告组",t.identify="adSet";break;case"adName":t.name="广告",t.identify="ad";break}return t}})},np=ip,op=(a("bb40"),Object(E["a"])(np,ap,sp,!1,null,"96f26be6",null)),rp=op.exports,cp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"查找替换"+t.oldInfoList.length+"个"+t.typeData.name,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.hideReplace}},[a("div",{staticClass:"replaceline"},[a("p",{staticClass:"font"},[t._v("将")]),a("el-input",{staticClass:"input",attrs:{placeholder:"请输入内容"},on:{input:t.filterOld},model:{value:t.oldStr,callback:function(e){t.oldStr=e},expression:"oldStr"}}),a("p",{staticClass:"font"},[t._v("改为")]),a("el-input",{staticClass:"input",attrs:{placeholder:"请输入内容"},on:{input:t.filterNew},model:{value:t.newStr,callback:function(e){t.newStr=e},expression:"newStr"}})],1),a("div",{staticClass:"replacecont"},[a("el-radio-group",{on:{change:t.typeChange},model:{value:t.replaceType,callback:function(e){t.replaceType=e},expression:"replaceType"}},[a("el-radio",{attrs:{label:"Text"}},[t._v("名称")]),a("el-radio",{directives:[{name:"show",rawName:"v-show",value:"adName"==t.type,expression:"type == 'adName'"}],attrs:{label:"Name",disabled:t.tablock}},[t._v("标题")]),a("el-radio",{directives:[{name:"show",rawName:"v-show",value:"adName"==t.type,expression:"type == 'adName'"}],attrs:{label:"Desc",disabled:t.tablock}},[t._v("文本")]),a("el-radio",{directives:[{name:"show",rawName:"v-show",value:"adName"==t.type,expression:"type == 'adName'"}],attrs:{label:"Link",disabled:t.tablock}},[t._v("“查看更多”网址")])],1)],1),a("div",{staticClass:"articleList"},[a("div",{staticClass:"left"},[a("p",{staticClass:"title"},[t._v("当前文本")]),a("div",{staticClass:"artlist"},t._l(t.oldInfoList,function(e){return a("p",{key:e.update,attrs:{title:e.key},domProps:{innerHTML:t._s(e.name)}})}),0),a("p",{directives:[{name:"show",rawName:"v-show",value:t.oldStr.trim(),expression:"oldStr.trim()"}],staticClass:"count"},[t._v("“"+t._s(t.oldStr)+"”出现在"+t._s(t.appearCount)+"/"+t._s(t.oldInfoList.length)+"个对象中")])]),a("div",{staticClass:"left"},[a("p",{staticClass:"title"},[t._v("新文本")]),a("div",{staticClass:"artlist"},t._l(t.newInfoList,function(e){return a("p",{key:e.update,attrs:{title:e.key},domProps:{innerHTML:t._s(e.name)}})}),0),a("p",{staticClass:"count"},[t._v("将被“"+t._s(t.newStr)+"”替换")])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideReplace}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveReplace}},[t._v("确 定")])],1)])},lp=[],up={data:function(){return{type:"",dialogFormVisible:!1,oldStr:"",newStr:"",replaceType:"Text",tablock:!0,appearCount:0,oldInfoList:[],newInfoList:[],oldTextList:[],newTextList:[],oldNameList:[],newNameList:[],oldDescList:[],newDescList:[],oldLinkList:[],newLinkList:[],creativeList:[]}},methods:{typeChange:function(){this.oldStr="",this.newStr="";var t=this["old".concat(this.replaceType,"List")],e=this["new".concat(this.replaceType,"List")];t.forEach(function(t,e){t.key=t.old,t.name=t.old,t.update=e+t.old}),e.forEach(function(t,e){t.key=t.old,t.name=t.old,t.update=e+t.old}),this.oldInfoList=t,this.newInfoList=e,console.log(this.oldInfoList)},hideReplace:function(){this.dialogFormVisible=!1,this.reset(),console.log("reset")},reset:function(){this.replaceType="Text",this.oldInfoList=[],this.newInfoList=[],this.oldTextList=[],this.newTextList=[],this.oldNameList=[],this.newNameList=[],this.oldDescList=[],this.newDescList=[],this.oldLinkList=[],this.newLinkList=[],this.creativeList=[],this.oldStr="",this.newStr=""},saveReplace:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.oldStr.trim()){t.next=3;break}return Object(H["g"])("请输入需要替换的内容"),t.abrupt("return");case 3:if(0!=this.appearCount){t.next=6;break}return Object(H["g"])("当前输入内容未匹配到相关文本"),t.abrupt("return");case 6:"Text"==this.replaceType?(e=[],this.newInfoList.forEach(function(t){var a={name:t.key,id:t.id};e.push(a)}),this.$store.dispatch("seekReplace",{data:encodeURIComponent(_e()(e)),type:this.type})):(a=[],this.creativeList.forEach(function(t){if(t.assetFeedSpec&&"null"!=t.assetFeedSpec){var e=JSON.parse(t.assetFeedSpec);switch(s.replaceType){case"Name":a=s.newNameList.filter(function(e){return e.id==t.fbAdId}),e["titles"]=a.map(function(t){return{text:t.key}});break;case"Desc":a=s.newDescList.filter(function(e){return e.id==t.fbAdId}),e["bodies"]=a.map(function(t){return{text:t.key}});break;case"Link":a=s.newLinkList.filter(function(e){return e.id==t.fbAdId}),e["link_urls"][0]["deeplink_url"]=a[0].key;break}t.assetFeedSpec=_e()(e),t.creativityType=3}else switch(s.replaceType){case"Name":if(a=s.newNameList.filter(function(e){return e.id==t.fbAdId}),t.cards){var i=JSON.parse(t.cards);i.forEach(function(t,e){t.title=a[e].key}),t.cards=_e()(i)}else t.creativityTitle=a[0].key;break;case"Desc":a=s.newDescList.filter(function(e){return e.id==t.fbAdId}),t.creativityText=a[0].key;break;case"Link":a=s.newLinkList.filter(function(e){return e.id==t.fbAdId}),t.platFromUrl=a[0].key;break}t.projectId=s.$route.params.id}),this.$store.dispatch("seekReplaceCreate",{option:this.creativeList})),this.dialogFormVisible=!1,this.hideReplace();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),showBox:function(t,e){var a=this;this.type=t,this.dialogFormVisible=!0;var s=0,i=[];e.forEach(function(t){var e={id:t.seekid,name:t[a.typeData.namekey],key:t[a.typeData.namekey],old:t[a.typeData.namekey],update:s+t[a.typeData.namekey]};if(a.oldTextList.push(fe()({},e)),a.newTextList.push(fe()({},e)),"adName"==a.type){var n={adId:t.seekid,creativeId:t.creativeId,fbAccountId:t.accountId};i.push(n)}s++}),this.oldInfoList=this.oldTextList,this.newInfoList=this.newTextList,"adName"==this.type&&this.creativeDeal(i)},creativeDeal:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a,s,i,n,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.map(function(t){return t.creativeId}).join(","),s=e.map(function(t){return t.adId}),i=e.map(function(t){return t.fbAccountId}),this.tablock=!0,t.next=6,this.$store.dispatch("creativeDetail",{creativeId:a});case 6:n=t.sent,this.tablock=!1,this.creativeList=n.data,this.creativeList.forEach(function(t,e){if(t.fbAdId=s[e],t.fbAccountId=i[e],t.assetFeedSpec&&"null"!=t.assetFeedSpec){var a=JSON.parse(t["assetFeedSpec"]);a.titles.forEach(function(t){var a={id:s[e],name:t["text"],key:t["text"],old:t["text"],update:t["text"]};o.oldNameList.push(fe()({},a)),o.newNameList.push(fe()({},a))}),a.bodies.forEach(function(t){var a={id:s[e],name:t["text"],key:t["text"],old:t["text"],update:t["text"]};o.oldDescList.push(fe()({},a)),o.newDescList.push(fe()({},a))});var n={id:s[e],name:a["link_urls"][0]["deeplink_url"],key:a["link_urls"][0]["deeplink_url"],old:a["link_urls"][0]["deeplink_url"],update:a["link_urls"][0]["deeplink_url"]};o.oldLinkList.push(fe()({},n)),o.newLinkList.push(fe()({},n))}else{var r={id:s[e]};if(t.cards){var c=JSON.parse(t.cards);c.forEach(function(t){r.name=t.title,r.key=t.title,r.old=t.title,r.update=t.title,o.oldNameList.push(fe()({},r)),o.newNameList.push(fe()({},r))})}else r.name=t.creativityTitle,r.key=t.creativityTitle,r.old=t.creativityTitle,r.update=t.creativityTitle,o.oldNameList.push(fe()({},r)),o.newNameList.push(fe()({},r));var l={id:s[e],name:t.creativityText,key:t.creativityText,old:t.creativityText,update:t.creativityText};o.oldDescList.push(fe()({},l)),o.newDescList.push(fe()({},l));var u={id:s[e],name:t.platFromUrl,key:t.platFromUrl,old:t.platFromUrl,update:t.platFromUrl};o.oldLinkList.push(fe()({},u)),o.newLinkList.push(fe()({},u))}});case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),filterOld:function(){var t=this,e=this.oldStr.replace(/\?/g,"\\?"),a=new RegExp(e,"g");this.oldInfoList.forEach(function(e,s){e.old&&(e.name=e.old.replace(a,'<span style="color: red;">'+t.oldStr+"</span>"),e.update=s+e.name)}),this.appearCount=this.oldInfoList.filter(function(e){return e.old&&-1!=e.old.indexOf(t.oldStr)}).length,this.oldStr?this.filterNew():this.newInfoList.forEach(function(t,e){t.name=t.old,t.key=t.old,t.update=e+t.name})},filterNew:function(){var t=this;if(this.oldStr){var e=this.oldStr.replace(/\?/g,"\\?"),a=new RegExp(e,"g");this.newInfoList.forEach(function(e,s){e.old&&(e.name=e.old.replace(a,'<span style="color: red;">'+t.newStr+"</span>"),e.key=e.old.replace(a,t.newStr),e.update=s+e.name)})}}},computed:{typeData:function(){var t={name:"",effect:"",effectIds:""};switch(this.type){case"campaignName":t.name="广告系列",t.namekey="campaignName";break;case"adSetName":t.name="广告组",t.namekey="adSetName";break;case"adName":t.name="广告",t.namekey="adName";break}return t}}},dp=up,mp=(a("be9b"),Object(E["a"])(dp,cp,lp,!1,null,"a24a9d5e",null)),pp=mp.exports,fp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"条件名称","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.conditionName,callback:function(e){t.conditionName=e},expression:"conditionName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveCondtion}},[t._v("确 定")])],1)],1)},hp=[],_p={props:["savetype"],data:function(){return{dialogFormVisible:!1,conditionName:""}},computed:Object(D["a"])({},Object(M["d"])(["saveoption"]),{title:function(){switch(this.savetype){case"1":return"保存筛选条件";case"2":return"保存自定义列"}}}),methods:{showBox:function(){this.dialogFormVisible=!0},saveCondtion:function(){var t=this;""!=this.conditionName.trim()?this.saveoption.find(function(e){return e.name==t.conditionName.trim()})?Object(H["g"])("已存在同名自定义列，请重新命名"):(this.$emit("save",this.conditionName,this.savetype),this.dialogFormVisible=!1,this.conditionName=""):Object(H["g"])("请输入条件名称")}}},vp=_p,gp=Object(E["a"])(vp,fp,hp,!1,null,null,null),bp=gp.exports,yp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog pandectdialog",attrs:{title:"自定义列",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("div",{staticClass:"cont"},[a("div",{staticClass:"leftnav"},t._l(t.leftOption,function(e,s){return a("div",{key:s,staticClass:"line"},[a("p",{staticClass:"title",on:{click:function(a){t.goAnchor(t.type+"option_"+e.key)}}},[t._v(t._s(e.title))]),t._l(e.child,function(e,s){return a("div",{key:s},["常用"!=e.name?a("p",{staticClass:"child",on:{click:function(a){t.goAnchor(t.type+"option_"+e.key)}}},[t._v(t._s(e.name))]):t._e()])})],2)}),0),a("div",{staticClass:"midnav"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入搜索内容","prefix-icon":"el-icon-search"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),a("div",{staticClass:"midlist",attrs:{id:t.type+"midList"}},t._l(t.leftOption,function(e,s){return a("div",{key:s,staticClass:"mbox"},[a("p",{staticClass:"title",attrs:{id:t.type+"option_"+e.key}},[t._v(t._s(e.title))]),t._l(e.child,function(e,s){return a("div",{key:s,staticClass:"child"},["常用"!=e.name?a("p",{staticClass:"ntitle",attrs:{id:t.type+"option_"+e.key}},[a("span",[t._v(t._s(e.name))]),a("i",{staticClass:"line"})]):t._e(),"应用内事件"==e.name?a("div",{staticClass:"event"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.specialOption||0==t.specialOption.length,expression:"!specialOption || specialOption.length == 0"}],staticStyle:{color:"#999","text-align":"center","line-height":"30px"}},[t._v("暂无")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.specialOption&&t.specialOption.length>0,expression:"specialOption && specialOption.length > 0"}],staticClass:"eline"},[a("p",{staticClass:"tl"}),a("p",{staticClass:"nm"},[t._v("独立用户数")]),a("p",{staticClass:"nm"},[t._v("事件发生数")]),a("p",{staticClass:"nm"},[t._v("事件收益("+t._s(t.customUnit)+")")])]),t._l(t.specialOption,function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.name&&-1!=e.name.toLowerCase().indexOf(t.state.trim().toLowerCase()),expression:"p.name && p.name.toLowerCase().indexOf(state.trim().toLowerCase()) != -1"}],key:e.name,staticClass:"eline"},[a("p",{staticClass:"tl"},[t._v(t._s(e.name))]),a("p",{staticClass:"nm"},[a("el-checkbox",{staticClass:"ck",on:{change:t.toSelectOption},model:{value:e.checked1,callback:function(a){t.$set(e,"checked1",a)},expression:"p.checked1"}})],1),a("p",{staticClass:"nm"},[a("el-checkbox",{staticClass:"ck",on:{change:t.toSelectOption},model:{value:e.checked2,callback:function(a){t.$set(e,"checked2",a)},expression:"p.checked2"}})],1),a("p",{staticClass:"nm"},[a("el-checkbox",{staticClass:"ck",on:{change:t.toSelectOption},model:{value:e.checked3,callback:function(a){t.$set(e,"checked3",a)},expression:"p.checked3"}})],1)])})],2):a("div",{staticClass:"nchild"},t._l(t.middleOption[e.name],function(e,s){return a("p",{key:s},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!e.tip,content:e.tip,placement:"right"}},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.name&&-1!=e.name.toLowerCase().indexOf(t.state.trim().toLowerCase()),expression:"l.name && l.name.toLowerCase().indexOf(state.trim().toLowerCase()) != -1"}],staticClass:"ckbox",attrs:{disabled:"campaignName"==t.type&&"广告系列名称"==e.name||"adSetName"==t.type&&"广告组名称"==e.name||"adName"==t.type&&"广告名称"==e.name},on:{change:t.toSelectOption},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"l.checked"}},[t._v(t._s(e.name))])],1)],1)}),0)])})],2)}),0)]),a("div",{staticClass:"rightnav"},[a("p",{staticClass:"tagtotal"},[t._v("已选择"+t._s(this.cantDeleteOption.length+this.selectOption.length)+"项")]),a("div",{staticClass:"tagall"},[t._l(t.cantDeleteOption,function(e){return a("p",{key:e.key},[a("el-tag",{staticClass:"tagline",attrs:{type:"info"}},[t._v(t._s(e.name))])],1)}),t._l(t.selectOption,function(e){return a("p",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.selectOption,group:"tag"},expression:"{ item: tag, list: selectOption, group: 'tag' }"}],key:e.name},["campaignName"==t.type&&"广告系列名称"!=e.name||"adSetName"==t.type&&"广告组名称"!=e.name||"adName"==t.type&&"广告名称"!=e.name?a("span",[a("el-tag",{staticClass:"tagline",attrs:{closable:"",type:"info"},on:{close:function(a){t.deleteTag(e.key)}}},[t._v(t._s(e.name))])],1):t._e()])})],2)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveList}},[t._v("确 定")])],1)])},kp=[],Ep={props:["status","opDefault","setDefaultOption","customEvent","customUnit","type"],data:function(){return{state:"",specialStatus:!1,dialogFormVisible:!1,cantDeleteOption:[],selectOption:[],eventOption:[],localEvent:[],leftOption:[{title:"常用",key:"cy",child:[{name:"常用",key:"cy"}]},{title:"设置",key:"sz",child:[{name:"Atom",key:"atom"},{name:"对象名称和编号",key:"dxmchbh"}]},{title:"监测平台",key:"jcpt",child:[{name:"表现",key:"bx"},{name:"留存",key:"lc"},{name:"应用内事件",key:"yynsj"}]}],specialOption:this.customEvent,middleOption:{}}},mounted:function(){this.$dragging.$on("dragged",function(t){t.value}),this.$dragging.$on("dragend",function(){})},methods:{showBox:function(){var t=this;this.middleOption={"常用":[{name:"投放状态",key:"effectiveStatusName",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"投放状态"==t.name})},{name:"触达",key:"reachNum",checked:!!this.setDefaultOption.find(function(t){return"触达"==t.name})},{name:"展示",key:"showNum",checked:!!this.setDefaultOption.find(function(t){return"展示"==t.name})},{name:"点击",key:"clicksNum",checked:!!this.setDefaultOption.find(function(t){return"点击"==t.name})},{name:"CTR",key:"ctr",checked:!!this.setDefaultOption.find(function(t){return"CTR"==t.name})},{name:"CVR",key:"cvr",checked:!!this.setDefaultOption.find(function(t){return"CVR"==t.name})},{name:"CPM",key:"cpm",checked:!!this.setDefaultOption.find(function(t){return"CPM"==t.name})},{name:"CPC",key:"cpc",checked:!!this.setDefaultOption.find(function(t){return"CPC"==t.name})},{name:"安装",key:"installNum",checked:!!this.setDefaultOption.find(function(t){return"安装"==t.name})},{name:"花费",key:"spend",checked:!!this.setDefaultOption.find(function(t){return"花费"==t.name})},{name:"CPI",key:"cpi",checked:!!this.setDefaultOption.find(function(t){return"CPI"==t.name})},{name:"相关度",key:"relevanceScore",checked:!!this.setDefaultOption.find(function(t){return"相关度"==t.name})}],Atom:[{name:"推广计划编号",key:"planId",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"推广计划编号"==t.name})},{name:"推广计划名称",key:"planName",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"推广计划名称"==t.name})},{name:"创建人",key:"creator",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"创建人"==t.name})}],"对象名称和编号":[{name:"账户编号",key:"accountId",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"账户编号"==t.name})},{name:"账户名称",key:"accountName",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"账户名称"==t.name})},{name:"广告系列名称",key:"campaignName",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"广告系列名称"==t.name})},{name:"广告系列编号",key:"campaignId",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"广告系列编号"==t.name})},{name:"广告组名称",key:"adSetName",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"广告组名称"==t.name})},{name:"广告组编号",key:"adsetId",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"广告组编号"==t.name})},{name:"广告名称",key:"adName",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"广告名称"==t.name})},{name:"广告编号",key:"adId",isevent:!0,checked:!!this.setDefaultOption.find(function(t){return"广告编号"==t.name})}],"表现":[{name:"AF_展示数",key:"afShowsNum",checked:!!this.setDefaultOption.find(function(t){return"AF_展示数"==t.name})},{name:"AF_点击数",key:"afClicksNum",checked:!!this.setDefaultOption.find(function(t){return"AF_点击数"==t.name})},{name:"AF_点击率",key:"afCtr",checked:!!this.setDefaultOption.find(function(t){return"AF_点击率"==t.name})},{name:"AF_安装数",key:"afInstallsNum",tip:"安装后有效激活的数量",checked:!!this.setDefaultOption.find(function(t){return"AF_安装数"==t.name})},{name:"AF_安装数差异率",key:"afMinsRate",tip:"（监测平台安装数-Facebook安装数）/Facebook安装数",checked:!!this.setDefaultOption.find(function(t){return"AF_安装数差异率"==t.name})},{name:"AF_CPI",key:"afCpi",tip:"花费/AF_安装量",checked:!!this.setDefaultOption.find(function(t){return"AF_CPI"==t.name})},{name:"AF_转化率",key:"afConversionRate",tip:"安装数/点击数",checked:!!this.setDefaultOption.find(function(t){return"AF_转化率"==t.name})},{name:"AF_次日留存率",key:"afRetentionRate",tip:"AF_2d_rr_user_独立用户数/AF_安装量，仅tiktok显示",checked:!!this.setDefaultOption.find(function(t){return"AF_次日留存率"==t.name})},{name:"AF_会话次数",key:"afSessionsNum",tip:"APP打开次数",checked:!!this.setDefaultOption.find(function(t){return"AF_会话次数"==t.name})},{name:"AF_忠实用户",key:"afLoyalUsersNum",tip:"默认为打开app超过三次以上的用户，可重新定义",checked:!!this.setDefaultOption.find(function(t){return"AF_忠实用户"==t.name})},{name:"AF_忠实用户比率",key:"afLoyalUsersRate",tip:"忠实用户数／安装数",checked:!!this.setDefaultOption.find(function(t){return"AF_忠实用户比率"==t.name})},{name:"AF_收益",key:"afTotalReveue",tip:"源自应用内购买事件的收益",checked:!!this.setDefaultOption.find(function(t){return"AF_收益"==t.name})},{name:"AF_花费",key:"afTotalCost",tip:"渠道上报的总花费",checked:!!this.setDefaultOption.find(function(t){return"AF_花费"==t.name})},{name:"AF_投资回报率",key:"afROI",tip:"ROI，收益/花费",checked:!!this.setDefaultOption.find(function(t){return"AF_投资回报率"==t.name})},{name:"AF_单用户平均收益",key:"afUserReveue",tip:"平均每位用户带来的收益，收益/安装数",checked:!!this.setDefaultOption.find(function(t){return"AF_单用户平均收益"==t.name})},{name:"AF_平均eCPI",key:"afEcpi",tip:"每次安装的平均有效成本",checked:!!this.setDefaultOption.find(function(t){return"AF_平均eCPI"==t.name})}],"留存":[{name:"Day 1留存量",key:"retentionNum1",checked:!!this.setDefaultOption.find(function(t){return"Day 1留存量"==t.name})},{name:"Day 1留存率",key:"afReRate1",checked:!!this.setDefaultOption.find(function(t){return"Day 1留存率"==t.name})},{name:"Day 2留存量",key:"retentionNum2",checked:!!this.setDefaultOption.find(function(t){return"Day 2留存量"==t.name})},{name:"Day 2留存率",key:"afReRate2",checked:!!this.setDefaultOption.find(function(t){return"Day 2留存率"==t.name})},{name:"Day 3留存量",key:"retentionNum3",checked:!!this.setDefaultOption.find(function(t){return"Day 3留存量"==t.name})},{name:"Day 3留存率",key:"afReRate3",checked:!!this.setDefaultOption.find(function(t){return"Day 3留存率"==t.name})},{name:"Day 4留存量",key:"retentionNum4",checked:!!this.setDefaultOption.find(function(t){return"Day 4留存量"==t.name})},{name:"Day 4留存率",key:"afReRate4",checked:!!this.setDefaultOption.find(function(t){return"Day 4留存率"==t.name})},{name:"Day 5留存量",key:"retentionNum5",checked:!!this.setDefaultOption.find(function(t){return"Day 5留存量"==t.name})},{name:"Day 5留存率",key:"afReRate5",checked:!!this.setDefaultOption.find(function(t){return"Day 5留存率"==t.name})},{name:"Day 6留存量",key:"retentionNum6",checked:!!this.setDefaultOption.find(function(t){return"Day 6留存量"==t.name})},{name:"Day 6留存率",key:"afReRate6",checked:!!this.setDefaultOption.find(function(t){return"Day 6留存率"==t.name})},{name:"Day 7留存量",key:"retentionNum7",checked:!!this.setDefaultOption.find(function(t){return"Day 7留存量"==t.name})},{name:"Day 7留存率",key:"afReRate7",checked:!!this.setDefaultOption.find(function(t){return"Day 7留存率"==t.name})}]},this.selectOption=this.setDefaultOption,this.customEvent.forEach(function(e){e.checked1=!!t.setDefaultOption.find(function(t){return t.name=="".concat(e.name,"独立用户数")}),e.checked2=!!t.setDefaultOption.find(function(t){return t.name=="".concat(e.name,"事件发生数")}),e.checked3=!!t.setDefaultOption.find(function(t){return-1!=t.name.indexOf("".concat(e.name,"事件收益"))})})},goAnchor:function(t){document.getElementById(this.type+"midList").scrollTop=document.getElementById(t).offsetTop-134},saveList:function(){var t=this.cantDeleteOption.concat(this.selectOption);this.$emit("outOption",t,this.selectOption,this.localEvent),this.dialogFormVisible=!1},toCancel:function(){this.$emit("hideOptionbox")},deleteTag:function(t){for(var e in this.selectOption=this.selectOption.filter(function(e){return e.key!=t}),this.middleOption)this.middleOption[e].forEach(function(e){t==e.key&&(e.checked=!1)})},toSelectOption:function(t){var e=this;this.selectOption=[];var a=function(t){var a=e.middleOption[t],s=[],i="";switch(e.type){case"campaignName":i="广告系列名称";break;case"adSetName":i="广告组名称";break;case"adName":i="广告名称";break}s=e.setDefaultOption.find(function(t){return t.name==i})?a.filter(function(t){return t.checked}):a.filter(function(t){return t.checked&&t.name!=i}),e.selectOption=e.selectOption.concat(s)};for(var s in this.middleOption)a(s);this.eventOption=[],this.localEvent=[],this.specialOption.forEach(function(t){if((t.checked1||t.checked2||t.checked3)&&e.localEvent.push(t.name),t.checked1){var a={name:t.name+"独立用户数",key:t.name+"|uniqueUsers",checked:!0,isevent:!0};e.eventOption.push(a)}if(t.checked2){var s={name:t.name+"事件发生数",key:t.name+"|eventCounter",checked:!0,isevent:!0};e.eventOption.push(s)}if(t.checked3){var i={name:t.name+"事件收益(".concat(e.customUnit,")"),key:t.name+"|salesIn",checked:!0,isevent:!0};e.eventOption.push(i)}}),this.selectOption=this.selectOption.concat(this.eventOption)}},watch:{status:function(t,e){this.dialogFormVisible=t;var a=null,s="";if(t){switch(this.cantDeleteOption=this.opDefault[this.type],this.type){case"campaignName":s="campaignName";break;case"adSetName":s="adSetName";break;case"adName":s="adName";break}a=this.middleOption["对象名称和编号"].find(function(t){return t.key==s}),this.specialStatus=a.checked,a.checked=!0}else{switch(this.cantDeleteOption=[],this.type){case"campaignName":s="campaignName";break;case"adSetName":s="adSetName";break;case"adName":s="adName";break}a=this.middleOption["对象名称和编号"].find(function(t){return t.key==s}),a.checked=this.specialStatus}},setDefaultOption:function(t,e){for(var a in this.selectOption=t,this.middleOption)this.middleOption[a].forEach(function(e){t.find(function(t){return t.name==e.name})?e.checked=!0:e.checked=!1})},customEvent:function(t,e){this.specialOption=t}}},Cp=Ep,Op=(a("8013"),a("5782"),Object(E["a"])(Cp,yp,kp,!1,null,"be9f3200",null)),wp=Op.exports,Ip=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"导入AppsFlyer留存数据",visible:t.status},on:{close:t.hideBox}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.submitresult,expression:"!submitresult"}]},[a("el-form",{attrs:{"label-width":"90px","label-position":"left"}},[a("el-form-item",{attrs:{label:"系统"}},[a("el-radio-group",{on:{change:t.systemChange},model:{value:t.system,callback:function(e){t.system=e},expression:"system"}},[a("el-radio",{attrs:{label:"Android"}}),a("el-radio",{attrs:{label:"iOS"}})],1)],1),a("el-form-item",{staticClass:"relativeform",attrs:{label:"数据日历"}},[a("um-calendar",{ref:"umCalendar",attrs:{dayOn:t.calendardate,disabledDate:t.disabledDate},on:{"update:dayOn":function(e){t.calendardate=e},monthChange:t.monthChange}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"亮起日期有数据，建议上传无数据的日期。上传亮起日期的留存，旧数据会被覆盖",placement:"top-start"}},[a("i",{staticClass:"el-icon-question elnotice"})])],1),a("el-form-item",{staticClass:"relativeform",attrs:{label:"上传文件"}},[t._l(t.processCSV,function(e,s){return a("div",{key:s,staticClass:"csvline"},[a("p",{staticClass:"file",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("i",{staticClass:"el-icon-error close",on:{click:function(e){t.deleteCSV(s)}}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.resultMsg,placement:"top-start"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.resultMsg,expression:"csv.resultMsg"}],staticClass:"el-icon-warning warn"})]),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.resultMsg,expression:"!csv.resultMsg"}],staticClass:"el-icon-success successcsv"})],1)}),a("el-button",{attrs:{type:"primary",size:"small",loading:t.fileload}},[t._v("上传文件")]),a("vue-file-upload",{directives:[{name:"show",rawName:"v-show",value:!t.fileload,expression:"!fileload"}],ref:"vueFileUploader",staticClass:"fileinput",attrs:{name:"files",autoUpload:!0,url:t.uploadFileUrl,events:t.eventsCSV,requestOptions:t.fileOption,filters:t.imgfilters},on:{uploadPic:t.uploadPic,uploadRes:t.uploadRes}},[a("span",{attrs:{slot:"label"},slot:"label"})]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("·请上传按照以下条件在AF【留存报告】页面导出的CSV文件。筛选条件：媒体平台 选择 Facebook Ads，分组维度 选择 ad、广告组、国家和日期，最低安装数量 为 0，日期范围请自行确定。\n            "),a("br"),t._v("·请不要修改下载的文件名和文件内容。\n          ")]),a("i",{staticClass:"el-icon-question elnotice"})])],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideBox}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:Boolean(t.processCSV.find(function(t){return t.resultMsg}))},on:{click:t.submitAfdata}},[t._v("确 定")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"success"==t.submitresult,expression:"submitresult == 'success'"}]},[a("div",{staticClass:"successline"},[a("i",{staticClass:"el-icon-success successicon"}),a("p",{staticClass:"font"},[t._v("匹配成功")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideBox}},[t._v("关闭")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"fail"==t.submitresult,expression:"submitresult == 'fail'"}]},[a("div",{staticClass:"successline"},[a("i",{staticClass:"el-icon-warning successicon"}),a("p",{staticClass:"fail"},[t._v("匹配部分成功，请下载结果并检查数据是否合规，合规后重新上传")]),t._l(t.resultarray,function(e,s){return a("p",{key:s,staticClass:"failresult"},[a("span",{staticClass:"name"},[t._v(t._s(e.fileName))]),e.isSuccess?a("span",{staticClass:"result"},[t._v("匹配成功")]):a("span",{staticClass:"result"},[t._v("\n          部分成功，\n          "),a("span",{on:{click:function(a){t.downFailResult(e.fileName)}}},[t._v("下载结果")])])])})],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideBox}},[t._v("关闭")])],1)])])},Tp=[],xp=a("5d73"),Sp=a.n(xp),Ap=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calendar"},[a("div",{staticClass:"nowdate"},[a("span",{staticClass:"leftctrl"},[a("i",{staticClass:"el-icon-d-arrow-left",on:{click:function(e){t.setYear(-1)}}}),a("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){t.setMonth(-1)}}})]),t._v("\n    "+t._s(t.year)+"年"+t._s(t.month)+"月\n    "),a("span",{staticClass:"rightctrl"},[a("i",{staticClass:"el-icon-arrow-right",on:{click:function(e){t.setMonth(1)}}}),a("i",{staticClass:"el-icon-d-arrow-right",on:{click:function(e){t.setYear(1)}}})])]),a("div",{staticClass:"week"},t._l(t.week,function(e,s){return a("p",{key:s},[t._v(t._s(e))])}),0),a("div",{staticClass:"day"},t._l(t.day,function(e,s){return a("ul",{key:s},t._l(e,function(e,s){return a("li",{key:s,class:{"prev-day":"prev"==e.key,"next-day":"next"==e.key,"day-on":"on"==e.key}},[a("span",[t._v(t._s(e.name))])])}),0)}),0)])},jp=[],Dp=a("a745"),Mp=a.n(Dp),Pp={props:["dayOn","disabledDate"],data:function(){return{monthday:[],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,week:["日","一","二","三","四","五","六"],day:[]}},mounted:function(){},watch:{dayOn:function(t,e){this.setDay()}},methods:{setYear:function(t){this.year+=t,this.monthChange(),this.setDay()},setMonth:function(t){this.month+=t,13==this.month&&(this.month=1,this.year++),0==this.month&&(this.month=12,this.year--),this.monthChange(),this.setDay()},monthChange:function(){this.$emit("monthChange",this.year,this.month)},reset:function(){this.year=(new Date).getFullYear(),this.month=(new Date).getMonth()+1},setDay:function(){var t=[],e=this.getMonthDaycount(this.year,this.month),a=e[0],s=this.getMonthDaycount(this.year,this.month-1),i=s[0],n=this.getMonthDaycount(this.year,this.month+1),o=[],r=[],c=[];Mp()(this.dayOn)&&this.dayOn.forEach(function(t){var a=t.split("-");a[0]==e[1]&&a[1]==e[2]&&o.push(t),a[0]==s[1]&&a[1]==s[2]&&r.push(t),a[0]==n[1]&&a[1]==n[2]&&c.push(t)});var l=[];this.disabledDate&&(l=this.disabledDate.split("-"));while(a>0){var u={name:a,key:"",year:e[1],month:e[2]};switch(!0){case e[1]>l[0]:case e[1]==l[0]&&e[2]>l[1]:case e[1]==l[0]&&e[2]==l[1]&&a>=l[2]:u.key="next";break;default:u.key="now";break}u.key=o.find(function(t){return t.split("-")[2]==a})?"on":u.key,t.unshift(u),a--}this.monthday=t.slice(0);var d=this.getDayWeek(this.year,this.month,1);while(d>0)t.unshift({name:i,key:r.find(function(t){return t.split("-")[2]==i})?"on":"prev",year:s[1],month:s[2]}),i--,d--;var m=1;while(t.length%7>0)t.push({name:m,key:c.find(function(t){return t.split("-")[2]==m})?"on":"next",year:n[1],month:n[2]}),m++;this.day=[];for(var p=0;p<t.length;p+=7)this.day.push(t.slice(p,p+7))},getMonthDaycount:function(t,e){var a=new Date(t,e,0);return[a.getDate(),a.getFullYear(),a.getMonth()+1]},getDayWeek:function(t,e,a){var s=new Date(t,e-1,a);return s.getDay()}}},Lp=Pp,Rp=(a("89db"),Object(E["a"])(Lp,Ap,jp,!1,null,"8564e632",null)),Np=Rp.exports,Up=a("dd46"),$p={props:["status","type"],components:{UmCalendar:Np,VueFileUpload:fn.a},data:function(){return{system:"Android",submitresult:"",resultarray:[],date:"",dayOn:[],fileload:!1,fileArray:[],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,disabledDate:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth()+1,"-").concat((new Date).getDate()-1),fileOption:{formData:{check:!0},headers:{"X-Token":localStorage.getItem("atom_token")}},imgfilters:[{name:"csvFilter",fn:function(t){var e="|"+t.name.slice(t.name.lastIndexOf(".")+1)+"|";return-1!=="|csv|".indexOf(e)||(Object(H["g"])("只能上传csv格式的文件"),!1)}}],processCSV:[],eventsCSV:{onProgressUpload:function(t,e){console.log(t.name),this.vm.$emit("uploadPic",t,e)},onSuccessUpload:function(t,e,a,s){0!=e.code&&Object(H["a"])(e.msg),this.vm.$emit("uploadRes",e,t),console.log("%cremove","color: red")},onAddFileSuccess:function(t){console.log("%cwaiting","color: red"),this.vm.$emit("checkUploadPic",t)}}}},computed:Object(D["a"])({},Object(M["d"])(["calendardate"]),{uploadFileUrl:function(){return Up["a"].addatacsv}}),mounted:function(){},watch:{status:function(t,e){t&&(this.monthChange(),this.fileOption.formData["userOs"]=this.system,this.fileOption.formData["projectId"]=this.$route.params.id)}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{downFailResult:function(t){console.log(t),this.$store.dispatch("affileDownload",t)},submitAfdata:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.fileArray.length){t.next=3;break}return Object(H["g"])("请上传af留存数据文件"),t.abrupt("return");case 3:e=Cn["Loading"].service({fullscreen:!0}),a=!0,s=!1,i=void 0,t.prev=7,n=Sp()(this.fileArray);case 9:if(a=(o=n.next()).done){t.next=23;break}return r=o.value,c=new FormData,c.append("files",r.file),c.append("userOs",this.system),c.append("projectId",this.$route.params.id),c.append("check",!1),t.next=18,this.$store.dispatch("submitAfdata",c);case 18:l=t.sent,this.resultarray.push(l.data);case 20:a=!0,t.next=9;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](7),s=!0,i=t.t0;case 29:t.prev=29,t.prev=30,a||null==n.return||n.return();case 32:if(t.prev=32,!s){t.next=35;break}throw i;case 35:return t.finish(32);case 36:return t.finish(29);case 37:e.close(),this.resultarray.find(function(t){return 0===t.isSuccess})?this.submitresult="fail":this.submitresult="success";case 39:case"end":return t.stop()}},t,this,[[7,25,29,37],[30,,32,36]])}));function e(){return t.apply(this,arguments)}return e}(),submitAsync:function(){var t=this;return new Le.a(function(e,a){t.fileArray.forEach(function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:l;case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}())})},systemChange:function(){this.fileOption.formData["userOs"]=this.system,this.monthChange(),this.fileArray=[],this.processCSV=[]},deleteCSV:function(t){this.fileArray.splice(t,1),this.processCSV.splice(t,1)},uploadRes:function(t,e){this.SETSTATE({k:"withcreate",v:!0});var a={};a.name=e.name,a.size=e.size,a.resultMsg=t.msg,this.processCSV=this.processCSV.filter(function(t){return t.name!=e.name}),this.fileArray=this.fileArray.filter(function(t){return t.name!=e.name}),this.fileArray.push(e),this.processCSV.push(a),this.fileload=!1},uploadPic:function(t,e){this.SETSTATE({k:"withcreate",v:!1}),this.fileload=!0},getMonthDaycount:function(t,e){var a=new Date(t,e,0);return[a.getDate(),a.getFullYear(),a.getMonth()+1]},hideBox:function(){this.$emit("hideRemainBox"),this.SETSTATE({k:"calendardate",v:[]}),this.reset()},reset:function(){this.system="Android",this.processCSV=[],this.fileArray=[],this.submitresult="",this.resultarray=[],this.year=(new Date).getFullYear(),this.month=(new Date).getMonth()+1,this.fileload=!1,this.$refs.umCalendar.reset()},monthChange:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e&&(this.year=e),a&&(this.month=a),s=this.getMonthDaycount(this.year,this.month),this.$store.dispatch("getCalendarData",{projectId:this.$route.params.id,startDate:"".concat(this.year,"-").concat(this.month,"-01"),endDate:"".concat(this.year,"-").concat(this.month,"-").concat(s[0]),userOs:this.system});case 4:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()})},Bp=$p,Fp=(a("1ff4"),Object(E["a"])(Bp,Ip,Tp,!1,null,"430fc5ee",null)),Vp=Fp.exports,Kp={components:{AdSetbox:im,SaveCondition:bp,AdCreate:ep,SeekReplace:pp,AdCopy:rp,ListOption:wp,ImportRemain:Vp,RuleSelect:Nd,RuleRemove:jd,RuleAdd:Xo,BreadCrumb:kr,BigImage:Oc},beforeRouteLeave:function(t,e,a){switch(this.tabname){case"first":this.$refs["campaignName"].resetCare();break;case"second":this.$refs["adSetName"].resetCare();break;case"third":this.$refs["adName"].resetCare();break}clearInterval(jobProcess),a()},data:function(){return{optionstatus:!1,remainstatus:!1,ruleselectstatus:!1,ruleremovestatus:!1,ruleaddstatus:!1,defaultOption:[],localEvent:[],defaultListOption:[],sortDown:!1,tabtype:"campaignName",prevEdit:null,applicationid:"",savetype:"1",opDefault:{campaignName:[{name:"广告系列名称",key:"campaignName"}],adSetName:[{name:"广告组名称",key:"adSetName"}],adName:[{name:"广告名称",key:"adName"}]},opListDefault:[],optionDefault:[{name:"投放状态",key:"effectiveStatusName",checked:!0,isevent:!0},{name:"触达",key:"reachNum",checked:!0},{name:"展示",key:"showNum",checked:!0},{name:"点击",key:"clicksNum",checked:!0},{name:"CTR",key:"ctr",checked:!0},{name:"CVR",key:"cvr",checked:!0},{name:"CPM",key:"cpm",checked:!0},{name:"CPC",key:"cpc",checked:!0},{name:"相关度",key:"relevanceScore",checked:!0},{name:"安装",key:"installNum",checked:!0},{name:"花费",key:"spend",checked:!0},{name:"CPI",key:"cpi",checked:!0}],searchList:[{name:"广告系列投放",key:"adCampaignStatusStr",list:[{checked:!1,cname:"投放中",key:"ACTIVE"},{checked:!1,cname:"已暂停",key:"PAUSED"},{checked:!1,cname:"已归档",key:"ARCHIVED"},{checked:!1,cname:"已删除",key:"DELETED"}]},{name:"广告组投放",key:"adSetStatusStr",list:[{checked:!1,cname:"投放中",key:"ACTIVE"},{checked:!1,cname:"已暂停",key:"PAUSED"},{checked:!1,cname:"已归档",key:"ARCHIVED"},{checked:!1,cname:"已删除",key:"DELETED"}]},{name:"广告投放",key:"adStatusStr",list:[{checked:!1,cname:"投放中",key:"ACTIVE"},{checked:!1,cname:"已暂停",key:"PAUSED"},{checked:!1,cname:"已归档",key:"ARCHIVED"},{checked:!1,cname:"已删除",key:"DELETED"}]},{name:"版位",key:"publisherPlatformStrs",list:[{checked:!1,cname:"Facebook",key:"facebook"},{checked:!1,cname:"Instagram",key:"instagram"},{checked:!1,cname:"Audience Network",key:"audience_network"},{checked:!1,cname:"Messenger",key:"messenger"}]},{name:"广告系列指标",key:"adCampaignTargetVo",list:[{cname:"触达",checked:!1,key:"reachNum"},{cname:"展示",checked:!1,key:"showNum"},{cname:"点击",checked:!1,key:"clicksNum"},{cname:"CTR",checked:!1,key:"ctr"},{cname:"CVR",checked:!1,key:"cvr"},{cname:"CPM",checked:!1,key:"cpm"},{cname:"CPC",checked:!1,key:"cpc"},{cname:"安装",checked:!1,key:"installNum"},{cname:"花费",checked:!1,key:"spend"},{cname:"CPI",checked:!1,key:"cpi"},{cname:"AF_展示数",checked:!1,key:"afShowsNum"},{cname:"AF_点击数",checked:!1,key:"afClicksNum"},{cname:"AF_点击率",checked:!1,key:"afCtr"},{cname:"AF_安装数",checked:!1,key:"afInstallsNum"},{cname:"AF_安装数差异率",checked:!1,key:"afMinsRate"},{cname:"AF_CPI",checked:!1,key:"afCpi"},{cname:"AF_转化率",checked:!1,key:"afCvr"},{cname:"AF_次日留存率",checked:!1,key:"afRetentionRate"},{cname:"AF_会话次数",checked:!1,key:"afSessionsNum"},{cname:"AF_忠实用户",checked:!1,key:"afLoyalUsersNum"},{cname:"AF_忠实用户比率",checked:!1,key:"afLoyalUsersRate"},{cname:"AF_收益",checked:!1,key:"afTotalReveue"},{cname:"AF_花费",checked:!1,key:"afTotalCost"},{cname:"AF_投资回报率",checked:!1,key:"afROI"},{cname:"AF_单用户平均收益",checked:!1,key:"afUserReveue"},{cname:"AF_平均eCPI",checked:!1,key:"ecpi"},{cname:"Day 1留存量",checked:!1,key:"retentionNum1"},{cname:"Day 1留存率",checked:!1,key:"afReRate1"},{cname:"Day 2留存量",checked:!1,key:"retentionNum2"},{cname:"Day 2留存率",checked:!1,key:"afReRate2"},{cname:"Day 3留存量",checked:!1,key:"retentionNum3"},{cname:"Day 3留存率",checked:!1,key:"afReRate3"},{cname:"Day 4留存量",checked:!1,key:"retentionNum4"},{cname:"Day 4留存率",checked:!1,key:"afReRate4"},{cname:"Day 5留存量",checked:!1,key:"retentionNum5"},{cname:"Day 5留存率",checked:!1,key:"afReRate5"},{cname:"Day 6留存量",checked:!1,key:"retentionNum6"},{cname:"Day 6留存率",checked:!1,key:"afReRate6"},{cname:"Day 7留存量",checked:!1,key:"retentionNum7"},{cname:"Day 7留存率",checked:!1,key:"afReRate7"}]},{name:"广告组指标",key:"adSetTargetVo",list:[{cname:"触达",checked:!1,key:"reachNum"},{cname:"展示",checked:!1,key:"showNum"},{cname:"点击",checked:!1,key:"clicksNum"},{cname:"CTR",checked:!1,key:"ctr"},{cname:"CVR",checked:!1,key:"cvr"},{cname:"CPM",checked:!1,key:"cpm"},{cname:"CPC",checked:!1,key:"cpc"},{cname:"安装",checked:!1,key:"installNum"},{cname:"花费",checked:!1,key:"spend"},{cname:"CPI",checked:!1,key:"cpi"},{cname:"AF_展示数",checked:!1,key:"afShowsNum"},{cname:"AF_点击数",checked:!1,key:"afClicksNum"},{cname:"AF_点击率",checked:!1,key:"afCtr"},{cname:"AF_安装数",checked:!1,key:"afInstallsNum"},{cname:"AF_安装数差异率",checked:!1,key:"afMinsRate"},{cname:"AF_CPI",checked:!1,key:"afCpi"},{cname:"AF_转化率",checked:!1,key:"afCvr"},{cname:"AF_次日留存率",checked:!1,key:"afRetentionRate"},{cname:"AF_会话次数",checked:!1,key:"afSessionsNum"},{cname:"AF_忠实用户",checked:!1,key:"afLoyalUsersNum"},{cname:"AF_忠实用户比率",checked:!1,key:"afLoyalUsersRate"},{cname:"AF_收益",checked:!1,key:"afTotalReveue"},{cname:"AF_花费",checked:!1,key:"afTotalCost"},{cname:"AF_投资回报率",checked:!1,key:"afROI"},{cname:"AF_单用户平均收益",checked:!1,key:"afUserReveue"},{cname:"AF_平均eCPI",checked:!1,key:"ecpi"},{cname:"Day 1留存量",checked:!1,key:"retentionNum1"},{cname:"Day 1留存率",checked:!1,key:"afReRate1"},{cname:"Day 2留存量",checked:!1,key:"retentionNum2"},{cname:"Day 2留存率",checked:!1,key:"afReRate2"},{cname:"Day 3留存量",checked:!1,key:"retentionNum3"},{cname:"Day 3留存率",checked:!1,key:"afReRate3"},{cname:"Day 4留存量",checked:!1,key:"retentionNum4"},{cname:"Day 4留存率",checked:!1,key:"afReRate4"},{cname:"Day 5留存量",checked:!1,key:"retentionNum5"},{cname:"Day 5留存率",checked:!1,key:"afReRate5"},{cname:"Day 6留存量",checked:!1,key:"retentionNum6"},{cname:"Day 6留存率",checked:!1,key:"afReRate6"},{cname:"Day 7留存量",checked:!1,key:"retentionNum7"},{cname:"Day 7留存率",checked:!1,key:"afReRate7"}]},{name:"广告指标",key:"adTargetVo",list:[{cname:"触达",checked:!1,key:"reachNum"},{cname:"展示",checked:!1,key:"showNum"},{cname:"点击",checked:!1,key:"clicksNum"},{cname:"CTR",checked:!1,key:"ctr"},{cname:"CVR",checked:!1,key:"cvr"},{cname:"CPM",checked:!1,key:"cpm"},{cname:"CPC",checked:!1,key:"cpc"},{cname:"相关度",checked:!1,key:"relevanceScore"},{cname:"安装",checked:!1,key:"installNum"},{cname:"花费",checked:!1,key:"spend"},{cname:"CPI",checked:!1,key:"cpi"},{cname:"AF_展示数",checked:!1,key:"afShowsNum"},{cname:"AF_点击数",checked:!1,key:"afClicksNum"},{cname:"AF_点击率",checked:!1,key:"afCtr"},{cname:"AF_安装数",checked:!1,key:"afInstallsNum"},{cname:"AF_安装数差异率",checked:!1,key:"afMinsRate"},{cname:"AF_CPI",checked:!1,key:"afCpi"},{cname:"AF_转化率",checked:!1,key:"afCvr"},{cname:"AF_次日留存率",checked:!1,key:"afRetentionRate"},{cname:"AF_会话次数",checked:!1,key:"afSessionsNum"},{cname:"AF_忠实用户",checked:!1,key:"afLoyalUsersNum"},{cname:"AF_忠实用户比率",checked:!1,key:"afLoyalUsersRate"},{cname:"AF_收益",checked:!1,key:"afTotalReveue"},{cname:"AF_花费",checked:!1,key:"afTotalCost"},{cname:"AF_投资回报率",checked:!1,key:"afROI"},{cname:"AF_单用户平均收益",checked:!1,key:"afUserReveue"},{cname:"AF_平均eCPI",checked:!1,key:"ecpi"},{cname:"Day 1留存量",checked:!1,key:"retentionNum1"},{cname:"Day 1留存率",checked:!1,key:"afReRate1"},{cname:"Day 2留存量",checked:!1,key:"retentionNum2"},{cname:"Day 2留存率",checked:!1,key:"afReRate2"},{cname:"Day 3留存量",checked:!1,key:"retentionNum3"},{cname:"Day 3留存率",checked:!1,key:"afReRate3"},{cname:"Day 4留存量",checked:!1,key:"retentionNum4"},{cname:"Day 4留存率",checked:!1,key:"afReRate4"},{cname:"Day 5留存量",checked:!1,key:"retentionNum5"},{cname:"Day 5留存率",checked:!1,key:"afReRate5"},{cname:"Day 6留存量",checked:!1,key:"retentionNum6"},{cname:"Day 6留存率",checked:!1,key:"afReRate6"},{cname:"Day 7留存量",checked:!1,key:"retentionNum7"},{cname:"Day 7留存率",checked:!1,key:"afReRate7"}]},{name:"受众年龄",key:"ageStrs",list:[{checked:!1,cname:"13-17",key:"13-17"},{checked:!1,cname:"18-24",key:"18-24"},{checked:!1,cname:"25-34",key:"25-34"},{checked:!1,cname:"35-44",key:"35-44"},{checked:!1,cname:"45-54",key:"45-54"},{checked:!1,cname:"55-64",key:"55-64"},{checked:!1,cname:">64",key:"65+"}]},{name:"受众性别",key:"genderStrs",list:[{checked:!1,cname:"未分类",key:"unknown"},{checked:!1,cname:"女性",key:"female"},{checked:!1,cname:"男性",key:"male"}]}],prevFirstSearch:"",prevFirstKey:"",firstSearch:"",firstKey:"",secondSearchList:[],secondDownList:[],conditionSel:"",conditionSelArr:[],conditionSelkey:"",conditiondeal:1,conditionState:0,conditionState2:0,specilkey100:["ctr","cvr","afCtr","afConversionRate","afLoyalUsersRate","afROI","afMinsRate","afRetentionRate","afReRate1","afReRate2","afReRate3","afReRate4","afReRate5","afReRate6","afReRate7"],conditionInput:"",allCondition:{},disCondition:[],conditionName:"",state:"",value:"",value2:"",value3:[],value4:[],caninit:!0,accountStorage:[],status:!1,mutilselect:[],mutilsetselect:[],mutiladselect:[],date:[(new Date).setDate((new Date).getDate()-6),new Date],sort:"",tabname:"first",projectId:this.$route.params.id,userId:localStorage.getItem("atom_id")}},created:function(){},mounted:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n,o,r,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(adFilterLS.old&&localStorage.getItem(adFilterLS.old)&&localStorage.removeItem(adFilterLS.old),adOptionLS.old&&localStorage.getItem(adOptionLS.old)&&localStorage.removeItem(adOptionLS.old),adEventLS.old&&localStorage.getItem(adEventLS.old)&&localStorage.removeItem(adEventLS.old),adOptionSelectLS.old&&localStorage.getItem(adOptionSelectLS.old)&&localStorage.removeItem(adOptionSelectLS.old),e=this.date,this.allCondition=localStorage.getItem(adFilterLS.new)?JSON.parse(localStorage.getItem(adFilterLS.new)):{},this.disCondition=this.allCondition[this.$route.params.id]?this.allCondition[this.$route.params.id]:[],a=this.$route.params.kid,s="first",i="campaignName",!a){t.next=35;break}n=a.split("_"),o=n[0],r=n[1],t.t0=r,t.next="CAMPAIGN"===t.t0?17:"ADSET"===t.t0?22:"AD"===t.t0?27:32;break;case 17:return this.prevFirstKey="fbCampaignId",this.conditionSel="广告系列编号",s="first",i="campaignName",t.abrupt("break",32);case 22:return this.prevFirstKey="fbAdSetId",this.conditionSel="广告组编号",s="second",i="adSetName",t.abrupt("break",32);case 27:return this.prevFirstKey="fbAdId",this.conditionSel="广告编号",s="third",i="adName",t.abrupt("break",32);case 32:this.conditionInput=o,this.prevFirstSearch="allsearch",this.determineSearch("init");case 35:return this.tabname=s,this.SETSTATE({k:"adtab",v:i}),this.accountStorage=this.ad_account?JSON.parse(this.ad_account):{},this.value3=this.accountStorage[this.$route.params.id]?this.accountStorage[this.$route.params.id].split("|"):[],this.SETSTATE({k:"adaccountid",v:this.value3}),this.SETSTATE({k:"adstarttime",v:this.$timeFormat(e[0],"yyyy-MM-dd")}),this.SETSTATE({k:"adendtime",v:this.$timeFormat(e[1],"yyyy-MM-dd")}),this.SETSTATE({k:"adplanid",v:""}),c=this.$route.params.id,this.SETSTATE({k:"adlist",v:[]}),this.$store.dispatch("commonAccount",{project_id:c}),this.getSaveData("1"),t.next=49,this.getSaveData("2");case 49:this.itemlist.length>0&&this.caninit&&(this.caninit=!1,this.applicationid=this.itemlist.find(function(t){return t.id==c}).applicationId,this.SETSTATE({k:"adprojectid",v:c}),this.initData(this.applicationid)),this.$store.dispatch("getUpdateTime");case 51:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{hideBig:function(){this.SETSTATE({k:"bigimagevisible",v:!1})},getSaveData:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getSearchCondition",{projectId:this.$route.params.id,userId:localStorage.getItem("atom_id"),tagType:e});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),optionSelect:function(t,e){var a=this,s=[];if("default"==t)this.defaultOption=this.optionDefault;else{var i=this.saveoption.find(function(e){return e.name==t});this.defaultOption=i.option,s=i.event}this.defaultListOption=[],this.defaultOption.forEach(function(t){a.defaultListOption.push(fe()({},t))}),this.SETSTATE({k:"optionselect",v:t}),this.saveLocalstorage(adOptionSelectLS.new,t),this.saveLocalstorage(adEventLS.new,s),"init"!=e&&this.resetPageData()},ruleAdd:function(t,e){this.ruleaddstatus=!0,this.$refs.ruleAdd.adInit(t,e)},ruleCreate:function(t,e){this.ruleselectstatus=!0,this.$refs.ruleSelect.adInit(t,e)},ruleRemove:function(t,e){this.ruleremovestatus=!0,this.$refs.ruleRemove.initData(t,e)},tabJump:function(t,e,a){this.tabname=t,"campaignName"==a?this.selectSort([e]):this.selectSetSort([e]),this.resetPageData()},showOptionbox:function(t){this.optionstatus=!0,this.tabtype=t,this.$refs.listOption.showBox()},hideOptionbox:function(){this.optionstatus=!1},showRemainBox:function(t){this.remainstatus=!0,this.tabtype=t},hideRemainBox:function(){this.remainstatus=!1},saveLocalstorage:function(t,e){var a=this.$route.params.id,s=localStorage.getItem(t);s=s?JSON.parse(s):{},s[a]=e,localStorage.setItem(t,_e()(s))},outOption:function(t,e,a){var s=this;this.defaultOption=e,this.localEvent=a,this.defaultListOption=[],e.forEach(function(t){s.defaultListOption.push(fe()({},t))}),this.SETSTATE({k:"optionselect",v:"auto"}),this.saveLocalstorage(adOptionLS.new,e),this.saveLocalstorage(adEventLS.new,a),this.saveLocalstorage(adOptionSelectLS.new,"auto"),this.resetPageData()},wantCopy:function(t,e,a){this.$refs.adCopy.showBox(t,e,a)},changeReplace:function(t,e){this.$refs.seekReplace.showBox(t,e)},toCreateAd:function(t,e,a){this.$refs.adCreate.showBox({type:t,id:e||[],name:a||[]})},clearLocalCondition:function(){var t=JSON.parse(localStorage.getItem(adFilterLS.new));t[this.$route.params.id]=[],localStorage.setItem(adFilterLS.new,_e()(t)),this.disCondition=[],this.prevEdit=null,this.resetPageData()},saveCondtion:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s={url:"1"==a?encodeURIComponent(_e()(this.disCondition)):encodeURIComponent(_e()(this.defaultOption)+"@@"+_e()(this.localEvent)),projectId:this.$route.params.id,userId:localStorage.getItem("atom_id"),tagName:e,tagType:a},t.next=3,this.$store.dispatch("saveSearchCondition",s);case 3:if(i=t.sent,!i.data){t.next=9;break}return Object(H["f"])("保存成功"),t.next=8,this.getSaveData(a);case 8:this.optionSelect(e);case 9:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),setCondition:function(t){this.savetype=t,this.$refs.saveCondtion.showBox()},deleteCondtion:function(t){this.disCondition=this.disCondition.filter(function(e){return e.regkey!=t}),this.searchLocalstorage(),this.resetPageData()},editCondition:function(t){this.prevEdit&&this.disCondition.push(this.prevEdit),this.prevEdit=t,this.disCondition=this.disCondition.filter(function(e){return e.regkey!=t.regkey}),this.prevFirstSearch=t.prevFirstSearch,this.prevFirstKey=t.prevFirstKey,this.conditiondeal=t.conditionDeal,this.conditionState=t.conditionState,this.conditionState2=t.conditionState2,this.conditionSel=t.conditionSel,this.conditionSelArr=t.conditionSel.split("、"),this.conditionSelkey=t.conditionSelkey,this.conditionInput=t.conditionInput,this.changeConditionArr()},seachDeal:function(){var t="";if(1==this.searchType)switch(this.conditiondeal){case 1:t="是";break;case 2:t="不是";break}if(2==this.searchType)switch(this.conditiondeal){case 1:t="大于";break;case 2:t="小于";break;case 3:t="介于";break;case 4:t="不介于";break}if(3==this.searchType)switch(this.conditiondeal){case 1:t="包含";break;case 2:t="不包含";break}return t},searchLocalstorage:function(){this.allCondition[this.$route.params.id]=this.disCondition,localStorage.setItem(adFilterLS.new,_e()(this.allCondition))},determineSearch:function(t){var e=this,a={},s=this.seachDeal(),i=["cpm"],n=["ACTIVE","PAUSED","ARCHIVED","DELETED"];switch(this.searchType){case 1:a={name:"".concat(this.prevFirstSearch,"：").concat(s," ").concat(this.conditionSel),option:"".concat("1"==this.conditiondeal?this.conditionSelkey:n.filter(function(t){return-1==e.conditionSelkey.indexOf(t)}).join(",")),key:this.prevFirstKey,regkey:this.prevFirstKey};break;case 2:if(void 0==this.conditionState)return void Object(H["g"])("请输入内容");if((3==this.conditiondeal||4==this.conditiondeal)&&void 0==this.conditionState2)return void Object(H["g"])("请输入内容");a={name:"".concat(this.conditionSel,"：").concat(s," ").concat(this.conditionState).concat(-1!=this.specilkey100.indexOf(this.conditionSelkey)?"%":""," ").concat(3==this.conditiondeal||4==this.conditiondeal?"和".concat(this.conditionState2).concat(-1!=this.specilkey100.indexOf(this.conditionSelkey)?"%":""):""),option:"",key:"",regkey:"".concat(this.prevFirstKey,".").concat(this.conditionSelkey)},"adCampaignTargetVo"==this.prevFirstKey?a.key="campaignOptions":"adSetTargetVo"==this.prevFirstKey?a.key="adSetOptions":a.key="adOptions",-1!=i.indexOf(this.conditionSelkey)&&(this.conditionState*=1e3,this.conditionState2*=1e3),3==this.conditiondeal?a.option="".concat(this.prevFirstKey,".").concat(this.conditionSelkey,">=").concat(this.conditionState>this.conditionState2?this.conditionState2:this.conditionState," and ").concat(this.prevFirstKey,".").concat(this.conditionSelkey,"<=").concat(this.conditionState>this.conditionState2?this.conditionState:this.conditionState2):4==this.conditiondeal?a.option="(".concat(this.prevFirstKey,".").concat(this.conditionSelkey,">").concat(this.conditionState>this.conditionState2?this.conditionState:this.conditionState2," or ").concat(this.prevFirstKey,".").concat(this.conditionSelkey,"<").concat(this.conditionState>this.conditionState2?this.conditionState2:this.conditionState,")"):1==this.conditiondeal?a.option="".concat(this.prevFirstKey,".").concat(this.conditionSelkey,">").concat(this.conditionState):a.option="".concat(this.prevFirstKey,".").concat(this.conditionSelkey,"<").concat(this.conditionState);break;case 3:if(""===this.conditionInput.trim())return void Object(H["g"])("请输入内容");var o=this.conditionInput.trim().split(" ");o=o.filter(function(t){return t}),o=o.map(function(t){return t.replace(/&/g,"")}),a={name:"".concat(this.conditionSel,"：").concat(s," ").concat(o.join(" ")),option:"".concat(o.join("&")),key:"".concat(this.prevFirstKey).concat(1==this.conditiondeal?"":"No"),regkey:this.prevFirstKey};break}a.prevFirstSearch=this.prevFirstSearch,a.prevFirstKey=this.prevFirstKey,a.conditionDeal=this.conditiondeal,a.conditionSel=this.conditionSel,a.conditionSelkey=this.conditionSelkey,a.conditionInput=this.conditionInput,a.conditionState=-1!=i.indexOf(this.conditionSelkey)?this.conditionState/1e3:this.conditionState,a.conditionState2=-1!=i.indexOf(this.conditionSelkey)?this.conditionState2/1e3:this.conditionState2,this.disCondition=this.disCondition.filter(function(t){return t.regkey!=a.regkey}),this.disCondition.push(a),this.searchLocalstorage(),this.cancelSearch("select"),"init"!=t&&this.resetPageData()},cancelSearch:function(t){switch(this.searchType){case 1:break;case 2:this.conditionState=0,this.conditionState2=0;break}this.prevFirstSearch="",this.prevFirstKey="",this.firstSearch="",this.firstKey="",this.conditionSel="",this.conditionSelArr=[],this.conditionSelkey="",this.conditiondeal=1,this.conditionState=0,this.conditionState2=0,this.conditionInput="",this.secondSearchList=[],this.prevEdit&&"select"!=t&&this.disCondition.push(this.prevEdit),this.prevEdit=null,this.searchList.forEach(function(t){t.list.forEach(function(t){t.checked=!1})})},downselectChange:function(){this.changeConditionArr();var t=this.secondDownList.filter(function(t){return t.checked});this.conditionSel=t.map(function(t){return t.cname}).join("、"),this.conditionSelArr=this.conditionSel.split("、"),this.conditionSelkey=t.map(function(t){return t.key}).join(",")},changeConditionArr:function(t){var e=this;switch(this.searchType){case 1:this.searchList.forEach(function(t){t.list.forEach(function(t){t.checked=!1})}),this.secondDownList=this.searchList.find(function(t){return t.name==e.prevFirstSearch}).list,this.searchList.forEach(function(t){t.name==e.prevFirstSearch&&t.list.forEach(function(t){-1!=e.conditionSelArr.indexOf(t.cname)&&(t.checked=!0)})});break;case 3:break}},selectSearch:function(t,e,a){var s=this;this.prevEdit&&this.disCondition.push(this.prevEdit),this.prevFirstSearch!=this.firstSearch&&(this.prevFirstSearch=this.firstSearch,this.prevFirstKey=this.firstKey,this.searchList.forEach(function(t){t.name!=s.firstSearch&&t.list.forEach(function(t){t.checked=!1})})),"广告系列指标"!=this.firstSearch&&"广告组指标"!=this.firstSearch&&"广告指标"!=this.firstSearch||this.searchList.forEach(function(t){t.list.forEach(function(t){t.checked=!1})}),this.secondSearchList.forEach(function(e){e.cname==t&&(e.checked=!e.checked)});var i=this.secondSearchList.filter(function(t){return t.checked});this.conditionSel=i.map(function(t){return t.cname}).join("、"),this.conditionSelArr=this.conditionSel.split("、"),this.conditionSelkey=i.map(function(t){return t.key}).join(","),1==this.searchType&&(this.secondDownList=this.searchList.find(function(t){return t.name==s.prevFirstSearch}).list)},searchStatus:function(){this.secondSearchList=[],this.firstSearch="",this.firstKey=""},selectSaveSearch:function(t){this.disCondition=JSON.parse(this.conditionlist.find(function(e){return e.id==t}).url),this.searchLocalstorage(),this.resetPageData()},deleteSaveSearch:function(t,e,a){var s=this;this.$confirm("确定删除此已保存".concat("1"==e?"条件":"自定义列","？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(G["a"])(regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s.$store.dispatch("deleteSearchCondition",{id:t});case 2:n=i.sent,n.data?(Object(H["f"])("删除成功"),s.$store.dispatch("getSearchCondition",{userId:s.userId,projectId:s.projectId,tagType:e}),"2"==e&&a==s.optionselect&&s.optionSelect("default")):Object(H["f"])("删除失败");case 4:case"end":return i.stop()}},i,this)}))).catch(function(){})},getSaveSearch:function(){this.firstSearch="已保存条件",this.firstKey="savecondition"},searchClick:function(t,e){var a=this;this.firstSearch=t,this.firstKey=e,this.secondSearchList=this.searchList.find(function(t){return a.firstSearch==t.name}).list},sortConditionLogic:function(t){var e="ACTIVE,PAUSED",a=t["adSetStatusStr"]?"adSetStatusStr":"adCampaignStatusStr";t[a]&&(e="",-1==t[a].indexOf("ACTIVE")&&-1==t[a].indexOf("PAUSED")||(e="ACTIVE,PAUSED"),-1!=t[a].indexOf("ARCHIVED")&&(e+=",ARCHIVED"),-1!=t[a].indexOf("DELETED")&&(e+=",DELETED")),this.SETSTATE({k:"sortdefault",v:e.replace(/^,/,"")})},initData:function(t){var e=this,a=this.$route.params.bid,s=this.$route.params.id,i={pageNo:1,pageSize:20,batchId:a,projectId:s};i.adCampaignStatusStr=this.sortdefault,this.disCondition.forEach(function(t){i[t.key]&&"adCampaignStatusStr"!=t.key?i[t.key]+=" and "+t.option:i[t.key]=t.option}),this.sortConditionLogic(i);var n="";switch(this.tabname){case"first":n="campain_option";break;case"second":n="set_option";break;case"third":n="ad_option";break}this.SETSTATE({k:n,v:i});var o=localStorage.getItem(adOptionSelectLS.new)&&JSON.parse(localStorage.getItem(adOptionSelectLS.new))[s]?JSON.parse(localStorage.getItem(adOptionSelectLS.new))[s]:"default";console.log(o),"auto"==o?(this.defaultOption=JSON.parse(localStorage.getItem(adOptionLS.new))?JSON.parse(localStorage.getItem(adOptionLS.new))[s]:[],this.defaultListOption=[],this.defaultOption.forEach(function(t){e.defaultListOption.push(fe()({},t))})):this.optionSelect(o,"init"),this.$store.dispatch("jobList");var r=localStorage.getItem(adOptionSelectLS.new)&&JSON.parse(localStorage.getItem(adOptionSelectLS.new))[s]?JSON.parse(localStorage.getItem(adOptionSelectLS.new))[s]:"default";this.SETSTATE({k:"optionselect",v:r}),this.$store.dispatch("getCustomEventAd",t)},selectSort:function(t){this.mutilselect=t,this.SETSTATE({k:"campainsortlist",v:t})},selectSetSort:function(t){this.mutilsetselect=t,this.SETSTATE({k:"setsortlist",v:t})},selectAdSort:function(t){this.mutiladselect=t,this.SETSTATE({k:"adsortlist",v:t})},tableSort:function(t){this.sort=t,this.toGetdata()},dateSort:function(){var t=this.date;this.SETSTATE({k:"adstarttime",v:this.$timeFormat(t[0],"yyyy-MM-dd")}),this.SETSTATE({k:"adendtime",v:this.$timeFormat(t[1],"yyyy-MM-dd")}),this.resetPageData()},resetPageData:function(){var t="";switch(this.tabname){case"first":t="campaignName",this.$refs["campaignName"].toGetdata(!0);break;case"second":t="adSetName",this.$refs["adSetName"].toGetdata(!0);break;case"third":t="adName",this.$refs["adName"].toGetdata(!0);break}this.SETSTATE({k:"adtab",v:t})},toSortAccount:function(){var t=this.value3;this.SETSTATE({k:"adaccountid",v:t}),this.accountStorage[this.$route.params.id]=t.join("|"),this.SETSTATE({k:"ad_account",v:_e()(this.accountStorage)}),this.resetPageData()},handleCommand:function(t){this.prevEdit&&this.disCondition.push(this.prevEdit),this.prevFirstSearch="allsearch",this.prevFirstKey=t.split("_")[0],this.conditionSel=t.split("_")[1]}}),watch:{itemlist:function(t,e){if(0!=t.length&&this.caninit){this.caninit=!1;var a=this.$route.params.id,s=t.find(function(t){return t.id==a}).applicationId;this.SETSTATE({k:"adprojectid",v:a}),console.log("itemlist"),this.initData(s)}},projectid:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,a){var s,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""==e){t.next=17;break}return s="pl_project_id",i=e,this.projectId=this.$route.params.id,this.SETSTATE({k:s,v:i}),this.disCondition=this.allCondition[e]?this.allCondition[e]:[],this.$store.dispatch("commonAccount",{project_id:e}),this.value3=this.accountStorage[e]?this.accountStorage[e].split("|"):[],this.SETSTATE({k:"adaccountid",v:this.value3}),this.tabname="first",this.SETSTATE({k:"adtab",v:"campaignName"}),n=this.itemlist.find(function(t){return t.id==e}).applicationId,this.SETSTATE({k:"adprojectid",v:this.projectId}),this.getSaveData("1"),t.next=16,this.getSaveData("2");case 16:this.initData(n);case 17:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},computed:Object(D["a"])({},Object(M["d"])(["menushow","itemlist","commonaccount","adalllist","adcustomevent","customunit","adplanlist","conditionlist","datestatus","jobtotal","jobcomplete","copyjoblistdetail","sortdefault","saveoption","optionselect","bigimagevisible","bigimageurl"]),Object(M["d"])(["ad_account"]),{bigImageVisible:function(){return this.bigimagevisible},bigImageUrl:function(){return this.bigimageurl},projectid:function(){return this.$route.params.id},searchType:function(){var t="";switch(this.prevFirstSearch){case"广告系列投放":case"广告组投放":case"广告投放":case"版位":case"受众年龄":case"受众性别":t=1;break;case"广告系列指标":case"广告组指标":case"广告指标":t=2;break;case"allsearch":t=3;break}return t},documentHeight:function(){return document.documentElement.clientHeight-60}})},Wp=Kp,zp=(a("d676"),a("1efc"),Object(E["a"])(Wp,Od,wd,!1,null,"486c37e9",null)),Gp=zp.exports,Hp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ad"},[a("bread-crumb",{attrs:{pageName:"素材报表"}}),a("div",{staticClass:"ctrlbutton"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"广告账户","no-data-text":"无数据，请输入或者改变关键字"},on:{change:t.toSort},model:{value:t.form.value1,callback:function(e){t.$set(t.form,"value1",e)},expression:"form.value1"}},t._l(t.commonaccount,function(t){return a("el-option",{key:t.fbAccountId,attrs:{label:t.name+(-1!=t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1),a("p",{staticClass:"download"},[a("span",{on:{click:t.outTable}},[t._v("导出全部\n        "),a("svg-icon",{attrs:{svgname:"save",svgclass:"save"}})],1)]),a("el-date-picker",{staticClass:"datar",attrs:{type:"daterange","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.toSort},model:{value:t.form.value8,callback:function(e){t.$set(t.form,"value8",e)},expression:"form.value8"}})],1),a("div",{staticClass:"advanceCtr"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"年龄"},on:{change:t.toSort},model:{value:t.form.value4,callback:function(e){t.$set(t.form,"value4",e)},expression:"form.value4"}},t._l(t.dataage,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"性别"},on:{change:t.toSort},model:{value:t.form.value5,callback:function(e){t.$set(t.form,"value5",e)},expression:"form.value5"}},t._l(t.datasex,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1)],1),a("div",{staticClass:"tablist"},[a("span",{staticClass:"downmatter",on:{click:t.downMatter}},[t._v("下载当页素材")]),a("el-tabs",{staticClass:"activeName",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"图片",name:"first"}},[a("div",{staticClass:"list"},[a("image-list",{ref:"imageList",on:{tableSort:t.tableSort}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageindex,total:t.imagemattertotal,"page-size":t.pagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)]),a("el-tab-pane",{attrs:{label:"视频",name:"second"}},[a("div",{staticClass:"list"},[a("video-list",{ref:"videoList",on:{tableSort:t.tableSort}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageindex,total:t.videomattertotal,"page-size":t.pagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)])],1)],1)],1)},qp=[],Jp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"dataForm",attrs:{id:"dataTable",data:t.imagematterlist,"show-summary":"","summary-method":t.getSummaries},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"materialId",fixed:"",label:"FB图片编号",width:"160"}}),a("el-table-column",{attrs:{prop:"materialUrl",label:"图片",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"imageline"},[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:e.row.materialUrl,alt:""},on:{click:function(a){t.showBig(e.row.materialUrl)}}})]),a("i",{directives:[{name:"show",rawName:"v-show",value:e.row.materialUrl,expression:"scope.row.materialUrl"}],staticClass:"el-icon-download download",on:{click:function(a){t.downloadFile(e.row.materialUrl)}}})])]}}])}),a("el-table-column",{attrs:{prop:"reachNum",label:"触达",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"showNum",label:"展示",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"clicksNum",label:"点击",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"ctr",label:"CTR",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cvr",label:"CVR",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpm",label:"CPM",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpc",label:"CPC",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"relevanceScore",label:"相关度",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"installsNum",label:"安装",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"spend",label:"花费",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpi",label:"CPI",sortable:"custom",width:"90"}})],1)},Yp=[],Xp={data:function(){return{}},mounted:function(){},methods:{downMatter:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.imagematterlist.map(function(t){return t.materialUrl}),a=0;case 2:if(!(a<e.length)){t.next=10;break}if(s=e[a],!s){t.next=7;break}return t.next=7,this.$fileDownload(s);case 7:a++,t.next=2;break;case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),showBig:function(t){window.open(t)},downloadFile:function(t){this.$fileDownload(t)},sortChange:function(t){t.column;var e=t.prop,a=t.order,s="";switch(e){case"reachNum":s="ascending"==a?"reach_num asc":"reach_num desc";break;case"showNum":s="ascending"==a?"show_num asc":"show_num desc";break;case"clicksNum":s="ascending"==a?"clicks_num asc":"clicks_num desc";break;case"ctr":s="ascending"==a?"ctr asc":"ctr desc";break;case"cvr":s="ascending"==a?"cvr asc":"cvr desc";break;case"cpm":s="ascending"==a?"cpm asc":"cpm desc";break;case"cpc":s="ascending"==a?"cpc asc":"cpc desc";break;case"relevanceScore":s="ascending"==a?"relevance_score asc":"relevance_score desc";break;case"installsNum":s="ascending"==a?"installs_num asc":"installs_num desc";break;case"spend":s="ascending"==a?"spend asc":"spend desc";break;case"cpi":s="ascending"==a?"cpi asc":"cpi desc";break}this.$emit("tableSort",s)},getSummaries:function(t){var e=this,a=t.columns,s=(t.data,[]),i=["reachNum","showNum","clicksNum","ctr","cvr","cpm","cpc","relevanceScore","installsNum","spend","cpi"];return a.forEach(function(t,a){switch(a){case 0:s[a]="合计";break;case 1:s[a]="";break;default:s[a]=e.imagemattersum[i[a-2]];break}}),s}},computed:Object(D["a"])({},Object(M["d"])(["imagematterlist","imagemattersum"]))},Zp=Xp,Qp=(a("8eb5"),Object(E["a"])(Zp,Jp,Yp,!1,null,"162ea249",null)),tf=Qp.exports,ef=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"dataCard",attrs:{id:"dataTable",data:t.videomatterlist,"show-summary":"","summary-method":t.getSummaries},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"materialId",fixed:"",label:"FB视频编号",width:"160"}}),a("el-table-column",{attrs:{prop:"materialUrl",label:"视频",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"imageline"},[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:e.row.materialUrl,alt:""},on:{click:function(a){t.showBig(e.row.materialId)}}})]),a("i",{directives:[{name:"show",rawName:"v-show",value:e.row.materialId,expression:"scope.row.materialId"}],staticClass:"el-icon-download download",on:{click:function(a){t.downloadFile(e.row.materialId)}}})])]}}])}),a("el-table-column",{attrs:{prop:"reachNum",label:"触达",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"showNum",label:"展示",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"clicksNum",label:"点击",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"ctr",label:"CTR",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cvr",label:"CVR",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpm",label:"CPM",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpc",label:"CPC",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"relevanceScore",label:"相关度",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"installsNum",label:"安装",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"spend",label:"花费",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpi",label:"CPI",sortable:"custom",width:"90"}})],1)},af=[],sf={data:function(){return{}},mounted:function(){},methods:{downMatter:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.videomatterlist.map(function(t){return t.materialId}),a=0;case 2:if(!(a<e.length)){t.next=14;break}if(s=e[a],!s){t.next=11;break}return t.next=7,this.$store.dispatch("getVideoLink",s);case 7:if(i=t.sent,!i.data){t.next=11;break}return t.next=11,this.$fileDownload(i.data);case 11:a++,t.next=2;break;case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),showBig:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getVideoLink",e);case 2:a=t.sent,a.data?window.open(a.data):Object(H["g"])("无视频");case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),downloadFile:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Object(H["g"])("视频素材正在下载中..."),t.next=3,this.$store.dispatch("getVideoLink",e);case 3:if(a=t.sent,!a.data){t.next=9;break}return t.next=7,this.$fileDownload(a.data);case 7:t.next=10;break;case 9:Object(H["g"])("无视频");case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),sortChange:function(t){t.column;var e=t.prop,a=t.order,s="";switch(e){case"reachNum":s="ascending"==a?"reach_num asc":"reach_num desc";break;case"showNum":s="ascending"==a?"show_num asc":"show_num desc";break;case"clicksNum":s="ascending"==a?"clicks_num asc":"clicks_num desc";break;case"ctr":s="ascending"==a?"ctr asc":"ctr desc";break;case"cvr":s="ascending"==a?"cvr asc":"cvr desc";break;case"cpm":s="ascending"==a?"cpm asc":"cpm desc";break;case"cpc":s="ascending"==a?"cpc asc":"cpc desc";break;case"relevanceScore":s="ascending"==a?"relevance_score asc":"relevance_score desc";break;case"installsNum":s="ascending"==a?"installs_num asc":"installs_num desc";break;case"spend":s="ascending"==a?"spend asc":"spend desc";break;case"cpi":s="ascending"==a?"cpi asc":"cpi desc";break}this.$emit("tableSort",s)},getSummaries:function(t){var e=this,a=t.columns,s=(t.data,[]),i=["reachNum","showNum","clicksNum","ctr","cvr","cpm","cpc","relevanceScore","installsNum","spend","cpi"];return a.forEach(function(t,a){switch(a){case 0:s[a]="合计";break;case 1:s[a]="";break;default:s[a]=e.videomattersum[i[a-2]];break}}),s}},computed:Object(D["a"])({},Object(M["d"])(["videomatterlist","videomattersum"]))},nf=sf,of=(a("f52f"),Object(E["a"])(nf,ef,af,!1,null,"1e9b6ce5",null)),rf=of.exports,cf={data:function(){return{state:"",sort:"",cardname:"first",activeName:"first",form:{value1:[],value2:[],value4:[],value5:[],value8:[(new Date).setDate((new Date).getDate()-1),(new Date).setDate((new Date).getDate()-1)]},pageindex:1,pagesize:20,datasex:[{name:"全部",code:"0"},{name:"男",code:"1"},{name:"女",code:"2"}]}},components:{ImageList:tf,VideoList:rf,BreadCrumb:kr},mounted:function(){var t=this.$route.params.id;this.$store.dispatch("getCondition",{projectId:t});var e={pageNo:1,pageSize:20,projectId:this.$route.params.id,endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),materialType:0};this.$store.dispatch("getMatterList",{option:e}),this.$store.dispatch("commonAccount",{project_id:t})},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{downMatter:function(){"first"==this.activeName?this.$refs.imageList.downMatter():this.$refs.videoList.downMatter()},handleClick:function(t){console.log(t.name),this.cardname=t.name,this.sort="","first"==this.cardname?(this.SETSTATE({k:"videomatterlist",v:[]}),this.$refs.imageList.$refs.dataForm.clearSort()):(this.SETSTATE({k:"imagematterlist",v:[]}),this.$refs.videoList.$refs.dataCard.clearSort()),this.toGetdata()},clearArr:function(t){var e=[];this.SETSTATE({k:t,v:e})},tableSort:function(t){this.sort=t,this.toGetdata()},pageSizeChange:function(t){this.pagesize=t,this.toGetdata()},outTable:function(){var t={ageList:this.form.value4.join(","),endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),fbAdAccountIdList:this.form.value1.join(","),fbAdCreativeIdList:"",fbAppId:"",flag:"",genderList:this.form.value5.join(","),insightDate:"",orderByClause:this.sort,pageNo:1,startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),accountKeyword:"",campainKeyword:"",creativeKeyword:this.state,projectId:this.$route.params.id},e="";"first"==this.cardname?(t.materialType=0,t.pageSize=this.imagemattertotal,e="".concat(this.projectname,"图片素材报表").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss"))):(t.materialType=1,t.pageSize=this.videomattertotal,e="".concat(this.projectname,"视频素材卡片").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss"))),this.$store.dispatch("getMatterList",{option:t,name:e})},toSort:function(){this.pageindex=1,this.toGetdata()},toGetdata:function(){console.log(this.form);var t={ageList:this.form.value4.join(","),endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),fbAdAccountIdList:this.form.value1.join(","),fbAdCreativeIdList:"",fbAppId:"",flag:"",genderList:this.form.value5.join(","),insightDate:"",orderByClause:this.sort,pageNo:this.pageindex,pageSize:this.pagesize,startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),accountKeyword:"",campainKeyword:"",creativeKeyword:this.state,projectId:this.$route.params.id};"first"==this.cardname?t.materialType=0:t.materialType=1,this.$store.dispatch("getMatterList",{option:t})},dataSearch:function(){var t=this;this.pageindex=1,clearTimeout(m),m=setTimeout(function(){t.toGetdata()},300)},pageSwitch:function(t){this.pageindex=t,this.toGetdata()}}),computed:Object(D["a"])({},Object(M["d"])(["itemlist","commonaccount","adcampaign","dataage","imagemattertotal","videomattertotal"]),{projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName}})},lf=cf,uf=(a("4108"),a("b938"),Object(E["a"])(lf,Hp,qp,!1,null,"5285d01a",null)),df=uf.exports,mf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ad"},[a("bread-crumb",{attrs:{pageName:"账户报表"}}),a("div",{staticClass:"ctrlbutton"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"",remote:"","collapse-tags":"","no-data-text":"无数据，请输入或者改变关键字",placeholder:"创意","remote-method":t.searchCreate},on:{blur:function(e){t.clearArr("adcreate")},change:t.toSort},model:{value:t.form.value2,callback:function(e){t.$set(t.form,"value2",e)},expression:"form.value2"}},[t._l(t.adcreate,function(t,e){return a("el-option",{key:e,attrs:{label:t.creativityName+"("+t.fbAdcreativeId+")",value:t.fbAdcreativeId}})}),a("p",{staticClass:"maxcount"},[t._v("最多显示20条")])],2),a("el-button",{staticClass:"advanceSelect",attrs:{type:"text"},on:{click:t.advanceFilter}},[t._v("高级筛选")]),a("p",{staticClass:"download"},[a("span",{on:{click:t.outTable}},[t._v("导出全部\n        "),a("svg-icon",{attrs:{svgname:"save",svgclass:"save"}})],1)]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索广告账户ID/名称","suffix-icon":"el-icon-search"},on:{input:t.dataSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("el-date-picker",{staticClass:"datar",attrs:{type:"daterange","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.toSort},model:{value:t.form.value8,callback:function(e){t.$set(t.form,"value8",e)},expression:"form.value8"}})],1),a("div",{staticClass:"advanceCtr"},[t.ifadvance?a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"国家",disabled:!t.filter3},on:{change:t.toSort},model:{value:t.form.value3,callback:function(e){t.$set(t.form,"value3",e)},expression:"form.value3"}},t._l(t.datacountry,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1):t._e(),t.ifadvance?a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"年龄",disabled:!t.filter1},on:{change:t.toSort},model:{value:t.form.value4,callback:function(e){t.$set(t.form,"value4",e)},expression:"form.value4"}},t._l(t.dataage,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1):t._e(),t.ifadvance?a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"性别",disabled:!t.filter1},on:{change:t.toSort},model:{value:t.form.value5,callback:function(e){t.$set(t.form,"value5",e)},expression:"form.value5"}},t._l(t.datasex,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1):t._e()],1),t.ifadvance?a("div",{staticClass:"advanceCtr"},[a("el-select",{staticClass:"selectmul",attrs:{filterable:"","collapse-tags":"",multiple:"",placeholder:"请选择版位",disabled:!t.filter2},on:{change:t.toSort},model:{value:t.form.value6,callback:function(e){t.$set(t.form,"value6",e)},expression:"form.value6"}},t._l(t.dataplatform,function(t){return a("el-option",{key:t,attrs:{label:t,value:"Audience Network"==t?"Audience_Network":t}})}),1),a("el-select",{staticClass:"selectmul",attrs:{filterable:"","collapse-tags":"",multiple:"",placeholder:"请选择设备",disabled:!t.filter2},on:{change:t.toSort},model:{value:t.form.value7,callback:function(e){t.$set(t.form,"value7",e)},expression:"form.value7"}},t._l(t.dataimpression,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1):t._e(),a("div",{staticClass:"list"},[a("data-list",{on:{tableSort:t.tableSort}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageindex,total:t.datatotal,"page-size":20},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)},pf=[],ff=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{id:"dataTable",data:t.datalist,"show-summary":"","summary-method":t.getSummaries},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"fbAccountId",fixed:"",label:"广告账户ID",width:"100"}}),a("el-table-column",{attrs:{prop:"adAccountName",fixed:"",label:"广告账户名称",width:"160"}}),a("el-table-column",{attrs:{prop:"reachNum",label:"触达",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"showNum",label:"展示",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"clicksNum",label:"点击",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"ctr",label:"CTR",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ctr))])]}}])}),a("el-table-column",{attrs:{prop:"cvr",label:"CVR",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cvr?e.row.cvr:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"cpm",label:"CPM",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpm?e.row.cpm:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"cpc",label:"CPC",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpc?e.row.cpc:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"relevanceScore",label:"相关度",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.relevanceScore?e.row.relevanceScore:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"installsNum",label:"安装",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"spend",label:"花费",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.spend?e.row.spend:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"cpi",label:"CPI",sortable:"custom",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpi?e.row.cpi:"--"))])]}}])})],1)},hf=[],_f={data:function(){return{}},methods:{sortChange:function(t){t.column;var e=t.prop,a=t.order,s="";switch(e){case"reachNum":s="ascending"==a?"reach_num asc":"reach_num desc";break;case"showNum":s="ascending"==a?"show_num asc":"show_num desc";break;case"clicksNum":s="ascending"==a?"clicks_num asc":"clicks_num desc";break;case"ctr":s="ascending"==a?"ctr asc":"ctr desc";break;case"cvr":s="ascending"==a?"cvr asc":"cvr desc";break;case"cpm":s="ascending"==a?"cpm asc":"cpm desc";break;case"cpc":s="ascending"==a?"cpc asc":"cpc desc";break;case"relevanceScore":s="ascending"==a?"relevance_score asc":"relevance_score desc";break;case"installsNum":s="ascending"==a?"installs_num asc":"installs_num desc";break;case"spend":s="ascending"==a?"spend asc":"spend desc";break;case"cpi":s="ascending"==a?"cpi asc":"cpi desc";break}this.$emit("tableSort",s)},getSummaries:function(t){var e=this,a=t.columns,s=(t.data,[]),i=["reachNum","showNum","clicksNum","ctr","cvr","cpm","cpc","relevanceScore","installsNum","spend","cpi"];return a.forEach(function(t,a){switch(a){case 0:s[a]="合计";break;case 1:s[a]="";break;default:s[a]=e.datasum[i[a-2]];break}}),s}},computed:Object(D["a"])({},Object(M["d"])(["datalist","datasum"]))},vf=_f,gf=(a("a6f2"),Object(E["a"])(vf,ff,hf,!1,null,"05d3bf0c",null)),bf=gf.exports,yf={data:function(){return{state:"",ifadvance:!1,filter1:!0,filter2:!0,filter3:!0,sort:"",form:{value1:[],value2:[],value3:[],value4:[],value5:[],value6:[],value7:[],value8:[(new Date).setDate((new Date).getDate()-1),(new Date).setDate((new Date).getDate()-1)]},pageindex:1,pagesize:20,datasex:[{name:"全部",code:"0"},{name:"男",code:"1"},{name:"女",code:"2"}]}},components:{DataList:bf,BreadCrumb:kr},mounted:function(){var t=this.$route.params.id;this.$store.dispatch("getCondition",{projectId:t});var e={pageNo:1,pageSize:20,projectId:this.$route.params.id,endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd")};this.$store.dispatch("getDataList",{option:e})},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{clearArr:function(t){var e=[];this.SETSTATE({k:t,v:e})},searchCreate:function(t){var e=this,a=t;clearTimeout(f),f=setTimeout(function(){e.$store.dispatch("getOptionMore",{projectId:e.$route.params.id,creativeKeyword:a})},300)},tableSort:function(t){this.sort=t,this.toGetdata()},pageSizeChange:function(t){this.pagesize=t,this.toGetdata()},advanceFilter:function(){this.ifadvance=!this.ifadvance,(this.form.value3.length>0||this.form.value4.length>0||this.form.value5.length>0||this.form.value6.length>0||this.form.value7.length>0)&&(this.form.value3=[],this.form.value4=[],this.form.value5=[],this.form.value6=[],this.form.value7=[],this.filter1=!0,this.filter2=!0,this.pageindex=1,this.toGetdata())},outTable:function(){var t="".concat(this.projectname,"账户报表").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss")),e={ageList:this.form.value4.join(","),countryList:this.form.value3.join(","),endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),fbAdAccountIdList:"",fbAdCreativeIdList:this.form.value2.join(","),fbAppId:"",flag:"",genderList:this.form.value5.join(","),impressionDeviceList:this.form.value7.join(","),insightDate:"",orderByClause:this.sort,pageNo:1,pageSize:this.datatotal,platformPositionList:this.form.value6.join(","),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),accountKeyword:this.state,campainKeyword:"",creativeKeyword:"",projectId:this.$route.params.id};this.$store.dispatch("getDataListout",{option:e,name:t})},toSort:function(){this.pageindex=1,this.filter2=!(this.form.value3.length>0||this.form.value4.length>0||this.form.value5.length>0),this.filter3=!(this.form.value4.length>0||this.form.value5.length>0||this.form.value6.length>0||this.form.value7.length>0),this.filter1=!(this.form.value3.length>0||this.form.value6.length>0||this.form.value7.length>0),this.toGetdata()},toGetdata:function(){console.log(this);var t={ageList:this.form.value4.join(","),countryList:this.form.value3.join(","),endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),fbAdAccountIdList:"",fbAdCreativeIdList:this.form.value2.join(","),fbAppId:"",flag:"",genderList:this.form.value5.join(","),impressionDeviceList:this.form.value7.join(","),insightDate:"",orderByClause:this.sort,pageNo:this.pageindex,pageSize:this.pagesize,platformPositionList:this.form.value6.join(","),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),accountKeyword:this.state,campainKeyword:"",creativeKeyword:"",projectId:this.$route.params.id};this.$store.dispatch("getDataList",{option:t})},dataSearch:function(){var t=this;this.pageindex=1,clearTimeout(p),p=setTimeout(function(){t.toGetdata()},300)},pageSwitch:function(t){this.pageindex=t,this.toGetdata()}}),computed:Object(D["a"])({},Object(M["d"])(["itemlist","adcreate","datacountry","dataage","dataplatform","dataimpression","datatotal"]),{projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName}})},kf=yf,Ef=(a("49c8"),a("29fd"),Object(E["a"])(kf,mf,pf,!1,null,"0aae086e",null)),Cf=Ef.exports,Of=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ad"},[a("bread-crumb",{attrs:{pageName:"创意报表"}}),a("div",{staticClass:"ctrlbutton"},[a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"广告账户"},on:{change:t.toSort},model:{value:t.form.value1,callback:function(e){t.$set(t.form,"value1",e)},expression:"form.value1"}},t._l(t.commonaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+(t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1),a("el-button",{staticClass:"advanceSelect",attrs:{type:"text"},on:{click:t.advanceFilter}},[t._v("高级筛选")]),a("p",{staticClass:"download"},[a("span",{on:{click:t.outTable}},[t._v("\n        导出全部\n        "),a("svg-icon",{attrs:{svgname:"save",svgclass:"save"}})],1)]),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索创意ID/名称","suffix-icon":"el-icon-search"},on:{input:t.dataSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("el-date-picker",{staticClass:"datar",attrs:{type:"daterange","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.toSort},model:{value:t.form.value8,callback:function(e){t.$set(t.form,"value8",e)},expression:"form.value8"}})],1),a("div",{staticClass:"advanceCtr"},[t.ifadvance?a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"国家",disabled:!t.filter1},on:{change:t.toSort},model:{value:t.form.value3,callback:function(e){t.$set(t.form,"value3",e)},expression:"form.value3"}},t._l(t.datacountry,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1):t._e(),t.ifadvance?a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"年龄",disabled:!t.filter1},on:{change:t.toSort},model:{value:t.form.value4,callback:function(e){t.$set(t.form,"value4",e)},expression:"form.value4"}},t._l(t.dataage,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1):t._e(),t.ifadvance?a("el-select",{staticClass:"select",attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"性别",disabled:!t.filter1},on:{change:t.toSort},model:{value:t.form.value5,callback:function(e){t.$set(t.form,"value5",e)},expression:"form.value5"}},t._l(t.datasex,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1):t._e()],1),t.ifadvance?a("div",{staticClass:"advanceCtr"},[a("el-select",{staticClass:"selectmul",attrs:{filterable:"","collapse-tags":"",multiple:"",placeholder:"请选择版位",disabled:!t.filter2},on:{change:t.toSort},model:{value:t.form.value6,callback:function(e){t.$set(t.form,"value6",e)},expression:"form.value6"}},t._l(t.dataplatform,function(t){return a("el-option",{key:t,attrs:{label:t,value:"Audience Network"==t?"Audience_Network":t}})}),1),a("el-select",{staticClass:"selectmul",attrs:{filterable:"","collapse-tags":"",multiple:"",placeholder:"请选择设备",disabled:!t.filter2},on:{change:t.toSort},model:{value:t.form.value7,callback:function(e){t.$set(t.form,"value7",e)},expression:"form.value7"}},t._l(t.dataimpression,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1):t._e(),a("el-tabs",{staticClass:"activeName",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"创意",name:"first"}},[a("div",{staticClass:"list"},[a("createform-list",{ref:"dataTable",on:{tableSort:t.tableSort}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageindex,total:t.createformtotal,"page-size":t.pagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)]),a("el-tab-pane",{attrs:{label:"轮播卡片",name:"second"}},[a("div",{staticClass:"list"},[a("createform-card",{ref:"dataTableCard",on:{tableSort:t.tableSort}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageindex,total:t.createcardtotal,"page-size":t.pagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)])],1)],1)},wf=[],If=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"dataForm",attrs:{id:"dataTable",data:t.createformlist,"show-summary":"","summary-method":t.getSummaries},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"creativeId",fixed:"",label:"创意ID",width:"100"}}),a("el-table-column",{attrs:{prop:"adCreativeName",fixed:"",label:"创意名称",width:"160"}}),a("el-table-column",{attrs:{prop:"imageUrl",label:"缩略图",width:"90"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{staticClass:"headpic"},[a("img",{attrs:{src:t.row.img,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"country",label:"国家",width:"90"}}),a("el-table-column",{attrs:{prop:"reachNum",label:"触达",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"showNum",label:"展示",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"clicksNum",label:"点击",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"ctr",label:"CTR",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cvr",label:"CVR",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpm",label:"CPM",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpc",label:"CPC",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"relevanceScore",label:"相关度",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"installsNum",label:"安装",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"spend",label:"花费",sortable:"custom",width:"90"}}),a("el-table-column",{attrs:{prop:"cpi",label:"CPI",sortable:"custom",width:"90"}})],1)},Tf=[],xf={data:function(){return{}},mounted:function(){console.log(this.$refs)},methods:{sortChange:function(t){t.column;var e=t.prop,a=t.order,s="";switch(e){case"reachNum":s="ascending"==a?"reach_num asc":"reach_num desc";break;case"showNum":s="ascending"==a?"show_num asc":"show_num desc";break;case"clicksNum":s="ascending"==a?"clicks_num asc":"clicks_num desc";break;case"ctr":s="ascending"==a?"ctr asc":"ctr desc";break;case"cvr":s="ascending"==a?"cvr asc":"cvr desc";break;case"cpm":s="ascending"==a?"cpm asc":"cpm desc";break;case"cpc":s="ascending"==a?"cpc asc":"cpc desc";break;case"relevanceScore":s="ascending"==a?"relevance_score asc":"relevance_score desc";break;case"installsNum":s="ascending"==a?"installs_num asc":"installs_num desc";break;case"spend":s="ascending"==a?"spend asc":"spend desc";break;case"cpi":s="ascending"==a?"cpi asc":"cpi desc";break}this.$emit("tableSort",s)},getSummaries:function(t){var e=this,a=t.columns,s=(t.data,[]),i=["reachNum","showNum","clicksNum","ctr","cvr","cpm","cpc","relevanceScore","installsNum","spend","cpi"];return a.forEach(function(t,a){switch(a){case 0:s[a]="合计";break;case 1:case 2:case 3:s[a]="";break;default:s[a]=e.createformsum[i[a-4]];break}}),s}},computed:Object(D["a"])({},Object(M["d"])(["createformlist","createformsum"]))},Sf=xf,Af=(a("96ba"),Object(E["a"])(Sf,If,Tf,!1,null,"606ea6e8",null)),jf=Af.exports,Df=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cardtable"},[a("el-table",{ref:"dataCard",staticStyle:{width:"960px"},attrs:{id:"dataTableCard",data:t.createcardlist},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"creativeId",fixed:"",label:"创意ID",width:"100"}}),a("el-table-column",{attrs:{prop:"adCreativeName",fixed:"",label:"创意名称"}}),a("el-table-column",{attrs:{prop:"creativeCardId",fixed:"",label:"卡片ID",width:"100"}}),a("el-table-column",{attrs:{prop:"creativeCardName",fixed:"",label:"卡片名称"}}),a("el-table-column",{attrs:{prop:"country",label:"国家",width:"90"}}),a("el-table-column",{attrs:{prop:"clicksNum",label:"点击",sortable:"custom",width:"90"}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Facebook中轮播卡片只能获取到点击量",placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})])],1)},Mf=[],Pf={data:function(){return{}},methods:{sortChange:function(t){t.column,t.prop;var e=t.order,a="";a="ascending"==e?"clicks_num asc":"clicks_num desc",this.$emit("tableSort",a)}},computed:Object(D["a"])({},Object(M["d"])(["createcardlist"]))},Lf=Pf,Rf=(a("d836"),a("698b"),Object(E["a"])(Lf,Df,Mf,!1,null,"7cc26382",null)),Nf=Rf.exports,Uf={data:function(){return{state:"",ifadvance:!1,filter1:!0,filter2:!0,sort:"",cardname:"first",activeName:"first",form:{value1:[],value2:[],value3:[],value4:[],value5:[],value6:[],value7:[],value8:[(new Date).setDate((new Date).getDate()-1),(new Date).setDate((new Date).getDate()-1)]},pageindex:1,pagesize:20,datasex:[{name:"全部",code:"0"},{name:"男",code:"1"},{name:"女",code:"2"}]}},components:{CreateformList:jf,CreateformCard:Nf,BreadCrumb:kr},mounted:function(){var t=this.$route.params.id;this.$store.dispatch("getCondition",{projectId:t});var e={pageNo:1,pageSize:20,projectId:this.$route.params.id,endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd")};this.$store.dispatch("getCreateformList",{option:e}),this.$store.dispatch("commonAccount",{project_id:t})},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{handleClick:function(t){console.log(t.name),this.cardname=t.name,this.sort="","first"==this.cardname?(this.SETSTATE({k:"createcardlist",v:[]}),this.$refs.dataTable.$refs.dataForm.clearSort()):(this.SETSTATE({k:"createformlist",v:[]}),this.$refs.dataTableCard.$refs.dataCard.clearSort()),this.toGetdata()},tableSort:function(t){this.sort=t,this.toGetdata()},pageSizeChange:function(t){this.pagesize=t,this.toGetdata()},advanceFilter:function(){this.ifadvance=!this.ifadvance,(this.form.value3.length>0||this.form.value4.length>0||this.form.value5.length>0||this.form.value6.length>0||this.form.value7.length>0)&&(this.form.value3=[],this.form.value4=[],this.form.value5=[],this.form.value6=[],this.form.value7=[],this.filter1=!0,this.filter2=!0,this.pageindex=1,this.toGetdata())},outTable:function(){var t={ageList:this.form.value4.join(","),countryList:this.form.value3.join(","),endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),fbAdAccountIdList:this.form.value1.join(","),fbAdCreativeIdList:"",fbAppId:"",flag:"",genderList:this.form.value5.join(","),impressionDeviceList:this.form.value7.join(","),insightDate:"",orderByClause:this.sort,pageNo:1,pageSize:this.createformtotal,platformPositionList:this.form.value6.join(","),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),accountKeyword:"",campainKeyword:"",creativeKeyword:this.state,projectId:this.$route.params.id},e="";"first"==this.cardname?(e="".concat(this.projectname,"创意报表").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss")),this.$store.dispatch("getCreateformListout",{option:t,name:e})):(e="".concat(this.projectname,"轮播卡片").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss")),this.$store.dispatch("getCreatecardListout",{option:t,name:e}))},toSort:function(){this.pageindex=1,this.form.value3.length>0||this.form.value4.length>0||this.form.value5.length>0?this.filter2=!1:this.filter2=!0,this.form.value6.length>0||this.form.value7.length>0?this.filter1=!1:this.filter1=!0,this.toGetdata()},toGetdata:function(){console.log(this.form);var t={ageList:this.form.value4.join(","),countryList:this.form.value3.join(","),endDate:this.$timeFormat(this.form.value8[1],"yyyy-MM-dd"),fbAdAccountIdList:this.form.value1.join(","),fbAdCreativeIdList:"",fbAppId:"",flag:"",genderList:this.form.value5.join(","),impressionDeviceList:this.form.value7.join(","),insightDate:"",orderByClause:this.sort,pageNo:this.pageindex,pageSize:this.pagesize,platformPositionList:this.form.value6.join(","),startDate:this.$timeFormat(this.form.value8[0],"yyyy-MM-dd"),accountKeyword:"",campainKeyword:"",creativeKeyword:this.state,projectId:this.$route.params.id};"first"==this.cardname?this.$store.dispatch("getCreateformList",{option:t}):this.$store.dispatch("getCreatecardList",{option:t})},dataSearch:function(){var t=this;this.pageindex=1,clearTimeout(h),h=setTimeout(function(){t.toGetdata()},300)},pageSwitch:function(t){this.pageindex=t,this.toGetdata()}}),computed:Object(D["a"])({},Object(M["d"])(["itemlist","commonaccount","adcampaign","datacountry","dataage","dataplatform","dataimpression","createformtotal","createcardtotal"]),{projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName}})},$f=Uf,Bf=(a("d927"),a("252d"),Object(E["a"])($f,Of,wf,!1,null,"4a483808",null)),Ff=Bf.exports,Vf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ad"},[a("bread-crumb",{attrs:{pageName:"每日CPI"}}),a("div",{staticClass:"ctrlbutton"},[a("el-date-picker",{staticClass:"datar",attrs:{type:"daterange","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.toSort},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1),a("div",{staticClass:"chart"},[a("dayapi-chart",{ref:"daycpiChart"})],1),a("p",{staticClass:"download"},[a("span",{on:{click:t.outTable}},[t._v(" 导出全部\n      "),a("svg-icon",{attrs:{svgname:"save",svgclass:"save"}})],1)]),t.cpicountry.length>0?a("div",{staticClass:"list"},[a("dayapi-list",{on:{tableSort:t.tableSort,tableFilter:t.tableFilter}})],1):t._e(),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageindex,total:t.daycpitotal,"page-size":20},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1)],1)},Kf=[],Wf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart",attrs:{id:"appChart"}})},zf=[],Gf={data:function(){return{}},computed:{},mounted:function(){this.initChart()},methods:{initChart:function(){myChart4=Vt.init(document.getElementById("appChart"))},resizeChart:function(){myChart4.resize()}}},Hf=Gf,qf=(a("0c12"),Object(E["a"])(Hf,Wf,zf,!1,null,"582cb548",null)),Jf=qf.exports,Yf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{id:"daycpiTable",data:t.daycpilist,"show-summary":"","summary-method":t.getSummaries},on:{"filter-change":t.toFilter,"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"insightDate",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timeFormat")(e.row.insightDate)))])]}}])}),a("el-table-column",{attrs:{prop:"country",filters:t.cpiCountry,label:"国家","filter-method":t.filterTag,"filter-placement":"bottom-end"}}),a("el-table-column",{attrs:{prop:"userOs",filters:[{text:"Android",value:"platform|Android"},{text:"iOS",value:"platform|iOS"}],label:"平台","filter-method":t.filterTag2,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.userOs?e.row.userOs:"--"))])]}}])}),a("el-table-column",{attrs:{prop:"installsNum",label:"安装",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"spend",label:"花费",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.spend?parseFloat(e.row.spend).toFixed(2):"--"))])]}}])}),a("el-table-column",{attrs:{prop:"cpi",label:"CPI",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cpi?parseFloat(e.row.cpi).toFixed(2):"--"))])]}}])})],1)},Xf=[],Zf={data:function(){return{filters:{country:[],platform:[]}}},methods:{toFilter:function(t){for(var e in t)this.filters[e]=t[e];var a=[],s=[];for(var i in this.filters)this.filters[i].forEach(function(t){-1!=t.indexOf("country")&&a.push(t.split("_")[1]),-1!=t.indexOf("platform")&&s.push(t.split("|")[1])});this.$emit("tableFilter",a.join(","),s.join(","))},sortChange:function(t){t.column;var e=t.prop,a=t.order,s="";switch(e){case"installsNum":s="ascending"==a?"installs_num asc":"installs_num desc";break;case"spend":s="ascending"==a?"spend asc":"spend desc";break;case"cpi":s="ascending"==a?"cpi asc":"cpi desc";break}this.$emit("tableSort",s)},filterTag:function(t,e){return!0},filterTag2:function(t,e,a){return!0},outTable:function(){var t="应用统计表_".concat(this.$timeFormat(new Date,"yyyyMMddHHmmss"));this.$exportHTML("outTable",t)},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach(function(t,e){if(0!==e)if(1!==e&&2!==e)if(5!==e){var i=a.map(function(e){return Number(e[t.property])});i.every(function(t){return isNaN(t)})?s[e]="":(s[e]=i.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),s[e]=-1!=s[e].toString().indexOf(".")?s[e].toFixed(2):s[e])}else s[5]=0==s[3]|isNaN((s[4]/s[3]).toFixed(2))?"":(s[4]/s[3]).toFixed(2);else s[e]="";else s[e]="合计"}),s}},computed:Object(D["a"])({},Object(M["d"])(["daycpilist"]),Object(M["b"])(["cpiCountry","cpiImpression"]))},Qf=Zf,th=(a("5c1f"),Object(E["a"])(Qf,Yf,Xf,!1,null,"05f0e3dc",null)),eh=th.exports,ah={data:function(){return{sort:"",filtercountry:"",filtercompress:"",form:{value:[(new Date).setDate((new Date).getDate()-6),new Date]},pageindex:1,pagesize:20}},components:{DayapiList:eh,DayapiChart:Jf,BreadCrumb:kr},created:function(){var t={pageNo:1,pageSize:20,startDate:this.$timeFormat((new Date).getTime()-5184e5,"yyyy-MM-dd"),endDate:this.$timeFormat((new Date).getTime(),"yyyy-MM-dd"),projectId:this.$route.params.id};this.$store.dispatch("getDaycpiList",{option:t})},watch:{menushow:function(t,e){this.$refs.daycpiChart.resizeChart()}},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{tableFilter:function(t,e){this.pageindex=1,this.filtercountry=t,this.filtercompress=e,this.toGetdata()},tableSort:function(t){this.sort=t,this.toGetdata()},pageSizeChange:function(t){this.pagesize=t,this.toGetdata()},outTable:function(){var t="".concat(this.projectname,"每日CPI").concat(this.$timeFormat(new Date,"yyyyMMddHHmmss")),e={endDate:this.form.value.length>0?this.$timeFormat(this.form.value[1],"yyyy-MM-dd"):this.$timeFormat((new Date).getTime(),"yyyy-MM-dd"),pageNo:1,pageSize:this.daycpitotal,orderByClause:this.sort,countryList:this.filtercountry,userOsList:this.filtercompress,startDate:this.form.value.length>0?this.$timeFormat(this.form.value[0],"yyyy-MM-dd"):this.$timeFormat((new Date).getTime()-5184e5,"yyyy-MM-dd"),projectId:this.$route.params.id};this.$store.dispatch("getDaycpiListout",{option:e,name:t})},toGetdata:function(){console.log(this.form);var t={endDate:this.form.value&&this.form.value.length>0?this.$timeFormat(this.form.value[1],"yyyy-MM-dd"):"",pageNo:this.pageindex,pageSize:this.pagesize,countryList:this.filtercountry,userOsList:this.filtercompress,startDate:this.form.value&&this.form.value.length>0?this.$timeFormat(this.form.value[0],"yyyy-MM-dd"):"",projectId:this.$route.params.id};this.$store.dispatch("getDaycpiList",{option:t,sort:this.sort})},toSort:function(){this.pageindex=1,this.toGetdata()},pageSwitch:function(t){this.pageindex=t,this.toGetdata()}}),computed:Object(D["a"])({},Object(M["d"])(["itemlist","daycpitotal","cpicountry","menushow"]),{projectname:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).projectName}})},sh=ah,ih=(a("718d"),Object(E["a"])(sh,Vf,Kf,!1,null,"4447712a",null)),nh=ih.exports,oh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan"},[a("bread-crumb",{attrs:{pageName:"受众管理"}}),a("div",{staticClass:"ctrlbutton"},[a("el-select",{staticClass:"selectl",attrs:{"collapse-tags":"",filterable:"",multiple:"",placeholder:"请选择广告账户，支持名称/编号搜索"},on:{change:t.toSetAccount},model:{value:t.adaccounts,callback:function(e){t.adaccounts=e},expression:"adaccounts"}},t._l(t.commonaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+(t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1)],1),a("div",{staticClass:"ctrlbutton"},[a("el-dropdown",{staticClass:"select",attrs:{"split-button":"",type:"primary"},on:{command:t.handleCommand}},[t._v("创建\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"a"}},[t._v("自定义受众")]),a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"b"}},[t._v("类似受众")])],1)],1),a("el-dropdown",{staticClass:"select",attrs:{"split-button":"",type:"primary"},on:{command:t.handleCommandMutil}},[t._v("批量\n      "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!t.ifdeletetip,content:"一个或多个受众已被用于创建类似受众，请先删除类似受众",placement:"right"}},[a("span",[a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"a",disabled:0==t.selectlist.length||t.ifdeletetip}},[t._v("删除")])],1)]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:!t.ifsharetip,content:"一个或多个受众是他人与你共享的受众，不可再次共享",placement:"right"}},[a("span",[a("el-dropdown-item",{staticClass:"tocreate",attrs:{command:"b",disabled:0==t.selectlist.length||t.ifsharetip}},[t._v("共享")])],1)])],1)],1),a("el-input",{staticClass:"search",attrs:{placeholder:"搜索受众编号/名称","suffix-icon":"el-icon-search"},on:{input:t.targetSearch},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),a("el-select",{staticClass:"selectr",attrs:{placeholder:"类型"},on:{change:t.toSort},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.targettype,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1)],1),a("div",{staticClass:"list",attrs:{id:"PlanList"}},[a("target-list",{on:{targetEdit:t.targetEdit,likeEdit:t.likeEdit,specialEdit:t.specialEdit,toDelete:t.toDelete,toShare:t.toShare,listSelect:t.listSelect}})],1),a("div",{staticClass:"pageswitch"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,200,500],layout:"total, sizes, prev, pager, next, jumper",total:t.targettotal,"page-size":t.pagesize},on:{"size-change":t.pageSizeChange,"current-change":t.pageSwitch}})],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"创建类似受众",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"likeclassify"},[a("div",{staticClass:"classify",on:{click:function(e){t.selectLike(1)}}},[a("p",{staticClass:"ctitle"},[t._v("根据自定义受众")]),a("p",{staticClass:"ctip"},[t._v("把自定义受众里的用户作为来源")])]),a("div",{staticClass:"classify",on:{click:function(e){t.selectLike(2)}}},[a("p",{staticClass:"ctitle"},[t._v("根据广告")]),a("p",{staticClass:"ctip"},[t._v("广告系列或广告组触达用户作为来源")])]),a("div",{staticClass:"classify",on:{click:function(e){t.selectLike(3)}}},[a("p",{staticClass:"ctitle"},[t._v("根据主页粉丝")]),a("p",{staticClass:"ctip"},[t._v("把关注主页的粉丝作为来源")])])])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"创建自定义受众",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("div",{staticClass:"likeclassify"},[a("div",{staticClass:"classify",on:{click:function(e){t.selectCustom(1)}}},[a("p",{staticClass:"ctitle"},[t._v("应用事件")]),a("p",{staticClass:"ctip"},[t._v("来自Facebook，只根据单一应用创建受众")])])])]),a("target-add",{attrs:{status:t.status,editid:t.editid,audienceId:t.audienceId,customtype:t.customtype},on:{showResult:t.showResult,cancelAddbm:t.cancelAddbm}}),a("target-like",{attrs:{status:t.status2,likeeditid:t.likeeditid,audienceId:t.audienceId,liketype:t.liketype},on:{cancelAddbm:t.cancelAddbm,showResult:t.showResult}}),a("target-delete",{attrs:{status:t.deletestatus,deleteids:t.deleteids},on:{"update:status":function(e){t.deletestatus=e},hideBox:t.hideDeletebox}}),a("target-share",{attrs:{status:t.sharestatus,shareids:t.shareids},on:{"update:status":function(e){t.sharestatus=e},hideBox:t.hideSharebox}}),a("target-special",{attrs:{status:t.specialstatus,editid:t.specialeditid,audienceId:t.audienceId},on:{"update:status":function(e){t.specialstatus=e},hideBox:t.hideSpecialbox}})],1)},rh=[],ch=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:"共享"+t.shareids.length+"个受众",visible:t.status},on:{close:t.toCancel}},[a("p",{staticClass:"fonttip important"},[a("b",[t._v("输入另一帐户，该帐户即可获权使用受众、或查看受众分析。但该帐户不能编辑、共享受众，或以受众为来源创建类似受众。")])]),a("div",{staticClass:"account"},[a("span",{staticClass:"accname"},[t._v("广告账户")]),a("el-select",{staticClass:"selectl",attrs:{"collapse-tags":"",multiple:"",filterable:"",placeholder:"暂只支持同BM下的广告账户，可搜索"},model:{value:t.adaccounts,callback:function(e){t.adaccounts=e},expression:"adaccounts"}},t._l(t.commonaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+(t.fbAccountId?"("+t.fbAccountId+")":""),value:t.fbAccountId,disabled:1!=t.accountStatus}})}),1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitShare}},[t._v("共 享")])],1)])},lh=[],uh={props:["status","shareids"],data:function(){return{adaccounts:[]}},computed:Object(D["a"])({},Object(M["d"])(["commonaccount"])),methods:{toCancel:function(){this.$emit("hideBox"),this.adaccounts=[]},submitShare:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=Cn["Loading"].service({fullscreen:!0}),t.next=3,this.$store.dispatch("submitShare",{audienceList:this.shareids,adaccountList:this.adaccounts});case 3:a=t.sent,e.close(),a&&(s=a.data.filter(function(t){return"success"!=t.status}),0==s.length?Object(H["f"])("共享成功"):Object(H["a"])("以下受众共享失败，".concat(s.map(function(t){return"".concat(t.audienceId,"原因：").concat(t.errorMsg)}).join(","))),this.toCancel());case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},dh=uh,mh=(a("3838"),Object(E["a"])(dh,ch,lh,!1,null,"77177c79",null)),ph=mh.exports,fh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"deletedialog",attrs:{title:"删除"+t.deleteids.length+"个受众",visible:t.status},on:{close:t.toCancel}},[a("p",{staticClass:"fonttip important"},[a("b",[t._v("确定删除这"+t._s(t.deleteids.length)+"个受众吗？")])]),a("p",{staticClass:"fonttip important",staticStyle:{"margin-bottom":"20px"}},[a("b",[t._v("删除这些受众后，这些受众将彻底从关联的所有广告帐户移除。使用受众的所有广告将停止投放。你或其他共享者将无法重启用过这些受众的广告。")])]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.deletesharing.length>0,expression:"deletesharing.length > 0"}],staticClass:"fonttip"},[t._v("共享给其他广告账户的受众：")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.deletesharing.length>0,expression:"deletesharing.length > 0"}],staticClass:"targetlist"},[a("ul",t._l(t.deletesharing,function(e,s){return a("li",{key:s},[a("p",{staticClass:"targetname"},[t._v(t._s(e.name))]),a("p",{staticClass:"targetid"},[t._v(t._s(e.audienceId))])])}),0)]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.deleteusing.length>0,expression:"deleteusing.length > 0"}],staticClass:"fonttip"},[t._v("广告正在使用的受众：")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.deleteusing.length>0,expression:"deleteusing.length > 0"}],staticClass:"targetlist"},[a("ul",t._l(t.deleteusing,function(e,s){return a("li",{key:s},[a("p",{staticClass:"targetname"},[t._v(t._s(e.name))]),a("p",{staticClass:"targetid"},[t._v(t._s(e.audienceId))])])}),0)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.toCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitDelete}},[t._v("删 除")])],1)])},hh=[],_h={props:["status","deleteids"],methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{toCancel:function(){this.$emit("hideBox"),this.SETSTATE({k:"deleteusing",v:[]}),this.SETSTATE({k:"deletesharing",v:[]})},submitDelete:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=Cn["Loading"].service({fullscreen:!0}),t.next=3,this.$store.dispatch("submitDelete",this.deleteids);case 3:a=t.sent,e.close(),a&&(s=a.data.filter(function(t){return"success"!=t.status}),0==s.length?Object(H["f"])("删除成功"):Object(H["a"])("以下受众删除失败，".concat(s.map(function(t){return"".concat(t.audienceId,"原因：").concat(t.errorMsg)}).join(","))),this.toCancel());case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),computed:Object(D["a"])({},Object(M["d"])(["deleteusing","deletesharing"])),watch:{status:function(t,e){t&&this.$store.dispatch("deleteDetail",this.deleteids.join(","))}}},vh=_h,gh=(a("2279"),Object(E["a"])(vh,fh,hh,!1,null,"52692e3e",null)),bh=gh.exports,yh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.targetlist},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.description,disabled:!e.row.description,placement:"top-start"}},[a("div",[a("p",{staticClass:"targetname"},[t._v(t._s(e.row.name))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.audienceId))])])])]}}])}),a("el-table-column",{attrs:{prop:"audienceType",label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s("LOOKALIKE"==e.row.subtype?"类似受众":"自定义受众"))]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.row.childType,expression:"scope.row.childType"}],staticClass:"childtype"},[t._v(t._s(e.row.childType))])]}}])}),a("el-table-column",{attrs:{prop:"audienceType",label:"状态/规模",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("\n        "+t._s(e.row.statusName)+"\n        "),200!=e.row.operationStatusCode?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.deliveryStatusDescription,disabled:!e.row.deliveryStatusDescription,placement:"top-start"}},[a("i",{staticClass:"el-icon-warning"})]):t._e()],1),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.approximateCount))])]}}])}),a("el-table-column",{attrs:{prop:"audienceType",label:"广告账户"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.adaccountName))]),a("p",{staticClass:"childtype"},[t._v(t._s(e.row.ownAccountId.split("_")[1]))])]}}])}),a("el-table-column",{attrs:{prop:"creator",label:"创建时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timeFormat")(e.row.timeCreated+"000","yyyy-MM-dd HH:mm")))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:e.row.ifedit,content:"他人与你共享的受众不可编辑，所属广告账户编号："+e.row.accountId,placement:"top-start"}},[a("span",{staticClass:"ctrlbutton"},[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.row.ifedit},on:{click:function(a){t.toEdit(e.row.id,e.row.subtype,e.row.childliketype,e.row.audienceId)}}},[t._v("编辑")])],1)]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:e.row.ifedit,content:"他人与你共享的受众你不可再次共享，所属广告账户编号："+e.row.accountId,placement:"top-start"}},[a("span",{staticClass:"ctrlbutton"},[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.row.ifedit},on:{click:function(a){t.toShare(e.row.id)}}},[t._v("共享")])],1)]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:e.row.ifdelete,content:"已被用于创建类似受众，请先删除类似受众",placement:"top-start"}},[a("span",{staticClass:"ctrlbutton"},[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.row.ifdelete},on:{click:function(a){t.toDelete(e.row.id)}}},[t._v("删除")])],1)])]}}])})],1)},kh=[],Eh={data:function(){return{disAudienceName:""}},computed:Object(D["a"])({},Object(M["d"])(["targetlist","targetdetail"])),methods:{handleSelectionChange:function(t){this.$emit("listSelect",t)},toDelete:function(t){this.$emit("toDelete",[t])},toShare:function(t){this.$emit("toShare",[t])},toEdit:function(t,e,a,s){var i="";switch(i="custom_audience"==a?1:"campaign_conversion"==a?2:3,e){case"LOOKALIKE":this.$emit("likeEdit",t,i,s);break;case"APP":this.$emit("targetEdit",t,s);break;default:this.$emit("specialEdit",t,s);break}}}},Ch=Eh,Oh=(a("e8c2"),Object(E["a"])(Ch,yh,kh,!1,null,"67f26f72",null)),wh=Oh.exports,Ih=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog createdialog",attrs:{title:(t.editid?"编辑":"创建")+(1==t.customtype?"应用事件":"客户名单")+"自定义受众",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"leftform forleft"},[a("el-form-item",{attrs:{label:"广告账户"}},[a("el-select",{staticClass:"search",attrs:{"collapse-tags":"",placeholder:"请选择广告账户，可搜索",filterable:"",disabled:Boolean(t.editid)},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+"("+t.fbId.split("_")[1]+")",value:t.fbId,disabled:1!=t.accountStatus}})}),1)],1),a("el-form-item",{attrs:{label:"应用"}},[a("el-select",{staticClass:"search",attrs:{disabled:""!=t.editid,placeholder:"请选择应用",filterable:""},on:{change:t.toGetUser},model:{value:t.form.app,callback:function(e){t.$set(t.form,"app",e)},expression:"form.app"}},t._l(t.commonapp,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.applicationId}})}),1)],1),2==t.customtype?a("el-form-item",{attrs:{label:"平台"}},[a("el-radio-group",{model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},[a("el-radio",{attrs:{label:"manual"}},[t._v("google_play")]),a("el-radio",{attrs:{label:"auto"}},[t._v("itunes")])],1)],1):t._e(),2==t.customtype?a("el-form-item",{attrs:{label:"媒体平台"}},[a("el-select",{staticClass:"search",attrs:{disabled:"",placeholder:"请选择媒体平台",filterable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"应用事件",value:"应用事件"}})],1)],1):t._e(),a("el-form-item",{attrs:{label:"受众名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"请输入描述，选填"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1),a("div",{staticClass:"leftform"},[a("div",{staticClass:"el-form-item"},[a("span",{staticClass:"condition"},[t._v("包含符合以下")]),a("el-select",{staticClass:"selectapp",attrs:{disabled:""!=t.editid,placeholder:"请选择",filterable:""},model:{value:t.form.relative,callback:function(e){t.$set(t.form,"relative",e)},expression:"form.relative"}},t._l(t.relativearr,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1),a("span",{staticClass:"condition"},[t._v("条件的用户")]),2==t.customtype?a("span",{staticClass:"scale"},[t._v("规模：123322")]):t._e()],1),a("div",{staticClass:"conditionbox",style:{height:t.conditionHeight+"px"}},t._l(t.form.condition,function(e,s){return a("div",{key:s,staticClass:"conditionline"},[a("div",{staticClass:"conditionlist"},[a("span",{staticClass:"condition"},[t._v("过去")]),a("el-input-number",{staticStyle:{width:"140px"},attrs:{precision:0,disabled:""!=t.editid,min:1,max:180,label:"天数"},model:{value:e.day,callback:function(a){t.$set(e,"day",a)},expression:"item.day"}}),a("span",{staticClass:"condition"},[t._v("天内")]),a("el-select",{staticClass:"selectapp",attrs:{disabled:""!=t.editid,placeholder:"请选择事件",filterable:""},model:{value:e.app,callback:function(a){t.$set(e,"app",a)},expression:"item.app"}},t._l(t.appaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.display_name,value:t.template?t.event_name+"|"+t.template:t.event_name}})}),1),a("span",{directives:[{name:"show",rawName:"v-show",value:"fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS"==e.app,expression:"item.app == 'fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS'"}],staticClass:"condition"},[t._v("最高")]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS"==e.app,expression:"item.app == 'fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS'"}],staticClass:"selectpercent",attrs:{disabled:""!=t.editid},model:{value:e.percent,callback:function(a){t.$set(e,"percent",a)},expression:"item.percent"}},t._l(["25%","10%","5%"],function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),a("i",{directives:[{name:"show",rawName:"v-show",value:t.form.condition.length>1,expression:"form.condition.length > 1"}],staticClass:"el-icon-close",on:{click:function(e){t.delCondition(s)}}})],1),a("p",{staticClass:"conditionrelative"},[t._v(t._s(t.relativekey))])])}),0),a("div",{staticClass:"conditionctrl"},[a("el-checkbox",{staticClass:"ctrlleft",attrs:{disabled:5==t.form.condition.length||""!=t.editid},on:{change:t.checkListten},model:{value:t.form.checked,callback:function(e){t.$set(t.form,"checked",e)},expression:"form.checked"}},[t._v("不排除任何人群")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.ifAdd&&""==t.editid,expression:"ifAdd && editid == ''"}],staticClass:"ctrlright",attrs:{type:"text"},on:{click:t.addCondition}},[t._v("新增条件")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.form.checked,expression:"!form.checked"}],staticClass:"el-form-item"},[a("span",{staticClass:"condition"},[t._v("排除符合以下任意条件的用户")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.form.checked,expression:"!form.checked"}],staticClass:"conditionbox",style:{height:t.noconditionHeight+"px"}},t._l(t.form.nocondition,function(e,s){return a("div",{key:s,staticClass:"conditionline"},[a("div",{staticClass:"conditionlist"},[a("span",{staticClass:"condition"},[t._v("过去")]),a("el-input-number",{staticStyle:{width:"140px"},attrs:{precision:0,disabled:""!=t.editid,min:1,max:180,label:"天数"},model:{value:e.day,callback:function(a){t.$set(e,"day",a)},expression:"item.day"}}),a("span",{staticClass:"condition"},[t._v("天内")]),a("el-select",{staticClass:"selectapp",attrs:{disabled:""!=t.editid,placeholder:"请选择事件",filterable:""},model:{value:e.app,callback:function(a){t.$set(e,"app",a)},expression:"item.app"}},t._l(t.appaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.display_name,value:t.template?t.event_name+"|"+t.template:t.event_name}})}),1),a("span",{directives:[{name:"show",rawName:"v-show",value:"fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS"==e.app,expression:"item.app == 'fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS'"}],staticClass:"condition"},[t._v("最高")]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS"==e.app,expression:"item.app == 'fb_mobile_activate_app|MACA_MOST_ACTIVE_USERS'"}],staticClass:"selectpercent",attrs:{disabled:""!=t.editid},model:{value:e.percent,callback:function(a){t.$set(e,"percent",a)},expression:"item.percent"}},t._l(["25%","10%","5%"],function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),a("i",{staticClass:"el-icon-close",on:{click:function(e){t.delNoCondition(s)}}})],1),a("p",{staticClass:"conditionrelative"},[t._v(t._s(t.relativekey))])])}),0),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.form.checked,expression:"!form.checked"}],staticClass:"conditionctrl"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.ifAdd&&""==t.editid,expression:"ifAdd && editid == ''"}],staticClass:"ctrlright",attrs:{type:"text"},on:{click:t.addNoCondition}},[t._v("新增条件")])],1)]),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("保存")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)},Th=[],xh=a("64c2"),Sh=xh["a"],Ah=(a("790f"),Object(E["a"])(Sh,Ih,Th,!1,null,"eb82d976",null)),jh=Ah.exports,Dh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog likedialog",attrs:{title:(t.likeeditid?"编辑":"创建")+"类似受众",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"广告账户"}},[a("el-select",{staticClass:"search",attrs:{disabled:""!=t.likeeditid,placeholder:"请选择广告账户，可搜索",filterable:""},on:{change:t.selectAccount},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}},t._l(t.commonaccount,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+"("+t.fbId.split("_")[1]+")",value:t.fbId,disabled:1!=t.accountStatus}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.liketype,expression:"liketype == 1"}],attrs:{label:"自定义受众"}},[a("el-select",{staticClass:"search",attrs:{disabled:""!=t.likeeditid,placeholder:"请选择自定义受众，可搜索",filterable:""},on:{change:t.setName},model:{value:t.form.custom,callback:function(e){t.$set(t.form,"custom",e)},expression:"form.custom"}},t._l(t.liketarget,function(t,e){return a("el-option",{key:e,attrs:{label:t.name+"("+t.audienceId+")",value:t.audienceId}})}),1),a("p",{staticClass:"info"},[t._v("至少拥有100个用户")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.liketype,expression:"liketype == 2"}],attrs:{label:"选择广告组"}},[a("el-select",{staticClass:"search",attrs:{disabled:""!=t.likeeditid,placeholder:"请选择广告组，支持编号搜索",multiple:"",filterable:"","collapse-tags":"",remote:"","remote-method":t.searchAdset},model:{value:t.form.adset,callback:function(e){t.$set(t.form,"adset",e)},expression:"form.adset"}},t._l(t.targetadsetlist,function(t,e){return a("el-option",{key:e,attrs:{label:t.adSetName+"("+t.adsetId+")",value:t.adsetId}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.liketype,expression:"liketype == 3"}],attrs:{label:"主页"}},[a("el-select",{staticClass:"search",attrs:{disabled:""!=t.likeeditid,placeholder:"请选择主页，可搜索",filterable:""},on:{change:t.setName},model:{value:t.form.custom,callback:function(e){t.$set(t.form,"custom",e)},expression:"form.custom"}},t._l(t.commonpage,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pageId}})}),1),a("p",{staticClass:"info"},[t._v("至少拥有100个用户")])],1),a("el-form-item",{attrs:{label:"国家"}},[a("el-select",{staticClass:"search",attrs:{disabled:""!=t.likeeditid,multiple:"",placeholder:"请选择国家，可搜索",filterable:"","collapse-tags":""},on:{change:t.setName},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}},t._l(t.othercountries,function(t){return a("el-option",{key:t.code,attrs:{label:t.name+"("+t.code+")",value:t.code}})}),1)],1),a("el-form-item",{attrs:{label:"受众规模"}},[a("el-slider",{staticClass:"slider",attrs:{disabled:""!=t.likeeditid,range:"",min:0,max:20,"format-tooltip":t.formatTooltip},on:{change:t.setName},model:{value:t.form.scale,callback:function(e){t.$set(t.form,"scale",e)},expression:"form.scale"}}),a("p",{staticClass:"info"},[t._v("可以选择国家/地区总人口的 0% 到 20% 作为广告受众规模，1% 代表最接近受众来源的规模")])],1),a("el-form-item",{attrs:{label:"受众名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"请输入描述，选填"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("保存")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)},Mh=[],Ph=a("9169"),Lh={props:["status","liketype","likeeditid","audienceId"],directives:{Clickoutside:Ph["a"]},data:function(){return{input:"",filterText:"",props1:{label:"name",children:"zones",isLeaf:"leaf"},dialogFormVisible:!1,relativekey:"或",selectaccount:[],selectid:[],form:{adset:[],custom:"",country:[],scale:[0,20],name:"",desc:"",account:""},customname:"",camppage:1,campkword:""}},created:function(){},methods:Object(D["a"])({},Object(M["c"])(["SETSTATE","TARGETLOGOPENCLOSE","TARGETTREE","TARGETTREECHECK","TARGETPLANLISTCHECK"]),{searchAdset:function(t){this.getCampaignAdset({type:"adset",key:"fbAdSetId",keyword:t})},selectAccount:function(){if(1==this.liketype){var t=this.form.account;this.$store.dispatch("likeTarget",{adaccount:t}),this.form.custom=""}2==this.liketype&&(this.getCampaignAdset({type:"adset"}),this.form.adset=[])},setName:function(){var t=this;switch(this.liketype){case 1:if(!this.form.custom||0==this.form.country.length)return;this.customname=this.liketarget.find(function(e){return e.audienceId==t.form.custom}).name,this.form.name="类似受众（".concat(this.form.country.join(","),",").concat(this.form.scale[0],"%-").concat(this.form.scale[1],"%）- ").concat(this.customname);break;case 2:if(0==this.form.country.length)return;this.form.name="类似受众（".concat(this.form.country.join(","),",").concat(this.form.scale[0],"%-").concat(this.form.scale[1],"%）- 根据广告");break;case 3:if(!this.form.custom||0==this.form.country.length)return;this.customname=this.commonpage.find(function(e){return e.pageId==t.form.custom}).name,this.form.name="类似受众（".concat(this.form.country.join(","),",").concat(this.form.scale[0],"%-").concat(this.form.scale[1],"%）- ").concat(this.customname);break}},formatTooltip:function(t){return"".concat(t,"%")},toCancel:function(){this.formReset(),this.$emit("cancelAddbm","status2"),this.status2=!1},formCheck:function(){return this.form.account?1==this.liketype&&""==this.form.custom?[!1,"请选择自定义受众"]:3==this.liketype&&""==this.form.custom?[!1,"请选择主页"]:2==this.liketype&&0==this.form.adset.length?[!1,"请选择广告"]:0==this.form.country.length?[!1,"请选择国家"]:this.form.scale[0]==this.form.scale[1]?[!1,"受众规模最小值与最大值不能相同"]:""==this.form.name?[!1,"请输入受众名称"]:this.form.name.replace(/[\u0391-\uFFE5]/g,"aa").length>100?[!1,"受众名称长度不能大于100个字符"]:this.form.desc.replace(/[\u0391-\uFFE5]/g,"aa").length>200?[!1,"描述长度不能大于200个字符"]:[!0]:[!1,"请选择广告账户"]},toSubmit:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.formCheck(),e[0]){t.next=4;break}return Object(H["g"])(e[1]),t.abrupt("return");case 4:return a="",s={ratio:this.form.scale[1]/100,starting_ratio:this.form.scale[0]/100},this.form.country.length>1?s.location_spec={geo_locations:{countries:this.form.country}}:s.country=this.form.country.join(","),i={adaccountId:this.form.account,description:this.form.desc,fbAudienceId:this.audienceId?this.audienceId:"",name:this.form.name},1==this.liketype&&(a="auto",i["originAudienceId"]=this.form.custom),2==this.liketype&&(a="ad",s["origin_ids"]=this.form.adset,s["conversion_type"]="campaign_conversions"),3==this.liketype&&(a="page",i["pageId"]=this.form.custom,s["page_id"]=this.form.custom,s["conversion_type"]="page_like"),i["lookalikeSpec"]=_e()(s),t.next=14,this.$store.dispatch("addTarget",{option:i,type:a});case 14:n=t.sent,"failed"!=n.data.status&&(this.dialogFormVisible=!1);case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getCampaignAdset:function(t){var e=t.type,a=t.key,s=void 0===a?"":a,i=t.keyword,n=void 0===i?"":i;t.adaccount;if(this.form.account){var o={groupByClause:"campaignName"==e?"campaign_id":"adset_id",pageNo:1,pageSize:1e3,accountIdStr:this.form.account.split("_")[1],projectId:this.$route.params.id,endDate:this.$timeFormat(new Date,"yyyy-MM-dd"),startDate:this.$timeFormat((new Date).getTime()-864e6,"yyyy-MM-dd")};s&&n&&(o[s]=n),this.$store.dispatch("targetAdlist",{option:o,type:e})}else this.SETSTATE({k:"targetadsetlist",v:[]})},formReset:function(){this.form.custom="",this.form.country=[],this.form.scale=[0,20],this.form.desc="",this.form.account="",this.form.name="",this.form.adset=[],this.selectaccount=[],this.filterText="",this.SETSTATE({k:"targetadsetlist",v:[]}),this.SETSTATE({k:"liketarget",v:[]})}}),computed:Object(D["a"])({},Object(M["d"])(["othercountries","liketarget","commonpage","ifmorecampaigns","itemlist","commonaccount","liketargetinfo","targetadsetlist"]),{applicationid:function(){var t=this;if(0!=this.itemlist.length)return this.itemlist.find(function(e){return e.id==t.$route.params.id}).applicationId}}),watch:{status:function(t,e){this.dialogFormVisible=t,t&&(this.liketype,this.liketype)},likeeditid:function(t,e){if(t){var a=t;this.$store.dispatch("getTargetInfo",{id:a,type:"lookalike"})}},liketargetinfo:function(t,e){if(t){this.form.name=t.name,this.form.desc=t.description,this.form.account=t.ownAccountId;var a=JSON.parse(t.lookalikeSpec);if(this.form.scale=[a.starting_ratio?100*a.starting_ratio:0,100*a.ratio],this.form.country=a.target_countries?a.target_countries:[a.country],1==this.liketype){this.form.custom=a.origin[0].id;var s=this.form.account;this.$store.dispatch("likeTarget",{adaccount:s})}2==this.liketype&&(this.form.adset=a.origin.map(function(t){return t.id}),this.searchAdset(this.form.custom)),3==this.liketype&&(this.form.custom=a.origin[0].id)}}}},Rh=Lh,Nh=(a("4163"),Object(E["a"])(Rh,Dh,Mh,!1,null,"bebfe9c6",null)),Uh=Nh.exports,$h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:"编辑受众",visible:t.status},on:{close:t.toCancel}},[a("el-form",{ref:"form",staticClass:"cform",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"受众名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"请输入描述，选填"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{staticClass:"cbutton"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toSubmit}},[t._v("保存")]),a("el-button",{on:{click:t.toCancel}},[t._v("取消")])],1)],1)],1)},Bh=[],Fh={props:["status","editid","audienceId"],data:function(){return{form:{name:"",desc:""}}},methods:{toCancel:function(){this.$emit("hideBox")},formReset:function(){this.form.name="",this.form.desc=""},toSubmit:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.form.name.trim()){t.next=3;break}return Object(H["g"])("受众名称不能为空"),t.abrupt("return");case 3:return e={description:this.form.desc,fbAudienceId:this.audienceId,name:this.form.name},t.next=6,this.$store.dispatch("addTarget",{option:e,type:"special"});case 6:a=t.sent,"failed"!=a.data.status&&this.toCancel();case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},computed:Object(D["a"])({},Object(M["d"])(["specialtargetinfo"])),watch:{status:function(t,e){if(t){var a=this.editid;this.$store.dispatch("getTargetInfo",{audience_id:a,type:"special"})}},specialtargetinfo:function(t,e){t&&(this.form.name=t.name,this.form.desc=t.description)}}},Vh=Fh,Kh=Object(E["a"])(Vh,$h,Bh,!1,null,null,null),Wh=Kh.exports,zh={components:{TargetList:wh,TargetAdd:jh,TargetLike:Uh,TargetDelete:bh,TargetShare:ph,TargetSpecial:Wh,BreadCrumb:kr},data:function(){var t;return t={liketype:0,dialogFormVisible:!1,dialogFormVisible2:!1,deletestatus:!1,specialstatus:!1,deleteids:[],ifdeletetip:!1,sharestatus:!1,shareids:[],ifsharetip:!1,selectlist:[],pagesize:20,adaccounts:[],value:"",state:"",status:!1,status2:!1,status3:!1,editid:"",specialeditid:"",likeeditid:"",audienceId:""},Object(Gr["a"])(t,"liketype",""),Object(Gr["a"])(t,"customtype",""),Object(Gr["a"])(t,"newaccount",[]),t},created:function(){var t="tg_keyword",e="";this.SETSTATE({k:t,v:e}),t="tg_type",e="",this.SETSTATE({k:t,v:e}),t="tg_pageSize",e=20,this.SETSTATE({k:t,v:e}),t="tg_pageIndex",e=1,this.SETSTATE({k:t,v:e})},mounted:function(){var t=this.$route.params.id;this.SETSTATE({k:"tg_projectId",v:t}),this.$store.dispatch("getTargetlist"),this.$store.dispatch("otherCountries"),this.$store.dispatch("commonPage",{project_id:t}),this.$store.dispatch("commonAccount",{project_id:t})},computed:Object(D["a"])({},Object(M["d"])(["targettotal","targettype","commonaccount"])),methods:Object(D["a"])({},Object(M["c"])(["SETSTATE"]),{specialEdit:function(t,e){this.specialeditid=t,this.audienceId=e,this.specialstatus=!0},hideSpecialbox:function(){this.specialstatus=!1},handleCommandMutil:function(t){var e=this.selectlist.map(function(t){return t.id});switch(t){case"a":this.toDelete(e);break;case"b":this.toShare(e);break}},listSelect:function(t){this.selectlist=t,this.ifdeletetip=!!t.find(function(t){return t.lookalikeAudienceIds}),this.ifsharetip=!!t.find(function(t){return t.ownAccountId.split("_")[1]!=t.accountId})},hideSharebox:function(){this.sharestatus=!1},showSharebox:function(){this.sharestatus=!0},toShare:function(t){this.shareids=t.slice(0),this.showSharebox()},toDelete:function(t){this.deleteids=t.slice(0),this.showDeletebox()},hideDeletebox:function(){this.deletestatus=!1},showDeletebox:function(){this.deletestatus=!0},showResult:function(t){this.status3=!0,this.newaccount=t},likeEdit:function(t,e,a){this.likeeditid=t,this.audienceId=a,this.status2=!0,this.liketype=e},targetEdit:function(t,e){this.editid=t,this.audienceId=e,this.status=!0},selectCustom:function(t){var e=this;this.customtype=t,this.dialogFormVisible2=!1,Object(Ho["setTimeout"])(function(){e.status=!0},300)},selectLike:function(t){var e=this;this.liketype=t,this.dialogFormVisible=!1,Object(Ho["setTimeout"])(function(){e.status2=!0},300)},cancelAddbm:function(t){this[t]=!1,"status"==t&&(this.editid=""),"status2"==t&&(this.likeeditid="",this.audienceId="")},handleCommand:function(t){switch(t){case"a":this.dialogFormVisible2=!0;break;case"b":this.dialogFormVisible=!0;break}},pageSwitch:function(t){var e="tg_pageIndex",a=t;this.SETSTATE({k:e,v:a}),this.getData()},targetSearch:function(){var t="tg_keyword",e=encodeURIComponent(this.state),a=this;this.SETSTATE({k:t,v:e}),t="tg_pageIndex",e=1,this.SETSTATE({k:t,v:e}),clearTimeout(_),_=Object(Ho["setTimeout"])(function(){a.getData()},300)},getData:function(){this.$store.dispatch("getTargetlist")},toSetAccount:function(){this.SETSTATE({k:"tg_adaccounts",v:this.adaccounts.map(function(t){return"act_".concat(t)}).join(",")}),this.SETSTATE({k:"tg_pageIndex",v:1}),this.getData()},toSort:function(){this.SETSTATE({k:"tg_type",v:"-1"==this.value?"":this.value}),this.SETSTATE({k:"tg_pageIndex",v:1}),this.getData()},pageSizeChange:function(t){this.pagesize=t;var e="tg_pageSize",a=t;this.SETSTATE({k:e,v:a}),e="tg_pageIndex",a=1,this.SETSTATE({k:e,v:a}),this.getData()}})},Gh=zh,Hh=(a("be7b"),Object(E["a"])(Gh,oh,rh,!1,null,"1820da6f",null)),qh=Hh.exports;v["default"].use(w["a"]);var Jh,Yh=new w["a"]({routes:[{path:"/",name:"index",component:St,redirect:function(t){return 1==localStorage.getItem("atom_bind")?"/pandect":"/bind"},children:[{path:"bind",name:"bind",component:Lt,meta:{title:"绑定facebook"}},{path:"pandect",name:"pandect",component:Ke,meta:{title:"总览"}},{path:"bm",name:"bm",component:wa,meta:{title:"BM同步"}},{path:"app",name:"app",component:rs,meta:{title:"APP同步"}},{path:"manage",name:"manage",component:Ps,meta:{title:"管理项目"}},{path:"notmanage",name:"notmanage",component:Zs,meta:{title:"已归档项目"}},{path:"regular",name:"regular",component:di,meta:{title:"规则列表"}},{path:"reguform",name:"reguform",component:Ci,meta:{title:"规则报表"}},{path:"message",name:"message",component:Li,meta:{title:"消息中心"}},{path:"temp",name:"temp",component:Hi,meta:{title:"制作图片"}},{path:"temp/create/:tempid?",name:"createtemp",component:Mn,meta:{title:"制作图片"}},{path:"templates",name:"templates",component:so,meta:{title:"模板管理"}},{path:"templates/add/:eid?",name:"addtemplates",component:lo,meta:{title:"上传模板"}},{path:"setting",name:"setting",component:Eo,meta:{title:"设置"}}]},{path:"/project/:id",name:"project",component:Po,redirect:function(t){return"/project/:id/ad"},children:[{path:"rule",name:"rule",component:wr,meta:{title:"规则引擎"}},{path:"optimize/:ruleId?",name:"optimize",component:Kr,meta:{title:"优化记录"}},{path:"create",name:"create",component:nl,meta:{title:"创意管理"}},{path:"sync",name:"sync",component:vl,meta:{title:"同步记录"}},{path:"gener/:fid",name:"gener",component:Ll,meta:{title:"创建推广计划"}},{path:"gener/:fid/:tid",name:"gener",component:Ll,meta:{title:"创建推广计划"}},{path:"plan/:planid?",name:"plan",component:Qu,meta:{title:"推广计划管理"}},{path:"edit/:pid",name:"edit",component:dd,meta:{title:"编辑推广计划"}},{path:"copy/:pid",name:"copy",component:Cd,meta:{title:"复制推广计划"}},{path:"ad/:bid?",name:"ad",component:Gp,meta:{title:"广告管理"}},{path:"matterform",name:"matterform",component:df,meta:{title:"素材报表"}},{path:"data",name:"data",component:Cf,meta:{title:"账户报表"}},{path:"createform",name:"createform",component:Ff,meta:{title:"创意报表"}},{path:"daycpi",name:"daycpi",component:nh,meta:{title:"每日CPI"}},{path:"target",name:"target",component:qh,meta:{title:"受众管理"}}]}]}),Xh=a("a4bb"),Zh=a.n(Xh),Qh={indicator:[{label:"已花费",value:"spent|true"},{label:"总花费",value:"lifetime_spent|false"},{label:"频次",value:"frequency|true"},{label:"成效",value:"result|true"},{label:"单次成效费用",value:"cost_per|true"},{label:"移动应用安装",value:"mobile_app_install|true"},{label:"单次移动应用安装费用",value:"cost_per_mobile_app_install|true"},{label:"广告花费回报（ROAS）-移动应用购物",value:"mobile_app_purchase_roas|false"},{label:"广告花费回报（ROAS）-网站购物",value:"website_purchase_roas|false"},{label:"单日花费比率",value:"daily_ratio_spent|true"},{label:"总花费比率",value:"lifetime_ratio_spent|true"},{label:"受众覆盖%",value:"audience_reached_percentage|true"},{label:"广告系列名称",value:"campaign.name|true"},{label:"广告组名称",value:"adset.name|true"},{label:"版位",value:"adset.placement.page_types|false"},{label:"总预算",value:"lifetime_budget|true"},{label:"单日预算",value:"daily_budget|true"},{label:"竞价金额",value:"bid_amount|true"},{label:"付费事件",value:"billing_event|true"},{label:"优化目标",value:"optimization_goal|true"},{label:"创建时间（小时）",value:"hours_since_creation|false"},{label:"投放时间（秒）",value:"active_time|false"},{label:"当前时间",value:"current_time|false"},{label:"创建时间",value:"created_time|true"},{label:"上次编辑时间",value:"updated_time|true"},{label:"开始时间",value:"start_time|true"},{label:"所有移动应用事件",value:"app_custom_event|true"},{label:"移动应用解锁成就",value:"app_custom_event.fb_mobile_achievement_unlocked|true"},{label:"移动应用会话",value:"app_custom_event.fb_mobile_activate_app|true"},{label:"移动应用添加支付信息",value:"app_custom_event.fb_mobile_add_payment_info|true"},{label:"移动应用加入购物车",value:"app_custom_event.fb_mobile_add_to_cart|true"},{label:"移动应用加入心愿单",value:"app_custom_event.fb_mobile_add_to_wishlist|true"},{label:"移动应用完成注册",value:"app_custom_event.fb_mobile_complete_registration|true"},{label:"移动应用内容查看",value:"app_custom_event.fb_mobile_content_view|true"},{label:"移动应用发起结账",value:"app_custom_event.fb_mobile_initiated_checkout|true"},{label:"移动应用关卡完成",value:"app_custom_event.fb_mobile_level_achieved|true"},{label:"移动应用购物",value:"app_custom_event.fb_mobile_purchase|true"},{label:"移动应用提交评分",value:"app_custom_event.fb_mobile_rate|true"},{label:"移动应用搜索",value:"app_custom_event.fb_mobile_search|true"},{label:"移动应用点数花费",value:"app_custom_event.fb_mobile_spent_credits|true"},{label:"移动应用完成教程",value:"app_custom_event.fb_mobile_tutorial_completion|true"},{label:"移动应用其他操作",value:"app_custom_event.other|true"},{label:"单次移动应用成就解锁费用",value:"cost_per_mobile_achievement_unlocked|true"},{label:"单次移动应用会话费用",value:"cost_per_mobile_activate_app|true"},{label:"单次移动应用添加支付信息费用",value:"cost_per_mobile_add_payment_info|true"},{label:"单次移动应用加入购物车费用",value:"cost_per_mobile_add_to_cart|true"},{label:"单次移动应用加入心愿单费用",value:"cost_per_mobile_add_to_wishlist|true"},{label:"单次移动应用完成注册费用",value:"cost_per_mobile_complete_registration|true"},{label:"单次移动应用内容查看费用",value:"cost_per_mobile_content_view|true"},{label:"单次移动应用发起结账费用",value:"cost_per_mobile_initiated_checkout|true"},{label:"单次移动应用关卡完成费用",value:"cost_per_mobile_level_achieved|true"},{label:"单次移动应用购物费用",value:"cost_per_mobile_purchase|true"},{label:"单次移动应用提交评分费用",value:"cost_per_mobile_rate|true"},{label:"单次移动应用搜索费用",value:"cost_per_mobile_search|true"},{label:"单次移动应用点数花费的广告费用",value:"cost_per_mobile_spent_credits|true"},{label:"单次移动应用完成教程学习费用",value:"cost_per_mobile_tutorial_completion|true"},{label:"其他点击费用（链接）",value:"cost_per_link_click|true"},{label:"链接点击量",value:"link_clicks|true"},{label:"千次发展费用",value:"cpm|true"},{label:"点击率（链接）",value:"link_ctr|true"},{label:"总展示量",value:"lifetime_impressions|false"},{label:"展示次数",value:"impressions|true"},{label:"覆盖人数",value:"reach|true"},{label:"潜在客户",value:"leadgen|true"},{label:"操作",value:"actions|true"},{label:"点击量",value:"clicks|true"},{label:"CPA",value:"cpa|true"},{label:"CPC",value:"cpc|true"},{label:"点击率",value:"ctr|true"},{label:"成效率",value:"result_rate|true"},{label:"单次独立点击费用",value:"cost_per_unique_click|true"},{label:"独立用户点击量",value:"unique_clicks|true"},{label:"今日花费",value:"today_spent|false"},{label:"昨日花费",value:"yesterday_spent|false"},{label:"帖文互动",value:"post_engagement|true"},{label:"单次帖文互动",value:"cost_per_post_engagement|false"},{label:"观看视频达3秒的次数",value:"video_view|true"},{label:"单次视频观看费用",value:"cost_per_video_view|false"},{label:"主页赞",value:"like|true"},{label:"站外互动",value:"offsite_engagement|true"},{label:"帖子",value:"post|true"},{label:"帖子评论",value:"post_comment|true"},{label:"帖子获赞",value:"post_like|true"},{label:"帖子心情",value:"post_reaction|true"},{label:"内容查看",value:"view_content|true"},{label:"点击播放视频",value:"video_play|true"},{label:"提问回答",value:"vote|true"},{label:"新增消息联系人数量",value:"onsite_conversion.messaging_first_reply|true"},{label:"单次新增消息联系人费用",value:"cost_per_messaging_first_reply|true"},{label:"消息回复次数",value:"onsite_conversion.messaging_reply|true"},{label:"单次消息回复费用",value:"cost_per_messaging_reply|true"},{label:"预估预算花费%",value:"estimated_budget_spending_percentage|true"}]},t_={_edge:"",ad_account:""},e_=fe()({},Qh,t_,(Jh={nickname:"",itemlist:[],appInstallsLists:"",appSpendDatasLists:"",todayInstallsNum:"",todaySpend:"",reportAppDataList:[],allReportAppDataList:[],videoerrmsg:[],videoresult:[],ifapp:!1,customevent:[],customunit:"",appdata:[],appcpitotal:{},appcount:0,ifaccount:!1,appdataall:[],appdataid:"",appdataappid:"",appdatastartdate:"",appdataenddate:"",appdatatotal:0,appdataindex:1,appdatapagesize:20,appdatacountry:"",appdataimporession:"",appdatasort:"",paycountlist:[],paycount:0,countryfilter:[],pandectselect:"default",pandectsave:[],getbmover:!1,bmlist:[],addbmlist:[],bm_pageIndex:1,bm_pageSize:20,disbmid:"",disaccount:[],accounttotal:0,disaddaccount:[],addata:{},adaccount:{},accountkwd:"",dispage:[],pagetotal:0,bmpg_pageIndex:1,bmpg_pageSize:20,disaddpage:[],pagedata:{},pageaccount:{},pagekwd:"",applist:[],appkwd:"",addapplist:[],setapplist:[],cansetapplist:[],setappstatus:"",afstate:!1,manageapplist:[],managelist:[],pagesize:20,total:0,projectkwd:"",userslist:[],adaccountslist:[],adpages:[],createoption:{projectname:"",radio1:"Facebook ADS",radio2:"安装应用",region:[],page:[],member:[],account:[]},createeditid:"",createreset:{projectname:"",radio1:"Facebook ADS",radio2:"安装应用",region:[],page:[],member:[],account:[]},allotid:"",projectallot:[],commonaccount:[],commonpage:[],commonapp:[],rulelist:[],ruleapp:[],optotal:0,oppagesize:20,optimizelist:[],optimizeaccount:[],executelist:[],optimizedetail:[],createlist:[],createchecked:[],createcheckstatus:!1,allcheckidstatus:[],classify:[],countries:[],crtotal:0,crpagesize:20,creativityName:"",cr_classify:"",cr_countryId:"",cr_sex:"",cr_status:"",cr_pageIndex:1,cr_pageSize:20,cr_projectId:"",allpagelist:[],allactions:[],synctime:0,addcreate:!0,withcreate:!0,cardcreate:!0,wantupload:0,synclist:[],synctotal:0,sync_status:"",sync_keyWords:"",sync_fbAccountId:"",sync_pageSize:20,sync_pageIndex:1,sync_projectId:"",othercountries:[],language:[],interests:[],platform:[],system:[],selectcreate:[],createstatus:"",createclassify:"",createkeyword:"",pl_project_id:"",bidguide:[],pl_country:"",pl_platform:"",pl_keyword:"",pl_pageIndex:1,pl_pageSize:20,planlist:[],pltotal:0,plpagesize:20,plancountry:[],inusecreate:[],nousecreate:[],inusetotal:0,nousetotal:0,plcreatestatus:"",plcreateclassify:"",plcreatekeyword:"",inuseaccount:[],nouseaccount:[],accountstatus:"",accountkeyword:"",loglist:[],logdetail:[],logdetailid:"",logdetailname:"",logcreatecreative:0,logcreateaccount:0,logcreateset:0,logcreatecampaign:0,createinfo:{},disinfo:[],createplatform:[],genertarget:[],generaccount:[],ifadcreate:!1,classifyforplan:[],classifyfiltercount:0,bigimagevisible:!1,bigimageurl:"",optionselect:"default",saveoption:[],menushow:!0,adplanlist:[],nowtime:"",updatetime:"",datestatus:"",adstarttime:"",adendtime:"",adaccountid:[],adplanid:"",careData:[],searchList:[{name:"按时间",key:"dateOptions",list:[{cname:"无",key:"",checked:!1},{cname:"日",key:"insight_date",checked:!1},{cname:"周",key:"weak",checked:!1},{cname:"2周",key:"twoweaks",checked:!1},{cname:"月",key:"month",checked:!1}]},{name:"按投放",key:"partOptions",list:[{cname:"无",key:"",checked:!1},{cname:"年龄",key:"age",checked:!1},{cname:"性别",key:"gender",checked:!1},{cname:"年龄和性别",key:"gender,age",checked:!1},{cname:"国家",key:"country",checked:!1},{cname:"设备",key:"impression_device",checked:!1},{cname:"版位和设备",key:"publisher_platform,impression_device",checked:!1}]},{name:"按动态创意",key:"partOptions",list:[{cname:"无",key:"",checked:!1},{cname:"图片/视频",key:"agCreativity",checked:!1},{cname:"文本",key:"bagCreativity",checked:!1},{cname:"标题",key:"tagCreativity",checked:!1},{cname:"行动号召",key:"cagCreativity",checked:!1}]},{name:"按轮播卡片",key:"partOptions",importkey:"material_id",list:[]}],adapplicationid:"",adprojectid:"",adlisttimeout:!1,adcount:0,adsetcount:0,campaigncount:0,editcampaignlist:[],createcampaignlist:[],editadsetlist:[],createadsetlist:[],adcreatelist:[],adcreatetotal:0,editadlist:[],adapplist:[],createallpagelist:[],exportstatus:!0,isdynamic:!1,adwantupload:0,adsetlistload:!1,sortdefault:"ACTIVE,PAUSED",adcreateadd:!0,calendardate:[],hascreatead:!1,withcreatead:!0,imgspwant:0,viospwant:0,edittype:0,adlist:[],adlisttotal:{},adpagesize:20,adcampaignlist:"[]",adcampaigntotal:0,adsetlist:"[]",adsettotal:0,adadlist:"[]",adadtotal:0,campainsortlist:[],setsortlist:[],adsortlist:[],copycampaignlist:[],copyadsetlist:[],copyjoblistdetail:[],jobtotal:0,jobcomplete:0,jobfaildetail:!1,taskname:"",taskfail:0,tasksuccess:0,tasknamedetail:"",taskfaildetail:0,tasksuccessdetail:0,taskresult:[],taskerror:"",adtab:"campaignName",adalllist:[],campain_option:"",set_option:"",ad_option:""},Object(Gr["a"])(Jh,"customunit",""),Object(Gr["a"])(Jh,"customeventcampain",[]),Object(Gr["a"])(Jh,"customeventset",[]),Object(Gr["a"])(Jh,"customeventad",[]),Object(Gr["a"])(Jh,"adcustomevent",[]),Object(Gr["a"])(Jh,"conditionlist",[]),Object(Gr["a"])(Jh,"adrulelist",[]),Object(Gr["a"])(Jh,"singlerules",[]),Object(Gr["a"])(Jh,"adcampaign",[]),Object(Gr["a"])(Jh,"adaccount",[]),Object(Gr["a"])(Jh,"adcreate",[]),Object(Gr["a"])(Jh,"datacountry",[]),Object(Gr["a"])(Jh,"dataage",[]),Object(Gr["a"])(Jh,"dataplatform",[]),Object(Gr["a"])(Jh,"dataimpression",[]),Object(Gr["a"])(Jh,"datalist",[]),Object(Gr["a"])(Jh,"datatotal",0),Object(Gr["a"])(Jh,"datasum",{}),Object(Gr["a"])(Jh,"datasort",""),Object(Gr["a"])(Jh,"adformlist",[]),Object(Gr["a"])(Jh,"adformtotal",0),Object(Gr["a"])(Jh,"createformlist",[]),Object(Gr["a"])(Jh,"createformtotal",0),Object(Gr["a"])(Jh,"createformsum",{}),Object(Gr["a"])(Jh,"createcardlist",[]),Object(Gr["a"])(Jh,"createcardtotal",0),Object(Gr["a"])(Jh,"daycpilist",[]),Object(Gr["a"])(Jh,"daycpitotal",0),Object(Gr["a"])(Jh,"cpicountry",[]),Object(Gr["a"])(Jh,"cpiimpression",[]),Object(Gr["a"])(Jh,"imagematterlist",[]),Object(Gr["a"])(Jh,"imagemattersum",{}),Object(Gr["a"])(Jh,"imagemattertotal",0),Object(Gr["a"])(Jh,"videomatterlist",[]),Object(Gr["a"])(Jh,"videomattersum",{}),Object(Gr["a"])(Jh,"videomattertotal",0),Object(Gr["a"])(Jh,"tg_project_id",""),Object(Gr["a"])(Jh,"tg_projectId",""),Object(Gr["a"])(Jh,"tg_pageSize",20),Object(Gr["a"])(Jh,"tg_pageIndex",1),Object(Gr["a"])(Jh,"tg_keyword",""),Object(Gr["a"])(Jh,"tg_type",""),Object(Gr["a"])(Jh,"tg_adaccounts",""),Object(Gr["a"])(Jh,"targetadlist",[]),Object(Gr["a"])(Jh,"targetadsetlist",[]),Object(Gr["a"])(Jh,"targetadsetarray",{}),Object(Gr["a"])(Jh,"targetlist",[]),Object(Gr["a"])(Jh,"targettype",[]),Object(Gr["a"])(Jh,"targettotal",0),Object(Gr["a"])(Jh,"targetdetail",[]),Object(Gr["a"])(Jh,"appaccount",[]),Object(Gr["a"])(Jh,"targetinfo",null),Object(Gr["a"])(Jh,"liketargetinfo",null),Object(Gr["a"])(Jh,"specialtargetinfo",null),Object(Gr["a"])(Jh,"targetaccount",[]),Object(Gr["a"])(Jh,"resultid",""),Object(Gr["a"])(Jh,"targetadddetail",[]),Object(Gr["a"])(Jh,"liketarget",[]),Object(Gr["a"])(Jh,"targetcampaigns",[]),Object(Gr["a"])(Jh,"ifmorecampaigns",!0),Object(Gr["a"])(Jh,"targetapplist",[]),Object(Gr["a"])(Jh,"ifsame",!1),Object(Gr["a"])(Jh,"targetplanlist",[]),Object(Gr["a"])(Jh,"treegradelist",[]),Object(Gr["a"])(Jh,"treegradefilter",""),Object(Gr["a"])(Jh,"treegradeall",{}),Object(Gr["a"])(Jh,"targetlog",[]),Object(Gr["a"])(Jh,"filterarr",[]),Object(Gr["a"])(Jh,"targetcampaignaccount",[]),Object(Gr["a"])(Jh,"deleteusing",[]),Object(Gr["a"])(Jh,"deletesharing",[]),Object(Gr["a"])(Jh,"rg_ruleStatus",""),Object(Gr["a"])(Jh,"rg_keyword",""),Object(Gr["a"])(Jh,"rg_pageNo",1),Object(Gr["a"])(Jh,"rg_pageSize",20),Object(Gr["a"])(Jh,"newrulelist",[]),Object(Gr["a"])(Jh,"newruletotal",0),Object(Gr["a"])(Jh,"ruleoption",{fbAccountIds:"",pageIndex:1,pageSize:20,level:"",projectId:"",name:""}),Object(Gr["a"])(Jh,"regularlist",[]),Object(Gr["a"])(Jh,"regulartotal",0),Object(Gr["a"])(Jh,"allrules",[]),Object(Gr["a"])(Jh,"ruleform",[]),Object(Gr["a"])(Jh,"messagelist",[]),Object(Gr["a"])(Jh,"messagetotal",0),Object(Gr["a"])(Jh,"msgpageindex",1),Object(Gr["a"])(Jh,"msgpagesize",20),Object(Gr["a"])(Jh,"messagecount",0),Object(Gr["a"])(Jh,"tempsize",[]),Object(Gr["a"])(Jh,"temptrade",[]),Object(Gr["a"])(Jh,"templatelist",[]),Object(Gr["a"])(Jh,"templatetotal",0),Object(Gr["a"])(Jh,"tempdetail",null),Object(Gr["a"])(Jh,"tempimages",[]),Object(Gr["a"])(Jh,"tempimagestotal",0),Jh)),a_=a("6ac1"),s_=a("9d24"),i_={todayinstall:function(t){return t.todayInstallsNum?t.todayInstallsNum:0},todayexpend:function(t){return t.todaySpend?t.todaySpend:0},applist:function(t){var e=[];return t.reportAppDataList?(t.reportAppDataList.forEach(function(t){var a={};a.name=t.appName,a.id=t.fbAppId,e.push(a)}),e):[]},appdatalist:function(t){var e=[];return t.reportAppDataList?(t.reportAppDataList.forEach(function(t){var a={app:t.appName,cd:t.reachNum,zs:t.showNum,dj:t.clicksNum,ctr:t.ctr,cvr:t.cvr,cpm:t.cpm,cpc:t.cpc,xgd:t.relevanceScore,az:t.installsNum,hf:t.spend,cpi:t.cpi,fbAppId:t.fbAppId,afInstallsNum:t.afInstallsNum,gap:t.gap<0?(100*t.gap).toFixed(2):"+"+(100*t.gap).toFixed(2)};e.push(a)}),e=e.filter(function(e){return!t.appdataappid||e.fbAppId==t.appdataappid}),e):[]},onlyapplist:function(t){if(t.appdata)return t.appdata.forEach(function(t){t.insightDateFormat=s_["a"].timeFormat(t.insightDate,"yyyy-MM-dd")}),t.appdata},countryfilter:function(t){if(t.countryfilter){var e=[];return t.countryfilter.forEach(function(t){var a={text:"".concat(t),value:"country_".concat(t)};e.push(a)}),e}},disaccount:function(t){if(""==t.accountkwd.trim()||0==t.disaccount.length)return t.disaccount;var e=t.disaccount.filter(function(e){return-1!=e.fbAccountId.indexOf(t.accountkwd.trim())||-1!=e.name.indexOf(t.accountkwd.trim())});return e},dispage:function(t){if(""==t.pagekwd.trim()||0==t.dispage.length)return t.dispage;var e=t.dispage.filter(function(e){return-1!=e.pageId.indexOf(t.pagekwd.trim())||-1!=e.name.indexOf(t.pagekwd.trim())});return e},disapp:function(t){if(""==t.appkwd.trim()||0==t.applist.length)return t.applist;var e=t.applist.filter(function(e){return-1!=e.applicationId.toLowerCase().indexOf(t.appkwd.trim().toLowerCase())||-1!=e.name.toLowerCase().indexOf(t.appkwd.trim())});return e},dismanage:function(t){return t.managelist},setapplist:function(t){return""===t.setappstatus?t.setapplist:t.setapplist.filter(function(e){return e.status==t.setappstatus})},cansetapplist:function(t){return""===t.setappstatus?t.cansetapplist:t.cansetapplist.filter(function(e){return e.status==t.setappstatus})},rulelist:function(t){var e=t.rulelist;return e.unshift({name:"不限",id:"-1"}),e},allcheckidstatus:function(t){var e=t.createchecked,a=[];return e.forEach(function(e,s){var i={};e&&(i.id=t.createlist[s].id,i.status=t.createlist[s].status,a.push(i))}),a},createclassify:function(t){var e=[];return t.classify.shift(),t.classify.forEach(function(t){var a={};a.value=t,e.push(a)}),e},allactions:function(t){return t.allactions},selectcreatelength:function(t){return t.inusecreate.length},canselectcreatelength:function(t){return t.inusecreate.filter(function(t){return 1!=t.status}).length},createlist:function(t){var e=[];return e=t.createlist.filter(function(e){return e.status==t.createstatus}),e=e.filter(function(e){return e.classify==t.createclassify}),e=e.filter(function(e){return-1!=e.creativityName.indexOf(t.createkeyword)}),e},selectcreate:function(t){var e=[];return e=t.selectcreate.filter(function(e){return e.classify==t.createclassify}),e=e.filter(function(e){return-1!=e.creativityName.indexOf(t.createkeyword)}),e},selectaccountlength:function(t){return t.inuseaccount.length},canselectaccountlength:function(t){return t.inuseaccount.filter(function(t){return 1!=t.status}).length},badselectaccountlength:function(t){return t.inuseaccount.filter(function(t){return 1!=t.accountStatus}).length},inuseaccount:function(t){var e=t.inuseaccount;return t.accountstatus&&(e=e.filter(function(e){return e.status==t.accountstatus})),e=e.filter(function(e){return-1!=e.fbAccountId.indexOf(t.accountkeyword)||-1!=e.name.indexOf(t.accountkeyword)}),e},nouseaccount:function(t){var e=t.nouseaccount.filter(function(e){return-1!=e.fbAccountId.indexOf(t.accountkeyword)||-1!=e.name.indexOf(t.accountkeyword)});return e},detailadsuccess:function(t){var e=0;return t.logdetail.forEach(function(t){e+=t.adDetail.createSuccess}),e},detailsetsuccess:function(t){var e=0;return t.logdetail.forEach(function(t){e+=t.adsetDetail.createSuccess}),e},detailcampaignsuccess:function(t){var e=0;return t.logdetail.forEach(function(t){e+=t.campaignDetail.createSuccess}),e},cpiCountry:function(t){if(0!=t.cpicountry.length){var e=[];return t.cpicountry.forEach(function(t){var a={text:t,value:"country_".concat(t)};e.push(a)}),e}},cpiImpression:function(t){if(0!=t.cpiimpression.length){var e=[];return t.cpiimpression.forEach(function(t){var a={text:t,value:t};e.push(a)}),e}},ruleappforCreate:function(t){if(0!=t.ruleapp.length)return t.ruleapp.slice(1)},createcheckstatus:function(t){return!(t.createchecked.filter(function(t){return!t}).length>0)},daycpilist:function(t){return t.daycpilist},members:function(t){return t.createoption.member},accounts:function(t){return t.createoption.account}},n_=a("d5a0"),o_=a("0e44");v["default"].use(M["a"]);var r_=new M["a"].Store({state:e_,getters:i_,mutations:n_["a"],actions:a_["a"],plugins:[Object(o_["a"])({storage:window.localStorage,reducer:function(t){var e={};return Zh()(t_).forEach(function(a){e[a]=t[a]}),e}})]}),c_=(a("0fae"),a("386d"),a("b311")),l_=a.n(c_),u_={install:function(t,e){t.prototype.$exportHTML=function(t,e,a,s){var i={xls:"application/vnd.ms-excel",csv:"text/csv"},n=a||document.getElementById(t).outerHTML,o=e||"数据",r=s||"xls",c='<html><head><meta charset="UTF-8"></head><body>'.concat(n,"</body></html>"),l=new Blob([c],{type:i[r]}),u=document.createElement("a");u.href=URL.createObjectURL(l),u.download="".concat(o,".").concat(r),u.click()},t.prototype.$timeFormat=function(t,e){if(!t)return"";var a=new Date;a.setTime(t);var s=a.getFullYear(),i=e||"yyyy-MM-dd HH:mm:ss",n={M:a.getMonth()+1,d:a.getDate(),H:a.getHours(),m:a.getMinutes(),s:a.getSeconds()};for(var o in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,s)),n)new RegExp("("+o+"+)").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substring((""+n[o]).length)));return i},t.prototype.$equalArray=function(t){var e=t.map(function(t){return t.length});if(Object(Vd["a"])(new Fd.a(e)).length>1)return!1;var a=t.map(function(t){return Object(Vd["a"])(new Fd.a(t))}),s=a.map(function(t){return t.length});if(Object(Vd["a"])(new Fd.a(s)).length>1)return!1;var i=[];return a.forEach(function(t){i=i.concat(t)}),Object(Vd["a"])(new Fd.a(i)).length==Object(Vd["a"])(new Fd.a(s))[0]},t.prototype.$textCopy=function(t){var e=new l_.a(t);e.on("success",function(t){t.clearSelection(),Object(H["f"])("已复制到粘贴板")}),e.on("error",function(t){console.log(t)})},t.prototype.$barrageTime=function(t){return new Le.a(function(e){setTimeout(function(){e("wait")},t)})},t.prototype.$fileDownload=function(t){function e(t,e){var a=document.createElement("a"),s=new Blob([e]),i=document.createEvent("HTMLEvents");i.initEvent("click",!1,!1),a.download=t,a.href=URL.createObjectURL(s),a.click()}return new Le.a(function(a,s){var i=t.indexOf("?"),n=t.substring(0,-1==i?t.length:i),o=n.lastIndexOf("/"),r=n.substring(o+1),c=new XMLHttpRequest;c.open("GET",t,!0),c.responseType="arraybuffer",c.onload=function(t){var s=c.response;s&&(e(r,s),setTimeout(function(){a("download")},2e3))},c.send()})},t.prototype.$getSearch=function(t,e){var a=e?e.match(/(?:\?)[^\#]*/g)[0].substr(1):location.search.substr(1);if(!a)return null;var s=new URLSearchParams(a);return s.get(t)}}},d_=a("ec09"),m_=a.n(d_),p_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:t.iconClass,attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":t.iconName}})])},f_=[],h_={props:{svgclass:{type:String,default:""},svgname:{type:String,required:!0}},computed:{iconName:function(){return"#icon-".concat(this.svgname)},iconClass:function(){return this.svgclass?"svg-icon ".concat(this.svgclass):"svg-icon"}}},__=h_,v_=(a("1c50"),Object(E["a"])(__,p_,f_,!1,null,"f9f3ebbe",null)),g_=v_.exports;v["default"].component("svg-icon",g_);var b_=function(t){return t.keys().map(t)},y_=a("d1cf");b_(y_),v["default"].use(On.a),v["default"].use(u_),v["default"].use(m_.a),Yh.beforeEach(function(t,e,a){t.meta.title&&(document.title=t.meta.title),a()}),v["default"].filter("numberFormat",function(t){var e=t.toString().split(".")[0],a=t.toString().split(".")[1],s=e.split("").reverse(),i=3,n=0;while(i<e.length)s.splice(i+n,0,","),n++,i+=3;return s.reverse(),a?s.join("")+"."+a:s.join("")}),v["default"].filter("timeFormat",function(t,e){if(!t)return"";var a=new Date;a.setTime(t);var s=a.getFullYear(),i=e||"yyyy-MM-dd",n={M:a.getMonth()+1,d:a.getDate(),H:a.getHours(),m:a.getMinutes(),s:a.getSeconds()};for(var o in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,s)),n)new RegExp("("+o+"+)").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substring((""+n[o]).length)));return i}),v["default"].directive("clickOutside",{bind:function(t,e,a){function s(t){e.expression&&e.value(t)}t.__vueClickOutside__=s,document.addEventListener("click",s)},update:function(){},unbind:function(t,e){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}}),v["default"].directive("loadMore",{bind:function(t,e){var a=t.querySelector(".el-scrollbar__wrap");a.addEventListener("scroll",function(){var t=30,a=this.scrollHeight-this.scrollTop-this.clientHeight;a<=t&&e.value()})}}),new v["default"]({el:"#app",router:Yh,store:r_,template:"<App/>",components:{App:O}})},de42:function(t,e,a){"use strict";var s=a("71ae"),i=a.n(s);i.a},e172:function(t,e,a){"use strict";var s=a("e978"),i=a.n(s);i.a},e2c2:function(t,e,a){"use strict";a.r(e);var s=a("e017"),i=a.n(s),n=a("21a1"),o=a.n(n),r=new i.a({id:"icon-save",use:"icon-save-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-save"><defs><style type="text/css"></style></defs><path d="M968.772267 508.791467 757.111467 297.0624 757.111467 455.611733 680.0384 455.611733 671.061333 455.611733 368.503467 455.611733 368.503467 562.005333 671.061333 562.005333 680.0384 562.005333 757.111467 562.005333 757.111467 720.452267Z" p-id="2187" /><path d="M578.389333 781.585067c0 13.175467-10.717867 23.927467-23.927467 23.927467L126.976 805.512533c-13.2096 0-23.927467-10.752-23.927467-23.927467L103.048533 242.414933c0-13.175467 10.717867-23.927467 23.927467-23.927467l427.485867 0c13.2096 0 23.927467 10.752 23.927467 23.927467l0 99.191467 47.8208 0L626.210133 242.414933C626.210133 202.8544 594.0224 170.666667 554.461867 170.666667L126.976 170.666667C87.415467 170.666667 55.227733 202.8544 55.227733 242.414933l0 539.170133C55.227733 821.1456 87.415467 853.333333 126.976 853.333333l427.485867 0c39.560533 0 71.748267-32.187733 71.748267-71.748267l0-99.191467-47.8208 0L578.389333 781.585067z" p-id="2188" /></symbol>'});o.a.add(r);e["default"]=r},e50c:function(t,e,a){"use strict";var s=a("ea1c"),i=a.n(s);i.a},e64c:function(t,e,a){},e69e:function(t,e,a){},e79c:function(t,e,a){},e802:function(t,e,a){"use strict";var s=a("0f33"),i=a.n(s);i.a},e811:function(t,e,a){"use strict";a.r(e);var s=a("e017"),i=a.n(s),n=a("21a1"),o=a.n(n),r=new i.a({id:"icon-wrong",use:"icon-wrong-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-wrong"><defs><style type="text/css"></style></defs><path d="M510.567403 957.179574C263.853702 957.179574 63.904067 757.229939 63.904067 510.516239S263.853702 63.852903 510.567403 63.852903c246.7137 0 446.663336 199.949635 446.663336 446.663336S757.281103 957.179574 510.567403 957.179574L510.567403 957.179574zM715.4288 380.252223c8.390926-8.390926 8.390926-22.0006 0-30.391526l-45.638453-45.638453c-8.390926-8.390926-22.0006-8.390926-30.391526 0L510.158089 433.462976 380.917358 304.222244c-8.390926-8.390926-22.0006-8.390926-30.391526 0l-45.638453 45.638453c-8.390926 8.390926-8.390926 22.0006 0 30.391526l129.240731 129.240731L304.887379 638.733686c-8.390926 8.390926-8.390926 22.0006 0 30.391526l45.638453 45.638453c8.390926 8.390926 22.0006 8.390926 30.391526 0l129.240731-129.240731 129.240731 129.240731c8.390926 8.390926 22.0006 8.390926 30.391526 0l45.638453-45.638453c8.390926-8.390926 8.390926-22.0006 0-30.391526L586.188068 509.492955 715.4288 380.252223 715.4288 380.252223z" p-id="14569" /></symbol>'});o.a.add(r);e["default"]=r},e8c2:function(t,e,a){"use strict";var s=a("124c"),i=a.n(s);i.a},e978:function(t,e,a){},e9c3:function(t,e,a){},e9e7:function(t,e,a){},ea1c:function(t,e,a){},ea8f:function(t,e,a){"use strict";a.r(e);var s=a("e017"),i=a.n(s),n=a("21a1"),o=a.n(n),r=new i.a({id:"icon-user",use:"icon-user-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-user"><defs><style type="text/css"></style></defs><path d="M513.457231 41.353846c-133.377969 2.837662-244.999877 49.189415-332.973292 137.160862C92.512492 266.488123 46.160738 378.110031 43.323077 511.488c2.837662 133.377969 49.189415 244.054646 137.160862 332.026092C268.457354 931.487508 380.079262 977.839262 513.457231 980.676923c133.377969-2.837662 244.054646-49.189415 332.026092-137.160862S979.808492 644.867938 982.646154 511.488c-2.837662-133.377969-49.189415-244.054646-137.160862-332.026092C757.511877 90.543262 646.837169 44.191508 513.457231 41.353846L513.457231 41.353846zM811.431385 799.056738c-23.650462-11.352615-49.189415-23.648492-74.730338-26.486154-67.160615-5.675323-108.782277-16.080738-124.863015-32.161477-15.137477-16.082708-21.758031-38.784-18.9184-68.109785 0.945231-17.9712 5.675323-28.376615 16.080738-33.108677 10.405415-4.728123 21.756062-31.216246 33.108677-78.513231 3.784862-14.188308 7.567754-25.540923 12.297846-34.053908 4.728123-8.512985 12.295877-26.486154 21.756062-55.809969 4.730092-20.810831 4.730092-33.108677-0.945231-35.944369-5.675323-2.837662-9.460185-3.784862-10.403446-2.837662L669.538462 411.218708c2.837662-13.243077 4.728123-29.323815 6.620554-47.296985 5.677292-47.296985-3.782892-87.973415-28.378585-122.027323-24.593723-34.999138-69.998277-52.972308-137.160862-54.864738-59.594831 0.945231-90.811077 24.595692-125.810215 53.919508-38.784 30.271015-52.027077 70.945477-41.621662 122.972554 7.567754 38.784 18.9184 70.945477 11.350646 68.107815-0.945231-0.945231-4.728123 0-9.458215 2.837662-4.730092 2.837662-5.675323 15.135508-1.892431 35.944369 10.405415 25.540923 17.973169 43.514092 23.648492 52.974277 5.675323 9.458215 9.458215 21.756062 12.297846 36.8896 9.460185 46.351754 18.9184 71.892677 29.323815 76.6208 10.405415 4.730092 17.025969 17.027938 20.810831 34.999138 4.730092 29.325785-0.945231 52.027077-17.973169 68.109785-17.025969 16.080738-57.7024 26.486154-122.027323 32.161477-23.648492 2.837662-52.027077 14.188308-74.728369 25.540923-72.837908-75.675569-115.4048-175.946831-116.352-286.621538 2.837662-117.297231 43.514092-214.728862 122.027323-293.244062s175.946831-119.187692 293.244062-122.027323c117.295262 2.837662 214.728862 43.514092 292.296862 122.027323 78.513231 78.513231 119.189662 175.946831 122.027323 293.244062C926.834215 624.055138 884.267323 724.324431 811.431385 799.056738z" p-id="1053" /></symbol>'});o.a.add(r);e["default"]=r},eac2:function(t,e,a){"use strict";var s=a("0e39"),i=a.n(s);i.a},eb4f:function(t,e,a){},ebb2:function(t,e,a){"use strict";var s=a("f4a7"),i=a.n(s);i.a},ed7a:function(t,e,a){},efe8:function(t,e,a){},efec:function(t,e,a){"use strict";var s=a("6f70"),i=a.n(s);i.a},f053:function(t,e,a){},f0a1:function(t,e,a){},f178:function(t,e,a){},f3f5:function(t,e,a){"use strict";var s=a("daba"),i=a.n(s);i.a},f4a7:function(t,e,a){},f52f:function(t,e,a){"use strict";var s=a("9ea3"),i=a.n(s);i.a},f539:function(t,e,a){"use strict";var s=a("4271"),i=a.n(s);i.a},f5fa:function(t,e,a){},f8eb:function(t,e,a){},faf5:function(t,e,a){},fc58:function(t,e,a){"use strict";var s=a("a28d"),i=a.n(s);i.a},fe4d:function(t,e,a){"use strict";var s=a("b6f0"),i=a.n(s);i.a},ff5e:function(t,e,a){}});